(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var I4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var z4={exports:{}},d0={},C4={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul=Symbol.for("react.element"),y8=Symbol.for("react.portal"),v8=Symbol.for("react.fragment"),b8=Symbol.for("react.strict_mode"),x8=Symbol.for("react.profiler"),w8=Symbol.for("react.provider"),N8=Symbol.for("react.context"),k8=Symbol.for("react.forward_ref"),S8=Symbol.for("react.suspense"),_8=Symbol.for("react.memo"),T8=Symbol.for("react.lazy"),rg=Symbol.iterator;function M8(e){return e===null||typeof e!="object"?null:(e=rg&&e[rg]||e["@@iterator"],typeof e=="function"?e:null)}var $4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D4=Object.assign,P4={};function wa(e,t,r){this.props=e,this.context=t,this.refs=P4,this.updater=r||$4}wa.prototype.isReactComponent={};wa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function O4(){}O4.prototype=wa.prototype;function op(e,t,r){this.props=e,this.context=t,this.refs=P4,this.updater=r||$4}var up=op.prototype=new O4;up.constructor=op;D4(up,wa.prototype);up.isPureReactComponent=!0;var ig=Array.isArray,q4=Object.prototype.hasOwnProperty,cp={current:null},L4={key:!0,ref:!0,__self:!0,__source:!0};function R4(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)q4.call(t,i)&&!L4.hasOwnProperty(i)&&(n[i]=t[i]);var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){for(var f=Array(u),p=0;p<u;p++)f[p]=arguments[p+2];n.children=f}if(e&&e.defaultProps)for(i in u=e.defaultProps,u)n[i]===void 0&&(n[i]=u[i]);return{$$typeof:Ul,type:e,key:s,ref:a,props:n,_owner:cp.current}}function E8(e,t){return{$$typeof:Ul,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ul}function A8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ng=/\/+/g;function Ec(e,t){return typeof e=="object"&&e!==null&&e.key!=null?A8(""+e.key):t.toString(36)}function Ko(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ul:case y8:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+Ec(a,0):i,ig(n)?(r="",e!=null&&(r=e.replace(ng,"$&/")+"/"),Ko(n,t,r,"",function(p){return p})):n!=null&&(fp(n)&&(n=E8(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(ng,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",ig(e))for(var u=0;u<e.length;u++){s=e[u];var f=i+Ec(s,u);a+=Ko(s,t,r,f,n)}else if(f=M8(e),typeof f=="function")for(e=f.call(e),u=0;!(s=e.next()).done;)s=s.value,f=i+Ec(s,u++),a+=Ko(s,t,r,f,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function No(e,t,r){if(e==null)return e;var i=[],n=0;return Ko(e,i,"","",function(s){return t.call(r,s,n++)}),i}function I8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var or={current:null},Jo={transition:null},z8={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:Jo,ReactCurrentOwner:cp};function F4(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:No,forEach:function(e,t,r){No(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return No(e,function(){t++}),t},toArray:function(e){return No(e,function(t){return t})||[]},only:function(e){if(!fp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=wa;_e.Fragment=v8;_e.Profiler=x8;_e.PureComponent=op;_e.StrictMode=b8;_e.Suspense=S8;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z8;_e.act=F4;_e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=D4({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=cp.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)q4.call(t,f)&&!L4.hasOwnProperty(f)&&(i[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)i.children=r;else if(1<f){u=Array(f);for(var p=0;p<f;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:Ul,type:e.type,key:n,ref:s,props:i,_owner:a}};_e.createContext=function(e){return e={$$typeof:N8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:w8,_context:e},e.Consumer=e};_e.createElement=R4;_e.createFactory=function(e){var t=R4.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:k8,render:e}};_e.isValidElement=fp;_e.lazy=function(e){return{$$typeof:T8,_payload:{_status:-1,_result:e},_init:I8}};_e.memo=function(e,t){return{$$typeof:_8,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=Jo.transition;Jo.transition={};try{e()}finally{Jo.transition=t}};_e.unstable_act=F4;_e.useCallback=function(e,t){return or.current.useCallback(e,t)};_e.useContext=function(e){return or.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return or.current.useDeferredValue(e)};_e.useEffect=function(e,t){return or.current.useEffect(e,t)};_e.useId=function(){return or.current.useId()};_e.useImperativeHandle=function(e,t,r){return or.current.useImperativeHandle(e,t,r)};_e.useInsertionEffect=function(e,t){return or.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return or.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return or.current.useMemo(e,t)};_e.useReducer=function(e,t,r){return or.current.useReducer(e,t,r)};_e.useRef=function(e){return or.current.useRef(e)};_e.useState=function(e){return or.current.useState(e)};_e.useSyncExternalStore=function(e,t,r){return or.current.useSyncExternalStore(e,t,r)};_e.useTransition=function(){return or.current.useTransition()};_e.version="18.3.1";C4.exports=_e;var Ir=C4.exports;const C8=g8(Ir);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $8=Ir,D8=Symbol.for("react.element"),P8=Symbol.for("react.fragment"),O8=Object.prototype.hasOwnProperty,q8=$8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L8={key:!0,ref:!0,__self:!0,__source:!0};function B4(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)O8.call(t,i)&&!L8.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:D8,type:e,key:s,ref:a,props:n,_owner:q8.current}}d0.Fragment=P8;d0.jsx=B4;d0.jsxs=B4;z4.exports=d0;var ue=z4.exports,Ef={},V4={exports:{}},Pr={},j4={exports:{}},H4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(le,ve){var K=le.length;le.push(ve);e:for(;0<K;){var We=K-1>>>1,kt=le[We];if(0<n(kt,ve))le[We]=ve,le[K]=kt,K=We;else break e}}function r(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var ve=le[0],K=le.pop();if(K!==ve){le[0]=K;e:for(var We=0,kt=le.length,$i=kt>>>1;We<$i;){var pi=2*(We+1)-1,mi=le[pi],Di=pi+1,Ts=le[Di];if(0>n(mi,K))Di<kt&&0>n(Ts,mi)?(le[We]=Ts,le[Di]=K,We=Di):(le[We]=mi,le[pi]=K,We=pi);else if(Di<kt&&0>n(Ts,K))le[We]=Ts,le[Di]=K,We=Di;else break e}}return ve}function n(le,ve){var K=le.sortIndex-ve.sortIndex;return K!==0?K:le.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var f=[],p=[],d=1,b=null,x=3,I=!1,L=!1,O=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(le){for(var ve=r(p);ve!==null;){if(ve.callback===null)i(p);else if(ve.startTime<=le)i(p),ve.sortIndex=ve.expirationTime,t(f,ve);else break;ve=r(p)}}function q(le){if(O=!1,T(le),!L)if(r(f)!==null)L=!0,$e(W);else{var ve=r(p);ve!==null&&Sa(q,ve.startTime-le)}}function W(le,ve){L=!1,O&&(O=!1,A(ne),ne=-1),I=!0;var K=x;try{for(T(ve),b=r(f);b!==null&&(!(b.expirationTime>ve)||le&&!Pe());){var We=b.callback;if(typeof We=="function"){b.callback=null,x=b.priorityLevel;var kt=We(b.expirationTime<=ve);ve=e.unstable_now(),typeof kt=="function"?b.callback=kt:b===r(f)&&i(f),T(ve)}else i(f);b=r(f)}if(b!==null)var $i=!0;else{var pi=r(p);pi!==null&&Sa(q,pi.startTime-ve),$i=!1}return $i}finally{b=null,x=K,I=!1}}var J=!1,te=null,ne=-1,ke=5,he=-1;function Pe(){return!(e.unstable_now()-he<ke)}function He(){if(te!==null){var le=e.unstable_now();he=le;var ve=!0;try{ve=te(!0,le)}finally{ve?gt():(J=!1,te=null)}}else J=!1}var gt;if(typeof M=="function")gt=function(){M(He)};else if(typeof MessageChannel<"u"){var pn=new MessageChannel,Nt=pn.port2;pn.port1.onmessage=He,gt=function(){Nt.postMessage(null)}}else gt=function(){R(He,0)};function $e(le){te=le,J||(J=!0,gt())}function Sa(le,ve){ne=R(function(){le(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(le){le.callback=null},e.unstable_continueExecution=function(){L||I||(L=!0,$e(W))},e.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<le?Math.floor(1e3/le):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(le){switch(x){case 1:case 2:case 3:var ve=3;break;default:ve=x}var K=x;x=ve;try{return le()}finally{x=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(le,ve){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var K=x;x=le;try{return ve()}finally{x=K}},e.unstable_scheduleCallback=function(le,ve,K){var We=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?We+K:We):K=We,le){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=K+kt,le={id:d++,callback:ve,priorityLevel:le,startTime:K,expirationTime:kt,sortIndex:-1},K>We?(le.sortIndex=K,t(p,le),r(f)===null&&le===r(p)&&(O?(A(ne),ne=-1):O=!0,Sa(q,K-We))):(le.sortIndex=kt,t(f,le),L||I||(L=!0,$e(W))),le},e.unstable_shouldYield=Pe,e.unstable_wrapCallback=function(le){var ve=x;return function(){var K=x;x=ve;try{return le.apply(this,arguments)}finally{x=K}}}})(H4);j4.exports=H4;var R8=j4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F8=Ir,Dr=R8;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U4=new Set,gl={};function ks(e,t){ua(e,t),ua(e+"Capture",t)}function ua(e,t){for(gl[e]=t,e=0;e<t.length;e++)U4.add(t[e])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,B8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sg={},ag={};function V8(e){return Af.call(ag,e)?!0:Af.call(sg,e)?!1:B8.test(e)?ag[e]=!0:(sg[e]=!0,!1)}function j8(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function H8(e,t,r,i){if(t===null||typeof t>"u"||j8(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ur(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ut[e]=new ur(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ut[t]=new ur(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ut[e]=new ur(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ut[e]=new ur(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ut[e]=new ur(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ut[e]=new ur(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ut[e]=new ur(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ut[e]=new ur(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ut[e]=new ur(e,5,!1,e.toLowerCase(),null,!1,!1)});var hp=/[\-:]([a-z])/g;function pp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hp,pp);Ut[t]=new ur(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hp,pp);Ut[t]=new ur(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hp,pp);Ut[t]=new ur(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ut[e]=new ur(e,1,!1,e.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ut[e]=new ur(e,1,!1,e.toLowerCase(),null,!0,!0)});function mp(e,t,r,i){var n=Ut.hasOwnProperty(t)?Ut[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(H8(t,r,n,i)&&(r=null),i||n===null?V8(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var hn=F8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ko=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),dp=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),G4=Symbol.for("react.provider"),W4=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Cf=Symbol.for("react.suspense_list"),yp=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),Z4=Symbol.for("react.offscreen"),lg=Symbol.iterator;function za(e){return e===null||typeof e!="object"?null:(e=lg&&e[lg]||e["@@iterator"],typeof e=="function"?e:null)}var ht=Object.assign,Ac;function Ya(e){if(Ac===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ac=t&&t[1]||""}return`
`+Ac+e}var Ic=!1;function zc(e,t){if(!e||Ic)return"";Ic=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var i=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){i=p}e.call(t.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var n=p.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,u=s.length-1;1<=a&&0<=u&&n[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(n[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||n[a]!==s[u]){var f=`
`+n[a].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=a&&0<=u);break}}}finally{Ic=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ya(e):""}function U8(e){switch(e.tag){case 5:return Ya(e.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 2:case 15:return e=zc(e.type,!1),e;case 11:return e=zc(e.type.render,!1),e;case 1:return e=zc(e.type,!0),e;default:return""}}function $f(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fs:return"Fragment";case Rs:return"Portal";case If:return"Profiler";case dp:return"StrictMode";case zf:return"Suspense";case Cf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W4:return(e.displayName||"Context")+".Consumer";case G4:return(e._context.displayName||"Context")+".Provider";case gp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yp:return t=e.displayName||null,t!==null?t:$f(e.type)||"Memo";case kn:t=e._payload,e=e._init;try{return $f(e(t))}catch{}}return null}function G8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $f(t);case 8:return t===dp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function W8(e){var t=Q4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){e._valueTracker||(e._valueTracker=W8(e))}function Y4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Q4(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Df(e,t){var r=t.checked;return ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function og(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Gn(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X4(e,t){t=t.checked,t!=null&&mp(e,"checked",t,!1)}function Pf(e,t){X4(e,t);var r=Gn(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Of(e,t.type,r):t.hasOwnProperty("defaultValue")&&Of(e,t.type,Gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ug(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Of(e,t,r){(t!=="number"||wu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xa=Array.isArray;function ea(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Gn(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function qf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ht({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(Xa(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gn(r)}}function K4(e,t){var r=Gn(t.value),i=Gn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function fg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function J4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?J4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _o,e3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_o.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z8=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(e){Z8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nl[t]=nl[e]})});function t3(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||nl.hasOwnProperty(e)&&nl[e]?(""+t).trim():t+"px"}function r3(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=t3(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var Q8=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rf(e,t){if(t){if(Q8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Ff(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bf=null;function vp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vf=null,ta=null,ra=null;function hg(e){if(e=Zl(e)){if(typeof Vf!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=x0(t),Vf(e.stateNode,e.type,t))}}function i3(e){ta?ra?ra.push(e):ra=[e]:ta=e}function n3(){if(ta){var e=ta,t=ra;if(ra=ta=null,hg(e),t)for(e=0;e<t.length;e++)hg(t[e])}}function s3(e,t){return e(t)}function a3(){}var Cc=!1;function l3(e,t,r){if(Cc)return e(t,r);Cc=!0;try{return s3(e,t,r)}finally{Cc=!1,(ta!==null||ra!==null)&&(a3(),n3())}}function vl(e,t){var r=e.stateNode;if(r===null)return null;var i=x0(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var jf=!1;if(ln)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){jf=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{jf=!1}function Y8(e,t,r,i,n,s,a,u,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(d){this.onError(d)}}var sl=!1,Nu=null,ku=!1,Hf=null,X8={onError:function(e){sl=!0,Nu=e}};function K8(e,t,r,i,n,s,a,u,f){sl=!1,Nu=null,Y8.apply(X8,arguments)}function J8(e,t,r,i,n,s,a,u,f){if(K8.apply(this,arguments),sl){if(sl){var p=Nu;sl=!1,Nu=null}else throw Error(Y(198));ku||(ku=!0,Hf=p)}}function Ss(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function o3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pg(e){if(Ss(e)!==e)throw Error(Y(188))}function ev(e){var t=e.alternate;if(!t){if(t=Ss(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return pg(n),e;if(s===i)return pg(n),t;s=s.sibling}throw Error(Y(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,u=n.child;u;){if(u===r){a=!0,r=n,i=s;break}if(u===i){a=!0,i=n,r=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===r){a=!0,r=s,i=n;break}if(u===i){a=!0,i=s,r=n;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(r.alternate!==i)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function u3(e){return e=ev(e),e!==null?c3(e):null}function c3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c3(e);if(t!==null)return t;e=e.sibling}return null}var f3=Dr.unstable_scheduleCallback,mg=Dr.unstable_cancelCallback,tv=Dr.unstable_shouldYield,rv=Dr.unstable_requestPaint,wt=Dr.unstable_now,iv=Dr.unstable_getCurrentPriorityLevel,bp=Dr.unstable_ImmediatePriority,h3=Dr.unstable_UserBlockingPriority,Su=Dr.unstable_NormalPriority,nv=Dr.unstable_LowPriority,p3=Dr.unstable_IdlePriority,g0=null,Ei=null;function sv(e){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(g0,e,void 0,(e.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:ov,av=Math.log,lv=Math.LN2;function ov(e){return e>>>=0,e===0?32:31-(av(e)/lv|0)|0}var To=64,Mo=4194304;function Ka(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _u(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var u=a&~n;u!==0?i=Ka(u):(s&=a,s!==0&&(i=Ka(s)))}else a=r&~n,a!==0?i=Ka(a):s!==0&&(i=Ka(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-ui(t),n=1<<r,i|=e[r],t&=~n;return i}function uv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cv(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ui(s),u=1<<a,f=n[a];f===-1?(!(u&r)||u&i)&&(n[a]=uv(u,t)):f<=t&&(e.expiredLanes|=u),s&=~u}}function Uf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function m3(){var e=To;return To<<=1,!(To&4194240)&&(To=64),e}function $c(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Gl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ui(t),e[t]=r}function fv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-ui(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function xp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-ui(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var Le=0;function d3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var g3,wp,y3,v3,b3,Gf=!1,Eo=[],$n=null,Dn=null,Pn=null,bl=new Map,xl=new Map,Tn=[],hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dg(e,t){switch(e){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(t.pointerId)}}function $a(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=Zl(t),t!==null&&wp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function pv(e,t,r,i,n){switch(t){case"focusin":return $n=$a($n,e,t,r,i,n),!0;case"dragenter":return Dn=$a(Dn,e,t,r,i,n),!0;case"mouseover":return Pn=$a(Pn,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return bl.set(s,$a(bl.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,xl.set(s,$a(xl.get(s)||null,e,t,r,i,n)),!0}return!1}function x3(e){var t=ls(e.target);if(t!==null){var r=Ss(t);if(r!==null){if(t=r.tag,t===13){if(t=o3(r),t!==null){e.blockedOn=t,b3(e.priority,function(){y3(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Bf=i,r.target.dispatchEvent(i),Bf=null}else return t=Zl(r),t!==null&&wp(t),e.blockedOn=r,!1;t.shift()}return!0}function gg(e,t,r){eu(e)&&r.delete(t)}function mv(){Gf=!1,$n!==null&&eu($n)&&($n=null),Dn!==null&&eu(Dn)&&(Dn=null),Pn!==null&&eu(Pn)&&(Pn=null),bl.forEach(gg),xl.forEach(gg)}function Da(e,t){e.blockedOn===t&&(e.blockedOn=null,Gf||(Gf=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,mv)))}function wl(e){function t(n){return Da(n,e)}if(0<Eo.length){Da(Eo[0],e);for(var r=1;r<Eo.length;r++){var i=Eo[r];i.blockedOn===e&&(i.blockedOn=null)}}for($n!==null&&Da($n,e),Dn!==null&&Da(Dn,e),Pn!==null&&Da(Pn,e),bl.forEach(t),xl.forEach(t),r=0;r<Tn.length;r++)i=Tn[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Tn.length&&(r=Tn[0],r.blockedOn===null);)x3(r),r.blockedOn===null&&Tn.shift()}var ia=hn.ReactCurrentBatchConfig,Tu=!0;function dv(e,t,r,i){var n=Le,s=ia.transition;ia.transition=null;try{Le=1,Np(e,t,r,i)}finally{Le=n,ia.transition=s}}function gv(e,t,r,i){var n=Le,s=ia.transition;ia.transition=null;try{Le=4,Np(e,t,r,i)}finally{Le=n,ia.transition=s}}function Np(e,t,r,i){if(Tu){var n=Wf(e,t,r,i);if(n===null)jc(e,t,i,Mu,r),dg(e,i);else if(pv(n,e,t,r,i))i.stopPropagation();else if(dg(e,i),t&4&&-1<hv.indexOf(e)){for(;n!==null;){var s=Zl(n);if(s!==null&&g3(s),s=Wf(e,t,r,i),s===null&&jc(e,t,i,Mu,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else jc(e,t,i,null,r)}}var Mu=null;function Wf(e,t,r,i){if(Mu=null,e=vp(i),e=ls(e),e!==null)if(t=Ss(e),t===null)e=null;else if(r=t.tag,r===13){if(e=o3(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mu=e,null}function w3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iv()){case bp:return 1;case h3:return 4;case Su:case nv:return 16;case p3:return 536870912;default:return 16}default:return 16}}var An=null,kp=null,tu=null;function N3(){if(tu)return tu;var e,t=kp,r=t.length,i,n="value"in An?An.value:An.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return tu=n.slice(e,1<i?1-i:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ao(){return!0}function yg(){return!1}function Or(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ao:yg,this.isPropagationStopped=yg,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sp=Or(Na),Wl=ht({},Na,{view:0,detail:0}),yv=Or(Wl),Dc,Pc,Pa,y0=ht({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pa&&(Pa&&e.type==="mousemove"?(Dc=e.screenX-Pa.screenX,Pc=e.screenY-Pa.screenY):Pc=Dc=0,Pa=e),Dc)},movementY:function(e){return"movementY"in e?e.movementY:Pc}}),vg=Or(y0),vv=ht({},y0,{dataTransfer:0}),bv=Or(vv),xv=ht({},Wl,{relatedTarget:0}),Oc=Or(xv),wv=ht({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),Nv=Or(wv),kv=ht({},Na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sv=Or(kv),_v=ht({},Na,{data:0}),bg=Or(_v),Tv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ev={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Av(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ev[e])?!!t[e]:!1}function _p(){return Av}var Iv=ht({},Wl,{key:function(e){if(e.key){var t=Tv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zv=Or(Iv),Cv=ht({},y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=Or(Cv),$v=ht({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),Dv=Or($v),Pv=ht({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ov=Or(Pv),qv=ht({},y0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lv=Or(qv),Rv=[9,13,27,32],Tp=ln&&"CompositionEvent"in window,al=null;ln&&"documentMode"in document&&(al=document.documentMode);var Fv=ln&&"TextEvent"in window&&!al,k3=ln&&(!Tp||al&&8<al&&11>=al),wg=" ",Ng=!1;function S3(e,t){switch(e){case"keyup":return Rv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function Bv(e,t){switch(e){case"compositionend":return _3(t);case"keypress":return t.which!==32?null:(Ng=!0,wg);case"textInput":return e=t.data,e===wg&&Ng?null:e;default:return null}}function Vv(e,t){if(Bs)return e==="compositionend"||!Tp&&S3(e,t)?(e=N3(),tu=kp=An=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return k3&&t.locale!=="ko"?null:t.data;default:return null}}var jv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jv[e.type]:t==="textarea"}function T3(e,t,r,i){i3(i),t=Eu(t,"onChange"),0<t.length&&(r=new Sp("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ll=null,Nl=null;function Hv(e){q3(e,0)}function v0(e){var t=Hs(e);if(Y4(t))return e}function Uv(e,t){if(e==="change")return t}var M3=!1;if(ln){var qc;if(ln){var Lc="oninput"in document;if(!Lc){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),Lc=typeof Sg.oninput=="function"}qc=Lc}else qc=!1;M3=qc&&(!document.documentMode||9<document.documentMode)}function _g(){ll&&(ll.detachEvent("onpropertychange",E3),Nl=ll=null)}function E3(e){if(e.propertyName==="value"&&v0(Nl)){var t=[];T3(t,Nl,e,vp(e)),l3(Hv,t)}}function Gv(e,t,r){e==="focusin"?(_g(),ll=t,Nl=r,ll.attachEvent("onpropertychange",E3)):e==="focusout"&&_g()}function Wv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return v0(Nl)}function Zv(e,t){if(e==="click")return v0(t)}function Qv(e,t){if(e==="input"||e==="change")return v0(t)}function Yv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hi=typeof Object.is=="function"?Object.is:Yv;function kl(e,t){if(hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!Af.call(t,n)||!hi(e[n],t[n]))return!1}return!0}function Tg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mg(e,t){var r=Tg(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tg(r)}}function A3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?A3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function I3(){for(var e=window,t=wu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=wu(e.document)}return t}function Mp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xv(e){var t=I3(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&A3(r.ownerDocument.documentElement,r)){if(i!==null&&Mp(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=Mg(r,s);var a=Mg(r,i);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kv=ln&&"documentMode"in document&&11>=document.documentMode,Vs=null,Zf=null,ol=null,Qf=!1;function Eg(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qf||Vs==null||Vs!==wu(i)||(i=Vs,"selectionStart"in i&&Mp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ol&&kl(ol,i)||(ol=i,i=Eu(Zf,"onSelect"),0<i.length&&(t=new Sp("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Vs)))}function Io(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var js={animationend:Io("Animation","AnimationEnd"),animationiteration:Io("Animation","AnimationIteration"),animationstart:Io("Animation","AnimationStart"),transitionend:Io("Transition","TransitionEnd")},Rc={},z3={};ln&&(z3=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function b0(e){if(Rc[e])return Rc[e];if(!js[e])return e;var t=js[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in z3)return Rc[e]=t[r];return e}var C3=b0("animationend"),$3=b0("animationiteration"),D3=b0("animationstart"),P3=b0("transitionend"),O3=new Map,Ag="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,t){O3.set(e,t),ks(t,[e])}for(var Fc=0;Fc<Ag.length;Fc++){var Bc=Ag[Fc],Jv=Bc.toLowerCase(),e9=Bc[0].toUpperCase()+Bc.slice(1);Xn(Jv,"on"+e9)}Xn(C3,"onAnimationEnd");Xn($3,"onAnimationIteration");Xn(D3,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(P3,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function Ig(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,J8(i,t,void 0,e),e.currentTarget=null}function q3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var u=i[a],f=u.instance,p=u.currentTarget;if(u=u.listener,f!==s&&n.isPropagationStopped())break e;Ig(n,u,p),s=f}else for(a=0;a<i.length;a++){if(u=i[a],f=u.instance,p=u.currentTarget,u=u.listener,f!==s&&n.isPropagationStopped())break e;Ig(n,u,p),s=f}}}if(ku)throw e=Hf,ku=!1,Hf=null,e}function Qe(e,t){var r=t[eh];r===void 0&&(r=t[eh]=new Set);var i=e+"__bubble";r.has(i)||(L3(t,e,2,!1),r.add(i))}function Vc(e,t,r){var i=0;t&&(i|=4),L3(r,e,i,t)}var zo="_reactListening"+Math.random().toString(36).slice(2);function Sl(e){if(!e[zo]){e[zo]=!0,U4.forEach(function(r){r!=="selectionchange"&&(t9.has(r)||Vc(r,!1,e),Vc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zo]||(t[zo]=!0,Vc("selectionchange",!1,t))}}function L3(e,t,r,i){switch(w3(t)){case 1:var n=dv;break;case 4:n=gv;break;default:n=Np}r=n.bind(null,t,r,e),n=void 0,!jf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function jc(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===n||u.nodeType===8&&u.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var f=a.tag;if((f===3||f===4)&&(f=a.stateNode.containerInfo,f===n||f.nodeType===8&&f.parentNode===n))return;a=a.return}for(;u!==null;){if(a=ls(u),a===null)return;if(f=a.tag,f===5||f===6){i=s=a;continue e}u=u.parentNode}}i=i.return}l3(function(){var p=s,d=vp(r),b=[];e:{var x=O3.get(e);if(x!==void 0){var I=Sp,L=e;switch(e){case"keypress":if(ru(r)===0)break e;case"keydown":case"keyup":I=zv;break;case"focusin":L="focus",I=Oc;break;case"focusout":L="blur",I=Oc;break;case"beforeblur":case"afterblur":I=Oc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=bv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Dv;break;case C3:case $3:case D3:I=Nv;break;case P3:I=Ov;break;case"scroll":I=yv;break;case"wheel":I=Lv;break;case"copy":case"cut":case"paste":I=Sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=xg}var O=(t&4)!==0,R=!O&&e==="scroll",A=O?x!==null?x+"Capture":null:x;O=[];for(var M=p,T;M!==null;){T=M;var q=T.stateNode;if(T.tag===5&&q!==null&&(T=q,A!==null&&(q=vl(M,A),q!=null&&O.push(_l(M,q,T)))),R)break;M=M.return}0<O.length&&(x=new I(x,L,null,r,d),b.push({event:x,listeners:O}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",x&&r!==Bf&&(L=r.relatedTarget||r.fromElement)&&(ls(L)||L[on]))break e;if((I||x)&&(x=d.window===d?d:(x=d.ownerDocument)?x.defaultView||x.parentWindow:window,I?(L=r.relatedTarget||r.toElement,I=p,L=L?ls(L):null,L!==null&&(R=Ss(L),L!==R||L.tag!==5&&L.tag!==6)&&(L=null)):(I=null,L=p),I!==L)){if(O=vg,q="onMouseLeave",A="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(O=xg,q="onPointerLeave",A="onPointerEnter",M="pointer"),R=I==null?x:Hs(I),T=L==null?x:Hs(L),x=new O(q,M+"leave",I,r,d),x.target=R,x.relatedTarget=T,q=null,ls(d)===p&&(O=new O(A,M+"enter",L,r,d),O.target=T,O.relatedTarget=R,q=O),R=q,I&&L)t:{for(O=I,A=L,M=0,T=O;T;T=Is(T))M++;for(T=0,q=A;q;q=Is(q))T++;for(;0<M-T;)O=Is(O),M--;for(;0<T-M;)A=Is(A),T--;for(;M--;){if(O===A||A!==null&&O===A.alternate)break t;O=Is(O),A=Is(A)}O=null}else O=null;I!==null&&zg(b,x,I,O,!1),L!==null&&R!==null&&zg(b,R,L,O,!0)}}e:{if(x=p?Hs(p):window,I=x.nodeName&&x.nodeName.toLowerCase(),I==="select"||I==="input"&&x.type==="file")var W=Uv;else if(kg(x))if(M3)W=Qv;else{W=Wv;var J=Gv}else(I=x.nodeName)&&I.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(W=Zv);if(W&&(W=W(e,p))){T3(b,W,r,d);break e}J&&J(e,x,p),e==="focusout"&&(J=x._wrapperState)&&J.controlled&&x.type==="number"&&Of(x,"number",x.value)}switch(J=p?Hs(p):window,e){case"focusin":(kg(J)||J.contentEditable==="true")&&(Vs=J,Zf=p,ol=null);break;case"focusout":ol=Zf=Vs=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,Eg(b,r,d);break;case"selectionchange":if(Kv)break;case"keydown":case"keyup":Eg(b,r,d)}var te;if(Tp)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else Bs?S3(e,r)&&(ne="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ne="onCompositionStart");ne&&(k3&&r.locale!=="ko"&&(Bs||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&Bs&&(te=N3()):(An=d,kp="value"in An?An.value:An.textContent,Bs=!0)),J=Eu(p,ne),0<J.length&&(ne=new bg(ne,e,null,r,d),b.push({event:ne,listeners:J}),te?ne.data=te:(te=_3(r),te!==null&&(ne.data=te)))),(te=Fv?Bv(e,r):Vv(e,r))&&(p=Eu(p,"onBeforeInput"),0<p.length&&(d=new bg("onBeforeInput","beforeinput",null,r,d),b.push({event:d,listeners:p}),d.data=te))}q3(b,t)})}function _l(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Eu(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=vl(e,r),s!=null&&i.unshift(_l(e,s,n)),s=vl(e,t),s!=null&&i.push(_l(e,s,n))),e=e.return}return i}function Is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zg(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var u=r,f=u.alternate,p=u.stateNode;if(f!==null&&f===i)break;u.tag===5&&p!==null&&(u=p,n?(f=vl(r,s),f!=null&&a.unshift(_l(r,f,u))):n||(f=vl(r,s),f!=null&&a.push(_l(r,f,u)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var r9=/\r\n?/g,i9=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(r9,`
`).replace(i9,"")}function Co(e,t,r){if(t=Cg(t),Cg(e)!==t&&r)throw Error(Y(425))}function Au(){}var Yf=null,Xf=null;function Kf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,n9=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,s9=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(e){return $g.resolve(null).then(e).catch(a9)}:Jf;function a9(e){setTimeout(function(){throw e})}function Hc(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),wl(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);wl(t)}function On(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ka=Math.random().toString(36).slice(2),Ti="__reactFiber$"+ka,Tl="__reactProps$"+ka,on="__reactContainer$"+ka,eh="__reactEvents$"+ka,l9="__reactListeners$"+ka,o9="__reactHandles$"+ka;function ls(e){var t=e[Ti];if(t)return t;for(var r=e.parentNode;r;){if(t=r[on]||r[Ti]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dg(e);e!==null;){if(r=e[Ti])return r;e=Dg(e)}return t}e=r,r=e.parentNode}return null}function Zl(e){return e=e[Ti]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function x0(e){return e[Tl]||null}var th=[],Us=-1;function Kn(e){return{current:e}}function Xe(e){0>Us||(e.current=th[Us],th[Us]=null,Us--)}function Ge(e,t){Us++,th[Us]=e.current,e.current=t}var Wn={},er=Kn(Wn),vr=Kn(!1),vs=Wn;function ca(e,t){var r=e.type.contextTypes;if(!r)return Wn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function br(e){return e=e.childContextTypes,e!=null}function Iu(){Xe(vr),Xe(er)}function Pg(e,t,r){if(er.current!==Wn)throw Error(Y(168));Ge(er,t),Ge(vr,r)}function R3(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Y(108,G8(e)||"Unknown",n));return ht({},r,i)}function zu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,vs=er.current,Ge(er,e),Ge(vr,vr.current),!0}function Og(e,t,r){var i=e.stateNode;if(!i)throw Error(Y(169));r?(e=R3(e,t,vs),i.__reactInternalMemoizedMergedChildContext=e,Xe(vr),Xe(er),Ge(er,e)):Xe(vr),Ge(vr,r)}var Wi=null,w0=!1,Uc=!1;function F3(e){Wi===null?Wi=[e]:Wi.push(e)}function u9(e){w0=!0,F3(e)}function Jn(){if(!Uc&&Wi!==null){Uc=!0;var e=0,t=Le;try{var r=Wi;for(Le=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Wi=null,w0=!1}catch(n){throw Wi!==null&&(Wi=Wi.slice(e+1)),f3(bp,Jn),n}finally{Le=t,Uc=!1}}return null}var Gs=[],Ws=0,Cu=null,$u=0,Gr=[],Wr=0,bs=null,Ki=1,Ji="";function ss(e,t){Gs[Ws++]=$u,Gs[Ws++]=Cu,Cu=e,$u=t}function B3(e,t,r){Gr[Wr++]=Ki,Gr[Wr++]=Ji,Gr[Wr++]=bs,bs=e;var i=Ki;e=Ji;var n=32-ui(i)-1;i&=~(1<<n),r+=1;var s=32-ui(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,Ki=1<<32-ui(t)+n|r<<n|i,Ji=s+e}else Ki=1<<s|r<<n|i,Ji=e}function Ep(e){e.return!==null&&(ss(e,1),B3(e,1,0))}function Ap(e){for(;e===Cu;)Cu=Gs[--Ws],Gs[Ws]=null,$u=Gs[--Ws],Gs[Ws]=null;for(;e===bs;)bs=Gr[--Wr],Gr[Wr]=null,Ji=Gr[--Wr],Gr[Wr]=null,Ki=Gr[--Wr],Gr[Wr]=null}var Cr=null,zr=null,tt=!1,ai=null;function V3(e,t){var r=Qr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cr=e,zr=On(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cr=e,zr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=bs!==null?{id:Ki,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Cr=e,zr=null,!0):!1;default:return!1}}function rh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ih(e){if(tt){var t=zr;if(t){var r=t;if(!qg(e,t)){if(rh(e))throw Error(Y(418));t=On(r.nextSibling);var i=Cr;t&&qg(e,t)?V3(i,r):(e.flags=e.flags&-4097|2,tt=!1,Cr=e)}}else{if(rh(e))throw Error(Y(418));e.flags=e.flags&-4097|2,tt=!1,Cr=e}}}function Lg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cr=e}function $o(e){if(e!==Cr)return!1;if(!tt)return Lg(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Kf(e.type,e.memoizedProps)),t&&(t=zr)){if(rh(e))throw j3(),Error(Y(418));for(;t;)V3(e,t),t=On(t.nextSibling)}if(Lg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zr=On(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zr=null}}else zr=Cr?On(e.stateNode.nextSibling):null;return!0}function j3(){for(var e=zr;e;)e=On(e.nextSibling)}function fa(){zr=Cr=null,tt=!1}function Ip(e){ai===null?ai=[e]:ai.push(e)}var c9=hn.ReactCurrentBatchConfig;function Oa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var i=r.stateNode}if(!i)throw Error(Y(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var u=n.refs;a===null?delete u[s]:u[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function Do(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rg(e){var t=e._init;return t(e._payload)}function H3(e){function t(A,M){if(e){var T=A.deletions;T===null?(A.deletions=[M],A.flags|=16):T.push(M)}}function r(A,M){if(!e)return null;for(;M!==null;)t(A,M),M=M.sibling;return null}function i(A,M){for(A=new Map;M!==null;)M.key!==null?A.set(M.key,M):A.set(M.index,M),M=M.sibling;return A}function n(A,M){return A=Fn(A,M),A.index=0,A.sibling=null,A}function s(A,M,T){return A.index=T,e?(T=A.alternate,T!==null?(T=T.index,T<M?(A.flags|=2,M):T):(A.flags|=2,M)):(A.flags|=1048576,M)}function a(A){return e&&A.alternate===null&&(A.flags|=2),A}function u(A,M,T,q){return M===null||M.tag!==6?(M=Kc(T,A.mode,q),M.return=A,M):(M=n(M,T),M.return=A,M)}function f(A,M,T,q){var W=T.type;return W===Fs?d(A,M,T.props.children,q,T.key):M!==null&&(M.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===kn&&Rg(W)===M.type)?(q=n(M,T.props),q.ref=Oa(A,M,T),q.return=A,q):(q=uu(T.type,T.key,T.props,null,A.mode,q),q.ref=Oa(A,M,T),q.return=A,q)}function p(A,M,T,q){return M===null||M.tag!==4||M.stateNode.containerInfo!==T.containerInfo||M.stateNode.implementation!==T.implementation?(M=Jc(T,A.mode,q),M.return=A,M):(M=n(M,T.children||[]),M.return=A,M)}function d(A,M,T,q,W){return M===null||M.tag!==7?(M=ms(T,A.mode,q,W),M.return=A,M):(M=n(M,T),M.return=A,M)}function b(A,M,T){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Kc(""+M,A.mode,T),M.return=A,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ko:return T=uu(M.type,M.key,M.props,null,A.mode,T),T.ref=Oa(A,null,M),T.return=A,T;case Rs:return M=Jc(M,A.mode,T),M.return=A,M;case kn:var q=M._init;return b(A,q(M._payload),T)}if(Xa(M)||za(M))return M=ms(M,A.mode,T,null),M.return=A,M;Do(A,M)}return null}function x(A,M,T,q){var W=M!==null?M.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return W!==null?null:u(A,M,""+T,q);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ko:return T.key===W?f(A,M,T,q):null;case Rs:return T.key===W?p(A,M,T,q):null;case kn:return W=T._init,x(A,M,W(T._payload),q)}if(Xa(T)||za(T))return W!==null?null:d(A,M,T,q,null);Do(A,T)}return null}function I(A,M,T,q,W){if(typeof q=="string"&&q!==""||typeof q=="number")return A=A.get(T)||null,u(M,A,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case ko:return A=A.get(q.key===null?T:q.key)||null,f(M,A,q,W);case Rs:return A=A.get(q.key===null?T:q.key)||null,p(M,A,q,W);case kn:var J=q._init;return I(A,M,T,J(q._payload),W)}if(Xa(q)||za(q))return A=A.get(T)||null,d(M,A,q,W,null);Do(M,q)}return null}function L(A,M,T,q){for(var W=null,J=null,te=M,ne=M=0,ke=null;te!==null&&ne<T.length;ne++){te.index>ne?(ke=te,te=null):ke=te.sibling;var he=x(A,te,T[ne],q);if(he===null){te===null&&(te=ke);break}e&&te&&he.alternate===null&&t(A,te),M=s(he,M,ne),J===null?W=he:J.sibling=he,J=he,te=ke}if(ne===T.length)return r(A,te),tt&&ss(A,ne),W;if(te===null){for(;ne<T.length;ne++)te=b(A,T[ne],q),te!==null&&(M=s(te,M,ne),J===null?W=te:J.sibling=te,J=te);return tt&&ss(A,ne),W}for(te=i(A,te);ne<T.length;ne++)ke=I(te,A,ne,T[ne],q),ke!==null&&(e&&ke.alternate!==null&&te.delete(ke.key===null?ne:ke.key),M=s(ke,M,ne),J===null?W=ke:J.sibling=ke,J=ke);return e&&te.forEach(function(Pe){return t(A,Pe)}),tt&&ss(A,ne),W}function O(A,M,T,q){var W=za(T);if(typeof W!="function")throw Error(Y(150));if(T=W.call(T),T==null)throw Error(Y(151));for(var J=W=null,te=M,ne=M=0,ke=null,he=T.next();te!==null&&!he.done;ne++,he=T.next()){te.index>ne?(ke=te,te=null):ke=te.sibling;var Pe=x(A,te,he.value,q);if(Pe===null){te===null&&(te=ke);break}e&&te&&Pe.alternate===null&&t(A,te),M=s(Pe,M,ne),J===null?W=Pe:J.sibling=Pe,J=Pe,te=ke}if(he.done)return r(A,te),tt&&ss(A,ne),W;if(te===null){for(;!he.done;ne++,he=T.next())he=b(A,he.value,q),he!==null&&(M=s(he,M,ne),J===null?W=he:J.sibling=he,J=he);return tt&&ss(A,ne),W}for(te=i(A,te);!he.done;ne++,he=T.next())he=I(te,A,ne,he.value,q),he!==null&&(e&&he.alternate!==null&&te.delete(he.key===null?ne:he.key),M=s(he,M,ne),J===null?W=he:J.sibling=he,J=he);return e&&te.forEach(function(He){return t(A,He)}),tt&&ss(A,ne),W}function R(A,M,T,q){if(typeof T=="object"&&T!==null&&T.type===Fs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ko:e:{for(var W=T.key,J=M;J!==null;){if(J.key===W){if(W=T.type,W===Fs){if(J.tag===7){r(A,J.sibling),M=n(J,T.props.children),M.return=A,A=M;break e}}else if(J.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===kn&&Rg(W)===J.type){r(A,J.sibling),M=n(J,T.props),M.ref=Oa(A,J,T),M.return=A,A=M;break e}r(A,J);break}else t(A,J);J=J.sibling}T.type===Fs?(M=ms(T.props.children,A.mode,q,T.key),M.return=A,A=M):(q=uu(T.type,T.key,T.props,null,A.mode,q),q.ref=Oa(A,M,T),q.return=A,A=q)}return a(A);case Rs:e:{for(J=T.key;M!==null;){if(M.key===J)if(M.tag===4&&M.stateNode.containerInfo===T.containerInfo&&M.stateNode.implementation===T.implementation){r(A,M.sibling),M=n(M,T.children||[]),M.return=A,A=M;break e}else{r(A,M);break}else t(A,M);M=M.sibling}M=Jc(T,A.mode,q),M.return=A,A=M}return a(A);case kn:return J=T._init,R(A,M,J(T._payload),q)}if(Xa(T))return L(A,M,T,q);if(za(T))return O(A,M,T,q);Do(A,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,M!==null&&M.tag===6?(r(A,M.sibling),M=n(M,T),M.return=A,A=M):(r(A,M),M=Kc(T,A.mode,q),M.return=A,A=M),a(A)):r(A,M)}return R}var ha=H3(!0),U3=H3(!1),Du=Kn(null),Pu=null,Zs=null,zp=null;function Cp(){zp=Zs=Pu=null}function $p(e){var t=Du.current;Xe(Du),e._currentValue=t}function nh(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function na(e,t){Pu=e,zp=Zs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yr=!0),e.firstContext=null)}function Xr(e){var t=e._currentValue;if(zp!==e)if(e={context:e,memoizedValue:t,next:null},Zs===null){if(Pu===null)throw Error(Y(308));Zs=e,Pu.dependencies={lanes:0,firstContext:e}}else Zs=Zs.next=e;return t}var os=null;function Dp(e){os===null?os=[e]:os.push(e)}function G3(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,Dp(t)):(r.next=n.next,n.next=r),t.interleaved=r,un(e,i)}function un(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sn=!1;function Pp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qn(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ce&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,un(e,r)}return n=i.interleaved,n===null?(t.next=t,Dp(i)):(t.next=n.next,n.next=t),i.interleaved=t,un(e,r)}function iu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,xp(e,r)}}function Fg(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ou(e,t,r,i){var n=e.updateQueue;Sn=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,u=n.shared.pending;if(u!==null){n.shared.pending=null;var f=u,p=f.next;f.next=null,a===null?s=p:a.next=p,a=f;var d=e.alternate;d!==null&&(d=d.updateQueue,u=d.lastBaseUpdate,u!==a&&(u===null?d.firstBaseUpdate=p:u.next=p,d.lastBaseUpdate=f))}if(s!==null){var b=n.baseState;a=0,d=p=f=null,u=s;do{var x=u.lane,I=u.eventTime;if((i&x)===x){d!==null&&(d=d.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var L=e,O=u;switch(x=t,I=r,O.tag){case 1:if(L=O.payload,typeof L=="function"){b=L.call(I,b,x);break e}b=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=O.payload,x=typeof L=="function"?L.call(I,b,x):L,x==null)break e;b=ht({},b,x);break e;case 2:Sn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,x=n.effects,x===null?n.effects=[u]:x.push(u))}else I={eventTime:I,lane:x,tag:u.tag,payload:u.payload,callback:u.callback,next:null},d===null?(p=d=I,f=b):d=d.next=I,a|=x;if(u=u.next,u===null){if(u=n.shared.pending,u===null)break;x=u,u=x.next,x.next=null,n.lastBaseUpdate=x,n.shared.pending=null}}while(!0);if(d===null&&(f=b),n.baseState=f,n.firstBaseUpdate=p,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);ws|=a,e.lanes=a,e.memoizedState=b}}function Bg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Y(191,n));n.call(i)}}}var Ql={},Ai=Kn(Ql),Ml=Kn(Ql),El=Kn(Ql);function us(e){if(e===Ql)throw Error(Y(174));return e}function Op(e,t){switch(Ge(El,t),Ge(Ml,e),Ge(Ai,Ql),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lf(t,e)}Xe(Ai),Ge(Ai,t)}function pa(){Xe(Ai),Xe(Ml),Xe(El)}function Z3(e){us(El.current);var t=us(Ai.current),r=Lf(t,e.type);t!==r&&(Ge(Ml,e),Ge(Ai,r))}function qp(e){Ml.current===e&&(Xe(Ai),Xe(Ml))}var ct=Kn(0);function qu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gc=[];function Lp(){for(var e=0;e<Gc.length;e++)Gc[e]._workInProgressVersionPrimary=null;Gc.length=0}var nu=hn.ReactCurrentDispatcher,Wc=hn.ReactCurrentBatchConfig,xs=0,ft=null,At=null,Pt=null,Lu=!1,ul=!1,Al=0,f9=0;function Wt(){throw Error(Y(321))}function Rp(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!hi(e[r],t[r]))return!1;return!0}function Fp(e,t,r,i,n,s){if(xs=s,ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nu.current=e===null||e.memoizedState===null?d9:g9,e=r(i,n),ul){s=0;do{if(ul=!1,Al=0,25<=s)throw Error(Y(301));s+=1,Pt=At=null,t.updateQueue=null,nu.current=y9,e=r(i,n)}while(ul)}if(nu.current=Ru,t=At!==null&&At.next!==null,xs=0,Pt=At=ft=null,Lu=!1,t)throw Error(Y(300));return e}function Bp(){var e=Al!==0;return Al=0,e}function Ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ft.memoizedState=Pt=e:Pt=Pt.next=e,Pt}function Kr(){if(At===null){var e=ft.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Pt===null?ft.memoizedState:Pt.next;if(t!==null)Pt=t,At=e;else{if(e===null)throw Error(Y(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Pt===null?ft.memoizedState=Pt=e:Pt=Pt.next=e}return Pt}function Il(e,t){return typeof t=="function"?t(e):t}function Zc(e){var t=Kr(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=At,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var u=a=null,f=null,p=s;do{var d=p.lane;if((xs&d)===d)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var b={lane:d,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(u=f=b,a=i):f=f.next=b,ft.lanes|=d,ws|=d}p=p.next}while(p!==null&&p!==s);f===null?a=i:f.next=u,hi(i,t.memoizedState)||(yr=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=f,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,ft.lanes|=s,ws|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qc(e){var t=Kr(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);hi(s,t.memoizedState)||(yr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function Q3(){}function Y3(e,t){var r=ft,i=Kr(),n=t(),s=!hi(i.memoizedState,n);if(s&&(i.memoizedState=n,yr=!0),i=i.queue,Vp(J3.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Pt!==null&&Pt.memoizedState.tag&1){if(r.flags|=2048,zl(9,K3.bind(null,r,i,n,t),void 0,null),qt===null)throw Error(Y(349));xs&30||X3(r,t,n)}return n}function X3(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function K3(e,t,r,i){t.value=r,t.getSnapshot=i,e5(t)&&t5(e)}function J3(e,t,r){return r(function(){e5(t)&&t5(e)})}function e5(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hi(e,r)}catch{return!0}}function t5(e){var t=un(e,1);t!==null&&ci(t,e,1,-1)}function Vg(e){var t=Ni();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:e},t.queue=e,e=e.dispatch=m9.bind(null,ft,e),[t.memoizedState,e]}function zl(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function r5(){return Kr().memoizedState}function su(e,t,r,i){var n=Ni();ft.flags|=e,n.memoizedState=zl(1|t,r,void 0,i===void 0?null:i)}function N0(e,t,r,i){var n=Kr();i=i===void 0?null:i;var s=void 0;if(At!==null){var a=At.memoizedState;if(s=a.destroy,i!==null&&Rp(i,a.deps)){n.memoizedState=zl(t,r,s,i);return}}ft.flags|=e,n.memoizedState=zl(1|t,r,s,i)}function jg(e,t){return su(8390656,8,e,t)}function Vp(e,t){return N0(2048,8,e,t)}function i5(e,t){return N0(4,2,e,t)}function n5(e,t){return N0(4,4,e,t)}function s5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a5(e,t,r){return r=r!=null?r.concat([e]):null,N0(4,4,s5.bind(null,t,e),r)}function jp(){}function l5(e,t){var r=Kr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Rp(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function o5(e,t){var r=Kr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Rp(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function u5(e,t,r){return xs&21?(hi(r,t)||(r=m3(),ft.lanes|=r,ws|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yr=!0),e.memoizedState=r)}function h9(e,t){var r=Le;Le=r!==0&&4>r?r:4,e(!0);var i=Wc.transition;Wc.transition={};try{e(!1),t()}finally{Le=r,Wc.transition=i}}function c5(){return Kr().memoizedState}function p9(e,t,r){var i=Rn(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},f5(e))h5(t,r);else if(r=G3(e,t,r,i),r!==null){var n=ar();ci(r,e,i,n),p5(r,t,i)}}function m9(e,t,r){var i=Rn(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(f5(e))h5(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,u=s(a,r);if(n.hasEagerState=!0,n.eagerState=u,hi(u,a)){var f=t.interleaved;f===null?(n.next=n,Dp(t)):(n.next=f.next,f.next=n),t.interleaved=n;return}}catch{}finally{}r=G3(e,t,n,i),r!==null&&(n=ar(),ci(r,e,i,n),p5(r,t,i))}}function f5(e){var t=e.alternate;return e===ft||t!==null&&t===ft}function h5(e,t){ul=Lu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function p5(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,xp(e,r)}}var Ru={readContext:Xr,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},d9={readContext:Xr,useCallback:function(e,t){return Ni().memoizedState=[e,t===void 0?null:t],e},useContext:Xr,useEffect:jg,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,su(4194308,4,s5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return su(4194308,4,e,t)},useInsertionEffect:function(e,t){return su(4,2,e,t)},useMemo:function(e,t){var r=Ni();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ni();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=p9.bind(null,ft,e),[i.memoizedState,e]},useRef:function(e){var t=Ni();return e={current:e},t.memoizedState=e},useState:Vg,useDebugValue:jp,useDeferredValue:function(e){return Ni().memoizedState=e},useTransition:function(){var e=Vg(!1),t=e[0];return e=h9.bind(null,e[1]),Ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=ft,n=Ni();if(tt){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),qt===null)throw Error(Y(349));xs&30||X3(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,jg(J3.bind(null,i,s,e),[e]),i.flags|=2048,zl(9,K3.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=Ni(),t=qt.identifierPrefix;if(tt){var r=Ji,i=Ki;r=(i&~(1<<32-ui(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Al++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=f9++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},g9={readContext:Xr,useCallback:l5,useContext:Xr,useEffect:Vp,useImperativeHandle:a5,useInsertionEffect:i5,useLayoutEffect:n5,useMemo:o5,useReducer:Zc,useRef:r5,useState:function(){return Zc(Il)},useDebugValue:jp,useDeferredValue:function(e){var t=Kr();return u5(t,At.memoizedState,e)},useTransition:function(){var e=Zc(Il)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:Q3,useSyncExternalStore:Y3,useId:c5,unstable_isNewReconciler:!1},y9={readContext:Xr,useCallback:l5,useContext:Xr,useEffect:Vp,useImperativeHandle:a5,useInsertionEffect:i5,useLayoutEffect:n5,useMemo:o5,useReducer:Qc,useRef:r5,useState:function(){return Qc(Il)},useDebugValue:jp,useDeferredValue:function(e){var t=Kr();return At===null?t.memoizedState=e:u5(t,At.memoizedState,e)},useTransition:function(){var e=Qc(Il)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:Q3,useSyncExternalStore:Y3,useId:c5,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){t=ht({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sh(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:ht({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var k0={isMounted:function(e){return(e=e._reactInternals)?Ss(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=ar(),n=Rn(e),s=nn(i,n);s.payload=t,r!=null&&(s.callback=r),t=qn(e,s,n),t!==null&&(ci(t,e,n,i),iu(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=ar(),n=Rn(e),s=nn(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=qn(e,s,n),t!==null&&(ci(t,e,n,i),iu(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ar(),i=Rn(e),n=nn(r,i);n.tag=2,t!=null&&(n.callback=t),t=qn(e,n,i),t!==null&&(ci(t,e,i,r),iu(t,e,i))}};function Hg(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!kl(r,i)||!kl(n,s):!0}function m5(e,t,r){var i=!1,n=Wn,s=t.contextType;return typeof s=="object"&&s!==null?s=Xr(s):(n=br(t)?vs:er.current,i=t.contextTypes,s=(i=i!=null)?ca(e,n):Wn),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=k0,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ug(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&k0.enqueueReplaceState(t,t.state,null)}function ah(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Pp(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Xr(s):(s=br(t)?vs:er.current,n.context=ca(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(sh(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&k0.enqueueReplaceState(n,n.state,null),Ou(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function ma(e,t){try{var r="",i=t;do r+=U8(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function Yc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function lh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var v9=typeof WeakMap=="function"?WeakMap:Map;function d5(e,t,r){r=nn(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Bu||(Bu=!0,yh=i),lh(e,t)},r}function g5(e,t,r){r=nn(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){lh(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){lh(e,t),typeof i!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function Gg(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new v9;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=C9.bind(null,e,t,r),t.then(e,e))}function Wg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zg(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nn(-1,1),t.tag=2,qn(r,t,1))),r.lanes|=1),e)}var b9=hn.ReactCurrentOwner,yr=!1;function nr(e,t,r,i){t.child=e===null?U3(t,null,r,i):ha(t,e.child,r,i)}function Qg(e,t,r,i,n){r=r.render;var s=t.ref;return na(t,n),i=Fp(e,t,r,i,s,n),r=Bp(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,cn(e,t,n)):(tt&&r&&Ep(t),t.flags|=1,nr(e,t,i,n),t.child)}function Yg(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!Xp(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,y5(e,t,s,i,n)):(e=uu(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:kl,r(a,i)&&e.ref===t.ref)return cn(e,t,n)}return t.flags|=1,e=Fn(s,i),e.ref=t.ref,e.return=t,t.child=e}function y5(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(kl(s,i)&&e.ref===t.ref)if(yr=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(yr=!0);else return t.lanes=e.lanes,cn(e,t,n)}return oh(e,t,r,i,n)}function v5(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Ys,Mr),Mr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(Ys,Mr),Mr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,Ge(Ys,Mr),Mr|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,Ge(Ys,Mr),Mr|=i;return nr(e,t,n,r),t.child}function b5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function oh(e,t,r,i,n){var s=br(r)?vs:er.current;return s=ca(t,s),na(t,n),r=Fp(e,t,r,i,s,n),i=Bp(),e!==null&&!yr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,cn(e,t,n)):(tt&&i&&Ep(t),t.flags|=1,nr(e,t,r,n),t.child)}function Xg(e,t,r,i,n){if(br(r)){var s=!0;zu(t)}else s=!1;if(na(t,n),t.stateNode===null)au(e,t),m5(t,r,i),ah(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var f=a.context,p=r.contextType;typeof p=="object"&&p!==null?p=Xr(p):(p=br(r)?vs:er.current,p=ca(t,p));var d=r.getDerivedStateFromProps,b=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";b||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||f!==p)&&Ug(t,a,i,p),Sn=!1;var x=t.memoizedState;a.state=x,Ou(t,i,a,n),f=t.memoizedState,u!==i||x!==f||vr.current||Sn?(typeof d=="function"&&(sh(t,r,d,i),f=t.memoizedState),(u=Sn||Hg(t,r,u,i,x,f,p))?(b||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=p,i=u):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,W3(e,t),u=t.memoizedProps,p=t.type===t.elementType?u:ni(t.type,u),a.props=p,b=t.pendingProps,x=a.context,f=r.contextType,typeof f=="object"&&f!==null?f=Xr(f):(f=br(r)?vs:er.current,f=ca(t,f));var I=r.getDerivedStateFromProps;(d=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==b||x!==f)&&Ug(t,a,i,f),Sn=!1,x=t.memoizedState,a.state=x,Ou(t,i,a,n);var L=t.memoizedState;u!==b||x!==L||vr.current||Sn?(typeof I=="function"&&(sh(t,r,I,i),L=t.memoizedState),(p=Sn||Hg(t,r,p,i,x,L,f)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,L,f),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,L,f)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=L),a.props=i,a.state=L,a.context=f,i=p):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),i=!1)}return uh(e,t,r,i,s,n)}function uh(e,t,r,i,n,s){b5(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&Og(t,r,!1),cn(e,t,s);i=t.stateNode,b9.current=t;var u=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=ha(t,e.child,null,s),t.child=ha(t,null,u,s)):nr(e,t,u,s),t.memoizedState=i.state,n&&Og(t,r,!0),t.child}function x5(e){var t=e.stateNode;t.pendingContext?Pg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pg(e,t.context,!1),Op(e,t.containerInfo)}function Kg(e,t,r,i,n){return fa(),Ip(n),t.flags|=256,nr(e,t,r,i),t.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function fh(e){return{baseLanes:e,cachePool:null,transitions:null}}function w5(e,t,r){var i=t.pendingProps,n=ct.current,s=!1,a=(t.flags&128)!==0,u;if((u=a)||(u=e!==null&&e.memoizedState===null?!1:(n&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Ge(ct,n&1),e===null)return ih(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=T0(a,i,0,null),e=ms(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=fh(r),t.memoizedState=ch,e):Hp(t,a));if(n=e.memoizedState,n!==null&&(u=n.dehydrated,u!==null))return x9(e,t,a,i,u,n,r);if(s){s=i.fallback,a=t.mode,n=e.child,u=n.sibling;var f={mode:"hidden",children:i.children};return!(a&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=f,t.deletions=null):(i=Fn(n,f),i.subtreeFlags=n.subtreeFlags&14680064),u!==null?s=Fn(u,s):(s=ms(s,a,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=e.child.memoizedState,a=a===null?fh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=ch,i}return s=e.child,e=s.sibling,i=Fn(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Hp(e,t){return t=T0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Po(e,t,r,i){return i!==null&&Ip(i),ha(t,e.child,null,r),e=Hp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x9(e,t,r,i,n,s,a){if(r)return t.flags&256?(t.flags&=-257,i=Yc(Error(Y(422))),Po(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=T0({mode:"visible",children:i.children},n,0,null),s=ms(s,n,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&ha(t,e.child,null,a),t.child.memoizedState=fh(a),t.memoizedState=ch,s);if(!(t.mode&1))return Po(e,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var u=i.dgst;return i=u,s=Error(Y(419)),i=Yc(s,i,void 0),Po(e,t,a,i)}if(u=(a&e.childLanes)!==0,yr||u){if(i=qt,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,un(e,n),ci(i,e,n,-1))}return Yp(),i=Yc(Error(Y(421))),Po(e,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=$9.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,zr=On(n.nextSibling),Cr=t,tt=!0,ai=null,e!==null&&(Gr[Wr++]=Ki,Gr[Wr++]=Ji,Gr[Wr++]=bs,Ki=e.id,Ji=e.overflow,bs=t),t=Hp(t,i.children),t.flags|=4096,t)}function Jg(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),nh(e.return,t,r)}function Xc(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function N5(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(nr(e,t,i.children,r),i=ct.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jg(e,r,t);else if(e.tag===19)Jg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ge(ct,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&qu(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Xc(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&qu(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Xc(t,!0,r,null,s);break;case"together":Xc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function au(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=Fn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function w9(e,t,r){switch(t.tag){case 3:x5(t),fa();break;case 5:Z3(t);break;case 1:br(t.type)&&zu(t);break;case 4:Op(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;Ge(Du,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ge(ct,ct.current&1),t.flags|=128,null):r&t.child.childLanes?w5(e,t,r):(Ge(ct,ct.current&1),e=cn(e,t,r),e!==null?e.sibling:null);Ge(ct,ct.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return N5(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ge(ct,ct.current),i)break;return null;case 22:case 23:return t.lanes=0,v5(e,t,r)}return cn(e,t,r)}var k5,hh,S5,_5;k5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hh=function(){};S5=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,us(Ai.current);var s=null;switch(r){case"input":n=Df(e,n),i=Df(e,i),s=[];break;case"select":n=ht({},n,{value:void 0}),i=ht({},i,{value:void 0}),s=[];break;case"textarea":n=qf(e,n),i=qf(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Au)}Rf(r,i);var a;r=null;for(p in n)if(!i.hasOwnProperty(p)&&n.hasOwnProperty(p)&&n[p]!=null)if(p==="style"){var u=n[p];for(a in u)u.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(gl.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in i){var f=i[p];if(u=n!=null?n[p]:void 0,i.hasOwnProperty(p)&&f!==u&&(f!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||f&&f.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in f)f.hasOwnProperty(a)&&u[a]!==f[a]&&(r||(r={}),r[a]=f[a])}else r||(s||(s=[]),s.push(p,r)),r=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(s=s||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(s=s||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(gl.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&Qe("scroll",e),s||u===f||(s=[])):(s=s||[]).push(p,f))}r&&(s=s||[]).push("style",r);var p=s;(t.updateQueue=p)&&(t.flags|=4)}};_5=function(e,t,r,i){r!==i&&(t.flags|=4)};function qa(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function N9(e,t,r){var i=t.pendingProps;switch(Ap(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return br(t.type)&&Iu(),Zt(t),null;case 3:return i=t.stateNode,pa(),Xe(vr),Xe(er),Lp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&($o(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ai!==null&&(xh(ai),ai=null))),hh(e,t),Zt(t),null;case 5:qp(t);var n=us(El.current);if(r=t.type,e!==null&&t.stateNode!=null)S5(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Y(166));return Zt(t),null}if(e=us(Ai.current),$o(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Ti]=t,i[Tl]=s,e=(t.mode&1)!==0,r){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(n=0;n<Ja.length;n++)Qe(Ja[n],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":og(i,s),Qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",i);break;case"textarea":cg(i,s),Qe("invalid",i)}Rf(r,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?i.textContent!==u&&(s.suppressHydrationWarning!==!0&&Co(i.textContent,u,e),n=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Co(i.textContent,u,e),n=["children",""+u]):gl.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Qe("scroll",i)}switch(r){case"input":So(i),ug(i,s,!0);break;case"textarea":So(i),fg(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Au)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=J4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[Ti]=t,e[Tl]=i,k5(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ff(r,i),r){case"dialog":Qe("cancel",e),Qe("close",e),n=i;break;case"iframe":case"object":case"embed":Qe("load",e),n=i;break;case"video":case"audio":for(n=0;n<Ja.length;n++)Qe(Ja[n],e);n=i;break;case"source":Qe("error",e),n=i;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),n=i;break;case"details":Qe("toggle",e),n=i;break;case"input":og(e,i),n=Df(e,i),Qe("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=ht({},i,{value:void 0}),Qe("invalid",e);break;case"textarea":cg(e,i),n=qf(e,i),Qe("invalid",e);break;default:n=i}Rf(r,n),u=n;for(s in u)if(u.hasOwnProperty(s)){var f=u[s];s==="style"?r3(e,f):s==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&e3(e,f)):s==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&yl(e,f):typeof f=="number"&&yl(e,""+f):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gl.hasOwnProperty(s)?f!=null&&s==="onScroll"&&Qe("scroll",e):f!=null&&mp(e,s,f,a))}switch(r){case"input":So(e),ug(e,i,!1);break;case"textarea":So(e),fg(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Gn(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?ea(e,!!i.multiple,s,!1):i.defaultValue!=null&&ea(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Au)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)_5(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Y(166));if(r=us(El.current),us(Ai.current),$o(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ti]=t,(s=i.nodeValue!==r)&&(e=Cr,e!==null))switch(e.tag){case 3:Co(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Co(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ti]=t,t.stateNode=i}return Zt(t),null;case 13:if(Xe(ct),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&zr!==null&&t.mode&1&&!(t.flags&128))j3(),fa(),t.flags|=98560,s=!1;else if(s=$o(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Y(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Ti]=t}else fa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),s=!1}else ai!==null&&(xh(ai),ai=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ct.current&1?$t===0&&($t=3):Yp())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return pa(),hh(e,t),e===null&&Sl(t.stateNode.containerInfo),Zt(t),null;case 10:return $p(t.type._context),Zt(t),null;case 17:return br(t.type)&&Iu(),Zt(t),null;case 19:if(Xe(ct),s=t.memoizedState,s===null)return Zt(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)qa(s,!1);else{if($t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qu(e),a!==null){for(t.flags|=128,qa(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ge(ct,ct.current&1|2),t.child}e=e.sibling}s.tail!==null&&wt()>da&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304)}else{if(!i)if(e=qu(a),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!tt)return Zt(t),null}else 2*wt()-s.renderingStartTime>da&&r!==1073741824&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=wt(),t.sibling=null,r=ct.current,Ge(ct,i?r&1|2:r&1),t):(Zt(t),null);case 22:case 23:return Qp(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Mr&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function k9(e,t){switch(Ap(t),t.tag){case 1:return br(t.type)&&Iu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pa(),Xe(vr),Xe(er),Lp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qp(t),null;case 13:if(Xe(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));fa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(ct),null;case 4:return pa(),null;case 10:return $p(t.type._context),null;case 22:case 23:return Qp(),null;case 24:return null;default:return null}}var Oo=!1,Xt=!1,S9=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Qs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){dt(e,t,i)}else r.current=null}function ph(e,t,r){try{r()}catch(i){dt(e,t,i)}}var e1=!1;function _9(e,t){if(Yf=Tu,e=I3(),Mp(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,u=-1,f=-1,p=0,d=0,b=e,x=null;t:for(;;){for(var I;b!==r||n!==0&&b.nodeType!==3||(u=a+n),b!==s||i!==0&&b.nodeType!==3||(f=a+i),b.nodeType===3&&(a+=b.nodeValue.length),(I=b.firstChild)!==null;)x=b,b=I;for(;;){if(b===e)break t;if(x===r&&++p===n&&(u=a),x===s&&++d===i&&(f=a),(I=b.nextSibling)!==null)break;b=x,x=b.parentNode}b=I}r=u===-1||f===-1?null:{start:u,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xf={focusedElem:e,selectionRange:r},Tu=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var O=L.memoizedProps,R=L.memoizedState,A=t.stateNode,M=A.getSnapshotBeforeUpdate(t.elementType===t.type?O:ni(t.type,O),R);A.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(q){dt(t,t.return,q)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return L=e1,e1=!1,L}function cl(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&ph(t,r,s)}n=n.next}while(n!==i)}}function S0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function mh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function T5(e){var t=e.alternate;t!==null&&(e.alternate=null,T5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ti],delete t[Tl],delete t[eh],delete t[l9],delete t[o9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function M5(e){return e.tag===5||e.tag===3||e.tag===4}function t1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||M5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dh(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Au));else if(i!==4&&(e=e.child,e!==null))for(dh(e,t,r),e=e.sibling;e!==null;)dh(e,t,r),e=e.sibling}function gh(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(gh(e,t,r),e=e.sibling;e!==null;)gh(e,t,r),e=e.sibling}var Ft=null,si=!1;function bn(e,t,r){for(r=r.child;r!==null;)E5(e,t,r),r=r.sibling}function E5(e,t,r){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(g0,r)}catch{}switch(r.tag){case 5:Xt||Qs(r,t);case 6:var i=Ft,n=si;Ft=null,bn(e,t,r),Ft=i,si=n,Ft!==null&&(si?(e=Ft,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ft.removeChild(r.stateNode));break;case 18:Ft!==null&&(si?(e=Ft,r=r.stateNode,e.nodeType===8?Hc(e.parentNode,r):e.nodeType===1&&Hc(e,r),wl(e)):Hc(Ft,r.stateNode));break;case 4:i=Ft,n=si,Ft=r.stateNode.containerInfo,si=!0,bn(e,t,r),Ft=i,si=n;break;case 0:case 11:case 14:case 15:if(!Xt&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&ph(r,t,a),n=n.next}while(n!==i)}bn(e,t,r);break;case 1:if(!Xt&&(Qs(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(u){dt(r,t,u)}bn(e,t,r);break;case 21:bn(e,t,r);break;case 22:r.mode&1?(Xt=(i=Xt)||r.memoizedState!==null,bn(e,t,r),Xt=i):bn(e,t,r);break;default:bn(e,t,r)}}function r1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new S9),t.forEach(function(i){var n=D9.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function ti(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,a=t,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ft=u.stateNode,si=!1;break e;case 3:Ft=u.stateNode.containerInfo,si=!0;break e;case 4:Ft=u.stateNode.containerInfo,si=!0;break e}u=u.return}if(Ft===null)throw Error(Y(160));E5(s,a,n),Ft=null,si=!1;var f=n.alternate;f!==null&&(f.return=null),n.return=null}catch(p){dt(n,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)A5(t,e),t=t.sibling}function A5(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ti(t,e),xi(e),i&4){try{cl(3,e,e.return),S0(3,e)}catch(O){dt(e,e.return,O)}try{cl(5,e,e.return)}catch(O){dt(e,e.return,O)}}break;case 1:ti(t,e),xi(e),i&512&&r!==null&&Qs(r,r.return);break;case 5:if(ti(t,e),xi(e),i&512&&r!==null&&Qs(r,r.return),e.flags&32){var n=e.stateNode;try{yl(n,"")}catch(O){dt(e,e.return,O)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&X4(n,s),Ff(u,a);var p=Ff(u,s);for(a=0;a<f.length;a+=2){var d=f[a],b=f[a+1];d==="style"?r3(n,b):d==="dangerouslySetInnerHTML"?e3(n,b):d==="children"?yl(n,b):mp(n,d,b,p)}switch(u){case"input":Pf(n,s);break;case"textarea":K4(n,s);break;case"select":var x=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var I=s.value;I!=null?ea(n,!!s.multiple,I,!1):x!==!!s.multiple&&(s.defaultValue!=null?ea(n,!!s.multiple,s.defaultValue,!0):ea(n,!!s.multiple,s.multiple?[]:"",!1))}n[Tl]=s}catch(O){dt(e,e.return,O)}}break;case 6:if(ti(t,e),xi(e),i&4){if(e.stateNode===null)throw Error(Y(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(O){dt(e,e.return,O)}}break;case 3:if(ti(t,e),xi(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{wl(t.containerInfo)}catch(O){dt(e,e.return,O)}break;case 4:ti(t,e),xi(e);break;case 13:ti(t,e),xi(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(Wp=wt())),i&4&&r1(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Xt=(p=Xt)||d,ti(t,e),Xt=p):ti(t,e),xi(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(b=oe=d;oe!==null;){switch(x=oe,I=x.child,x.tag){case 0:case 11:case 14:case 15:cl(4,x,x.return);break;case 1:Qs(x,x.return);var L=x.stateNode;if(typeof L.componentWillUnmount=="function"){i=x,r=x.return;try{t=i,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(O){dt(i,r,O)}}break;case 5:Qs(x,x.return);break;case 22:if(x.memoizedState!==null){n1(b);continue}}I!==null?(I.return=x,oe=I):n1(b)}d=d.sibling}e:for(d=null,b=e;;){if(b.tag===5){if(d===null){d=b;try{n=b.stateNode,p?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=b.stateNode,f=b.memoizedProps.style,a=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=t3("display",a))}catch(O){dt(e,e.return,O)}}}else if(b.tag===6){if(d===null)try{b.stateNode.nodeValue=p?"":b.memoizedProps}catch(O){dt(e,e.return,O)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;d===b&&(d=null),b=b.return}d===b&&(d=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:ti(t,e),xi(e),i&4&&r1(e);break;case 21:break;default:ti(t,e),xi(e)}}function xi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(M5(r)){var i=r;break e}r=r.return}throw Error(Y(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(yl(n,""),i.flags&=-33);var s=t1(e);gh(e,s,n);break;case 3:case 4:var a=i.stateNode.containerInfo,u=t1(e);dh(e,u,a);break;default:throw Error(Y(161))}}catch(f){dt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function T9(e,t,r){oe=e,I5(e)}function I5(e,t,r){for(var i=(e.mode&1)!==0;oe!==null;){var n=oe,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||Oo;if(!a){var u=n.alternate,f=u!==null&&u.memoizedState!==null||Xt;u=Oo;var p=Xt;if(Oo=a,(Xt=f)&&!p)for(oe=n;oe!==null;)a=oe,f=a.child,a.tag===22&&a.memoizedState!==null?s1(n):f!==null?(f.return=a,oe=f):s1(n);for(;s!==null;)oe=s,I5(s),s=s.sibling;oe=n,Oo=u,Xt=p}i1(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,oe=s):i1(e)}}function i1(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xt||S0(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Xt)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:ni(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Bg(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Bg(t,a,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var d=p.memoizedState;if(d!==null){var b=d.dehydrated;b!==null&&wl(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Xt||t.flags&512&&mh(t)}catch(x){dt(t,t.return,x)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function n1(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function s1(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{S0(4,t)}catch(f){dt(t,r,f)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(f){dt(t,n,f)}}var s=t.return;try{mh(t)}catch(f){dt(t,s,f)}break;case 5:var a=t.return;try{mh(t)}catch(f){dt(t,a,f)}}}catch(f){dt(t,t.return,f)}if(t===e){oe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,oe=u;break}oe=t.return}}var M9=Math.ceil,Fu=hn.ReactCurrentDispatcher,Up=hn.ReactCurrentOwner,Yr=hn.ReactCurrentBatchConfig,Ce=0,qt=null,_t=null,Ht=0,Mr=0,Ys=Kn(0),$t=0,Cl=null,ws=0,_0=0,Gp=0,fl=null,mr=null,Wp=0,da=1/0,Gi=null,Bu=!1,yh=null,Ln=null,qo=!1,In=null,Vu=0,hl=0,vh=null,lu=-1,ou=0;function ar(){return Ce&6?wt():lu!==-1?lu:lu=wt()}function Rn(e){return e.mode&1?Ce&2&&Ht!==0?Ht&-Ht:c9.transition!==null?(ou===0&&(ou=m3()),ou):(e=Le,e!==0||(e=window.event,e=e===void 0?16:w3(e.type)),e):1}function ci(e,t,r,i){if(50<hl)throw hl=0,vh=null,Error(Y(185));Gl(e,r,i),(!(Ce&2)||e!==qt)&&(e===qt&&(!(Ce&2)&&(_0|=r),$t===4&&Mn(e,Ht)),xr(e,i),r===1&&Ce===0&&!(t.mode&1)&&(da=wt()+500,w0&&Jn()))}function xr(e,t){var r=e.callbackNode;cv(e,t);var i=_u(e,e===qt?Ht:0);if(i===0)r!==null&&mg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&mg(r),t===1)e.tag===0?u9(a1.bind(null,e)):F3(a1.bind(null,e)),s9(function(){!(Ce&6)&&Jn()}),r=null;else{switch(d3(i)){case 1:r=bp;break;case 4:r=h3;break;case 16:r=Su;break;case 536870912:r=p3;break;default:r=Su}r=L5(r,z5.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function z5(e,t){if(lu=-1,ou=0,Ce&6)throw Error(Y(327));var r=e.callbackNode;if(sa()&&e.callbackNode!==r)return null;var i=_u(e,e===qt?Ht:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ju(e,i);else{t=i;var n=Ce;Ce|=2;var s=$5();(qt!==e||Ht!==t)&&(Gi=null,da=wt()+500,ps(e,t));do try{I9();break}catch(u){C5(e,u)}while(!0);Cp(),Fu.current=s,Ce=n,_t!==null?t=0:(qt=null,Ht=0,t=$t)}if(t!==0){if(t===2&&(n=Uf(e),n!==0&&(i=n,t=bh(e,n))),t===1)throw r=Cl,ps(e,0),Mn(e,i),xr(e,wt()),r;if(t===6)Mn(e,i);else{if(n=e.current.alternate,!(i&30)&&!E9(n)&&(t=ju(e,i),t===2&&(s=Uf(e),s!==0&&(i=s,t=bh(e,s))),t===1))throw r=Cl,ps(e,0),Mn(e,i),xr(e,wt()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Y(345));case 2:as(e,mr,Gi);break;case 3:if(Mn(e,i),(i&130023424)===i&&(t=Wp+500-wt(),10<t)){if(_u(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){ar(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Jf(as.bind(null,e,mr,Gi),t);break}as(e,mr,Gi);break;case 4:if(Mn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var a=31-ui(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=wt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*M9(i/1960))-i,10<i){e.timeoutHandle=Jf(as.bind(null,e,mr,Gi),i);break}as(e,mr,Gi);break;case 5:as(e,mr,Gi);break;default:throw Error(Y(329))}}}return xr(e,wt()),e.callbackNode===r?z5.bind(null,e):null}function bh(e,t){var r=fl;return e.current.memoizedState.isDehydrated&&(ps(e,t).flags|=256),e=ju(e,t),e!==2&&(t=mr,mr=r,t!==null&&xh(t)),e}function xh(e){mr===null?mr=e:mr.push.apply(mr,e)}function E9(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!hi(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mn(e,t){for(t&=~Gp,t&=~_0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ui(t),i=1<<r;e[r]=-1,t&=~i}}function a1(e){if(Ce&6)throw Error(Y(327));sa();var t=_u(e,0);if(!(t&1))return xr(e,wt()),null;var r=ju(e,t);if(e.tag!==0&&r===2){var i=Uf(e);i!==0&&(t=i,r=bh(e,i))}if(r===1)throw r=Cl,ps(e,0),Mn(e,t),xr(e,wt()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,as(e,mr,Gi),xr(e,wt()),null}function Zp(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(da=wt()+500,w0&&Jn())}}function Ns(e){In!==null&&In.tag===0&&!(Ce&6)&&sa();var t=Ce;Ce|=1;var r=Yr.transition,i=Le;try{if(Yr.transition=null,Le=1,e)return e()}finally{Le=i,Yr.transition=r,Ce=t,!(Ce&6)&&Jn()}}function Qp(){Mr=Ys.current,Xe(Ys)}function ps(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,n9(r)),_t!==null)for(r=_t.return;r!==null;){var i=r;switch(Ap(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Iu();break;case 3:pa(),Xe(vr),Xe(er),Lp();break;case 5:qp(i);break;case 4:pa();break;case 13:Xe(ct);break;case 19:Xe(ct);break;case 10:$p(i.type._context);break;case 22:case 23:Qp()}r=r.return}if(qt=e,_t=e=Fn(e.current,null),Ht=Mr=t,$t=0,Cl=null,Gp=_0=ws=0,mr=fl=null,os!==null){for(t=0;t<os.length;t++)if(r=os[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=n,i.next=a}r.pending=i}os=null}return e}function C5(e,t){do{var r=_t;try{if(Cp(),nu.current=Ru,Lu){for(var i=ft.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Lu=!1}if(xs=0,Pt=At=ft=null,ul=!1,Al=0,Up.current=null,r===null||r.return===null){$t=1,Cl=t,_t=null;break}e:{var s=e,a=r.return,u=r,f=t;if(t=Ht,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,d=u,b=d.tag;if(!(d.mode&1)&&(b===0||b===11||b===15)){var x=d.alternate;x?(d.updateQueue=x.updateQueue,d.memoizedState=x.memoizedState,d.lanes=x.lanes):(d.updateQueue=null,d.memoizedState=null)}var I=Wg(a);if(I!==null){I.flags&=-257,Zg(I,a,u,s,t),I.mode&1&&Gg(s,p,t),t=I,f=p;var L=t.updateQueue;if(L===null){var O=new Set;O.add(f),t.updateQueue=O}else L.add(f);break e}else{if(!(t&1)){Gg(s,p,t),Yp();break e}f=Error(Y(426))}}else if(tt&&u.mode&1){var R=Wg(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Zg(R,a,u,s,t),Ip(ma(f,u));break e}}s=f=ma(f,u),$t!==4&&($t=2),fl===null?fl=[s]:fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var A=d5(s,f,t);Fg(s,A);break e;case 1:u=f;var M=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ln===null||!Ln.has(T)))){s.flags|=65536,t&=-t,s.lanes|=t;var q=g5(s,u,t);Fg(s,q);break e}}s=s.return}while(s!==null)}P5(r)}catch(W){t=W,_t===r&&r!==null&&(_t=r=r.return);continue}break}while(!0)}function $5(){var e=Fu.current;return Fu.current=Ru,e===null?Ru:e}function Yp(){($t===0||$t===3||$t===2)&&($t=4),qt===null||!(ws&268435455)&&!(_0&268435455)||Mn(qt,Ht)}function ju(e,t){var r=Ce;Ce|=2;var i=$5();(qt!==e||Ht!==t)&&(Gi=null,ps(e,t));do try{A9();break}catch(n){C5(e,n)}while(!0);if(Cp(),Ce=r,Fu.current=i,_t!==null)throw Error(Y(261));return qt=null,Ht=0,$t}function A9(){for(;_t!==null;)D5(_t)}function I9(){for(;_t!==null&&!tv();)D5(_t)}function D5(e){var t=q5(e.alternate,e,Mr);e.memoizedProps=e.pendingProps,t===null?P5(e):_t=t,Up.current=null}function P5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=k9(r,t),r!==null){r.flags&=32767,_t=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$t=6,_t=null;return}}else if(r=N9(r,t,Mr),r!==null){_t=r;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);$t===0&&($t=5)}function as(e,t,r){var i=Le,n=Yr.transition;try{Yr.transition=null,Le=1,z9(e,t,r,i)}finally{Yr.transition=n,Le=i}return null}function z9(e,t,r,i){do sa();while(In!==null);if(Ce&6)throw Error(Y(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(fv(e,s),e===qt&&(_t=qt=null,Ht=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qo||(qo=!0,L5(Su,function(){return sa(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Yr.transition,Yr.transition=null;var a=Le;Le=1;var u=Ce;Ce|=4,Up.current=null,_9(e,r),A5(r,e),Xv(Xf),Tu=!!Yf,Xf=Yf=null,e.current=r,T9(r),rv(),Ce=u,Le=a,Yr.transition=s}else e.current=r;if(qo&&(qo=!1,In=e,Vu=n),s=e.pendingLanes,s===0&&(Ln=null),sv(r.stateNode),xr(e,wt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Bu)throw Bu=!1,e=yh,yh=null,e;return Vu&1&&e.tag!==0&&sa(),s=e.pendingLanes,s&1?e===vh?hl++:(hl=0,vh=e):hl=0,Jn(),null}function sa(){if(In!==null){var e=d3(Vu),t=Yr.transition,r=Le;try{if(Yr.transition=null,Le=16>e?16:e,In===null)var i=!1;else{if(e=In,In=null,Vu=0,Ce&6)throw Error(Y(331));var n=Ce;for(Ce|=4,oe=e.current;oe!==null;){var s=oe,a=s.child;if(oe.flags&16){var u=s.deletions;if(u!==null){for(var f=0;f<u.length;f++){var p=u[f];for(oe=p;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:cl(8,d,s)}var b=d.child;if(b!==null)b.return=d,oe=b;else for(;oe!==null;){d=oe;var x=d.sibling,I=d.return;if(T5(d),d===p){oe=null;break}if(x!==null){x.return=I,oe=x;break}oe=I}}}var L=s.alternate;if(L!==null){var O=L.child;if(O!==null){L.child=null;do{var R=O.sibling;O.sibling=null,O=R}while(O!==null)}}oe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,oe=a;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cl(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,oe=A;break e}oe=s.return}}var M=e.current;for(oe=M;oe!==null;){a=oe;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,oe=T;else e:for(a=M;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:S0(9,u)}}catch(W){dt(u,u.return,W)}if(u===a){oe=null;break e}var q=u.sibling;if(q!==null){q.return=u.return,oe=q;break e}oe=u.return}}if(Ce=n,Jn(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(g0,e)}catch{}i=!0}return i}finally{Le=r,Yr.transition=t}}return!1}function l1(e,t,r){t=ma(r,t),t=d5(e,t,1),e=qn(e,t,1),t=ar(),e!==null&&(Gl(e,1,t),xr(e,t))}function dt(e,t,r){if(e.tag===3)l1(e,e,r);else for(;t!==null;){if(t.tag===3){l1(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ln===null||!Ln.has(i))){e=ma(r,e),e=g5(t,e,1),t=qn(t,e,1),e=ar(),t!==null&&(Gl(t,1,e),xr(t,e));break}}t=t.return}}function C9(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=ar(),e.pingedLanes|=e.suspendedLanes&r,qt===e&&(Ht&r)===r&&($t===4||$t===3&&(Ht&130023424)===Ht&&500>wt()-Wp?ps(e,0):Gp|=r),xr(e,t)}function O5(e,t){t===0&&(e.mode&1?(t=Mo,Mo<<=1,!(Mo&130023424)&&(Mo=4194304)):t=1);var r=ar();e=un(e,t),e!==null&&(Gl(e,t,r),xr(e,r))}function $9(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),O5(e,r)}function D9(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(t),O5(e,r)}var q5;q5=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vr.current)yr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yr=!1,w9(e,t,r);yr=!!(e.flags&131072)}else yr=!1,tt&&t.flags&1048576&&B3(t,$u,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;au(e,t),e=t.pendingProps;var n=ca(t,er.current);na(t,r),n=Fp(null,t,i,e,n,r);var s=Bp();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,br(i)?(s=!0,zu(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Pp(t),n.updater=k0,t.stateNode=n,n._reactInternals=t,ah(t,i,e,r),t=uh(null,t,i,!0,s,r)):(t.tag=0,tt&&s&&Ep(t),nr(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(au(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=O9(i),e=ni(i,e),n){case 0:t=oh(null,t,i,e,r);break e;case 1:t=Xg(null,t,i,e,r);break e;case 11:t=Qg(null,t,i,e,r);break e;case 14:t=Yg(null,t,i,ni(i.type,e),r);break e}throw Error(Y(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),oh(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Xg(e,t,i,n,r);case 3:e:{if(x5(t),e===null)throw Error(Y(387));i=t.pendingProps,s=t.memoizedState,n=s.element,W3(e,t),Ou(t,i,null,r);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=ma(Error(Y(423)),t),t=Kg(e,t,i,r,n);break e}else if(i!==n){n=ma(Error(Y(424)),t),t=Kg(e,t,i,r,n);break e}else for(zr=On(t.stateNode.containerInfo.firstChild),Cr=t,tt=!0,ai=null,r=U3(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fa(),i===n){t=cn(e,t,r);break e}nr(e,t,i,r)}t=t.child}return t;case 5:return Z3(t),e===null&&ih(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,Kf(i,n)?a=null:s!==null&&Kf(i,s)&&(t.flags|=32),b5(e,t),nr(e,t,a,r),t.child;case 6:return e===null&&ih(t),null;case 13:return w5(e,t,r);case 4:return Op(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ha(t,null,i,r):nr(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),Qg(e,t,i,n,r);case 7:return nr(e,t,t.pendingProps,r),t.child;case 8:return nr(e,t,t.pendingProps.children,r),t.child;case 12:return nr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,Ge(Du,i._currentValue),i._currentValue=a,s!==null)if(hi(s.value,a)){if(s.children===n.children&&!vr.current){t=cn(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var f=u.firstContext;f!==null;){if(f.context===i){if(s.tag===1){f=nn(-1,r&-r),f.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var d=p.pending;d===null?f.next=f:(f.next=d.next,d.next=f),p.pending=f}}s.lanes|=r,f=s.alternate,f!==null&&(f.lanes|=r),nh(s.return,r,t),u.lanes|=r;break}f=f.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Y(341));a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),nh(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}nr(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,na(t,r),n=Xr(n),i=i(n),t.flags|=1,nr(e,t,i,r),t.child;case 14:return i=t.type,n=ni(i,t.pendingProps),n=ni(i.type,n),Yg(e,t,i,n,r);case 15:return y5(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:ni(i,n),au(e,t),t.tag=1,br(i)?(e=!0,zu(t)):e=!1,na(t,r),m5(t,i,n),ah(t,i,n,r),uh(null,t,i,!0,e,r);case 19:return N5(e,t,r);case 22:return v5(e,t,r)}throw Error(Y(156,t.tag))};function L5(e,t){return f3(e,t)}function P9(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(e,t,r,i){return new P9(e,t,r,i)}function Xp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O9(e){if(typeof e=="function")return Xp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gp)return 11;if(e===yp)return 14}return 2}function Fn(e,t){var r=e.alternate;return r===null?(r=Qr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function uu(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")Xp(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Fs:return ms(r.children,n,s,t);case dp:a=8,n|=8;break;case If:return e=Qr(12,r,t,n|2),e.elementType=If,e.lanes=s,e;case zf:return e=Qr(13,r,t,n),e.elementType=zf,e.lanes=s,e;case Cf:return e=Qr(19,r,t,n),e.elementType=Cf,e.lanes=s,e;case Z4:return T0(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G4:a=10;break e;case W4:a=9;break e;case gp:a=11;break e;case yp:a=14;break e;case kn:a=16,i=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Qr(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function ms(e,t,r,i){return e=Qr(7,e,i,t),e.lanes=r,e}function T0(e,t,r,i){return e=Qr(22,e,i,t),e.elementType=Z4,e.lanes=r,e.stateNode={isHidden:!1},e}function Kc(e,t,r){return e=Qr(6,e,null,t),e.lanes=r,e}function Jc(e,t,r){return t=Qr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q9(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$c(0),this.expirationTimes=$c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$c(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Kp(e,t,r,i,n,s,a,u,f){return e=new q9(e,t,r,u,f),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Qr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pp(s),e}function L9(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function R5(e){if(!e)return Wn;e=e._reactInternals;e:{if(Ss(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(br(r))return R3(e,r,t)}return t}function F5(e,t,r,i,n,s,a,u,f){return e=Kp(r,i,!0,e,n,s,a,u,f),e.context=R5(null),r=e.current,i=ar(),n=Rn(r),s=nn(i,n),s.callback=t??null,qn(r,s,n),e.current.lanes=n,Gl(e,n,i),xr(e,i),e}function M0(e,t,r,i){var n=t.current,s=ar(),a=Rn(n);return r=R5(r),t.context===null?t.context=r:t.pendingContext=r,t=nn(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=qn(n,t,a),e!==null&&(ci(e,n,a,s),iu(e,n,a)),a}function Hu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function o1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Jp(e,t){o1(e,t),(e=e.alternate)&&o1(e,t)}function R9(){return null}var B5=typeof reportError=="function"?reportError:function(e){console.error(e)};function em(e){this._internalRoot=e}E0.prototype.render=em.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));M0(e,t,null,null)};E0.prototype.unmount=em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ns(function(){M0(null,e,null,null)}),t[on]=null}};function E0(e){this._internalRoot=e}E0.prototype.unstable_scheduleHydration=function(e){if(e){var t=v3();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Tn.length&&t!==0&&t<Tn[r].priority;r++);Tn.splice(r,0,e),r===0&&x3(e)}};function tm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function A0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function u1(){}function F9(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var p=Hu(a);s.call(p)}}var a=F5(t,i,e,0,null,!1,!1,"",u1);return e._reactRootContainer=a,e[on]=a.current,Sl(e.nodeType===8?e.parentNode:e),Ns(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var u=i;i=function(){var p=Hu(f);u.call(p)}}var f=Kp(e,0,!1,null,null,!1,!1,"",u1);return e._reactRootContainer=f,e[on]=f.current,Sl(e.nodeType===8?e.parentNode:e),Ns(function(){M0(t,f,r,i)}),f}function I0(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var u=n;n=function(){var f=Hu(a);u.call(f)}}M0(t,a,e,n)}else a=F9(r,t,e,n,i);return Hu(a)}g3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ka(t.pendingLanes);r!==0&&(xp(t,r|1),xr(t,wt()),!(Ce&6)&&(da=wt()+500,Jn()))}break;case 13:Ns(function(){var i=un(e,1);if(i!==null){var n=ar();ci(i,e,1,n)}}),Jp(e,1)}};wp=function(e){if(e.tag===13){var t=un(e,134217728);if(t!==null){var r=ar();ci(t,e,134217728,r)}Jp(e,134217728)}};y3=function(e){if(e.tag===13){var t=Rn(e),r=un(e,t);if(r!==null){var i=ar();ci(r,e,t,i)}Jp(e,t)}};v3=function(){return Le};b3=function(e,t){var r=Le;try{return Le=e,t()}finally{Le=r}};Vf=function(e,t,r){switch(t){case"input":if(Pf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=x0(i);if(!n)throw Error(Y(90));Y4(i),Pf(i,n)}}}break;case"textarea":K4(e,r);break;case"select":t=r.value,t!=null&&ea(e,!!r.multiple,t,!1)}};s3=Zp;a3=Ns;var B9={usingClientEntryPoint:!1,Events:[Zl,Hs,x0,i3,n3,Zp]},La={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V9={bundleType:La.bundleType,version:La.version,rendererPackageName:La.rendererPackageName,rendererConfig:La.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=u3(e),e===null?null:e.stateNode},findFiberByHostInstance:La.findFiberByHostInstance||R9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{g0=Lo.inject(V9),Ei=Lo}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B9;Pr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tm(t))throw Error(Y(200));return L9(e,t,null,r)};Pr.createRoot=function(e,t){if(!tm(e))throw Error(Y(299));var r=!1,i="",n=B5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Kp(e,1,!1,null,null,r,!1,i,n),e[on]=t.current,Sl(e.nodeType===8?e.parentNode:e),new em(t)};Pr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=u3(t),e=e===null?null:e.stateNode,e};Pr.flushSync=function(e){return Ns(e)};Pr.hydrate=function(e,t,r){if(!A0(t))throw Error(Y(200));return I0(null,e,t,!0,r)};Pr.hydrateRoot=function(e,t,r){if(!tm(e))throw Error(Y(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",a=B5;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=F5(t,null,e,1,r??null,n,!1,s,a),e[on]=t.current,Sl(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new E0(t)};Pr.render=function(e,t,r){if(!A0(t))throw Error(Y(200));return I0(null,e,t,!1,r)};Pr.unmountComponentAtNode=function(e){if(!A0(e))throw Error(Y(40));return e._reactRootContainer?(Ns(function(){I0(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};Pr.unstable_batchedUpdates=Zp;Pr.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!A0(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return I0(e,t,r,!1,i)};Pr.version="18.3.1-next-f1338f8080-20240426";function V5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V5)}catch(e){console.error(e)}}V5(),V4.exports=Pr;var j9=V4.exports,c1=j9;Ef.createRoot=c1.createRoot,Ef.hydrateRoot=c1.hydrateRoot;var et={};function H9(e){return e&&typeof e=="object"&&"because"in e&&"value"in e}function U9(e){return e&&typeof e=="object"&&e._tag==="boxed-rule"}var Qt=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},Br=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},G9=function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},W9=function(e,t){var r=Math.abs(e),i=Math.abs(t);return r<3e3&&i<3e3?Math.sqrt(r*r+i*i):(r<i?(r=i,i=e/t):i=t/e,r*Math.sqrt(1+i*i))},zs=function(){throw SyntaxError("Invalid Param")};function ef(e,t){var r=Math.abs(e),i=Math.abs(t);return e===0?Math.log(i):t===0?Math.log(r):r<3e3&&i<3e3?Math.log(e*e+t*t)*.5:(e=e/2,t=t/2,.5*Math.log(e*e+t*t)+Math.LN2)}var Z9=function(e,t){var r={re:0,im:0};if(e==null)r.re=r.im=0;else if(t!==void 0)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return je.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return je.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else e.length===2?(r.re=e[0],r.im=e[1]):zs();break;case"string":r.im=r.re=0;var i=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),n=1,s=0;i===null&&zs();for(var a=0;a<i.length;a++){var u=i[a];u===" "||u==="	"||u===`
`||(u==="+"?n++:u==="-"?s++:u==="i"||u==="I"?(n+s===0&&zs(),i[a+1]!==" "&&!isNaN(Number(i[a+1]))?(r.im+=parseFloat((s%2?"-":"")+i[a+1]),a++):r.im+=parseFloat((s%2?"-":"")+"1"),n=s=0):((n+s===0||isNaN(Number(u)))&&zs(),i[a+1]==="i"||i[a+1]==="I"?(r.im+=parseFloat((s%2?"-":"")+u),a++):r.re+=parseFloat((s%2?"-":"")+u),n=s=0))}n+s>0&&zs();break;case"number":r.im=0,r.re=e;break;default:zs()}return isNaN(r.re)||isNaN(r.im),r},je=class X{constructor(t,r){this.re=0,this.im=0;var i=Z9(t,r);this.re=i.re,this.im=i.im}sign(){var t=this.abs();return new X(this.re/t,this.im/t)}add(t,r){var i=new X(t,r);return this.isInfinite()&&i.isInfinite()?X.NAN:this.isInfinite()||i.isInfinite()?X.INFINITY:new X(this.re+i.re,this.im+i.im)}sub(t,r){var i=new X(t,r);return this.isInfinite()&&i.isInfinite()?X.NAN:this.isInfinite()||i.isInfinite()?X.INFINITY:new X(this.re-i.re,this.im-i.im)}mul(t,r){var i=new X(t,r);return this.isInfinite()&&i.isZero()||this.isZero()&&i.isInfinite()?X.NAN:this.isInfinite()||i.isInfinite()?X.INFINITY:i.im===0&&this.im===0?new X(this.re*i.re,0):new X(this.re*i.re-this.im*i.im,this.re*i.im+this.im*i.re)}div(t,r){var i=new X(t,r);if(this.isZero()&&i.isZero()||this.isInfinite()&&i.isInfinite())return X.NAN;if(this.isInfinite()||i.isZero())return X.INFINITY;if(this.isZero()||i.isInfinite())return X.ZERO;t=this.re,r=this.im;var n=i.re,s=i.im,a,u;return s===0?new X(t/n,r/n):Math.abs(n)<Math.abs(s)?(u=n/s,a=n*u+s,new X((t*u+r)/a,(r*u-t)/a)):(u=s/n,a=s*u+n,new X((t+r*u)/a,(r-t*u)/a))}pow(t,r){var i=new X(t,r);if(t=this.re,r=this.im,i.isZero())return X.ONE;if(i.im===0){if(r===0&&t>0)return new X(Math.pow(t,i.re),0);if(t===0)switch((i.re%4+4)%4){case 0:return new X(Math.pow(r,i.re),0);case 1:return new X(0,Math.pow(r,i.re));case 2:return new X(-Math.pow(r,i.re),0);case 3:return new X(0,-Math.pow(r,i.re))}}if(t===0&&r===0&&i.re>0&&i.im>=0)return X.ZERO;var n=Math.atan2(r,t),s=ef(t,r);return t=Math.exp(i.re*s-i.im*n),r=i.im*s+i.re*n,new X(t*Math.cos(r),t*Math.sin(r))}sqrt(){var t=this.re,r=this.im,i=this.abs(),n,s;if(t>=0){if(r===0)return new X(Math.sqrt(t),0);n=.5*Math.sqrt(2*(i+t))}else n=Math.abs(r)/Math.sqrt(2*(i-t));return t<=0?s=.5*Math.sqrt(2*(i-t)):s=Math.abs(r)/Math.sqrt(2*(i+t)),new X(n,r<0?-s:s)}exp(){var t=Math.exp(this.re);return this.im,new X(t*Math.cos(this.im),t*Math.sin(this.im))}expm1(){var t=this.re,r=this.im;return new X(Math.expm1(t)*Math.cos(r)+G9(r),Math.exp(t)*Math.sin(r))}log(){var t=this.re,r=this.im;return new X(ef(t,r),Math.atan2(r,t))}abs(){return W9(this.re,this.im)}arg(){return Math.atan2(this.im,this.re)}sin(){var t=this.re,r=this.im;return new X(Math.sin(t)*Qt(r),Math.cos(t)*Br(r))}cos(){var t=this.re,r=this.im;return new X(Math.cos(t)*Qt(r),-Math.sin(t)*Br(r))}tan(){var t=2*this.re,r=2*this.im,i=Math.cos(t)+Qt(r);return new X(Math.sin(t)/i,Br(r)/i)}cot(){var t=2*this.re,r=2*this.im,i=Math.cos(t)-Qt(r);return new X(-Math.sin(t)/i,Br(r)/i)}sec(){var t=this.re,r=this.im,i=.5*Qt(2*r)+.5*Math.cos(2*t);return new X(Math.cos(t)*Qt(r)/i,Math.sin(t)*Br(r)/i)}csc(){var t=this.re,r=this.im,i=.5*Qt(2*r)-.5*Math.cos(2*t);return new X(Math.sin(t)*Qt(r)/i,-Math.cos(t)*Br(r)/i)}asin(){var t=this.re,r=this.im,i=new X(r*r-t*t+1,-2*t*r).sqrt(),n=new X(i.re-r,i.im+t).log();return new X(n.im,-n.re)}acos(){var t=this.re,r=this.im,i=new X(r*r-t*t+1,-2*t*r).sqrt(),n=new X(i.re-r,i.im+t).log();return new X(Math.PI/2-n.im,n.re)}atan(){var t=this.re,r=this.im;if(t===0){if(r===1)return new X(0,1/0);if(r===-1)return new X(0,-1/0)}var i=t*t+(1-r)*(1-r),n=new X((1-r*r-t*t)/i,-2*t/i).log();return new X(-.5*n.im,.5*n.re)}acot(){var t=this.re,r=this.im;if(r===0)return new X(Math.atan2(1,t),0);var i=t*t+r*r;return i!==0?new X(t/i,-r/i).atan():new X(t!==0?t/0:0,r!==0?-r/0:0).atan()}asec(){var t=this.re,r=this.im;if(t===0&&r===0)return new X(0,1/0);var i=t*t+r*r;return i!==0?new X(t/i,-r/i).acos():new X(t!==0?t/0:0,r!==0?-r/0:0).acos()}acsc(){var t=this.re,r=this.im;if(t===0&&r===0)return new X(Math.PI/2,1/0);var i=t*t+r*r;return i!==0?new X(t/i,-r/i).asin():new X(t!==0?t/0:0,r!==0?-r/0:0).asin()}sinh(){var t=this.re,r=this.im;return new X(Br(t)*Math.cos(r),Qt(t)*Math.sin(r))}cosh(){var t=this.re,r=this.im;return new X(Qt(t)*Math.cos(r),Br(t)*Math.sin(r))}tanh(){var t=2*this.re,r=2*this.im,i=Qt(t)+Math.cos(r);return new X(Br(t)/i,Math.sin(r)/i)}coth(){var t=2*this.re,r=2*this.im,i=Qt(t)-Math.cos(r);return new X(Br(t)/i,-Math.sin(r)/i)}csch(){var t=this.re,r=this.im,i=Math.cos(2*r)-Qt(2*t);return new X(-2*Br(t)*Math.cos(r)/i,2*Qt(t)*Math.sin(r)/i)}sech(){var t=this.re,r=this.im,i=Math.cos(2*r)+Qt(2*t);return new X(2*Qt(t)*Math.cos(r)/i,-2*Br(t)*Math.sin(r)/i)}asinh(){var t=this.im;this.im=-this.re,this.re=t;var r=this.asin();return this.re=-this.im,this.im=t,t=r.re,r.re=-r.im,r.im=t,r}acosh(){var t=this.acos();if(t.im<=0){var r=t.re;t.re=-t.im,t.im=r}else{var r=t.im;t.im=-t.re,t.re=r}return t}atanh(){var t=this.re,r=this.im,i=t>1&&r===0,n=1-t,s=1+t,a=n*n+r*r,u=a!==0?new X((s*n-r*r)/a,(r*n+s*r)/a):new X(t!==-1?t/0:0,r!==0?r/0:0),f=u.re;return u.re=ef(u.re,u.im)/2,u.im=Math.atan2(u.im,f)/2,i&&(u.im=-u.im),u}acoth(){var t=this.re,r=this.im;if(t===0&&r===0)return new X(0,Math.PI/2);var i=t*t+r*r;return i!==0?new X(t/i,-r/i).atanh():new X(t!==0?t/0:0,r!==0?-r/0:0).atanh()}acsch(){var t=this.re,r=this.im;if(r===0)return new X(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var i=t*t+r*r;return i!==0?new X(t/i,-r/i).asinh():new X(t!==0?t/0:0,r!==0?-r/0:0).asinh()}asech(){var t=this.re,r=this.im;if(this.isZero())return X.INFINITY;var i=t*t+r*r;return i!==0?new X(t/i,-r/i).acosh():new X(t!==0?t/0:0,r!==0?-r/0:0).acosh()}inverse(){if(this.isZero())return X.INFINITY;if(this.isInfinite())return X.ZERO;var t=this.re,r=this.im,i=t*t+r*r;return new X(t/i,-r/i)}conjugate(){return new X(this.re,-this.im)}neg(){return new X(-this.re,-this.im)}ceil(t){return t=Math.pow(10,t||0),new X(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)}floor(t){return t=Math.pow(10,t||0),new X(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)}round(t){return t=Math.pow(10,t||0),new X(Math.round(this.re*t)/t,Math.round(this.im*t)/t)}equals(t,r){var i=new X(t,r);return Math.abs(i.re-this.re)<=X.EPSILON&&Math.abs(i.im-this.im)<=X.EPSILON}clone(){return new X(this.re,this.im)}toString(){var t=this.re,r=this.im,i="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<X.EPSILON&&(t=0),Math.abs(r)<X.EPSILON&&(r=0),r===0?i+t:(t!==0?(i+=t,i+=" ",r<0?(r=-r,i+="-"):i+="+",i+=" "):r<0&&(r=-r,i+="-"),r!==1&&(i+=r),i+"i"))}toVector(){return[this.re,this.im]}valueOf(){return this.im===0?this.re:null}isNaN(){return isNaN(this.re)||isNaN(this.im)}isZero(){return this.im===0&&this.re===0}isFinite(){return isFinite(this.re)&&isFinite(this.im)}isInfinite(){return!(this.isNaN()||this.isFinite())}};je.ZERO=new je(0,0);je.ONE=new je(1,0);je.I=new je(0,1);je.PI=new je(Math.PI,0);je.E=new je(Math.E,0);je.INFINITY=new je(1/0,1/0);je.NAN=new je(NaN,NaN);je.EPSILON=1e-15;var Xs=9e15,es=1e9,wh="0123456789abcdef",Uu="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Gu="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Nh={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Xs,maxE:Xs,crypto:!1},j5,en,ye=!0,z0="[DecimalError] ",Zn=z0+"Invalid argument: ",H5=z0+"Precision limit exceeded",U5=z0+"crypto unavailable",G5="[object Decimal]",tr=Math.floor,It=Math.pow,Q9=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Y9=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,X9=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,W5=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fi=1e7,de=7,K9=9007199254740991,J9=Uu.length-1,kh=Gu.length-1,H={toStringTag:G5};H.absoluteValue=H.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),pe(e)};H.ceil=function(){return pe(new this.constructor(this),this.e+1,2)};H.clampedTo=H.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Zn+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};H.comparedTo=H.cmp=function(e){var t,r,i,n,s=this,a=s.d,u=(e=new s.constructor(e)).d,f=s.s,p=e.s;if(!a||!u)return!f||!p?NaN:f!==p?f:a===u?0:!a^f<0?1:-1;if(!a[0]||!u[0])return a[0]?f:u[0]?-p:0;if(f!==p)return f;if(s.e!==e.e)return s.e>e.e^f<0?1:-1;for(i=a.length,n=u.length,t=0,r=i<n?i:n;t<r;++t)if(a[t]!==u[t])return a[t]>u[t]^f<0?1:-1;return i===n?0:i>n^f<0?1:-1};H.cosine=H.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+de,i.rounding=1,r=eb(i,K5(i,r)),i.precision=e,i.rounding=t,pe(en==2||en==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};H.cubeRoot=H.cbrt=function(){var e,t,r,i,n,s,a,u,f,p,d=this,b=d.constructor;if(!d.isFinite()||d.isZero())return new b(d);for(ye=!1,s=d.s*It(d.s*d,1/3),!s||Math.abs(s)==1/0?(r=jt(d.d),e=d.e,(s=(e-r.length+1)%3)&&(r+=s==1||s==-2?"0":"00"),s=It(r,1/3),e=tr((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new b(r),i.s=d.s):i=new b(s.toString()),a=(e=b.precision)+3;;)if(u=i,f=u.times(u).times(u),p=f.plus(d),i=Ve(p.plus(d).times(u),p.plus(f),a+2,1),jt(u.d).slice(0,a)===(r=jt(i.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!n&&r=="4999"){if(!n&&(pe(u,e+1,0),u.times(u).times(u).eq(d))){i=u;break}a+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(pe(i,e+1,1),t=!i.times(i).times(i).eq(d));break}return ye=!0,pe(i,e,b.rounding,t)};H.decimalPlaces=H.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-tr(this.e/de))*de,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};H.dividedBy=H.div=function(e){return Ve(this,new this.constructor(e))};H.dividedToIntegerBy=H.divToInt=function(e){var t=this,r=t.constructor;return pe(Ve(t,new r(e),0,1,1),r.precision,r.rounding)};H.equals=H.eq=function(e){return this.cmp(e)===0};H.floor=function(){return pe(new this.constructor(this),this.e+1,3)};H.greaterThan=H.gt=function(e){return this.cmp(e)>0};H.greaterThanOrEqualTo=H.gte=function(e){var t=this.cmp(e);return t==1||t===0};H.hyperbolicCosine=H.cosh=function(){var e,t,r,i,n,s=this,a=s.constructor,u=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return u;r=a.precision,i=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,n=s.d.length,n<32?(e=Math.ceil(n/3),t=(1/$0(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=ga(a,1,s.times(t),new a(1),!0);for(var f,p=e,d=new a(8);p--;)f=s.times(s),s=u.minus(f.times(d.minus(f.times(d))));return pe(s,a.precision=r,a.rounding=i,!0)};H.hyperbolicSine=H.sinh=function(){var e,t,r,i,n=this,s=n.constructor;if(!n.isFinite()||n.isZero())return new s(n);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(n.e,n.sd())+4,s.rounding=1,i=n.d.length,i<3)n=ga(s,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/$0(5,e)),n=ga(s,2,n,n,!0);for(var a,u=new s(5),f=new s(16),p=new s(20);e--;)a=n.times(n),n=n.times(u.plus(a.times(f.times(a).plus(p))))}return s.precision=t,s.rounding=r,pe(n,t,r,!0)};H.hyperbolicTangent=H.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,Ve(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};H.inverseCosine=H.acos=function(){var e,t=this,r=t.constructor,i=t.abs().cmp(1),n=r.precision,s=r.rounding;return i!==-1?i===0?t.isNeg()?oi(r,n,s):new r(0):new r(NaN):t.isZero()?oi(r,n+4,s).times(.5):(r.precision=n+6,r.rounding=1,t=t.asin(),e=oi(r,n+4,s).times(.5),r.precision=n,r.rounding=s,e.minus(t))};H.inverseHyperbolicCosine=H.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,ye=!1,r=r.times(r).minus(1).sqrt().plus(r),ye=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};H.inverseHyperbolicSine=H.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,ye=!1,r=r.times(r).plus(1).sqrt().plus(r),ye=!0,i.precision=e,i.rounding=t,r.ln())};H.inverseHyperbolicTangent=H.atanh=function(){var e,t,r,i,n=this,s=n.constructor;return n.isFinite()?n.e>=0?new s(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=s.precision,t=s.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?pe(new s(n),e,t,!0):(s.precision=r=i-n.e,n=Ve(n.plus(1),new s(1).minus(n),r+e,1),s.precision=e+4,s.rounding=1,n=n.ln(),s.precision=e,s.rounding=t,n.times(.5))):new s(NaN)};H.inverseSine=H.asin=function(){var e,t,r,i,n=this,s=n.constructor;return n.isZero()?new s(n):(t=n.abs().cmp(1),r=s.precision,i=s.rounding,t!==-1?t===0?(e=oi(s,r+4,i).times(.5),e.s=n.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,n=n.div(new s(1).minus(n.times(n)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=i,n.times(2)))};H.inverseTangent=H.atan=function(){var e,t,r,i,n,s,a,u,f,p=this,d=p.constructor,b=d.precision,x=d.rounding;if(p.isFinite()){if(p.isZero())return new d(p);if(p.abs().eq(1)&&b+4<=kh)return a=oi(d,b+4,x).times(.25),a.s=p.s,a}else{if(!p.s)return new d(NaN);if(b+4<=kh)return a=oi(d,b+4,x).times(.5),a.s=p.s,a}for(d.precision=u=b+10,d.rounding=1,r=Math.min(28,u/de+2|0),e=r;e;--e)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ye=!1,t=Math.ceil(u/de),i=1,f=p.times(p),a=new d(p),n=p;e!==-1;)if(n=n.times(f),s=a.minus(n.div(i+=2)),n=n.times(f),a=s.plus(n.div(i+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===s.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),ye=!0,pe(a,d.precision=b,d.rounding=x,!0)};H.isFinite=function(){return!!this.d};H.isInteger=H.isInt=function(){return!!this.d&&tr(this.e/de)>this.d.length-2};H.isNaN=function(){return!this.s};H.isNegative=H.isNeg=function(){return this.s<0};H.isPositive=H.isPos=function(){return this.s>0};H.isZero=function(){return!!this.d&&this.d[0]===0};H.lessThan=H.lt=function(e){return this.cmp(e)<0};H.lessThanOrEqualTo=H.lte=function(e){return this.cmp(e)<1};H.logarithm=H.log=function(e){var t,r,i,n,s,a,u,f,p=this,d=p.constructor,b=d.precision,x=d.rounding,I=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new d(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(n=r[0];n%10===0;)n/=10;s=n!==1}if(ye=!1,u=b+I,a=zn(p,u),i=t?Wu(d,u+10):zn(e,u),f=Ve(a,i,u,1),$l(f.d,n=b,x))do if(u+=10,a=zn(p,u),i=t?Wu(d,u+10):zn(e,u),f=Ve(a,i,u,1),!s){+jt(f.d).slice(n+1,n+15)+1==1e14&&(f=pe(f,b+1,0));break}while($l(f.d,n+=10,x));return ye=!0,pe(f,b,x)};H.minus=H.sub=function(e){var t,r,i,n,s,a,u,f,p,d,b,x,I=this,L=I.constructor;if(e=new L(e),!I.d||!e.d)return!I.s||!e.s?e=new L(NaN):I.d?e.s=-e.s:e=new L(e.d||I.s!==e.s?I:NaN),e;if(I.s!=e.s)return e.s=-e.s,I.plus(e);if(p=I.d,x=e.d,u=L.precision,f=L.rounding,!p[0]||!x[0]){if(x[0])e.s=-e.s;else if(p[0])e=new L(I);else return new L(f===3?-0:0);return ye?pe(e,u,f):e}if(r=tr(e.e/de),d=tr(I.e/de),p=p.slice(),s=d-r,s){for(b=s<0,b?(t=p,s=-s,a=x.length):(t=x,r=d,a=p.length),i=Math.max(Math.ceil(u/de),a)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=p.length,a=x.length,b=i<a,b&&(a=i),i=0;i<a;i++)if(p[i]!=x[i]){b=p[i]<x[i];break}s=0}for(b&&(t=p,p=x,x=t,e.s=-e.s),a=p.length,i=x.length-a;i>0;--i)p[a++]=0;for(i=x.length;i>s;){if(p[--i]<x[i]){for(n=i;n&&p[--n]===0;)p[n]=fi-1;--p[n],p[i]+=fi}p[i]-=x[i]}for(;p[--a]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(e.d=p,e.e=C0(p,r),ye?pe(e,u,f):e):new L(f===3?-0:0)};H.modulo=H.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?pe(new i(r),i.precision,i.rounding):(ye=!1,i.modulo==9?(t=Ve(r,e.abs(),0,3,1),t.s*=e.s):t=Ve(r,e,0,i.modulo,1),t=t.times(e),ye=!0,r.minus(t))};H.naturalExponential=H.exp=function(){return Sh(this)};H.naturalLogarithm=H.ln=function(){return zn(this)};H.negated=H.neg=function(){var e=new this.constructor(this);return e.s=-e.s,pe(e)};H.plus=H.add=function(e){var t,r,i,n,s,a,u,f,p,d,b=this,x=b.constructor;if(e=new x(e),!b.d||!e.d)return!b.s||!e.s?e=new x(NaN):b.d||(e=new x(e.d||b.s===e.s?b:NaN)),e;if(b.s!=e.s)return e.s=-e.s,b.minus(e);if(p=b.d,d=e.d,u=x.precision,f=x.rounding,!p[0]||!d[0])return d[0]||(e=new x(b)),ye?pe(e,u,f):e;if(s=tr(b.e/de),i=tr(e.e/de),p=p.slice(),n=s-i,n){for(n<0?(r=p,n=-n,a=d.length):(r=d,i=s,a=p.length),s=Math.ceil(u/de),a=s>a?s+1:a+1,n>a&&(n=a,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(a=p.length,n=d.length,a-n<0&&(n=a,r=d,d=p,p=r),t=0;n;)t=(p[--n]=p[n]+d[n]+t)/fi|0,p[n]%=fi;for(t&&(p.unshift(t),++i),a=p.length;p[--a]==0;)p.pop();return e.d=p,e.e=C0(p,i),ye?pe(e,u,f):e};H.precision=H.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Zn+e);return r.d?(t=Z5(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};H.round=function(){var e=this,t=e.constructor;return pe(new t(e),e.e+1,t.rounding)};H.sine=H.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+de,i.rounding=1,r=rb(i,K5(i,r)),i.precision=e,i.rounding=t,pe(en>2?r.neg():r,e,t,!0)):new i(NaN)};H.squareRoot=H.sqrt=function(){var e,t,r,i,n,s,a=this,u=a.d,f=a.e,p=a.s,d=a.constructor;if(p!==1||!u||!u[0])return new d(!p||p<0&&(!u||u[0])?NaN:u?a:1/0);for(ye=!1,p=Math.sqrt(+a),p==0||p==1/0?(t=jt(u),(t.length+f)%2==0&&(t+="0"),p=Math.sqrt(t),f=tr((f+1)/2)-(f<0||f%2),p==1/0?t="5e"+f:(t=p.toExponential(),t=t.slice(0,t.indexOf("e")+1)+f),i=new d(t)):i=new d(p.toString()),r=(f=d.precision)+3;;)if(s=i,i=s.plus(Ve(a,s,r+2,1)).times(.5),jt(s.d).slice(0,r)===(t=jt(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(pe(s,f+1,0),s.times(s).eq(a))){i=s;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(pe(i,f+1,1),e=!i.times(i).eq(a));break}return ye=!0,pe(i,f,d.rounding,e)};H.tangent=H.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=Ve(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,pe(en==2||en==4?r.neg():r,e,t,!0)):new i(NaN)};H.times=H.mul=function(e){var t,r,i,n,s,a,u,f,p,d=this,b=d.constructor,x=d.d,I=(e=new b(e)).d;if(e.s*=d.s,!x||!x[0]||!I||!I[0])return new b(!e.s||x&&!x[0]&&!I||I&&!I[0]&&!x?NaN:!x||!I?e.s/0:e.s*0);for(r=tr(d.e/de)+tr(e.e/de),f=x.length,p=I.length,f<p&&(s=x,x=I,I=s,a=f,f=p,p=a),s=[],a=f+p,i=a;i--;)s.push(0);for(i=p;--i>=0;){for(t=0,n=f+i;n>i;)u=s[n]+I[i]*x[n-i-1]+t,s[n--]=u%fi|0,t=u/fi|0;s[n]=(s[n]+t)%fi|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=C0(s,r),ye?pe(e,b.precision,b.rounding):e};H.toBinary=function(e,t){return rm(this,2,e,t)};H.toDecimalPlaces=H.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(wr(e,0,es),t===void 0?t=i.rounding:wr(t,0,8),pe(r,e+r.e+1,t))};H.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Ci(i,!0):(wr(e,0,es),t===void 0?t=n.rounding:wr(t,0,8),i=pe(new n(i),e+1,t),r=Ci(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};H.toFixed=function(e,t){var r,i,n=this,s=n.constructor;return e===void 0?r=Ci(n):(wr(e,0,es),t===void 0?t=s.rounding:wr(t,0,8),i=pe(new s(n),e+n.e+1,t),r=Ci(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};H.toFraction=function(e){var t,r,i,n,s,a,u,f,p,d,b,x,I=this,L=I.d,O=I.constructor;if(!L)return new O(I);if(p=r=new O(1),i=f=new O(0),t=new O(i),s=t.e=Z5(L)-I.e-1,a=s%de,t.d[0]=It(10,a<0?de+a:a),e==null)e=s>0?t:p;else{if(u=new O(e),!u.isInt()||u.lt(p))throw Error(Zn+u);e=u.gt(t)?s>0?t:p:u}for(ye=!1,u=new O(jt(L)),d=O.precision,O.precision=s=L.length*de*2;b=Ve(u,t,0,1,1),n=r.plus(b.times(i)),n.cmp(e)!=1;)r=i,i=n,n=p,p=f.plus(b.times(n)),f=n,n=t,t=u.minus(b.times(n)),u=n;return n=Ve(e.minus(r),i,0,1,1),f=f.plus(n.times(p)),r=r.plus(n.times(i)),f.s=p.s=I.s,x=Ve(p,i,s,1).minus(I).abs().cmp(Ve(f,r,s,1).minus(I).abs())<1?[p,i]:[f,r],O.precision=d,ye=!0,x};H.toHexadecimal=H.toHex=function(e,t){return rm(this,16,e,t)};H.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:wr(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ye=!1,r=Ve(r,e,0,t,1).times(e),ye=!0,pe(r)):(e.s=r.s,r=e),r};H.toNumber=function(){return+this};H.toOctal=function(e,t){return rm(this,8,e,t)};H.toPower=H.pow=function(e){var t,r,i,n,s,a,u=this,f=u.constructor,p=+(e=new f(e));if(!u.d||!e.d||!u.d[0]||!e.d[0])return new f(It(+u,p));if(u=new f(u),u.eq(1))return u;if(i=f.precision,s=f.rounding,e.eq(1))return pe(u,i,s);if(t=tr(e.e/de),t>=e.d.length-1&&(r=p<0?-p:p)<=K9)return n=Q5(f,u,r,i),e.s<0?new f(1).div(n):pe(n,i,s);if(a=u.s,a<0){if(t<e.d.length-1)return new f(NaN);if(e.d[t]&1||(a=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=a,u}return r=It(+u,p),t=r==0||!isFinite(r)?tr(p*(Math.log("0."+jt(u.d))/Math.LN10+u.e+1)):new f(r+"").e,t>f.maxE+1||t<f.minE-1?new f(t>0?a/0:0):(ye=!1,f.rounding=u.s=1,r=Math.min(12,(t+"").length),n=Sh(e.times(zn(u,i+r)),i),n.d&&(n=pe(n,i+5,1),$l(n.d,i,s)&&(t=i+10,n=pe(Sh(e.times(zn(u,t+r)),t),t+5,1),+jt(n.d).slice(i+1,i+15)+1==1e14&&(n=pe(n,i+1,0)))),n.s=a,ye=!0,f.rounding=s,pe(n,i,s))};H.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=Ci(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(wr(e,1,es),t===void 0?t=n.rounding:wr(t,0,8),i=pe(new n(i),e,t),r=Ci(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};H.toSignificantDigits=H.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(wr(e,1,es),t===void 0?t=i.rounding:wr(t,0,8)),pe(new i(r),e,t)};H.toString=function(){var e=this,t=e.constructor,r=Ci(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};H.truncated=H.trunc=function(){return pe(new this.constructor(this),this.e+1,1)};H.valueOf=H.toJSON=function(){var e=this,t=e.constructor,r=Ci(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function jt(e){var t,r,i,n=e.length-1,s="",a=e[0];if(n>0){for(s+=a,t=1;t<n;t++)i=e[t]+"",r=de-i.length,r&&(s+=_n(r)),s+=i;a=e[t],i=a+"",r=de-i.length,r&&(s+=_n(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function wr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Zn+e)}function $l(e,t,r,i){var n,s,a,u;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=de,n=0):(n=Math.ceil((t+1)/de),t%=de),s=It(10,de-t),u=e[n]%s|0,i==null?t<3?(t==0?u=u/100|0:t==1&&(u=u/10|0),a=r<4&&u==99999||r>3&&u==49999||u==5e4||u==0):a=(r<4&&u+1==s||r>3&&u+1==s/2)&&(e[n+1]/s/100|0)==It(10,t-2)-1||(u==s/2||u==0)&&(e[n+1]/s/100|0)==0:t<4?(t==0?u=u/1e3|0:t==1?u=u/100|0:t==2&&(u=u/10|0),a=(i||r<4)&&u==9999||!i&&r>3&&u==4999):a=((i||r<4)&&u+1==s||!i&&r>3&&u+1==s/2)&&(e[n+1]/s/1e3|0)==It(10,t-3)-1,a}function cu(e,t,r){for(var i,n=[0],s,a=0,u=e.length;a<u;){for(s=n.length;s--;)n[s]*=t;for(n[0]+=wh.indexOf(e.charAt(a++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function eb(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/$0(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=ga(e,1,t.times(n),new e(1));for(var s=r;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var Ve=function(){function e(i,n,s){var a,u=0,f=i.length;for(i=i.slice();f--;)a=i[f]*n+u,i[f]=a%s|0,u=a/s|0;return u&&i.unshift(u),i}function t(i,n,s,a){var u,f;if(s!=a)f=s>a?1:-1;else for(u=f=0;u<s;u++)if(i[u]!=n[u]){f=i[u]>n[u]?1:-1;break}return f}function r(i,n,s,a){for(var u=0;s--;)i[s]-=u,u=i[s]<n[s]?1:0,i[s]=u*a+i[s]-n[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,s,a,u,f){var p,d,b,x,I,L,O,R,A,M,T,q,W,J,te,ne,ke,he,Pe,He,gt=i.constructor,pn=i.s==n.s?1:-1,Nt=i.d,$e=n.d;if(!Nt||!Nt[0]||!$e||!$e[0])return new gt(!i.s||!n.s||(Nt?$e&&Nt[0]==$e[0]:!$e)?NaN:Nt&&Nt[0]==0||!$e?pn*0:pn/0);for(f?(I=1,d=i.e-n.e):(f=fi,I=de,d=tr(i.e/I)-tr(n.e/I)),Pe=$e.length,ke=Nt.length,A=new gt(pn),M=A.d=[],b=0;$e[b]==(Nt[b]||0);b++);if($e[b]>(Nt[b]||0)&&d--,s==null?(J=s=gt.precision,a=gt.rounding):u?J=s+(i.e-n.e)+1:J=s,J<0)M.push(1),L=!0;else{if(J=J/I+2|0,b=0,Pe==1){for(x=0,$e=$e[0],J++;(b<ke||x)&&J--;b++)te=x*f+(Nt[b]||0),M[b]=te/$e|0,x=te%$e|0;L=x||b<ke}else{for(x=f/($e[0]+1)|0,x>1&&($e=e($e,x,f),Nt=e(Nt,x,f),Pe=$e.length,ke=Nt.length),ne=Pe,T=Nt.slice(0,Pe),q=T.length;q<Pe;)T[q++]=0;He=$e.slice(),He.unshift(0),he=$e[0],$e[1]>=f/2&&++he;do x=0,p=t($e,T,Pe,q),p<0?(W=T[0],Pe!=q&&(W=W*f+(T[1]||0)),x=W/he|0,x>1?(x>=f&&(x=f-1),O=e($e,x,f),R=O.length,q=T.length,p=t(O,T,R,q),p==1&&(x--,r(O,Pe<R?He:$e,R,f))):(x==0&&(p=x=1),O=$e.slice()),R=O.length,R<q&&O.unshift(0),r(T,O,q,f),p==-1&&(q=T.length,p=t($e,T,Pe,q),p<1&&(x++,r(T,Pe<q?He:$e,q,f))),q=T.length):p===0&&(x++,T=[0]),M[b++]=x,p&&T[0]?T[q++]=Nt[ne]||0:(T=[Nt[ne]],q=1);while((ne++<ke||T[0]!==void 0)&&J--);L=T[0]!==void 0}M[0]||M.shift()}if(I==1)A.e=d,j5=L;else{for(b=1,x=M[0];x>=10;x/=10)b++;A.e=b+d*I-1,pe(A,u?s+A.e+1:s,a,L)}return A}}();function pe(e,t,r,i){var n,s,a,u,f,p,d,b,x,I=e.constructor;e:if(t!=null){if(b=e.d,!b)return e;for(n=1,u=b[0];u>=10;u/=10)n++;if(s=t-n,s<0)s+=de,a=t,d=b[x=0],f=d/It(10,n-a-1)%10|0;else if(x=Math.ceil((s+1)/de),u=b.length,x>=u)if(i){for(;u++<=x;)b.push(0);d=f=0,n=1,s%=de,a=s-de+1}else break e;else{for(d=u=b[x],n=1;u>=10;u/=10)n++;s%=de,a=s-de+n,f=a<0?0:d/It(10,n-a-1)%10|0}if(i=i||t<0||b[x+1]!==void 0||(a<0?d:d%It(10,n-a-1)),p=r<4?(f||i)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||i||r==6&&(s>0?a>0?d/It(10,n-a):0:b[x-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,p?(t-=e.e+1,b[0]=It(10,(de-t%de)%de),e.e=-t||0):b[0]=e.e=0,e;if(s==0?(b.length=x,u=1,x--):(b.length=x+1,u=It(10,de-s),b[x]=a>0?(d/It(10,n-a)%It(10,a)|0)*u:0),p)for(;;)if(x==0){for(s=1,a=b[0];a>=10;a/=10)s++;for(a=b[0]+=u,u=1;a>=10;a/=10)u++;s!=u&&(e.e++,b[0]==fi&&(b[0]=1));break}else{if(b[x]+=u,b[x]!=fi)break;b[x--]=0,u=1}for(s=b.length;b[--s]===0;)b.pop()}return ye&&(e.e>I.maxE?(e.d=null,e.e=NaN):e.e<I.minE&&(e.e=0,e.d=[0])),e}function Ci(e,t,r){if(!e.isFinite())return X5(e);var i,n=e.e,s=jt(e.d),a=s.length;return t?(r&&(i=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+_n(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):n<0?(s="0."+_n(-n-1)+s,r&&(i=r-a)>0&&(s+=_n(i))):n>=a?(s+=_n(n+1-a),r&&(i=r-n-1)>0&&(s=s+"."+_n(i))):((i=n+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),r&&(i=r-a)>0&&(n+1===a&&(s+="."),s+=_n(i))),s}function C0(e,t){var r=e[0];for(t*=de;r>=10;r/=10)t++;return t}function Wu(e,t,r){if(t>J9)throw ye=!0,r&&(e.precision=r),Error(H5);return pe(new e(Uu),t,1,!0)}function oi(e,t,r){if(t>kh)throw Error(H5);return pe(new e(Gu),t,r,!0)}function Z5(e){var t=e.length-1,r=t*de+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function _n(e){for(var t="";e--;)t+="0";return t}function Q5(e,t,r,i){var n,s=new e(1),a=Math.ceil(i/de+4);for(ye=!1;;){if(r%2&&(s=s.times(t),h1(s.d,a)&&(n=!0)),r=tr(r/2),r===0){r=s.d.length-1,n&&s.d[r]===0&&++s.d[r];break}t=t.times(t),h1(t.d,a)}return ye=!0,s}function f1(e){return e.d[e.d.length-1]&1}function Y5(e,t,r){for(var i,n=new e(t[0]),s=0;++s<t.length;)if(i=new e(t[s]),i.s)n[r](i)&&(n=i);else{n=i;break}return n}function Sh(e,t){var r,i,n,s,a,u,f,p=0,d=0,b=0,x=e.constructor,I=x.rounding,L=x.precision;if(!e.d||!e.d[0]||e.e>17)return new x(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(ye=!1,f=L):f=t,u=new x(.03125);e.e>-2;)e=e.times(u),b+=5;for(i=Math.log(It(2,b))/Math.LN10*2+5|0,f+=i,r=s=a=new x(1),x.precision=f;;){if(s=pe(s.times(e),f,1),r=r.times(++d),u=a.plus(Ve(s,r,f,1)),jt(u.d).slice(0,f)===jt(a.d).slice(0,f)){for(n=b;n--;)a=pe(a.times(a),f,1);if(t==null)if(p<3&&$l(a.d,f-i,I,p))x.precision=f+=10,r=s=u=new x(1),d=0,p++;else return pe(a,x.precision=L,I,ye=!0);else return x.precision=L,a}a=u}}function zn(e,t){var r,i,n,s,a,u,f,p,d,b,x,I=1,L=10,O=e,R=O.d,A=O.constructor,M=A.rounding,T=A.precision;if(O.s<0||!R||!R[0]||!O.e&&R[0]==1&&R.length==1)return new A(R&&!R[0]?-1/0:O.s!=1?NaN:R?0:O);if(t==null?(ye=!1,d=T):d=t,A.precision=d+=L,r=jt(R),i=r.charAt(0),Math.abs(s=O.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)O=O.times(e),r=jt(O.d),i=r.charAt(0),I++;s=O.e,i>1?(O=new A("0."+r),s++):O=new A(i+"."+r.slice(1))}else return p=Wu(A,d+2,T).times(s+""),O=zn(new A(i+"."+r.slice(1)),d-L).plus(p),A.precision=T,t==null?pe(O,T,M,ye=!0):O;for(b=O,f=a=O=Ve(O.minus(1),O.plus(1),d,1),x=pe(O.times(O),d,1),n=3;;){if(a=pe(a.times(x),d,1),p=f.plus(Ve(a,new A(n),d,1)),jt(p.d).slice(0,d)===jt(f.d).slice(0,d))if(f=f.times(2),s!==0&&(f=f.plus(Wu(A,d+2,T).times(s+""))),f=Ve(f,new A(I),d,1),t==null)if($l(f.d,d-L,M,u))A.precision=d+=L,p=a=O=Ve(b.minus(1),b.plus(1),d,1),x=pe(O.times(O),d,1),n=u=1;else return pe(f,A.precision=T,M,ye=!0);else return A.precision=T,f;f=p,n+=2}}function X5(e){return String(e.s*e.s/0)}function _h(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%de,r<0&&(i+=de),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=de;i<n;)e.d.push(+t.slice(i,i+=de));t=t.slice(i),i=de-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),ye&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function tb(e,t){var r,i,n,s,a,u,f,p,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),W5.test(t))return _h(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Y9.test(t))r=16,t=t.toLowerCase();else if(Q9.test(t))r=2;else if(X9.test(t))r=8;else throw Error(Zn+t);for(s=t.search(/p/i),s>0?(f=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),a=s>=0,i=e.constructor,a&&(t=t.replace(".",""),u=t.length,s=u-s,n=Q5(i,new i(r),s,s*2)),p=cu(t,r,fi),d=p.length-1,s=d;p[s]===0;--s)p.pop();return s<0?new i(e.s*0):(e.e=C0(p,d),e.d=p,ye=!1,a&&(e=Ve(e,n,u*4)),f&&(e=e.times(Math.abs(f)<54?It(2,f):zt.pow(2,f))),ye=!0,e)}function rb(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:ga(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/$0(5,r)),t=ga(e,2,t,t);for(var n,s=new e(5),a=new e(16),u=new e(20);r--;)n=t.times(t),t=t.times(s.plus(n.times(a.times(n).minus(u))));return t}function ga(e,t,r,i,n){var s,a,u,f,p=e.precision,d=Math.ceil(p/de);for(ye=!1,f=r.times(r),u=new e(i);;){if(a=Ve(u.times(f),new e(t++*t++),p,1),u=n?i.plus(a):i.minus(a),i=Ve(a.times(f),new e(t++*t++),p,1),a=u.plus(i),a.d[d]!==void 0){for(s=d;a.d[s]===u.d[s]&&s--;);if(s==-1)break}s=u,u=i,i=a,a=s}return ye=!0,a.d.length=d+1,a}function $0(e,t){for(var r=e;--t;)r*=e;return r}function K5(e,t){var r,i=t.s<0,n=oi(e,e.precision,1),s=n.times(.5);if(t=t.abs(),t.lte(s))return en=i?4:1,t;if(r=t.divToInt(n),r.isZero())en=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(s))return en=f1(r)?i?2:3:i?4:1,t;en=f1(r)?i?1:4:i?3:2}return t.minus(n).abs()}function rm(e,t,r,i){var n,s,a,u,f,p,d,b,x,I=e.constructor,L=r!==void 0;if(L?(wr(r,1,es),i===void 0?i=I.rounding:wr(i,0,8)):(r=I.precision,i=I.rounding),!e.isFinite())d=X5(e);else{for(d=Ci(e),a=d.indexOf("."),L?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,a>=0&&(d=d.replace(".",""),x=new I(1),x.e=d.length-a,x.d=cu(Ci(x),10,n),x.e=x.d.length),b=cu(d,10,n),s=f=b.length;b[--f]==0;)b.pop();if(!b[0])d=L?"0p+0":"0";else{if(a<0?s--:(e=new I(e),e.d=b,e.e=s,e=Ve(e,x,r,i,0,n),b=e.d,s=e.e,p=j5),a=b[r],u=n/2,p=p||b[r+1]!==void 0,p=i<4?(a!==void 0||p)&&(i===0||i===(e.s<0?3:2)):a>u||a===u&&(i===4||p||i===6&&b[r-1]&1||i===(e.s<0?8:7)),b.length=r,p)for(;++b[--r]>n-1;)b[r]=0,r||(++s,b.unshift(1));for(f=b.length;!b[f-1];--f);for(a=0,d="";a<f;a++)d+=wh.charAt(b[a]);if(L){if(f>1)if(t==16||t==8){for(a=t==16?4:3,--f;f%a;f++)d+="0";for(b=cu(d,n,t),f=b.length;!b[f-1];--f);for(a=1,d="1.";a<f;a++)d+=wh.charAt(b[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>f)for(s-=f;s--;)d+="0";else s<f&&(d=d.slice(0,s)+"."+d.slice(s))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function h1(e,t){if(e.length>t)return e.length=t,!0}function ib(e){return new this(e).abs()}function nb(e){return new this(e).acos()}function sb(e){return new this(e).acosh()}function ab(e,t){return new this(e).plus(t)}function lb(e){return new this(e).asin()}function ob(e){return new this(e).asinh()}function ub(e){return new this(e).atan()}function cb(e){return new this(e).atanh()}function fb(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,s=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=oi(this,s,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?oi(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=oi(this,s,1).times(.5),r.s=e.s):t.s<0?(this.precision=s,this.rounding=1,r=this.atan(Ve(e,t,s,1)),t=oi(this,s,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Ve(e,t,s,1)),r}function hb(e){return new this(e).cbrt()}function pb(e){return pe(e=new this(e),e.e+1,2)}function mb(e,t,r){return new this(e).clamp(t,r)}function db(e){if(!e||typeof e!="object")throw Error(z0+"Object expected");var t,r,i,n=e.defaults===!0,s=["precision",1,es,"rounding",0,8,"toExpNeg",-Xs,0,"toExpPos",0,Xs,"maxE",0,Xs,"minE",-Xs,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],n&&(this[r]=Nh[r]),(i=e[r])!==void 0)if(tr(i)===i&&i>=s[t+1]&&i<=s[t+2])this[r]=i;else throw Error(Zn+r+": "+i);if(r="crypto",n&&(this[r]=Nh[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(U5);else this[r]=!1;else throw Error(Zn+r+": "+i);return this}function gb(e){return new this(e).cos()}function yb(e){return new this(e).cosh()}function J5(e){var t,r,i;function n(s){var a,u,f,p=this;if(!(p instanceof n))return new n(s);if(p.constructor=n,p1(s)){p.s=s.s,ye?!s.d||s.e>n.maxE?(p.e=NaN,p.d=null):s.e<n.minE?(p.e=0,p.d=[0]):(p.e=s.e,p.d=s.d.slice()):(p.e=s.e,p.d=s.d?s.d.slice():s.d);return}if(f=typeof s,f==="number"){if(s===0){p.s=1/s<0?-1:1,p.e=0,p.d=[0];return}if(s<0?(s=-s,p.s=-1):p.s=1,s===~~s&&s<1e7){for(a=0,u=s;u>=10;u/=10)a++;ye?a>n.maxE?(p.e=NaN,p.d=null):a<n.minE?(p.e=0,p.d=[0]):(p.e=a,p.d=[s]):(p.e=a,p.d=[s]);return}else if(s*0!==0){s||(p.s=NaN),p.e=NaN,p.d=null;return}return _h(p,s.toString())}else if(f!=="string")throw Error(Zn+s);return(u=s.charCodeAt(0))===45?(s=s.slice(1),p.s=-1):(u===43&&(s=s.slice(1)),p.s=1),W5.test(s)?_h(p,s):tb(p,s)}if(n.prototype=H,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=db,n.clone=J5,n.isDecimal=p1,n.abs=ib,n.acos=nb,n.acosh=sb,n.add=ab,n.asin=lb,n.asinh=ob,n.atan=ub,n.atanh=cb,n.atan2=fb,n.cbrt=hb,n.ceil=pb,n.clamp=mb,n.cos=gb,n.cosh=yb,n.div=vb,n.exp=bb,n.floor=xb,n.hypot=wb,n.ln=Nb,n.log=kb,n.log10=_b,n.log2=Sb,n.max=Tb,n.min=Mb,n.mod=Eb,n.mul=Ab,n.pow=Ib,n.random=zb,n.round=Cb,n.sign=$b,n.sin=Db,n.sinh=Pb,n.sqrt=Ob,n.sub=qb,n.sum=Lb,n.tan=Rb,n.tanh=Fb,n.trunc=Bb,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function vb(e,t){return new this(e).div(t)}function bb(e){return new this(e).exp()}function xb(e){return pe(e=new this(e),e.e+1,3)}function wb(){var e,t,r=new this(0);for(ye=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ye=!0,new this(1/0);r=t}return ye=!0,r.sqrt()}function p1(e){return e instanceof zt||e&&e.toStringTag===G5||!1}function Nb(e){return new this(e).ln()}function kb(e,t){return new this(e).log(t)}function Sb(e){return new this(e).log(2)}function _b(e){return new this(e).log(10)}function Tb(){return Y5(this,arguments,"lt")}function Mb(){return Y5(this,arguments,"gt")}function Eb(e,t){return new this(e).mod(t)}function Ab(e,t){return new this(e).mul(t)}function Ib(e,t){return new this(e).pow(t)}function zb(e){var t,r,i,n,s=0,a=new this(1),u=[];if(e===void 0?e=this.precision:wr(e,1,es),i=Math.ceil(e/de),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));s<i;)n=t[s],n>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);s<i;)n=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,s):(u.push(n%1e7),s+=4);s=i/4}else throw Error(U5);else for(;s<i;)u[s++]=Math.random()*1e7|0;for(i=u[--s],e%=de,i&&e&&(n=It(10,de-e),u[s]=(i/n|0)*n);u[s]===0;s--)u.pop();if(s<0)r=0,u=[0];else{for(r=-1;u[0]===0;r-=de)u.shift();for(i=1,n=u[0];n>=10;n/=10)i++;i<de&&(r-=de-i)}return a.e=r,a.d=u,a}function Cb(e){return pe(e=new this(e),e.e+1,this.rounding)}function $b(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Db(e){return new this(e).sin()}function Pb(e){return new this(e).sinh()}function Ob(e){return new this(e).sqrt()}function qb(e,t){return new this(e).sub(t)}function Lb(){var e=0,t=arguments,r=new this(t[e]);for(ye=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ye=!0,pe(r,this.precision,this.rounding)}function Rb(e){return new this(e).tan()}function Fb(e){return new this(e).tanh()}function Bb(e){return pe(e=new this(e),e.e+1,1)}H[Symbol.for("nodejs.util.inspect.custom")]=H.toString;H[Symbol.toStringTag]="Decimal";var zt=H.constructor=J5(Nh);Uu=new zt(Uu);Gu=new zt(Gu);var dr=zt,im=["number","finite_number","complex","finite_complex","imaginary","finite_imaginary","real","finite_real","rational","finite_rational","integer","finite_integer","non_finite_number"],nm=["collection","list","set","tuple","map"],sm=["scalar",...im,"boolean","string"],e7=["value",...nm,...sm],t7=["expression","symbol","function",...e7],Dl=["any","unknown","nothing","never","error",...t7],r7=3,i7=1,n7=2,Vb=4,jb=5,Hb=6,Ub=7,Gb=8,Wb=9;function Er(e,t=0){if(typeof e=="string")return e;let r="";switch(e.kind){case"value":r=e.value.toString();break;case"reference":r=e.ref;break;case"negation":r=`!${Er(e.type,r7)}`;break;case"union":r=e.types.map(a=>Er(a,i7)).join(" | ");break;case"intersection":r=e.types.map(a=>Er(a,n7)).join(" & ");break;case"list":if(e.dimensions&&G(e.elements,"number")){if(e.dimensions===void 0)e.elements==="number"&&(r="tensor");else if(e.dimensions.length===1)e.elements==="number"?e.dimensions[0]<0?r="vector":r=`vector<${e.dimensions[0]}>`:e.dimensions[0]<0?r=`vector<${e.elements}>`:r=`vector<${e.elements}^${e.dimensions[0]}>`;else if(e.dimensions.length===2){let a=e.dimensions;e.elements==="number"?a[0]<0&&a[1]<0?r="matrix":r=`matrix<${a[0]}x${a[1]}>`:a[0]<0&&a[1]<0?r=`matrix<${e.elements}>`:r=`matrix<${e.elements}^(${a[0]}x${a[1]})>`}}if(!r){let a=e.dimensions?e.dimensions.length===1?`^${e.dimensions[0].toString()}`:`^(${e.dimensions.join("x")})`:"";r=`list<${Er(e.elements)}${a}>`}break;case"map":r=`map<${Object.entries(e.elements).map(([a,u])=>`${a}: ${Er(u)}`).join(", ")}>`;break;case"set":r=`set<${Er(e.elements)}>`;break;case"collection":r=`collection<${Er(e.elements)}>`;break;case"tuple":if(e.elements.length===0)r="tuple";else if(e.elements.length===1){let[a]=e.elements;r=`tuple<${Ra(a)}>`}else r="tuple<"+e.elements.map(a=>Ra(a)).join(", ")+">";break;case"signature":let i=e.args?e.args.map(a=>Ra(a)).join(", "):"",n=e.optArgs?e.optArgs.map(a=>Ra(a)+"?").join(", "):"",s=e.restArg?`...${Ra(e.restArg)}`:"";r=`(${[i,n,s].filter(a=>a).join(", ")}) -> ${Er(e.result)}`;break;default:r="error"}return t>0&&t>Zb(e.kind)?`(${r})`:r}function Ra(e){return e.name?`${e.name}: ${Er(e.type)}`:Er(e.type)}function Zb(e){switch(e){case"negation":return r7;case"union":return i7;case"intersection":return n7;case"list":return Vb;case"map":return jb;case"set":return Hb;case"collection":return Ub;case"tuple":return Gb;case"signature":return Wb;default:return 0}}function Qb(e,t){return e===t?e:e==="nothing"||t==="nothing"?"nothing":e==="any"?t:t==="any"?e:e==="never"?t:t==="never"?e:e==="unknown"?t:t==="unknown"||G(e,t)?e:G(t,e)?t:a7(e,t)}function Yb(e,t){return e===t?e:e==="any"||t==="any"?"any":e==="never"?t:t==="never"?e:e==="unknown"?t:t==="unknown"?e:e==="nothing"?t:t==="nothing"?e:G(e,t)?t:G(t,e)?e:a7(e,t)}function s7(...e){return e.length===0?"nothing":e.length===1?e[0]:e.reduce(Qb)}function fn(...e){return e.length===0?"nothing":e.length===1?e[0]:e.reduce(Yb)}function Th(e){return e=typeof e=="string"?Ee(e):e,typeof e!="string"&&e.kind==="signature"}function Xb(e){if(e==="function")return Ee("...any -> any");if(typeof e!="string"&&e.kind==="signature")return e}function am(e){if(e==="function")return"any";if(typeof e!="string"&&e.kind==="signature")return e.result}function el(e){if(e==="collection")return"any";if(typeof e!="string"){if(e.kind==="collection"||e.kind==="list")return e.elements;if(e.kind==="map")return Ee(`tuple<string, ${fn(...Object.values(e.elements))}>`);if(e.kind==="set")return e.elements;if(e.kind==="tuple")return fn(...e.elements.map(t=>t.type))}}function Pl(e){return typeof e=="string"?Dl.includes(e):typeof e!="object"||!("kind"in e)?!1:e.kind==="signature"||e.kind==="union"||e.kind==="intersection"||e.kind==="negation"||e.kind==="tuple"||e.kind==="list"||e.kind==="map"||e.kind==="set"||e.kind==="function"||e.kind==="collection"||e.kind==="reference"}function a7(e,t){return e===t?e:e==="any"||t==="any"?"any":e==="never"?t:t==="never"?e:e==="unknown"?t:t==="unknown"?e:e==="nothing"?t:t==="nothing"?e:mt(e,t,"non_finite_number")?"non_finite_number":mt(e,t,"finite_integer")?"finite_integer":mt(e,t,"integer")?"integer":mt(e,t,"finite_rational")?"finite_rational":mt(e,t,"rational")?"rational":mt(e,t,"finite_real")?"finite_real":mt(e,t,"real")?"real":mt(e,t,"finite_imaginary")?"finite_imaginary":mt(e,t,"imaginary")?"imaginary":mt(e,t,"finite_complex")?"finite_complex":mt(e,t,"complex")?"complex":mt(e,t,"finite_number")?"finite_number":mt(e,t,"number")?"number":mt(e,t,"list")?"list":mt(e,t,"map")?"map":mt(e,t,"set")?"set":mt(e,t,"tuple")?"tuple":mt(e,t,"collection")?"collection":mt(e,t,"scalar")?"scalar":mt(e,t,"value")?"value":mt(e,t,"function")?"function":mt(e,t,"expression")?"expression":"any"}function mt(e,t,r){return!!(G(e,r)&&G(t,r))}var Kb=class extends String{constructor(e){super(e)}isSubtypeOf(e){return G(this.toString(),e)}};function Rt(e){return typeof e=="string"?Object.freeze(new Kb(e)):(Object.defineProperty(e,"toString",{value:()=>Er(e)}),Object.defineProperty(e,"isSubtypeOf",{value:t=>G(e,t)}),Object.freeze(e))}function Jb(e,t){let r=[];for(let i=0;i<=t.length;i++)r[i]=[i];for(let i=0;i<=e.length;i++)r[0][i]=i;for(let i=1;i<=t.length;i++)for(let n=1;n<=e.length;n++)t.charAt(i-1)===e.charAt(n-1)?r[i][n]=r[i-1][n-1]:r[i][n]=Math.min(r[i-1][n-1]+1,r[i][n-1]+1,r[i-1][n]+1);return r[t.length][e.length]}function ex(e,t){let r=null,i=1/0,n=3;for(let s of t){let a=Jb(e,s);a<=n&&Math.abs(e.length-s.length)<=2&&a<i&&(i=a,r=s)}return r}var tx=class{constructor(e,t={value:()=>null,type:()=>null}){this.buffer=e,this.pos=0,this._valueParser=t.value,this._typeParser=t.type}error(...e){throw new Error(`
Invalid type
|   ${this.buffer}
|   ${" ".repeat(this.pos)}^
|   
|   ${e.join(`
|   `)}
`)}peek(){return this.buffer[this.pos]}consume(){return this.buffer[this.pos++]}match(e){if(e.length===1&&this.buffer[this.pos]===e)return this.pos++,!0;let t=this.pos;return this.buffer.slice(t,t+e.length)===e?(this.pos+=e.length,!0):!1}skipWhitespace(){for(;this.pos<this.buffer.length&&/\s/.test(this.buffer[this.pos]);)this.pos++}isEOF(){return this.pos>=this.buffer.length}parseValue(){this.skipWhitespace();let e=this._valueParser(this);return e===null?null:Rt({kind:"value",value:e})}parseTypeReference(){this.skipWhitespace();let e=this._typeParser(this);return e===null?null:Rt({kind:"reference",ref:e})}parsePrimitiveType(){this.skipWhitespace(),this.isEOF()&&this.error("Unexpected end of input");for(let e of Dl)if(this.match(e))return e;return null}parseArguments(){let e=[],t=[];for(;;){let s=this.parseNamedElement();if(s===null||(this.match("?")?t.push(s):(t.length>0&&this.error("Optional arguments must come after required arguments"),e.push(s)),this.skipWhitespace(),!this.match(",")))break}let r=this.pos,i=this.parseRestArgument()??void 0;i&&t.length>0&&(this.pos=r,this.error("Optional arguments cannot be followed by a rest argument"));let n=m1([...e,...t,...i?[i]:[]]);return n&&this.error(`Duplicate argument name "${n}"`),[e,t,i]}parseRestArgument(){let e=this.pos,t=this.parseName();if(this.skipWhitespace(),!this.match("..."))return this.pos=e,null;let r=this.parsePrimitiveType()??this.parsePrimaryGroup();if(!r&&!t&&(this.pos=e,this.match("...")&&this.parseName())){let i=this.parsePrimitiveType()??this.parsePrimaryGroup();this.pos=e,this.error("The rest argument indicator is placed before the type, not the name",`Use "${t}: ...${i?Er(i):"number"}"`)}return this.skipWhitespace(),this.match(":")&&this.error('Unexpected ":" after rest argument. Use "x: ...number"'),r??(r="any"),t?{name:t,type:r}:{type:r}}parseFunctionSignature(){let e=[],t=[],r;this.skipWhitespace();let i=this.pos;if(!this.match("()")){if(this.match("(")){if([e,t,r]=this.parseArguments(),this.skipWhitespace(),!this.match(")"))return r&&(this.parseNamedElement()&&(this.pos=i,this.error("The rest argument must be the last argument")),this.error("The rest argument must have a valid type")),t.length>0&&(this.parseNamedElement()&&this.error("Optional arguments cannot be followed by required arguments"),this.skipWhitespace(),i=this.pos,this.match("->")&&(this.pos=i,this.error('Expected ")" to close the argument list')),this.error("Expected an argument")),this.pos=i,null}else if(r=this.parseRestArgument()??void 0,r!=null&&r.name&&(this.pos=i,this.error("Named arguments must be enclosed in parentheses")),!r)return this.pos=i,null}if(this.skipWhitespace(),!this.match("->"))return this.pos=i,null;let n=this.parseType();return n===null&&this.error("Expected a return type.","Use `any` for any type, `nothing` for no return value, or `never` for a function that never returns"),e.length===0&&(e=void 0),t.length===0&&(t=void 0),Rt({kind:"signature",args:e,optArgs:t,restArg:r,result:n})}parseIntegerLiteral(){let e=0;for(this.skipWhitespace();/[1-9]/.test(this.peek());)e=e*10+parseInt(this.consume());return e===0?null:e}parseOptionalDimension(){let e=this.parseIntegerLiteral();return e===null&&this.match("?")&&(e=-1),e}parseDimensions(){let e=this.match("("),t=[],r=this.parseOptionalDimension();r===null&&this.error("Expected a positive integer literal.","For example : `vector<3>]`");do{if(t.push(r),this.skipWhitespace(),!this.match("x"))break;this.skipWhitespace(),r=this.parseOptionalDimension(),r===null&&this.error("Expected a positive integer literal or `?`.","For example : `matrix<integer^2x3>` or `matrix<integer^?x?>`")}while(!0);return this.skipWhitespace(),e&&!this.match(")")&&this.error('Expected ")".',"For example `matrix<integer^(2x3)>`"),t}parseList(){if(this.skipWhitespace(),this.match("list<")){let r=this.parseType(),i;return r&&this.match("^")?(i=this.parseDimensions(),i===void 0&&this.error("Expected dimensions after `^`.","For example `list<number^2x3>`")):r||(r="any",i=this.parseDimensions()),this.skipWhitespace(),this.match(">")||this.error('Expected ">".',"For example `list<number>`"),Rt({kind:"list",elements:r,dimensions:i})}if(this.match("list(")&&this.error("Use `list<type>` instead of `list(type)`.","For example `list<number>`"),this.match("vector<")){let r=this.parseType(),i;if(r&&this.match("^")){let n=this.parseIntegerLiteral();n===null&&this.error("Expected a positive integer literal.","For example `vector<3>`","Use `vector` for a vector of unknown size"),i=[n]}else r||(r="number",i=this.parseDimensions());return this.skipWhitespace(),this.match(">")||this.error('Expected ">"',"For example `vector<integer>`"),Rt({kind:"list",elements:r,dimensions:i})}if(this.match("vector"))return Rt({kind:"list",elements:"number"});if(this.match("matrix<")){let r=this.parseType(),i;return r&&this.match("^")?(i=this.parseDimensions(),i===void 0&&this.error("Expected dimensions","For example `matrix<number^2x3>`","Use `matrix` for a matrix of unknown size")):r||(r="number",i=this.parseDimensions()),this.match(">")||this.error('Expected ">".',"For example `matrix<integer>`"),Rt({kind:"list",elements:r,dimensions:i})}if(this.match("matrix(")&&this.error("Use `matrix<...>` instead of `matrix(...)`.","For example `matrix<3x2>` or `matrix<integer^3x2>`"),this.match("vector(")&&this.error("Use `vector<...>` instead of `vector(...)`.","For example `vector<3>` or `vector<integer^3>`"),this.match("matrix"))return Rt({kind:"list",elements:"number",dimensions:[-1,-1]});if(this.match("tensor"))return Rt({kind:"list",elements:"number",dimensions:void 0});if(!this.match("list<"))return null;let e=this.parseType();e===null&&this.error('Expected a type. Use "[any]" for a collection of any type');let t=this.match("^")?this.parseDimensions():void 0;return this.skipWhitespace(),this.match(">")||this.error('Expected ">".',"For example `list<number^2x3>`"),Rt({kind:"list",elements:e,dimensions:t})}parseName(){let e=this.pos;if(this.skipWhitespace(),this.isEOF()||!/[a-zA-Z_]/.test(this.peek()))return null;let t="";for(;!this.isEOF()&&/[a-zA-Z0-9_]/.test(this.peek());)t+=this.consume();if(this.skipWhitespace(),!this.match(":")){if(this.match("?:")){let r=this.parseType();r&&this.error("Optional qualifier must come after the type",`Use "${t}: ${Er(r)}?"`),this.error("Optional qualifier must come after the type",`Use "${t}: number?"`)}return this.pos=e,null}return t}parseKey(){if(this.skipWhitespace(),this.isEOF())return null;let e="";if(this.match("`")){for(;this.peek()!=="`";)this.isEOF()&&this.error("Expected closing backtick"),this.match("\\`")?e+="`":e+=this.consume();return e}for(;!this.isEOF()&&!/[:\s]/.test(this.peek());)e+=this.consume();return e}parseNamedElement(){let e=this.pos,t=this.parseName();if(t!==null){let i=this.parseType();if(i===null){if(this.skipWhitespace(),this.match("..."))return this.pos=e,null;this.pos=e,this.error(`Expected a valid type after "${t}:"`)}return this.skipWhitespace(),this.match("->")&&(this.pos=e,this.error("Single named argument must be enclosed in parentheses")),{name:t,type:i}}let r=this.parseType();return r===null?(this.pos=e,null):{type:r}}parseTupleElements(){let e=[],t=this.pos,r=this.parseNamedElement();if(r===null)return[];for(;e.push(r),this.skipWhitespace(),!!this.match(",");)t=this.pos,r=this.parseNamedElement(),r===null&&(this.pos=t,this.error("Expected a type or unexpected comma"));let i=m1(e);return i&&this.error(`Duplicate tuple named element "${i}"`),e}parseTuple(){if(this.skipWhitespace(),!this.match("tuple<"))return this.match("tuple(")&&this.error("Use `tuple<type>` instead of `tuple(type)`.","For example `tuple<number, boolean>` or `tuple<x: integer, y: integer>`"),null;let e=this.parseTupleElements();return this.skipWhitespace(),this.match(">")||this.error('Expected ">".',"For example `tuple<number, boolean>` or `tuple<x: integer, y: integer>`"),Rt({kind:"tuple",elements:e})}parsePrimaryGroup(){let e=this.pos;if(this.skipWhitespace(),!this.match("("))return null;let t=this.parseType();return t===null?(this.pos=e,null):(this.skipWhitespace(),this.match(")")&&(this.skipWhitespace(),!this.match("->"))?t:(this.pos=e,null))}parseSet(){if(this.skipWhitespace(),!this.match("set<"))return this.match("set(")&&this.error("Use `set<type>` instead of `set(type)`.","For example `set<number>`"),this.match("set")?"set":null;let e=this.parseType();return e===null&&this.error("Expected a type.","Use `set<number>` for a set of numbers"),this.skipWhitespace(),this.match(">")||this.error("Expected `>`.","For example `set<number>`"),Rt({kind:"set",elements:e})}parseMapElements(){var t;let e=[];for(;;){let r=this.parseKey();r===null&&this.error("Expected a name for the key.","For example `map<key: string>`.","Use backticks for special characters.","For example `map<`key with space`: string>`"),this.skipWhitespace(),this.match(":")||this.error("Expected a type separated by a `:` after the key.",`For example \`map<${r}: string>\``,"Use backticks for special characters.","For example `map<`key with space`: string>`");let i=this.parseType();if(i===null&&this.error("Expected a type for the value. Use `any` for any type.",`For example \`map<${r}: any>.\``),e.push([r,i]),this.skipWhitespace(),!this.match(","))break}if(new Set(e.map(([r])=>r)).size!==e.length){let r=(t=e.find(([i],n)=>e.slice(n+1).some(([s])=>s===i)))==null?void 0:t[0];this.error(`Duplicate map key "${r}"`,"Keys in a map must be unique.")}return e}parseMap(){if(this.skipWhitespace(),this.match("map(")&&this.error('Use `map<key: type>` instead of `map(key: type)".',"For example `map<key: string>`"),this.match("map<")){let e=this.parseMapElements();return this.skipWhitespace(),this.match(">")||this.error("Expected a closing `>`.","For example `map<key: string>`"),Rt({kind:"map",elements:Object.fromEntries(e)})}return this.match("map")?"map":null}parseCollection(){if(this.skipWhitespace(),!this.match("collection<"))return this.match("collection(")&&this.error("Use `collection<type>` instead of `collection(type)`.","For example `collection<number>`"),this.match("collection")?"collection":null;let e=this.parseType();return e===null&&this.error("Expected a type.","Use `collection<number>` for a collection of numbers"),this.skipWhitespace(),this.match(">")||this.error('Expected ">".',"For example `collection<number>`"),Rt({kind:"collection",elements:e})}parsePrimary(){let e=this.parseNegationType()??this.parseList()??this.parseSet()??this.parseMap()??this.parseCollection()??this.parseFunctionSignature()??this.parseTuple()??this.parsePrimitiveType()??this.parseValue()??this.parseTypeReference()??this.parsePrimaryGroup();if(e===null){let t="";for(;!this.isEOF()&&/[a-zA-Z_]/.test(this.peek());)t+=this.consume();if(!t)return null;let r=ex(t,[...Dl,"vector","matrix"]);return r&&this.error(`Unknown keyword "${t}"`,`Did you mean "${r}"?`),null}if(this.skipWhitespace(),this.match("->")){let t=this.parseType();t===null&&this.error("Expected return type","Use `any` for any type, `nothing` for no return value or `never` for a function that never returns"),e={kind:"signature",args:[{type:e}],result:t}}return e}parseNegationType(){if(!this.match("!"))return null;let e=this.parsePrimary();return e===null&&this.error("Expected type"),Rt({kind:"negation",type:e})}parseIntersectionType(){let e=this.parsePrimary();if(e===null)return null;let t=[e];for(this.skipWhitespace();this.match("&");)e=this.parsePrimary(),e===null&&this.error("Expected type"),t.push(e);return t.length===1?t[0]:Rt({kind:"intersection",types:t})}parseUnionType(){let e=this.parseIntersectionType();if(e===null)return null;let t=[e];for(this.skipWhitespace();this.match("|");)e=this.parseIntersectionType(),e===null&&this.error("Expected type"),t.push(e);return t.length===1?t[0]:Rt({kind:"union",types:t})}parseType(){return this.skipWhitespace(),this.isEOF()?null:this.parseUnionType()}parse(){let e=this.parseType(),t=this.pos;return this.parseNamedElement()!==null&&(this.pos=t,this.error("Named elements must be enclosed in parentheses")),e===null&&this.error("Syntax error. The type was not recognized."),this.skipWhitespace(),this.isEOF()||this.error("Unexpected character. Could be some mismatched parentheses."),e}};function Ee(e){return e===void 0?void 0:Pl(e)?e:typeof e!="string"?void 0:Dl.includes(e)?e:new tx(e).parse()}function m1(e){let t=new Set;for(let{name:r}of e)if(r){if(t.has(r))return r;t.add(r)}return""}var rx={number:im,finite_number:["finite_complex","finite_imaginary","finite_real","finite_integer","finite_rational"],non_finite_number:[],complex:["finite_complex","finite_imaginary","finite_real","finite_rational","finite_integer","non_finite_number","imaginary","real","rational","integer"],finite_complex:["finite_imaginary","finite_real","finite_rational","finite_integer"],imaginary:["finite_imaginary","non_finite_number"],finite_imaginary:[],real:["finite_real","finite_rational","finite_integer","non_finite_number","rational","integer"],finite_real:["finite_rational","finite_integer"],rational:["finite_rational","finite_integer","integer","non_finite_number"],finite_rational:["finite_integer"],integer:["finite_integer","non_finite_number"],finite_integer:[],any:Dl,unknown:[],nothing:[],never:[],error:[],value:e7,scalar:sm,collection:nm,list:[],set:[],tuple:[],map:[],function:[],symbol:[],boolean:[],string:[],expression:t7};function ix(e,t){return t==="any"||e==="never"?!0:e==="unknown"||t==="unknown"?!1:e===t?!0:rx[t].includes(e)}function G(e,t){if(typeof e=="string"&&typeof t=="string"&&e===t||(typeof e=="string"&&(e=Ee(e)),typeof t=="string"&&(t=Ee(t)),t==="any"))return!0;if(t==="never"||t==="error")return!1;if(t==="nothing")return e==="nothing";if(e==="nothing"||e==="unknown"||t==="unknown")return!1;if(typeof t=="string")return typeof e=="string"?ix(e,t):t==="numeric"?l7(e):t==="function"?f7(e):t==="expression"?nx(e):t==="scalar"?o7(e):t==="value"?c7(e):t==="collection"?u7(e):t==="tuple"?e.kind==="tuple":t==="list"?e.kind==="list":t==="set"?e.kind==="set":t==="map"?e.kind==="map":e.kind==="union"?e.types.some(r=>G(r,t)):!1;if(t.kind==="union")return t.types.some(r=>G(e,r));if(typeof e=="string")return!1;if(e.kind==="reference"&&t.kind==="reference")return e.ref===t.ref;if(e.kind==="union")return e.types.some(r=>G(r,t));if(e.kind==="intersection"&&t.kind==="intersection")return t.types.every(r=>e.types.some(i=>G(i,r)));if(e.kind==="intersection")return e.types.every(r=>G(r,t));if(t.kind==="intersection")return t.types.every(r=>G(e,r));if(e.kind==="signature"&&t.kind==="signature"){if(!G(e.result,t.result))return!1;if(t.args){if(!e.args||e.args.length!==t.args.length)return!1;for(let r=0;r<e.args.length;r++)if(!G(t.args[r].type,e.args[r].type))return!1}else if(e.args)return!1;if(t.optArgs){if(!e.optArgs||e.optArgs.length!==t.optArgs.length)return!1;for(let r=0;r<e.optArgs.length;r++)if(!G(t.optArgs[r].type,e.optArgs[r].type))return!1}else if(e.optArgs)return!1;if(t.restArg){if(!e.restArg||!G(t.restArg.type,e.restArg.type))return!1}else if(e.restArg)return!1;return!0}if(e.kind==="map"&&t.kind==="map"){let r=Object.entries(e.elements),i=Object.entries(t.elements);for(let n=0;n<i.length;n++){let[s,a]=i[n],u=r.findIndex(d=>d[0]===s);if(u===-1)return!1;let f=a,p=r[u][1];if(!G(p,f))return!1}return!0}if(t.kind==="collection")return e.kind==="collection"||e.kind==="list"||e.kind==="set"?!!G(e.elements,t.elements):e.kind==="tuple"?e.elements.every(r=>G(r.type,t.elements)):!1;if(e.kind==="tuple"&&t.kind==="tuple"){if(e.elements.length!==t.elements.length)return!1;for(let r=0;r<e.elements.length;r++)if(!G(e.elements[r].type,t.elements[r].type))return!1;return!0}if(t.kind==="list"&&e.kind==="list"){if(!G(e.elements,t.elements))return!1;if(t.dimensions){if(!e.dimensions||e.dimensions.length!==t.dimensions.length)return!1;for(let r=0;r<e.dimensions.length;r++)if(t.dimensions[r]!==-1&&e.dimensions[r]!==t.dimensions[r])return!1}return!0}return t.kind==="set"&&e.kind==="set"?!!G(e.elements,t.elements):!1}function l7(e){return typeof e=="string"?im.includes(e):!1}function o7(e){return l7(e)?!0:typeof e=="string"?sm.includes(e):!1}function u7(e){return typeof e=="string"?nm.includes(e):["collection","list","set","tuple","map"].includes(e.kind)}function c7(e){return o7(e)||u7(e)}function f7(e){return e==="function"||typeof e!="string"&&e.kind==="signature"}function nx(e){return!!(typeof e=="string"&&["expression","symbol","function"].includes(e)||c7(e)||f7(e))}function sx(e){let t=[];for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){let s=i-55296,a=n-56320;i=2**16+s*2**10+a,r++}}t.push(i)}return t}var fu=8205,d1=[127462,127487];function g1(e){return e===fu||e===65038||e===65039||e>=127995&&e<=128e3||e>=129456&&e<=129460||e>=917536&&e<=917632}function ax(e){return e>=d1[0]&&e<=d1[1]}function lx(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;let t=[],r=sx(e),i=0;for(;i<r.length;){let n=r[i++],s=r[i];if(s===fu){let a=i-1;for(i+=2;r[i]===fu;)i+=2;t.push(String.fromCodePoint(...r.slice(a,2*i-a+1)))}else if(g1(s)){let a=i-1;for(;g1(r[i]);)i+=r[i]===fu?2:1;t.push(String.fromCodePoint(...r.slice(a,2*i-a-1)))}else ax(n)?(i+=1,t.push(String.fromCodePoint(...r.slice(i-2,2)))):t.push(String.fromCodePoint(n))}return t}var ox=class{constructor(e){this.obeyspaces=!1,e=e.replace(/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/g,""),e=e.replace(/\u2212/g,"-"),this.s=lx(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let t;return typeof this.s=="string"?t=e.exec(this.s.slice(this.pos)):t=e.exec(this.s.slice(this.pos).join("")),t!=null&&t[0]?(this.pos+=t[0].length,t[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";let e=this.get();if(e==="\\"){if(!this.end()){let t=this.match(/^[a-zA-Z*]+/);if(t)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(t=this.get(),t===" ")return"<space>";return"\\"+t}}else{if(e==="{")return"<{>";if(e==="}")return"<}>";if(e==="^"){if(this.peek()==="^"){this.get();let t=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(t)return String.fromCodePoint(parseInt(t.slice(t.lastIndexOf("^")+1),16))}return e}else if(e==="#"){if(!this.end()){let t=!1;if(/[0-9?]/.test(this.peek())&&(t=!0,this.pos+1<this.s.length)){let r=this.s[this.pos+1];t=/[^0-9A-Za-z]/.test(r)}return t?"#"+this.get():"#"}}else if(e==="$")return this.peek()==="$"?(this.get(),"<$$>"):"<$>"}return e}};function ux(e,t){let r=e.next();if(!r)return[];let i=[];if(r!=="\\relax"){if(r==="\\noexpand")r=e.next(),r&&i.push(r);else if(r==="\\obeyspaces")e.obeyspaces=!0;else if(r==="\\space"||r==="~")i.push("<space>");else if(r==="\\bgroup")i.push("<{>");else if(r==="\\egroup")i.push("<}>");else if(r==="\\string")r=e.next(),r&&(r[0]==="\\"?Array.from(r).forEach(n=>i.push(n==="\\"?"\\backslash":n)):r==="<{>"?i.push("\\{"):r==="<space>"?i.push("~"):r==="<}>"&&i.push("\\}"));else if(r==="\\csname"){for(;e.peek()==="<space>";)e.next();let n="",s=!1,a=[];do{if(a.length===0)if(/^#[0-9?]$/.test(e.peek())){let u=e.get().slice(1);a=Dt((t==null?void 0:t[u])??(t==null?void 0:t["?"])??"\\placeholder{}",t),r=a[0]}else r=e.next(),a=r?[r]:[];s=a.length===0,!s&&r==="\\endcsname"&&(s=!0,a.shift()),s||(s=r==="<$>"||r==="<$$>"||r==="<{>"||r==="<}>"||!!r&&r.length>1&&r[0]==="\\"),s||(n+=a.shift())}while(!s);n&&i.push("\\"+n),i=i.concat(a)}else if(r!=="\\endcsname")if(r.length>1&&r[0]==="#"){let n=r.slice(1);i=i.concat(Dt((t==null?void 0:t[n])??(t==null?void 0:t["?"])??"\\placeholder{}",t))}else i.push(r)}return i}function Dt(e,t=[]){let r=e.toString().split(/\r?\n/),i="",n="";for(let u of r){i+=n,n=" ";let f=u.match(/((?:\\%)|[^%])*/);f!==null&&(i+=f[0])}let s=new ox(i),a=[];do a.push(...ux(s,t));while(!s.end());return a}function h7(e){return Dt(e).length}function re(e){let t="",r="";for(let i of e)i!=null&&(typeof i=="string"&&(/[a-zA-Z*]/.test(i[0])&&(r+=t),/\\[a-zA-Z]+\*?$/.test(i)?t=" ":t=""),r+=i.toString());return r}function Zu(e,t){return/^[0-9]$/.test(t)?`${e}${t}`:`${e}{${t}}`}function Bn(e){let t=[];if(Array.isArray(e))for(let r of e)Array.isArray(r)?t=[...t,...r]:t.push(r);else t=[e];return re(t.map(r=>({"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"})[r]??r))}function cx(e){return!("kind"in e)||e.kind==="expression"}function fx(e){return"kind"in e&&e.kind==="symbol"}function Qu(e){return"kind"in e&&e.kind==="matchfix"}function p7(e){return"kind"in e&&e.kind==="infix"}function Mh(e){return"kind"in e&&e.kind==="prefix"}function m7(e){return"kind"in e&&e.kind==="postfix"}function hx(e){return"kind"in e&&e.kind==="environment"}var Yu=[{latexTrigger:["\\not","<"],kind:"infix",associativity:"any",precedence:246,parse:"NotLess"},{name:"NotLess",latexTrigger:["\\nless"],kind:"infix",associativity:"any",precedence:246},{latexTrigger:["<"],kind:"infix",associativity:"any",precedence:245,parse:"Less"},{name:"Less",latexTrigger:["\\lt"],kind:"infix",associativity:"any",precedence:245},{latexTrigger:["<","="],kind:"infix",associativity:"any",precedence:241,parse:"LessEqual"},{name:"LessEqual",latexTrigger:["\\le"],kind:"infix",associativity:"any",precedence:241},{latexTrigger:["\\leq"],kind:"infix",associativity:"any",precedence:241,parse:"LessEqual"},{latexTrigger:["\\leqslant"],kind:"infix",associativity:"any",precedence:250,parse:"LessEqual"},{name:"LessNotEqual",latexTrigger:["\\lneqq"],kind:"infix",associativity:"any",precedence:245},{name:"NotLessNotEqual",latexTrigger:["\\nleqq"],kind:"infix",associativity:"any",precedence:245},{name:"LessOverEqual",latexTrigger:["\\leqq"],kind:"infix",associativity:"any",precedence:250},{name:"GreaterOverEqual",latexTrigger:["\\geqq"],kind:"infix",associativity:"any",precedence:250,parse:"GreaterEqual"},{name:"Equal",latexTrigger:["="],kind:"infix",associativity:"right",precedence:245},{latexTrigger:["*","="],kind:"infix",associativity:"right",precedence:245,parse:"StarEqual"},{name:"StarEqual",latexTrigger:["\\star","="],kind:"infix",associativity:"right",precedence:245},{name:"PlusEqual",latexTrigger:["+","="],kind:"infix",associativity:"right",precedence:245},{name:"MinusEqual",latexTrigger:["-","="],kind:"infix",associativity:"right",precedence:245},{name:"SlashEqual",latexTrigger:["/","="],kind:"infix",associativity:"right",precedence:245},{name:"EqualEqual",latexTrigger:["=","="],kind:"infix",associativity:"right",precedence:245},{name:"EqualEqualEqual",latexTrigger:["=","=","="],kind:"infix",associativity:"right",precedence:250},{name:"TildeFullEqual",latexTrigger:["\\cong"],kind:"infix",associativity:"right",precedence:245},{name:"NotTildeFullEqual",latexTrigger:["\\ncong"],kind:"infix",associativity:"right",precedence:245},{name:"Approx",latexTrigger:["\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"NotApprox",latexTrigger:["\\not","\\approx"],kind:"infix",associativity:"right",precedence:247},{name:"ApproxEqual",latexTrigger:["\\approxeq"],kind:"infix",associativity:"right",precedence:245},{name:"NotApproxEqual",latexTrigger:["\\not","\\approxeq"],kind:"infix",associativity:"right",precedence:250},{name:"NotEqual",latexTrigger:["\\ne"],kind:"infix",associativity:"right",precedence:255},{name:"Unequal",latexTrigger:["!","="],kind:"infix",associativity:"right",precedence:245},{name:"GreaterEqual",latexTrigger:["\\ge"],kind:"infix",associativity:"right",precedence:242},{latexTrigger:["\\geq"],kind:"infix",associativity:"right",precedence:242,parse:"GreaterEqual"},{latexTrigger:[">","="],kind:"infix",associativity:"right",precedence:243,parse:"GreaterEqual"},{latexTrigger:["\\geqslant"],kind:"infix",associativity:"right",precedence:250,parse:"GreaterEqual"},{name:"GreaterNotEqual",latexTrigger:["\\gneqq"],kind:"infix",associativity:"right",precedence:245},{name:"NotGreaterNotEqual",latexTrigger:["\\ngeqq"],kind:"infix",associativity:"right",precedence:245},{latexTrigger:[">"],kind:"infix",associativity:"right",precedence:245,parse:"Greater"},{name:"Greater",latexTrigger:["\\gt"],kind:"infix",associativity:"right",precedence:245},{name:"NotGreater",latexTrigger:["\\ngtr"],kind:"infix",associativity:"right",precedence:244},{latexTrigger:["\\not",">"],kind:"infix",associativity:"right",precedence:244,parse:"NotGreater"},{name:"RingEqual",latexTrigger:["\\circeq"],kind:"infix",associativity:"right",precedence:245},{name:"TriangleEqual",latexTrigger:["\\triangleq"],kind:"infix",associativity:"right",precedence:245},{name:"DotEqual",latexTrigger:["\\doteq"],kind:"infix",associativity:"right",precedence:250},{name:"DotEqualDot",latexTrigger:["\\doteqdot"],kind:"infix",associativity:"right",precedence:250},{name:"FallingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:250},{name:"RisingDotEqual",latexTrigger:["\\fallingdotseq"],kind:"infix",associativity:"right",precedence:250},{name:"QuestionEqual",latexTrigger:["\\questeq"],kind:"infix",associativity:"right",precedence:245},{name:"MuchLess",latexTrigger:["\\ll"],kind:"infix",associativity:"right",precedence:245},{name:"MuchGreater",latexTrigger:["\\gg"],kind:"infix",associativity:"right",precedence:245},{name:"Precedes",latexTrigger:["\\prec"],kind:"infix",associativity:"right",precedence:245},{name:"Succeeds",latexTrigger:["\\succ"],kind:"infix",associativity:"right",precedence:245},{name:"PrecedesEqual",latexTrigger:["\\preccurlyeq"],kind:"infix",associativity:"right",precedence:245},{name:"SucceedsEqual",latexTrigger:["\\curlyeqprec"],kind:"infix",associativity:"right",precedence:245},{name:"NotPrecedes",latexTrigger:["\\nprec"],kind:"infix",associativity:"right",precedence:245},{name:"NotSucceeds",latexTrigger:["\\nsucc"],kind:"infix",associativity:"right",precedence:245},{name:"Between",latexTrigger:["\\between"],kind:"infix",associativity:"right",precedence:250}];function d7(e,t,r={}){let{contract:i=.125,step:n=1,power:s=2,atol:a=1e-16,rtol:u=a>0?0:Math.sqrt(Number.EPSILON),maxeval:f=1e6,breaktol:p=2}=r;if(!isFinite(t))return d7(R=>e(1/R),1/t,{rtol:u,atol:a,maxeval:f,contract:Math.abs(i)>1?1/i:i,step:1/n,power:s});let d=n,b=Math.pow(1/i,s),x=e(t+d),I=[x],L=1/0,O=1;for(;O<f;){O+=1,d*=i,I.push(e(t+d));let R=b,A=1/0;for(let M=I.length-2;M>=0;M--){let T=I[M];I[M]=I[M+1]+(I[M+1]-I[M])/(R-1);let q=Math.abs(I[M]-T);A=Math.min(A,q),q<L&&(x=I[M],L=q),R*=b}if(A>p*L||!isFinite(A)||L<=Math.max(u*Math.abs(x),a))break}return[x,L]}function Kt(e){if(typeof e=="bigint")return e;if(typeof e=="number")return Number.isInteger(e)?e>=Number.MAX_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?BigInt(e):Kt(e.toString()):null;if(e instanceof dr)return e.isInteger()?Kt(e.toString()):null;let t=e.toLowerCase(),r=t.match(/([+-]?[0-9]*)(?:\.([0-9]+))?e([+-]?[0-9]+)$/);if(r){let i=parseInt(r[3])-(r[2]?r[2].length:0);if(i<0)return null;t=(r[1]??"")+(r[2]??"")+"0".repeat(i)}if(t.indexOf(".")>=0||!/^[+-]?[0-9]+$/.test(t))return null;try{return BigInt(t)}catch(i){return console.error(i.message),null}}var px=0x3ffffffffffe5,Eh=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]),g7=7919;function mx(e){if(e<=3)return{[e]:1};let t={},r=0;for(;e%2===0;)r+=1,e/=2;for(r>0&&(t[2]=r),r=0;e%3===0;)r+=1,e/=3;r>0&&(t[3]=r);let i=!1;for(;!i;){if(e===1)return t;let n=Math.sqrt(e);i=!0;for(let s=6;s<=n+6;s+=6){if(e%(s-1)===0){t[s-1]=(t[s-1]??0)+1,e/=s-1,i=!1;break}if(e%(s+1)===0){t[s+1]=(t[s+1]??0)+1,e/=s+1,i=!1;break}}}return t[e]!==void 0?t[e]+=1:t[e]=1,t}function y7(e){if(!Number.isInteger(e)||!Number.isFinite(e)||Number.isNaN(e)||e<=1)return!1;if(e<=g7)return Eh.has(e);for(let t of Eh)if(e%t===0)return!1;return yx(e,30)?void 0:!1}function dx(e){if(e<=1)return!1;if(e<=g7)return y7(Number(e));for(let t of Eh)if(e%BigInt(t)===BigInt(0))return!1;return e<px&&(e=gx(e)),vx(e,30)?void 0:!1}function gx(e){if(e===BigInt(1))return BigInt(1);if(e%BigInt(2)===BigInt(0))return BigInt(2);if(e%BigInt(3)===BigInt(0))return BigInt(3);if(e%BigInt(5)===BigInt(0))return BigInt(5);let t=BigInt(Math.floor(Math.sqrt(Number(e)))),r=BigInt(7);for(;r<=t;){if(e%r===BigInt(0))return r;if(e%(r+BigInt(4))===BigInt(0))return r+BigInt(4);if(e%(r+BigInt(6))===BigInt(0))return r+BigInt(6);if(e%(r+BigInt(10))===BigInt(0))return r+BigInt(10);if(e%(r+BigInt(12))===BigInt(0))return r+BigInt(12);if(e%(r+BigInt(16))===BigInt(0))return r+BigInt(16);if(e%(r+BigInt(22))===BigInt(0))return r+BigInt(22);if(e%(r+BigInt(24))===BigInt(0))return r+BigInt(24);r+=BigInt(30)}return e}function yx(e,t){let r=0,i=e-1;for(;i%2===0;)i/=2,++r;e:do{let n=Math.pow(2+Math.floor(Math.random()*(e-3)),i)%e;if(!(n===1||n===e-1)){for(let s=r-1;s--;){if(n=n*n%e,n===1)return!1;if(n===e-1)continue e}return!1}}while(--t);return!0}function vx(e,t){let r=0,i=e-BigInt(1);for(;i%BigInt(2)===BigInt(0);)i=i/BigInt(2),++r;e:do{let n=BigInt(2+Math.floor(Math.random()*(Number(e)-3)))**i%e;if(!(n===BigInt(1)||n===e-BigInt(1))){for(let s=r-1;s--;){if(n=n*n%e,n===BigInt(1))return!1;if(n===e-BigInt(1))continue e}return!1}}while(--t);return!0}BigInt(4),BigInt(2),BigInt(4),BigInt(2),BigInt(4),BigInt(6),BigInt(2),BigInt(6);var y1=21,bx=53,En=Math.floor(Math.log10(Math.pow(2,bx))),D0=Math.pow(2,-46),Re=1e6,xx=1024,Xu=1e6;function Ah(e,t){if(e>=Number.MAX_SAFE_INTEGER)return[1,e];if(e===0)return[0,0];if(e===1)return[1,1];if(t===2){let s=[[0,0],[1,1],[1,2],[1,3],[2,1],[1,5],[1,6],[1,7],[1,8],[3,1],[1,10],[1,11],[2,3],[1,13],[1,14],[1,15],[4,1],[1,17],[3,2],[1,19],[1,20]][e];if(s)return s}let r=mx(e),i=1,n=1;for(let s of Object.keys(r)){let a=parseInt(s);i=i*Math.pow(a,Math.floor(r[s]/t)),n=n*Math.pow(a,r[s]%t)}return[i,n]}function ya(e,t){if(e===0)return t;if(t===0||e===t)return e;if(!Number.isInteger(e)||!Number.isInteger(t))return NaN;for(;t!==0;)[e,t]=[t,e%t];return e<0?-e:e}function v7(e,t){return e*t/ya(e,t)}function b7(e){if(!Number.isInteger(e)||e<0)return NaN;let t=1;for(let r=2;r<=e;r++)t=t*r;return t}function wx(e){if(!Number.isInteger(e)||e<0)return NaN;if(e<0)return NaN;if(e<=1)return 1;let t=e;for(;e>2;)e-=2,t*=e;return t}function Nx(e,t=D0){return typeof e=="number"&&Math.abs(e)<=t?0:e}function kx(e,t,r=.1){return(e(t-4*r)/280-4*e(t-3*r)/105+e(t-2*r)/5-4*e(t-r)/5+4*e(t+r)/5-e(t+2*r)/5+4*e(t+3*r)/105-e(t+4*r)/280)/r}function Ol(e,t,r=1){if(r===0){let s=Ol(e,t,-1),a=Ol(e,t,1);return s===void 0||a===void 0?NaN:Math.abs(s-a)>1e-5?NaN:(s+a)/2}let[i,n]=d7(e,t,{step:r>0?1:-1});return i}function _s(e){return typeof e=="object"&&e!==null&&"engine"in e}function Vn(e){return e.precision>En}function Ih(e){return typeof e=="string"?e.startsWith("$")&&e.endsWith("$"):!1}function ql(e){if(typeof e=="number")return e.toString();if(typeof e=="string"){let t=e.trim();if(t.startsWith("$$")&&t.endsWith("$$"))return t.slice(2,-2);if(t.startsWith("$")&&t.endsWith("$"))return t.slice(1,-1)}return Array.isArray(e)?ql(re(e)):null}function Yl(e){let t=0;for(let r=0;r<e.length;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return Math.abs(t)}function lm(e){return e==null?[]:typeof e=="string"?[e]:_s(e)?lm(e.symbol):typeof e[Symbol.iterator]=="function"?Array.from(e).map(t=>typeof t=="string"?t:t.symbol):[]}function ts(e){return typeof e!="string"?!1:Yu.some(t=>t.name===e)}function om(e){return["Less","LessEqual","Greater","GreaterEqual"].includes(e)}function um(e){return["Equal","NotEqual"].includes(e)}function P0(e){let t=e.operator;return typeof t!="string"?!1:om(t)}function x7(e){let t=e.operator;return typeof t!="string"?!1:um(t)}function Ku(e){var r,i;if(typeof e=="number")return;let t=e.engine;if(e.symbol==="ImaginaryUnit")return t.One;if(e.re===0)return t.number(e.im);if(e.operator==="Negate")return(r=Ku(e.op1))==null?void 0:r.neg();if(e.operator==="Complex")return e.op1.is(0)&&!isNaN(e.op2.re)?t.number(e.op2.re):void 0;if(e.operator==="Multiply"&&e.nops===2){let[n,s]=e.ops;if(n.symbol==="ImaginaryUnit")return s;if(s.symbol==="ImaginaryUnit")return n;if(s.isNumberLiteral&&s.re===0&&s.im!==0)return n.mul(s.im);if(n.isNumberLiteral&&n.re===0&&n.im!==0)return s.mul(n.im)}if(e.operator==="Divide"){let n=e.op2;return n.is(0)||(i=Ku(e.op1))==null?void 0:i.div(n)}}function v1(e){if(!e)return;let t={...e};return t.odd&&(t.even=!1),t.even&&(t.odd=!1),t}function zh(e){if(e==null||typeof e!="object"||_s(e))return!1;if("value"in e||"constant"in e||"inferred"in e){if("type"in e&&typeof e.type=="function")throw new Error("The `type` field of a symbol definition should be of type `string`");if("signature"in e)throw new Error("Symbol definition cannot have a `signature` field. Use a `type` field instead.");if("sgn"in e)throw new Error("Symbol definition cannot have a `sgn` field. Use a `flags.sgn` field instead.");return!0}return!1}function Ch(e){if(e==null||typeof e!="object"||_s(e))return!1;if(("signature"in e||"complexity"in e)&&"constant"in e)throw new Error("Function definition cannot have a `constant` field and symbol definition cannot have a `signature` field.");if(!("evaluate"in e)&&!("signature"in e)&&!("sgn"in e)&&!("complexity"in e)&&!("canonical"in e))return!1;if("type"in e&&typeof e.type!="function")throw new Error("The `type` field of a function definition should be a function");if("sgn"in e&&typeof e.sgn!="function")throw new Error("The `sgn` field of a function definition should be a function");return!0}function Fa(e,t){return t.every(r=>_s(r))?t.every(r=>r.isCanonical)?t:t.map(r=>r.canonical):t.map(r=>e.box(r))}function jn(e,t){return t.every(r=>_s(r)&&r.isCanonical)?t:t.map(r=>e.box(r))}function tf(e){return e.symbol==="Booleans"?"boolean":e.symbol==="Strings"?"string":e.symbol==="Numbers"?"number":e.symbol==="ComplexNumbers"?"complex":e.symbol==="ImaginaryNumbers"?"imaginary":e.symbol==="RealNumbers"?"real":e.symbol==="RationalNumbers"?"rational":e.symbol==="Integers"?"integer":"unknown"}function rf(e){let t=Sx(e);return t===void 0?!1:Number.isFinite(t)}function Ju(e){var t,r,i,n,s,a;return e.string!==null||(((r=(t=e.symbolDefinition)==null?void 0:t.value)==null?void 0:r.string)??null)!==null?!0:((a=(s=e.functionDefinition??((n=(i=e.symbolDefinition)==null?void 0:i.value)==null?void 0:n.functionDefinition))==null?void 0:s.collection)==null?void 0:a.at)!==void 0}function Ct(e){var r,i,n,s,a,u,f;if(e.string!==null||(((i=(r=e.symbolDefinition)==null?void 0:r.value)==null?void 0:i.string)??null)!==null)return!0;let t=e.functionDefinition??((s=(n=e.symbolDefinition)==null?void 0:n.value)==null?void 0:s.functionDefinition);return t?((a=t.collection)==null?void 0:a.at)!==void 0&&Number.isFinite(((f=(u=t.collection)==null?void 0:u.size)==null?void 0:f.call(u,e))??1/0):!1}function*Ye(e){let t=hu(e);if(!t){yield e;return}let r=e.engine.iterationLimit,i=0;for(;;){let{done:n,value:s}=t.next();if(n)return;if(i++>r){yield e.engine.error("iteration-limit-exceeded");return}yield s}}function Sx(e){var r,i,n,s,a,u,f;let t=e.string??((i=(r=e.symbolDefinition)==null?void 0:r.value)==null?void 0:i.string)??null;return t!==null?t.length:(f=(u=(a=e.functionDefinition??((s=(n=e.symbolDefinition)==null?void 0:n.value)==null?void 0:s.functionDefinition))==null?void 0:a.collection)==null?void 0:u.size)==null?void 0:f.call(u,e)}function hu(e){var i,n,s,a,u;let t=e.functionDefinition??((n=(i=e.symbolDefinition)==null?void 0:i.value)==null?void 0:n.functionDefinition);if((s=t==null?void 0:t.collection)!=null&&s.iterator)return t.collection.iterator(e);let r=e.string??((u=(a=e.symbolDefinition)==null?void 0:a.value)==null?void 0:u.string)??null;if(r!==null){if(r.length===0)return{next:()=>({done:!0,value:void 0})};let f=0;return{next:()=>({value:e.engine.string(r.charAt(f++)),done:f>r.length})}}}function _x(e,t){var n,s,a;let r=e.functionDefinition??((s=(n=e.symbolDefinition)==null?void 0:n.value)==null?void 0:s.functionDefinition);if((a=r==null?void 0:r.collection)!=null&&a.at)return r.collection.at(e,t);let i=e.string;if(i)return t<1?e.engine.string(i.charAt(i.length+t)):e.engine.string(i.charAt(t-1))}function Tx(e){if(!e)return;let t={};if(!e.contains||!e.size)throw new Error('A collection must have at least a "contains" and "size" handler');e.contains&&(t.contains=e.contains),e.size&&(t.size=e.size),e.at&&(t.at=e.at),e.iterator&&(t.iterator=e.iterator),e.keys&&(t.keys=e.keys),e.indexOf&&(t.indexOf=e.indexOf),e.subsetOf&&(t.subsetOf=e.subsetOf);let r=t.iterator;return t.at&&!r&&(r=(i,n=1,s=-1)=>{let a=e.at,u=n;return{next(){if(s>=0&&u>=n+s)return{done:!0,value:void 0};let f=a(i,u);return f===void 0?{done:!0,value:void 0}:(u++,{done:!1,value:f})}}},t.iterator=r),t.indexOf||(t.indexOf=(i,n)=>{let s=1,a=r(i),u=a.next();for(;!u.done;){if(n.isSame(u.value))return s;s++,u=a.next()}}),{contains:e.contains,size:e.size,at:e.at,iterator:r,keys:e.keys,indexOf:e.indexOf,subsetOf:e.subsetOf}}function lr(e,t){let r=e.every(n=>n.isCanonical)?e:e.map(n=>n.canonical);if(t){let n=a=>a.symbol==="Nothing"||a.operator===t||a.operator==="Sequence";if(r.every(a=>!n(a)))return r;let s=[];for(let a of r)a.symbol!=="Nothing"&&(a.ops&&(a.operator===t||a.operator==="Sequence")?s.push(...lr(a.ops,t)):s.push(a));return s}if(r.every(n=>!(n.symbol==="Nothing"||n.operator==="Sequence")))return r;let i=[];for(let n of r)n.symbol!=="Nothing"&&(n.ops&&n.operator==="Sequence"?i.push(...lr(n.ops,t)):i.push(n));return i}function e0(e,t){if(!t||e.every(i=>!i.ops||i.operator!==t))return e;let r=[];for(let i of e)!i.ops||i.operator!==t?r.push(i):r.push(...e0(i.ops,t));return r.length,e.length,r.length===e.length?e:r}function w7(e){if(e.every(r=>r.operator!=="Sequence"&&r.operator!=="Delimiter"))return e;let t=[];for(let r of e)if(!r.isValid)t.push(r);else if(r.operator==="Delimiter")if(r.op1.operator==="Sequence"){let i=r.op1.ops??[];i.length===0?t.push(r.engine.box(["Tuple"])):t.push(...w7(i))}else t.push(r.op1);else r.operator==="Sequence"?r.ops&&t.push(...r.ops):t.push(r);return t}function tn(e,t,r){if(t=lr(t),!e.strict||t.length===r)return t;let i=[...t.slice(0,r)],n=Math.min(r,t.length);for(;n<r;)i.push(e.error("missing")),n+=1;for(;n<t.length;)i.push(e.error("unexpected-argument",t[n].toString())),n+=1;return i}function li(e,t,r){var u,f;let i=typeof r=="number"?r:r==null?void 0:r.count,n=typeof r=="number"||r==null?void 0:r.flatten;if(t=lr(t,n),!e.strict){for(let p of t)Ct(p)||p.infer("real");return t}let s=!0;i??(i=t.length);let a=[];for(let p=0;p<=Math.max(i-1,t.length-1);p++){let d=t[p];if(p>i-1)s=!1,a.push(e.error("unexpected-argument",d.toString()));else if(d===void 0)s=!1,a.push(e.error("missing"));else if(!d.isValid)s=!1,a.push(d);else if(d.isNumber)a.push(d);else if(d.symbol&&!e.lookupSymbol(d.symbol)&&!e.lookupFunction(d.symbol))a.push(d);else if(d.type==="unknown")a.push(d);else if(Ct(d)){for(let b of Ye(d))if(!b.isNumber){s=!1;break}s?a.push(d):a.push(e.typeError("number",d.type,d))}else(u=d.symbolDefinition)!=null&&u.inferredType&&G("number",d.type)||(f=d.functionDefinition)!=null&&f.inferredSignature&&G("number",d.type)?a.push(d):(s=!1,a.push(e.typeError("number",d.type,d)))}if(s)for(let p of a)if(Ct(p))for(let d of Ye(p))d.infer("real");else p.infer("real");return a}function va(e,t,r){return t==null?e.error("missing"):r===void 0?e.error("unexpected-argument",t.toString()):(t=t.canonical,!t.isValid||G(t.type,r)?t:e.typeError(r,t.type,t))}function N7(e,t,r){if(t.length===r.length&&t.every((n,s)=>G(n.type,r[s])))return t;let i=[];for(let n=0;n<=r.length-1;n++)i.push(va(e,t[n],r[n]));for(let n=r.length;n<=t.length-1;n++)i.push(e.error("unexpected-argument",t[n].toString()));return i}function Mx(e,t,r){var b,x,I,L,O,R,A,M;if(!e.strict||typeof r.signature=="string"||r.signature.kind!=="signature")return null;let i=[],n=!0,s=((b=r.signature.args)==null?void 0:b.map(T=>T.type))??[],a=((x=r.signature.optArgs)==null?void 0:x.map(T=>T.type))??[],u=(I=r.signature.restArg)==null?void 0:I.type,f=r.hold,p=r.threadable,d=0;for(let T of s){let q=t[d++];if(!q){i.push(e.error("missing")),n=!1;continue}if(f){i.push(q);continue}if(!q.isValid){i.push(q),n=!1;continue}if(q.type==="unknown"){i.push(q);continue}if(p&&Ct(q)){i.push(q);continue}if((L=q.symbolDefinition)!=null&&L.inferredType&&G(q.type,T)){i.push(q);continue}if((O=q.functionDefinition)!=null&&O.inferredSignature&&G(q.type,T)){i.push(q);continue}if(!G(q.type,T)){i.push(e.typeError(T,q.type,q)),n=!1;continue}i.push(q)}for(let T of a){let q=t[d];if(!q)break;if(f){i.push(q),d+=1;continue}if(!q.isValid){i.push(q),n=!1,d+=1;continue}if(q.type==="unknown"){i.push(q),d+=1;continue}if(p&&Ct(q)){i.push(q),d+=1;continue}if((R=q.symbolDefinition)!=null&&R.inferredType&&G(q.type,T)){i.push(q),d+=1;continue}if(!G(q.type,T)){i.push(e.typeError(T,q.type,q)),n=!1,d+=1;continue}i.push(q),d+=1}if(u)for(let T of t.slice(d)){if(d+=1,f){i.push(T);continue}if(!T.isValid){i.push(T),n=!1;continue}if(T.type==="unknown"){i.push(T);continue}if(p&&Ct(T)){i.push(T);continue}if((A=T.symbolDefinition)!=null&&A.inferredType&&G(T.type,u)){i.push(T);continue}if(!G(T.type,u)){i.push(e.typeError(u,T.type,T)),n=!1;continue}i.push(T)}if(d<t.length)for(let T of t.slice(d))i.push(e.error("unexpected-argument",T.toString())),n=!1;if(!n)return i;d=0;for(let T of s)f||(!p||!Ct(t[d]))&&t[d].infer(T),d+=1;for(let T of a){if(!t[d])break;(!p||!Ct(t[d]))&&((M=t[d])==null||M.infer(T)),d+=1}if(u)for(let T of t.slice(d))f||(!p||!Ct(T))&&T.infer(u),d+=1;return null}function t0(e,t){for(;t!==BigInt(0);)[e,t]=[t,e%t];return e<0?-e:e}function Ex(e,t){return e*t/t0(e,t)}function ba(e){return e!==null&&Array.isArray(e)}function bt(e){return e!==null&&Array.isArray(e)&&typeof e[0]=="number"}function b1(e){return e!==null&&Array.isArray(e)&&typeof e[0]=="bigint"}function Zi(e){return e[0]==0}function x1(e){return e[0]>0}function Zr(e){return e[0]==e[1]}function $h(e){return e[0]===-e[1]}function tl(e){return e[1]==1}function Ax(e){return Number(e[0])}function Ix(e){return Number(e[1])}function zx(e){return Number(e[0])/Number(e[1])}function rl(e,t){if(typeof e[0]=="number"&&!Number.isFinite(e[0]))return e;let r=t;if(r===null)return e;if(b1(r))return e=[BigInt(e[0]),BigInt(e[1])],[r[1]*e[0]+r[0]*e[1],r[1]*e[1]];if(!Number.isFinite(r[0]))return r;if(b1(e)){let i=[BigInt(r[0]),BigInt(r[1])];return[i[1]*e[0]+i[0]*e[1],i[1]*e[1]]}return[r[1]*e[0]+r[0]*e[1],r[1]*e[1]]}function aa(e,t){return bt(e)&&bt(t)?[e[0]*t[0],e[1]*t[1]]:bt(e)?[BigInt(e[0])*t[0],BigInt(e[1])*t[1]]:bt(t)?[BigInt(t[0])*e[0],BigInt(t[1])*e[1]]:[e[0]*t[0],e[1]*t[1]]}function r0(e){return[-e[0],e[1]]}function Cx(e){return e[0]<0?[-e[1],-e[0]]:[e[1],e[0]]}function $x(e){return[Number(e[0]),Number(e[1])]}function k7(e,t){return bt(e)&&bt(t)?e[1]===1&&t[1]===1?[ya(e[0],t[0]),1]:[ya(e[0],t[0]),v7(e[1],t[1])]:e[1]===1&&t[1]===1?[t0(BigInt(e[0]),BigInt(t[0])),BigInt(1)]:[t0(BigInt(e[0]),BigInt(t[0])),Ex(BigInt(e[1]),BigInt(t[1]))]}function cm(e){if(bt(e)){if(e[0]===1||e[1]===1)return e;if(e[1]<0&&(e=[-e[0],-e[1]]),!Number.isFinite(e[1]))return[0,1];let n=ya(e[0],e[1]);return n<=1?e:[e[0]/n,e[1]/n]}e[1]<0&&(e=[-e[0],-e[1]]);let t=t0(e[0],e[1]),[r,i]=t<=1?e:[e[0]/t,e[1]/t];return r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER&&i<=Number.MAX_SAFE_INTEGER?[Number(r),Number(i)]:[r,i]}function Dx(e){if(!Number.isFinite(e)||e%1===0)return e;let t=1e-15,r=Math.floor(e),i=1,n=0,s=r,a=1;for(;e-r>t*a*a;){e=1/(e-r),r=Math.floor(e);let u=i;i=s;let f=n;n=a,s=u+r*i,a=f+r*n}return[s,a]}var Lt=class{get bignumRe(){}get bignumIm(){}isZeroWithTolerance(e){return this.isZero}valueOf(){return this.im===0?this.bignumRe?this.bignumRe.toFixed():this.re:this.N().toString()}[Symbol.toPrimitive](e){return e==="string"?this.toString():this.valueOf()}toJSON(){if(this.im===0){let e=this.re;if(Number.isFinite(e))return e}return this.N().toString()}print(){let e=console.log;e==null||e(this.toString())}},Ll=["Error","'missing'"];function la(e){return!!(typeof e=="number"||O0(e)||typeof e=="string"&&/^[+-]?[0-9\.]/.test(e))}function O0(e){return e!==null&&typeof e=="object"&&"num"in e}function S7(e){return e!==null&&typeof e=="object"&&"sym"in e}function Px(e){return e!==null&&typeof e=="object"&&"str"in e}function Xl(e){return e!==null&&typeof e=="object"&&"fn"in e}function Fe(e){return e==null?null:typeof e=="object"&&"str"in e?e.str:typeof e!="string"||e.length<2||e.at(0)!=="'"||e.at(-1)!=="'"?null:e.substring(1,e.length-1)}function _7(e){if(e==null||Fe(e)!==null)return null;let t=Q(e);return t?[t,...ce(e).map(r=>_7(r)).filter(r=>r!==null)]:e}function Q(e){return Array.isArray(e)?e[0]:e==null?"":Xl(e)?e.fn[0]:""}function ce(e){return Array.isArray(e)?e.slice(1):e!==void 0&&Xl(e)?e.fn.slice(1):[]}function $(e,t){return Array.isArray(e)?e[t]??null:e===null||!Xl(e)?null:e.fn[t]??null}function Tt(e){return e==null?0:Array.isArray(e)?Math.max(0,e.length-1):Xl(e)?Math.max(0,e.fn.length-1):0}function w1(e){return e==null?null:Q(e)==="Hold"?$(e,1):e}function we(e){if(typeof e=="string")return/^[+-]?[0-9\.]/.test(e)||e.length>=2&&e[0]==="'"&&e[e.length-1]==="'"?null:e;if(e==null)return null;let t=S7(e)?e.sym:e;return typeof t!="string"?null:t}function N1(e){let t=Q(e);if(t==="KeyValuePair"||t==="Tuple"||t==="Pair"){let[r,i]=ce(e),n=Fe(r);return n?[n,i??"Nothing"]:null}return null}function T7(e){if(e===null)return null;let t=N1(e);if(t)return{[t[0]]:t[1]};if(Q(e)==="Dictionary"){let r={},i=ce(e);for(let n=1;n<Tt(e);n++){let s=N1(i[n]);s&&(r[s[0]]=s[1])}return r}return null}function nf(e){let t=Object.keys(e);if(t.length===0)return["Dictionary"];if(t.length===1)return["Pair",{str:t[0]},e[t[0]]];let r=[];for(let i of t)r.push(["Pair",{str:i},e[i]]);return["Dictionary",...r]}function Ox(e){if(e=e.toLowerCase().replace(/[nd]$/,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,""),e==="nan")return NaN;if(e==="infinity"||e==="+infinity")return 1/0;if(e==="-infinity")return-1/0;if(/\([0-9]+\)/.test(e)){let[t,r,i,n]=e.match(/(.+)\(([0-9]+)\)(.*)$/)??[];e=r+i.repeat(Math.ceil(16/i.length))+(n??"")}return parseFloat(e)}function xe(e){return typeof e=="number"?e:typeof e=="string"?Ox(e):e!==void 0&&O0(e)?xe(e.num):null}function Rl(e){if(e==null)return null;if(we(e)==="Half")return[1,2];let t=Q(e);if(!t)return null;let r=null,i=null;if(t==="Negate"){let n=Rl(ce(e)[0]);if(n)return[-n[0],n[1]]}if(t==="Rational"||t==="Divide"){let[n,s]=ce(e);r=xe(n)??NaN,i=xe(s)??NaN}if(t==="Power"){let[n,s]=ce(e),a=xe(s);a===1?(r=xe(n),i=1):a===-1&&(r=1,i=xe(n))}if(t==="Multiply"){let[n,s]=ce(e);if(Q(s)==="Power"){let[a,u]=ce(s);xe(u)===-1&&(r=xe(n),i=xe(a))}}return r===null||i===null?null:Number.isInteger(r)&&Number.isInteger(i)?[r,i]:null}function Dh(e,t){let r=we(e);if(r&&t[r])return t[r];let i=Q(e);return i?[Dh(i,t),...ce(e).map(n=>Dh(n,t))]:e}function Ph(e,t){let r=null;if(Array.isArray(e)&&(r=e),Xl(e)&&(r=e.fn),r===null)return[];let i=1,n=[];for(;i<r.length;)n.push(t(r[i])),i+=1;return n}function pu(e,t,r){let i=Q(t),n=Q(r);return i===e&&n===e?[e,...ce(t),...ce(r)]:i===e?[e,...ce(t),r]:n===e?[e,t,...ce(r)]:[e,t,r]}function Fl(e){if(e==null)return null;let t=Q(e);if(t==="Delimiter"){if(e=$(e,1),e===null)return[];if(t=Q(e),t!=="Sequence")return[e]}return t!=="Sequence"?null:ce(e)}function xt(e){return e==null||e==="Nothing"?!0:Q(e)==="Sequence"&&Tt(e)===0}function Oe(e){return xt(e)?Ll:e}function Oh(e){return e[0]==="Square"?Oh(e.slice(1))+2:e.reduce((t,r)=>t+i0(r),0)}function i0(e){if(e===null)return 0;if(typeof e=="number"||typeof e=="string"||la(e)||S7(e)||Px(e))return 1;if(Array.isArray(e))return Oh(e);if("fn"in e)return Oh(e.fn);let t=T7(e);if(t){let r=Object.keys(t);return 1+r.length+r.reduce((i,n)=>i+i0(t[n]),0)}return 0}function qx(e){if(e==="N")return[0,""];let t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},r=0,i=0;e=e.toUpperCase();for(let n=e.length-1;n>=0;n--){let s=t[e[n]];if(s===void 0)return[r,e.slice(n)];s<i?r-=s:r+=s,i=s}return[r,""]}function n0(e,t){if(e=e.trim(),e.length===0)return[NaN,""];if(e.startsWith("+"))return n0(e.slice(1),t);if(e.startsWith("-")){let[n,s]=n0(e.slice(1),t);return[-n,s]}let r=10;if(typeof t=="string"&&(t=t.toLowerCase()),e.startsWith("0x"))r=16,e=e.slice(2);else if(e.startsWith("0b"))r=2,e=e.slice(2);else{if(t==="roman")return qx(e);if(t==="base64"||t==="base-64")try{return[parseInt(btoa(e)),""]}catch{return[NaN,""]}else typeof t=="number"?r=t:typeof t=="string"&&(r=parseInt(t))}let i=0;for(let n=0;n<e.length;n++){let s={" ":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,"":-1,_:-1,",":-1,0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35}[e[n]];if(s!==-1){if(s===void 0)return[i,e.substring(n)];if(s>=r)return[i,e.substring(n)];i=i*r+s}}return[i,""]}function gr(e,t){if(typeof t=="number"&&typeof e=="number")return e.toFixed(t);let r=e.toString();if(typeof e=="number"&&Number.isInteger(e)&&r.includes("e")){let i=BigInt(e).toString(),n=i.match(/0+$/);if((n?n[0].length:0)<=5)return i}else if(typeof e=="bigint"){let i=r.match(/0+$/),n=i?i[0].length:0;if(n>5)return`${r.slice(0,-n)}e+${n}`}return r}function Lx(e){if(typeof e=="number")return Number.isInteger(e)?BigInt(e):null;if(e==null||!la(e))return null;let t=O0(e)?e.num:e;if(typeof t=="number")return Number.isInteger(t)?BigInt(t):null;if(typeof t!="string")return null;let r=t.toLowerCase().replace(/[nd]$/,"").replace(/[\u0009-\u000d\u0020\u00a0]/g,"");return r==="nan"||r==="infinity"||r==="+infinity"||r==="-infinity"?null:Kt(r)}function Ii(e,t){if(typeof e=="number")return isNaN(e)?"NaN":Number.isFinite(e)?typeof t=="number"?{num:e.toFixed(t)}:e:e<0?"NegativeInfinity":"PositiveInfinity";if(e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return Number(e);let r=gr(e);return Number(e).toString()===r?Number(e):{num:r}}var Vt=class Tr extends Lt{constructor(t,r,i){if(super(),this.im=0,this.factory=r,this.bignum=i,typeof t=="number"){this.rational=[t,1],this.radical=1;return}if(typeof t=="bigint"){this.rational=[t,BigInt(1)],this.radical=1;return}let n=t.rational?[...t.rational]:[1,1];this.rational=n,this.radical=t.radical??1,this.radical<=Re&&this.radical>=1,this.normalize()}get type(){return this.isNaN||this.isPositiveInfinity||this.isNegativeInfinity?"non_finite_number":this.radical!==1?(Zi(this.rational),"finite_real"):tl(this.rational)?"finite_integer":"finite_rational"}get isExact(){return!0}get asExact(){return this}toJSON(){if(this.isNaN)return"NaN";if(this.isPositiveInfinity)return"PositiveInfinity";if(this.isNegativeInfinity)return"NegativeInfinity";if(this.isZero)return 0;if(this.isOne)return 1;if(this.isNegativeOne)return-1;let t=0,r=i=>tl(i)?Ii(i[0]):["Rational",Ii(i[0]),Ii(i[1])];return Zi(this.rational)||(this.radical===1?t=r(this.rational):Zr(this.rational)?t=["Sqrt",this.radical]:$h(this.rational)?t=["Negate",["Sqrt",this.radical]]:t=["Multiply",r(this.rational),["Sqrt",this.radical]]),t}clone(t){return new Tr(t,this.factory,this.bignum)}toString(){if(this.isZero)return"0";if(this.isOne)return"1";if(this.isNegativeOne)return"-1";let t=i=>tl(i)?gr(i[0]):`${gr(i[0])}/${gr(i[1])}`;if(this.radical===1)return t(this.rational);let r=i=>`sqrt(${gr(i)})`;return Zr(this.rational)?r(this.radical):$h(this.rational)?`-${r(this.radical)}`:this.rational[0]==1?`${r(this.radical)}/${gr(this.rational[1])}`:this.rational[0]==-1?`-${r(this.radical)}/${gr(this.rational[1])}`:`${t(this.rational)}${r(this.radical)}`}get sign(){return Zi(this.rational)?0:x1(this.rational)?1:-1}get re(){return zx(this.rational)*Math.sqrt(this.radical)}get bignumRe(){let t,r=this.rational;return bt(r)?t=this.bignum(r[0]).div(r[1]):t=this.bignum(r[0].toString()).div(this.bignum(r[1].toString())),this.radical===1?t:t.mul(this.bignum(this.radical).sqrt())}get numerator(){return this.rational[1]==1?this:this.clone({rational:bt(this.rational)?[this.rational[0],1]:[this.rational[0],BigInt(1)],radical:this.radical})}get denominator(){return bt(this.rational)?this.clone(this.rational[1]):this.clone({rational:[this.rational[1],BigInt(1)]})}normalize(){if(Number.isInteger(this.radical)&&this.radical>0&&Number.isFinite(this.radical),isNaN(this.radical)){this.rational=[NaN,1],this.radical=1;return}let[t,r]=this.rational;if(r==0){this.rational=[NaN,1],this.radical=1;return}if(this.radical===0||t===0){this.rational=[0,1],this.radical=1;return}if(this.radical>=4){let[i,n]=Ah(this.radical,2);typeof this.rational[0]=="number"?this.rational[0]*=i:this.rational=aa(this.rational,[i,1]),this.radical=n}this.rational=cm(this.rational)}get isNaN(){return Number.isNaN(this.rational[0])}get isPositiveInfinity(){return this.rational[0]==1/0}get isNegativeInfinity(){return this.rational[0]==-1/0}get isComplexInfinity(){return!1}get isZero(){return Zi(this.rational)}get isOne(){return!(this.rational[0]!==this.rational[1]||this.radical!==1)}get isNegativeOne(){return!(this.rational[0]!==-this.rational[1]||this.radical!==1)}sgn(){if(!Number.isNaN(this.rational[0]))return Zi(this.rational)?0:x1(this.rational)?1:-1}N(){return this.isZero||this.isOne||this.isNegativeOne?this:this.rational[1]==1&&this.radical===1?this:this.factory(this.bignumRe)}neg(){return this.isZero?this:this.clone({rational:r0(this.rational),radical:this.radical})}inv(){return this.isOne?this:this.isNegativeOne?this:this.clone({rational:bt(this.rational)?[this.rational[1],this.rational[0]*this.radical]:[this.rational[1],this.rational[0]*BigInt(this.radical)],radical:this.radical})}add(t){return typeof t=="number"?t===0?this:Number.isInteger(t)&&this.radical===1?this.clone({rational:bt(this.rational)?[this.rational[0]+t*this.rational[1],this.rational[1]]:[this.rational[0]+BigInt(t)*this.rational[1],this.rational[1]]}):this.factory(this.bignumRe).add(t):t.isZero?this:this.isZero?t:t instanceof Tr?this.radical===t.radical?this.clone({rational:rl(this.rational,t.rational),radical:this.radical}):this.factory(this.bignumRe).add(t):t.add(this)}sub(t){return this.add(t.neg())}mul(t){return t===0?this.clone(0):t===1?this:t===-1?this.neg():typeof t=="number"?Number.isInteger(t)?this.clone({rational:bt(this.rational)?[this.rational[0]*t,this.rational[1]]:[this.rational[0]*BigInt(t),this.rational[1]],radical:this.radical}):this.factory(this.bignumRe).mul(t):t instanceof dr?this.factory(t).mul(this):t.im!==0?t.mul(this):t.isZero?t:t.isOne?this:t.isNegativeOne?this.neg():t.isNaN?t:this.isZero?this:this.isOne?t:this.isNegativeOne?t.neg():t instanceof Tr?this.clone({rational:aa(this.rational,t.rational),radical:this.radical*t.radical}):t.mul(this)}div(t){if(typeof t=="number")return t===1?this:t===-1?this.neg():t===0?this.clone(NaN):this.clone({rational:bt(this.rational)?[this.rational[0],this.rational[1]*t]:[this.rational[0],this.rational[1]*BigInt(t)],radical:this.radical});if(t.isOne)return this;if(t.isNegativeOne)return this.neg();if(this.isZero)return t.isZero?this.clone(NaN):t.isNaN?t:this;if(t.isNaN)return t;if(t.isZero)return this.clone(this.sign*(1/0));if(!(t instanceof Tr))return this.factory(this.bignumRe).div(t);if(t.im!==0)return this.factory(this.bignumRe).div(t);let r;if(bt(this.rational)&&bt(t.rational)){let[i,n]=this.rational,[s,a]=t.rational;r=[i*a,n*s*t.radical]}else r=aa(this.rational,[BigInt(t.rational[1]),BigInt(t.rational[0])*BigInt(t.radical)]);return this.clone({rational:r,radical:this.radical*t.radical})}pow(t){if(this.isNaN)return this;if(typeof t=="number"&&isNaN(t))return this.clone(NaN);if(t instanceof Lt){if(t.isNaN)return this.clone(NaN);if(t.isZero)return this.clone(1);if(t.isOne)return this;if(t.im)t={re:t.re,im:t.im};else{if(t instanceof Tr&&t.radical===1&&t.rational[0]==1)return this.root(t.rational[0]);t=t.re}}if(t===.5)return this.sqrt();if(typeof t=="object"&&("re"in t||"im"in t))return this.factory(this.bignumRe).pow(t);if(this.isPositiveInfinity){if(t===-1)return this.clone(0);if(t===1/0)return this.clone(1/0);if(t===-1/0)return this.clone(0)}else if(this.isNegativeInfinity&&t===1/0)return this.clone(NaN);if((t===1/0||t===-1/0)&&(this.isOne||this.isNegativeOne))return this.clone(NaN);if(t===1)return this;if(t===-1)return this.inv();if(t===0)return this.clone(1);if(this.isZero){if(t>0)return this;if(t<0)return this.factory({im:1/0})}if(t<0)return this.pow(-t).inv();if(t%1===.5)return this.pow(Math.floor(t)).mul(this.sqrt());if(this.radical>Re||this.rational[0]>Re||this.rational[0]<-Re||this.rational[1]>Re)return this.factory(this.bignumRe).pow(t);if(this.sign<0){if(Number.isInteger(t)){let r=t%2===0?1:-1;return this.clone({rational:bt(this.rational)?[r*(-this.rational[0])**t,this.rational[1]**t]:[BigInt(r)*(-this.rational[0])**BigInt(t),this.rational[1]**BigInt(t)],radical:this.radical**t})}return this.factory({im:(-this.re)**t})}else if(Number.isInteger(t))return this.clone({rational:bt(this.rational)?[this.rational[0]**t,this.rational[1]**t]:[BigInt(this.rational[0])**BigInt(t),this.rational[1]**BigInt(t)],radical:this.radical**t});return this.factory(this.bignumRe).pow(t)}root(t){if(t===0)return this.clone(NaN);if(this.isNaN)return this;if(this.isZero)return this;if(t===1)return this;if(t===-1)return this.inv();if(t<0)return this.root(-t).inv();if(t%1===.5)return this.root(Math.floor(t)).sqrt();if(this.radical===1){if(this.sign>0){let r=this.re;if(Number.isInteger(r)){if(r>0){let i=Math.pow(r,1/t);if(Number.isInteger(i))return this.clone(i)}return this.factory(this.bignumRe).root(t)}}return this.factory(this.bignumRe).root(t)}if(this.sign<0)return this.factory({im:Math.pow(-this.re,1/t)});if(this.radical>Re||this.rational[0]>Re||this.rational[0]<-Re||this.rational[1]>Re)return this.factory(this.bignumRe).root(t);if(this.rational[1]==1){let r=Math.pow(this.rational[0],1/t);if(Number.isInteger(r))return this.clone(r)}return this.factory(this.bignumRe).root(t)}sqrt(){if(this.isZero||this.isOne)return this;if(this.radical===1)if(bt(this.rational)){let[t,r]=this.rational;return t*r>Re?this.factory(this.bignumRe).sqrt():t>0?this.clone({radical:t*r,rational:[1,r]}):this.factory({im:Math.sqrt(-t*r)/r})}else return this.factory(this.bignumRe).sqrt();if(this.sign>0){let t=Math.sqrt(this.re);if(Number.isInteger(t))return this.clone(t)}return this.factory(this.bignumRe).sqrt()}gcd(t){if(!(t instanceof Tr))return t.gcd(this);if(this.isOne||t.im!==0||t.isOne)return this.clone(1);let r=k7(this.rational,t.rational),i=ya(this.radical,t.radical);return this.clone({rational:r,radical:i})}abs(){return this.sign===-1?this.neg():this}ln(t){return this.isZero?this.clone(NaN):this.isPositiveInfinity?this.clone(1/0):this.sign<0?this.clone(NaN):this.isOne?this.clone(0):this.isNegativeOne?this.factory({im:Math.PI}):this.factory(this.bignumRe).ln(t)}exp(){return this.isNaN?this.clone(NaN):this.isZero?this.clone(1):this.isNegativeInfinity?this.clone(0):this.isPositiveInfinity?this.clone(1/0):this.factory(this.bignumRe).exp()}floor(){return this.isNaN?this.clone(NaN):this.type==="integer"?this:this.clone(Math.floor(this.re))}ceil(){return this.isNaN?this.clone(NaN):this.type==="integer"?this:this.clone(Math.ceil(this.re))}round(){return this.isNaN?this.clone(NaN):this.type==="integer"?this:this.clone(Math.round(this.re))}eq(t){return typeof t=="number"?this.radical===1&&tl(this.rational)&&this.rational[0]==t:t instanceof Tr?this.radical===t.radical&&this.rational[0]==t.rational[0]&&this.rational[1]==t.rational[1]:t.im===0&&t.re===this.re}lt(t){return this.im,typeof t=="number"?this.re<t:this.re<t.re}lte(t){return this.im,typeof t=="number"?this.re<=t:this.re<=t.re}gt(t){return this.im,typeof t=="number"?this.re>t:this.re>t.re}gte(t){return this.im,typeof t=="number"?this.re>=t:this.re>=t.re}static sum(t,r,i){if(t.length===1)return t;if(t.some(f=>!f.isExact)){if(t.length===2)return[t[0].add(t[1])];let f=r(0);for(let p of t)f=f.add(p);return[f]}let n=0,s=[0,1],a=[];for(let f of t){if(f.isNaN)return[new Tr(NaN,r,i)];if(!f.isZero)if(n+=f.im,f instanceof Tr){let p=f.rational;if(f.radical===1)s=rl(s,p);else{let d=a.findIndex(b=>b.radical===f.radical);d===-1?a.push({multiple:p,radical:f.radical}):a[d].multiple=rl(a[d].multiple,p)}}else f.type,s=rl(s,[f.re,1])}if(Zi(s)&&a.length===0)return n===0?[new Tr(0,r,i)]:[r({im:n})];let u=[];return n!==0&&u.push(r({im:n})),a.length===0?u.push(new Tr({rational:s},r,i)):(a.push({multiple:s,radical:1}),u.push(...a.map(f=>new Tr({rational:f.multiple,radical:f.radical},r,i)))),u}};function Qn(e){let t=e.numericValue;if(t===null||typeof t=="number"&&!Number.isFinite(t)||t instanceof Lt&&(t.isNaN||t.isPositiveInfinity||t.isNegativeInfinity))return;if(typeof t=="number")return Number.isInteger(t)?[t,1]:void 0;let r=t.type;if(r!=="finite_integer"&&r!=="finite_rational"||t.im!==0)return;if(t instanceof Vt)return t.radical!==1?void 0:t.rational;let i=t.bignumRe;if(i!==void 0&&Number.isInteger(i))return[Kt(i),BigInt(1)];let n=t.re;if(Number.isInteger(n))return[n,1]}function fm(e){if(e==null)return null;let t=e.numericValue;if(t===null)return null;if(typeof t=="number")return Number.isInteger(t)?BigInt(t):null;if(t.im!==0)return null;let r=t.bignumRe;return r!=null&&r.isInteger()?Kt(r):Number.isInteger(t.re)?BigInt(t.re):null}function k1(e){if(e==null)return null;let t=typeof e=="number"?e:e.numericValue;if(t===null)return null;if(typeof t=="number")return e.engine.bignum(t);if(t.im!==0)return null;let r=t.bignumRe??t.re;return typeof r=="number"&&isNaN(r)?null:e.engine.bignum(r)}function rt(e){if(e==null)return null;if(typeof e=="number")return Number.isInteger(e)&&e>=-Re&&e<=Re?e:null;let t=e.numericValue;if(t===null)return null;if(typeof t=="number")return Number.isInteger(t)&&t>=-Re&&t<=Re?t:null;if(t.im!==0)return null;let r=t.re;return Number.isInteger(r)&&r>=-Re&&r<=Re?Number(r):null}function Ar(e){if(e.symbol&&!e.isConstant)return 1;if(e.operator==="Power"&&e.op2.isNumberLiteral){if(Ar(e.op1)===0)return 0;let t=rt(e.op2);return t!==null&&t>0?t:0}if(e.operator==="Multiply"){let t=0;for(let r of e.ops){let i=Ar(r);t=t+i}return t}if(e.operator==="Add"||e.operator==="Subtract"){let t=0;for(let r of e.ops)t=Math.max(t,Ar(r));return t}return e.operator==="Negate"||e.operator==="Divide"?Ar(e.op1):0}function _i(e){if(e.symbol&&!e.isConstant)return 1;if(e.operator==="Power"&&e.op2.isNumberLiteral){if(_i(e.op1)===0)return 0;let t=rt(e.op2);return t!==null&&t>0?t:0}if(e.operator==="Multiply"||e.operator==="Add"||e.operator==="Subtract"){let t=0;for(let r of e.ops)t=Math.max(t,Ar(r));return t}return e.operator==="Negate"||e.operator==="Divide"?_i(e.op1):0}function M7(e){return e.symbol&&!e.isConstant?e.symbol:e.ops?e.ops.map(t=>M7(t)).join(" ").trim():""}function S1(e){return M7(e).split(" ").reverse().join(" ").trim()}function ut(e,t,r,i){if(((e==null?void 0:e.numericValue)??null)===null)return;let n=e.engine,s;if(e.im!==0)s=i==null?void 0:i(n.complex(e.re,e.im));else{let a=e.bignumRe;if(a!==void 0&&Vn(n)&&r)s=r(a);else{let u=e.re;Vn(n)&&r?s=r(n.bignum(u)):s=t(u)}}if(s!==void 0)return s instanceof je?n.number(n._numericValue({re:n.chop(s.re),im:n.chop(s.im)})):n.number(n.chop(s))}function cs(e,t,r,i,n){if(e.numericValue===null||t.numericValue===null)return;let s=e.engine,a;if((e.im!==0||t.im!==0)&&(a=n==null?void 0:n(s.complex(e.re,e.im),s.complex(t.re,t.im))),a===void 0&&i){let u=e.bignumRe,f=t.bignumRe;(u!==void 0||f!==void 0)&&(u??(u=s.bignum(e.re)),f??(f=s.bignum(t.re)),a=i(u,f))}if(a===void 0){let u=e.re,f=t.re;!isNaN(u)&&!isNaN(f)&&(Vn(s)&&i?a=i(s.bignum(e.bignumRe??u),s.bignum(t.bignumRe??f)):a=r(u,f))}if(a!==void 0)return a instanceof je?s.number(s._numericValue({re:s.chop(a.re),im:s.chop(a.im)})):s.number(s.chop(a))}function E7(e,t){for(e.isInteger()&&t.isInteger();!t.isZero();)[e,t]=[t,e.modulo(t)];return e.abs()}function Rx(e,t){return e.mul(t).div(E7(e,t))}function A7(e,t){if(!t.isInteger()||t.isNegative())return e._BIGNUM_NAN;if(t.lessThan(10))return e.bignum([1,1,2,6,24,120,720,5040,40320,362880,3628800][t.toNumber()]);if(t.gt(Number.MAX_SAFE_INTEGER)){let s=e._BIGNUM_ONE,a=e._BIGNUM_TWO;for(;a.lessThan(t);)s=s.mul(a),a=a.add(1);return s}if(t.modulo(2).eq(1))return t.times(A7(e,t.minus(1)));let r=t.toNumber(),i=t,n=t;for(;r>2;)r-=2,i=i.add(r),n=n.mul(i);return n}function Fx(e,t){if(!t.isInteger()||t.isNegative())return e._BIGNUM_NAN;if(t.lessThan(1))return e._BIGNUM_ONE;let r=t;for(;t.greaterThan(2);)t=t.minus(2),r=r.mul(t);return r}function s0(e){return e.isFinite()?e.d.length>3||e.d.length===3&&e.d[0]>=90?!1:(e.precision()<=16,e.e<308&&e.e>-306):!0}var hm=class I7 extends Lt{constructor(t,r){if(super(),this.bignum=r,typeof t=="number")this.decimal=r(t),this.im=0;else if(t instanceof dr)this.decimal=t,this.im=0;else{let i=r(t.re??0);this.decimal=i,this.im=t.im??0}this.decimal.isNaN()&&(this.im=NaN),this.decimal.isNaN(),isNaN(this.im)}get type(){return this.im!==0?Number.isFinite(this.im)?this.decimal.isZero()?"finite_imaginary":"finite_complex":"non_finite_number":this.decimal.isFinite()?this.decimal.isInteger()?"finite_integer":"finite_real":"non_finite_number"}get isExact(){return this.im===0&&this.decimal.isInteger()}get asExact(){if(this.isExact)return this._makeExact(Kt(this.decimal))}toJSON(){return this.isNaN?"NaN":this.isPositiveInfinity?"PositiveInfinity":this.isNegativeInfinity?"NegativeInfinity":this.isComplexInfinity?"ComplexInfinity":this.im===0?s0(this.decimal)?Vr(this.decimal.toNumber()):{num:Ro(this.decimal)}:s0(this.decimal)?["Complex",Ii(Vr(this.decimal.toNumber())),Ii(this.im)]:["Complex",{num:Ro(this.decimal)},Ii(this.im)]}toString(){if(this.isZero)return"0";if(this.isOne)return"1";if(this.isNegativeOne)return"-1";if(this.im===0)return Ro(this.decimal);if(this.decimal.isZero())return this.im===1?"i":this.im===-1?"-i":`${gr(this.im)}i`;if(this.isComplexInfinity)return"~oo";let t="";return this.im===1?t="+ i":this.im===-1?t="- i":this.im>0?t=`+ ${this.im}i`:t=`- ${-this.im}i`,`(${Ro(this.decimal)} ${t})`}clone(t){return new I7(t,this.bignum)}_makeExact(t){return new Vt(t,r=>this.clone(r),this.bignum)}get re(){return Vr(this.decimal.toNumber())}get bignumRe(){return this.decimal}get numerator(){return this}get denominator(){return this._makeExact(1)}get isNaN(){return this.decimal.isNaN()}get isPositiveInfinity(){return this.im===0&&!this.decimal.isFinite()&&!this.decimal.isNaN()&&this.decimal.isPositive()}get isNegativeInfinity(){return this.im===0&&!this.decimal.isFinite()&&!this.decimal.isNaN()&&this.decimal.isNegative()}get isComplexInfinity(){return!Number.isFinite(this.im)&&!Number.isNaN(this.im)}get isZero(){return this.im===0&&this.decimal.isZero()}isZeroWithTolerance(t){if(this.im!==0)return!1;let r=typeof t=="number"?this.bignum(t):t;return this.decimal.abs().lte(r)}get isOne(){return this.im===0&&this.decimal.eq(1)}get isNegativeOne(){return this.im===0&&this.decimal.eq(-1)}sgn(){if(this.im===0){if(this.decimal.isZero())return 0;if(this.decimal.isPositive())return 1;if(this.decimal.isNegative())return-1}}N(){return this}neg(){return this.isZero?this:this.clone({re:this.decimal.neg(),im:-this.im})}inv(){if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.im===0)return this.clone(this.decimal.pow(-1));let t=Math.hypot(this.re,this.im),r=this.decimal.mul(this.decimal).add(this.im*this.im).sqrt();return this.clone({re:this.decimal.div(r),im:-this.im/t})}add(t){return typeof t=="number"?t===0?this:this.clone({re:this.decimal.add(t),im:this.im}):t.isZero?this:this.isZero?this.clone(t):this.clone({re:this.decimal.add(t.bignumRe??t.re),im:this.im+t.im})}sub(t){return this.add(t.neg())}mul(t){if(this.isZero)return this;if(t===1)return this;if(t===-1)return this.neg();if(t===0)return this.clone(0);if(this.isOne)return typeof t=="number"||t instanceof dr?this.clone(t):this.clone({re:t.bignumRe??t.re,im:t.im});if(typeof t=="number")return this.im===0?this.clone(this.decimal.mul(t)):this.clone({re:this.decimal.mul(t),im:this.im*t});if(t instanceof dr)return this.im===0?this.clone(this.decimal.mul(t)):this.clone({re:this.decimal.mul(t),im:Vr(this.im*t.toNumber())});if(this.isNegativeOne){let r=t.neg();return this.clone({re:r.bignumRe??r.re,im:r.im})}return t.isOne?this:t.isNegativeOne?this.neg():t.isZero?this.clone(0):this.im===0&&t.im===0?this.clone(this.decimal.mul(t.bignumRe??t.re)):this.clone({re:this.decimal.mul(t.bignumRe??t.re).sub(this.im*t.im),im:this.re*t.im+this.im*t.re})}div(t){if(typeof t=="number")return t===1?this:t===-1?this.neg():t===0?this.clone(NaN):this.clone({re:this.decimal.div(t),im:this.im/t});if(t.isOne)return this;if(t.isNegativeOne)return this.neg();if(t.isZero)return this.clone(this.isZero?NaN:1/0);if(this.im===0&&t.im===0)return this.clone(this.decimal.div(t.bignumRe??t.re));let[r,i]=[this.re,this.im],[n,s]=[t.re,t.im],a=n*n+s*s,u=t.bignumRe??this.bignum(t.re),f=u.mul(u).add(s*s);return this.clone({re:this.decimal.mul(u).add(i*s).div(f),im:(i*n-r*s)/a})}pow(t){if(this.isNaN)return this;if(typeof t=="number"&&isNaN(t))return this.clone(NaN);if(t instanceof Lt){if(t.isNaN)return this.clone(NaN);if(t.isZero)return this.clone(1);if(t.isOne)return this;t.im?t={re:t.re,im:t.im}:t=t.re}if(typeof t=="object"&&("re"in t||"im"in t)){let[f,p]=[(t==null?void 0:t.re)??0,(t==null?void 0:t.im)??0];if(Number.isNaN(p)||Number.isNaN(f))return this.clone(NaN);if(p===0)t=f;else{if(this.im===1/0)return this.clone(NaN);if(this.isNegativeInfinity)return this.clone(0);if(this.isPositiveInfinity)return this.clone({im:1/0});let d=this.pow(f),b=this.decimal.ln().mul(p),x=this.clone({re:b.cos(),im:Vr(b.sin().toNumber())});return d.mul(x)}}if(this.isPositiveInfinity){if(t===-1)return this.clone(0);if(t===1/0)return this.clone(1/0);if(t===-1/0)return this.clone(0)}else if(this.isNegativeInfinity&&t===1/0)return this.clone(NaN);if((t===1/0||t===-1/0)&&(this.isOne||this.isNegativeOne))return this.clone(NaN);if(t===1)return this;if(t===-1)return this.inv();if(t===0)return this.clone(1);if(this.isZero){if(t>0)return this;if(t<0)return this.clone({im:1/0})}if(t<0)return this.pow(-t).inv();if(this.im===0)return this.clone(this.decimal.pow(t));let r=this.decimal,i=this.im,n=r.mul(r).add(i*i).sqrt(),s=dr.atan2(i,r),a=n.pow(t),u=s.mul(t);return this.clone({re:a.mul(u.cos()),im:Vr(a.mul(u.sin()).toNumber())})}root(t){if(!Number.isInteger(t))return this._makeExact(NaN);if(t===0)return this._makeExact(NaN);if(t===1)return this;if(this.isZero)return this;if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.im===0)return this.decimal.isNegative()?this._makeExact(NaN):t===2?this.clone(this.decimal.sqrt()):t===3?this.clone(this.decimal.cbrt()):this.clone(this.decimal.pow(1/t));let r=this.decimal,i=this.im,n=r.mul(r).add(i*i).sqrt(),s=dr.atan2(i,r),a=n.pow(1/t),u=s.div(t);return this.clone({re:a.mul(u.cos()),im:Vr(a.mul(u.sin()).toNumber())})}sqrt(){if(this.isZero||this.isOne)return this;if(this.im!==0){let t=this.decimal,r=this.im,i=t.mul(t).add(r*r).sqrt(),n=t.add(i).div(2).sqrt(),s=Vr(Math.sign(r)*i.sub(t).div(2).sqrt().toNumber());return this.clone({re:n,im:s})}return this.decimal.isPositive()?this.clone(this.decimal.sqrt()):this.clone({im:Math.sqrt(-this.re)})}gcd(t){if(this.isZero)return t;if(t.isZero)return this;if(this.im!==0||t.im!==0)return this._makeExact(NaN);if(!this.decimal.isInteger())return this._makeExact(1);let r=this.bignum(t.bignumRe??t.re);if(!r.isInteger())return this._makeExact(1);let i=this.decimal;for(;!r.isZero();){let n=r;r=i.mod(r),i=n}return this.clone(i.abs())}abs(){return this.im===0?this.decimal.isPositive()?this:this.clone(this.decimal.neg()):this.clone(this.decimal.pow(2).add(this.im**2).sqrt())}ln(t){if(this.isZero)return this._makeExact(NaN);if(this.isNegativeInfinity)return this._makeExact(NaN);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im===0)return this.decimal.isNegative()?this._makeExact(NaN):this.isOne?this._makeExact(0):this.isNegativeOne?this.clone({im:Math.PI}):t===void 0?this.clone(this.decimal.ln()):this.clone(this.decimal.log(t));let r=this.decimal,i=this.im,n=r.mul(r).add(i*i).sqrt(),s=Vr(dr.atan2(i,r).toNumber());return t===void 0?this.clone({re:n.ln(),im:s}):this.clone({re:n.log(t),im:s})}exp(){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this._makeExact(1);if(this.isNegativeInfinity)return this._makeExact(0);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im!==0){let t=this.decimal.exp();return this.clone({re:t.mul(Vr(Math.cos(this.im))),im:Vr(t.mul(Math.sin(this.im)).toNumber())})}return this.clone(this.decimal.exp())}floor(){return this.isNaN||this.im!==0?this._makeExact(NaN):this.decimal.isInteger()?this:this._makeExact(Kt(this.decimal.floor()))}ceil(){return this.isNaN||this.im!==0?this._makeExact(NaN):this.decimal.isInteger()?this:this._makeExact(Kt(this.decimal.ceil()))}round(){return this.isNaN||this.im!==0?this._makeExact(NaN):this.decimal.isInteger()?this:this._makeExact(Kt(this.decimal.round()))}eq(t){return typeof t=="number"?this.im===0&&this.decimal.eq(t):this.decimal.eq(t.bignumRe??t.re)&&Vr(this.im-t.im)===0}lt(t){return this.im,typeof t=="number"?this.decimal.lt(t):this.decimal.lt(t.bignumRe??t.re)}lte(t){return this.im,typeof t=="number"?this.decimal.lte(t):this.decimal.lte(t.bignumRe??t.re)}gt(t){return this.im,typeof t=="number"?this.decimal.gt(t):this.decimal.gt(t.bignumRe??t.re)}gte(t){return this.im,typeof t=="number"?this.decimal.gte(t):this.decimal.gte(t.bignumRe??t.re)}};function Ro(e){let t=e.toString();if(e.isInteger()&&t.includes("e")){let r=e.toFixed(),i=r.match(/0+$/);if((i?i[0].length:0)<=5)return r}return t}function Vr(e){return Math.abs(e)<=D0?0:e}var pm=class z7 extends Lt{constructor(t,r){if(super(),this.bignum=r,typeof t=="number")this.decimal=t,this.im=0;else if(t instanceof dr)this.decimal=t.toNumber(),this.im=0;else{let i=t.re===void 0?0:t.re instanceof dr?t.re.toNumber():t.re;this.decimal=i,this.im=t.im??0,isFinite(this.im)||(this.decimal=this.im)}isNaN(this.im)}_makeExact(t){return new Vt(t,r=>this.clone(r),this.bignum)}get type(){return this.im!==0?Number.isFinite(this.im)?this.decimal===0?"finite_imaginary":"finite_complex":"non_finite_number":Number.isFinite(this.decimal)?Number.isInteger(this.decimal)?"finite_integer":"finite_real":"non_finite_number"}get isExact(){return this.im===0&&Number.isInteger(this.decimal)}get asExact(){if(this.isExact)return this._makeExact(this.decimal)}toJSON(){return this.isNaN?"NaN":this.isPositiveInfinity?"PositiveInfinity":this.isNegativeInfinity?"NegativeInfinity":this.im===0?Ii(this.decimal):["Complex",Ii(this.decimal),Ii(this.im)]}toString(){if(this.isZero)return"0";if(this.isOne)return"1";if(this.isNegativeOne)return"-1";if(this.im===0)return gr(this.decimal);if(this.decimal===0)return this.im===1?"i":this.im===-1?"-i":`${gr(this.im)}i`;if(this.isComplexInfinity)return"~oo";let t="";return this.im===1?t="+ i":this.im===-1?t="- i":this.im>0?t=`+ ${gr(this.im)}i`:t=`- ${gr(-this.im)}i`,`(${gr(this.decimal)} ${t})`}clone(t){return new z7(t,this.bignum)}get re(){return this.decimal}get bignumRe(){}get numerator(){return this}get denominator(){return this._makeExact(1)}get isNaN(){return Number.isNaN(this.decimal)}get isPositiveInfinity(){return!Number.isFinite(this.decimal)&&this.decimal>0&&this.im===0}get isNegativeInfinity(){return!Number.isFinite(this.decimal)&&this.decimal<0&&this.im===0}get isComplexInfinity(){return!Number.isFinite(this.im)&&!Number.isNaN(this.im)}get isZero(){return this.im===0&&this.decimal===0}isZeroWithTolerance(t){if(this.im!==0)return!1;let r=t instanceof dr?t.toNumber():t;return Math.abs(this.decimal)<r}get isOne(){return this.im===0&&this.decimal===1}get isNegativeOne(){return this.im===0&&this.decimal===-1}sgn(){if(!(this.im!==0||!Number.isFinite(this.decimal)))return Math.sign(this.decimal)}N(){return this}neg(){return this.isNaN?this._makeExact(NaN):this.isZero?this:this.clone({re:-this.decimal,im:-this.im})}inv(){if(this.isNaN)return this._makeExact(NaN);if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.im===0)return this.clone(1/this.decimal);let t=Math.hypot(this.re,this.im);return this.clone({re:this.decimal/t,im:-this.im/t})}add(t){return this.isNaN?this._makeExact(NaN):typeof t=="number"?t===0?this:this.clone({re:this.decimal+t,im:this.im}):t.isZero?this:this.isZero?this.clone({re:t.bignumRe??t.re,im:t.im}):this.clone({re:this.decimal+t.re,im:this.im+t.im})}sub(t){return this.add(t.neg())}mul(t){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this;if(t instanceof dr&&(t=t.toNumber()),t===1)return this;if(t===-1)return this.neg();if(t===0)return this.clone(0);if(this.isOne)return typeof t=="number"||t instanceof dr?this.clone(t):this.clone({re:t.bignumRe??t.re,im:t.im});if(typeof t=="number")return this.im===0?this.clone(this.decimal*t):this.clone({re:this.decimal*t,im:this.im*t});if(this.isNegativeOne){let r=t.neg();return this.clone({re:r.bignumRe??r.re,im:r.im})}return t.isOne?this:t.isNegativeOne?this.neg():t.isZero?this.clone(0):this.im===0&&t.im===0?this.clone(this.decimal*t.re):this.clone({re:this.decimal*t.re-this.im*t.im,im:this.re*t.im+this.im*t.re})}div(t){if(this.isNaN)return this._makeExact(NaN);if(typeof t=="number")return t===1?this:t===-1?this.neg():t===0?this.clone(NaN):this.clone({re:this.decimal/t,im:this.im/t});if(t.isOne)return this;if(t.isNegativeOne)return this.neg();if(t.isZero)return this.clone(this.isZero?NaN:1/0);if(this.im===0&&t.im===0)return this.clone(this.decimal/t.re);let[r,i]=[this.decimal,this.im],[n,s]=[t.re,t.im],a=n*n+s*s;return this.clone({re:(r*n+i*s)/a,im:(i*n-r*s)/a})}pow(t){if(this.isNaN)return this._makeExact(NaN);if(typeof t=="number"&&isNaN(t))return this.clone(NaN);if(t instanceof Lt){if(t.isNaN)return this.clone(NaN);if(t.isZero)return this.clone(1);if(t.isOne)return this;t.im?t={re:t.re,im:t.im}:t=t.re}if(typeof t=="object"&&("re"in t||"im"in t)){let[f,p]=[(t==null?void 0:t.re)??0,(t==null?void 0:t.im)??0];if(Number.isNaN(p)||Number.isNaN(f))return this.clone(NaN);if(p===0)t=f;else{if(this.im===1/0)return this.clone(NaN);if(this.isNegativeInfinity)return this.clone(0);if(this.isPositiveInfinity)return this.clone({im:1/0});let d=this.pow(f).re,b=Math.log(this.decimal)*p;return this.clone({re:Ba(d*Math.cos(b)),im:Ba(d*Math.sin(b))})}}if(this.isPositiveInfinity){if(t===-1)return this.clone(0);if(t===1/0)return this.clone(1/0);if(t===-1/0)return this.clone(0)}else if(this.isNegativeInfinity&&t===1/0)return this.clone(NaN);if((t===1/0||t===-1/0)&&(this.isOne||this.isNegativeOne))return this.clone(NaN);if(t===1)return this;if(t===-1)return this.inv();if(t===0)return this.clone(1);if(this.isZero){if(t>0)return this;if(t<0)return this.clone({im:1/0})}if(t<0)return this.pow(-t).inv();if(this.im===0)return this.clone(this.decimal**t);let r=this.decimal,i=this.im,n=Math.sqrt(r*r+i*i),s=Math.atan2(i,r),a=n**t,u=s**t;return this.clone({re:a*Math.cos(u),im:a*Math.sin(u)})}root(t){if(this.isNaN)return this._makeExact(NaN);if(t===0)return this.clone(NaN);if(this.isNaN)return this;if(this.isZero)return this;if(this.isOne)return this;if(this.isNegativeOne)return this;if(t===1)return this;if(t===2)return this.sqrt();if(t===3)return this.clone(Math.cbrt(this.decimal));if(this.im===0)return this.decimal<0?t%2===0?this.clone(NaN):this.clone(-Math.pow(-this.decimal,1/t)):this.clone(Math.pow(this.decimal,1/t));let r=this.decimal,i=this.im,n=Math.hypot(r,i),s=Math.atan2(i,r),a=Math.pow(n,1/t),u=s/t;return this.clone({re:a*Math.cos(u),im:a*Math.sin(u)})}sqrt(){if(this.isNaN)return this._makeExact(NaN);if(this.isZero||this.isOne)return this;if(this.im!==0){let t=this.decimal,r=this.im,i=Math.sqrt(t*t+r*r),n=Math.sqrt((t+i)/2),s=Math.sign(r)*Math.sqrt((i-t)/2);return this.clone({re:n,im:s})}return this.decimal>0?this.clone(Math.sqrt(this.decimal)):this.clone({im:Math.sqrt(-this.decimal)})}gcd(t){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return t;if(t.isZero)return this;if(this.im!==0||t.im!==0)return this._makeExact(NaN);if(!Number.isInteger(this.decimal))return this._makeExact(1);let r=t.re;if(!Number.isInteger(r))return this._makeExact(1);let i=this.decimal;for(;r!==0;){let n=r;r=i%r,i=n}return this.clone(Math.abs(i))}abs(){return this.isNaN?this._makeExact(NaN):this.im===0?this.decimal>0?this:this.clone(-this.decimal):this.clone(Math.sqrt(this.decimal**2+this.im**2))}ln(t){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this._makeExact(NaN);if(this.isNegativeInfinity)return this._makeExact(NaN);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im===0)return this.decimal<0?this._makeExact(NaN):this.isOne?this._makeExact(0):this.isNegativeOne?this.clone({im:Math.PI}):t===void 0?this.clone(Math.log(this.decimal)):this.clone(Math.log(this.decimal)/Math.log(t));let r=this.decimal,i=this.im,n=Math.hypot(r,i),s=Math.atan2(i,r),a=t===void 0?Math.log(n):Math.log(n)/Math.log(t);return this.clone({re:a,im:s})}exp(){if(this.isNaN)return this._makeExact(NaN);if(this.isZero)return this._makeExact(1);if(this.isNegativeInfinity)return this._makeExact(0);if(this.isPositiveInfinity)return this._makeExact(1/0);if(this.im!==0){let t=Math.exp(this.decimal);return this.clone({re:t*Math.cos(this.im),im:t*Math.sin(this.im)})}return this.clone(Math.exp(this.decimal))}floor(){return this.isNaN||this.im!==0?this._makeExact(NaN):Number.isInteger(this.decimal)?this:this._makeExact(Math.floor(this.decimal))}ceil(){return this.isNaN||this.im!==0?this._makeExact(NaN):Number.isInteger(this.decimal)?this:this._makeExact(Math.ceil(this.decimal))}round(){return this.isNaN||this.im!==0?this._makeExact(NaN):Number.isInteger(this.decimal)?this:this._makeExact(Math.round(this.decimal))}eq(t){return typeof t=="number"?this.im===0&&Ba(this.decimal-t)===0:Ba(this.decimal-t.re)===0&&Ba(this.im-t.im)===0}lt(t){return this.im,typeof t=="number"?this.decimal<t:this.decimal<t.re}lte(t){return this.im,typeof t=="number"?this.decimal<=t:this.decimal<=t.re}gt(t){return this.im,typeof t=="number"?this.decimal>t:this.decimal>t.re}gte(t){return this.im,typeof t=="number"?this.decimal>=t:this.decimal>=t.re}};function Ba(e){return Math.abs(e)<=D0?0:e}var C7=class{constructor(e,t){this.terms=[],this.engine=e;let r=0,i=0,n=[];for(let s of t){if((s.type==="imaginary"||s.type==="complex")&&s.isInfinity){this.terms=[{term:e.ComplexInfinity,coef:[]}];return}if(s.isNaN||s.symbol==="Undefined"){this.terms=[{term:e.NaN,coef:[]}];return}let[a,u]=s.toNumericValue();a.isPositiveInfinity?r+=1:a.isNegativeInfinity&&(i+=1),u.is(1)?a.isZero||n.push(a):this.add(a,u)}if(r>0&&i>0){this.terms=[{term:e.NaN,coef:[]}];return}if(r>0){this.terms=[{term:e.PositiveInfinity,coef:[]}];return}if(i>0){this.terms=[{term:e.NegativeInfinity,coef:[]}];return}n.length===1?this.add(n[0],e.One):n.length>0&&_1(e,n).forEach(s=>this.add(s,e.One))}add(e,t){if(t.is(0)||e.isZero)return;if(t.is(1)){let i=this.engine;this.terms.push({coef:[],term:i.number(e)});return}if(t.operator==="Add"){for(let i of t.ops){let[n,s]=i.toNumericValue();this.add(e.mul(n),s)}return}if(t.operator==="Negate"){this.add(e.neg(),t.op1);return}let r=this.find(t);if(r>=0){this.terms[r].coef.push(e);return}t.numericValue===null||t.is(1),this.terms.push({coef:[e],term:t})}find(e){return this.terms.findIndex(t=>t.term.isSame(e))}N(){let e=this.engine,t=this.terms;if(t.length===0)return e.Zero;let r=[],i=[];for(let{coef:s,term:a}of t)if(s.length===0)a.isNumberLiteral?typeof a.numericValue=="number"?i.push(e._numericValue(a.numericValue)):i.push(a.numericValue):r.push(a);else{let u=s.reduce((f,p)=>f.add(p)).N();if(u.isZero)continue;u.eq(1)?r.push(a.N()):u.eq(-1)?r.push(a.N().neg()):r.push(a.N().mul(e.box(u)))}let n=Bx(e,i);if(!n.isZero){if(r.length===0)return e.box(n);r.push(e.box(n))}return sn(e,r)}asExpression(){let e=this.engine,t=this.terms;return t.length===0?e.Zero:sn(e,t.map(({coef:r,term:i})=>{if(r.length===0)return i;let n=_1(e,r);if(n.length===0)return i;if(n.length>1)return sr(e,[sn(e,n.map(a=>e.box(a))),i]);let s=n[0];return s.isNaN?e.NaN:s.isZero?e.Zero:s.eq(1)?i:s.eq(-1)?i.neg():i.is(1)?e.box(s):i.mul(e.box(s))}))}};function _1(e,t){let r=s=>e.bignum(s),i=s=>new Vt(s,n,r),n=e.precision>En?s=>new hm(s,r):s=>new pm(s,i);return Vt.sum(t,n,r)}function Bx(e,t){let r=a=>e.bignum(a),i=a=>new Vt(a,n,r),n=e.precision>En?a=>new hm(a,r):a=>new pm(a,i),s=Vt.sum(t,n,r);return s.length===0?i(0):s.length===1?s[0].N():s.reduce((a,u)=>a.add(u).N())}function sn(e,t){var i;if(t=lr(t,"Add"),t=t.filter(n=>n.numericValue===null||!n.is(0)),t.length===0)return e.Zero;if(t.length===1&&!Ju(t[0]))return t[0];let r=[];for(let n=0;n<t.length;n++){let s=t[n];if(s.isNumberLiteral){let a=s.numericValue;if(typeof a=="number"||G(a.type,"real")&&!a.isExact||G(a.type,"integer")){let u=t[n+1];if(u){let f=(i=Ku(u))==null?void 0:i.numericValue;if(f!==void 0){let p=typeof f=="number"?f:f==null?void 0:f.re;if(p!==0){let d=typeof a=="number"?a:a.re;r.push(e.number(e._numericValue({re:d,im:p??0}))),n++;continue}}}}}r.push(s)}return r.length===1?r[0]:e._fn("Add",[...r].sort(vm))}function Vx(e){return e.length===0?"finite_integer":e.length===1?e[0].type:fn(...e.map(t=>t.type))}function Gt(...e){return e.length>0,e.every(t=>t.isValid)?new C7(e[0].engine,e).asExpression():e[0].engine._fn("Add",e)}function jx(...e){return e.length>0,e.every(t=>t.isValid)?(e=e.map(t=>t.isNumberLiteral?t.evaluate():t.N()),new C7(e[0].engine,e).N()):e[0].engine._fn("Add",e)}function ki(e,t){if(e.operator==="Negate"&&t.operator==="Negate")return ki(e.op1,t.op1);let r=e.engine;if(e.operator==="Negate")return ki(e.op1,t).neg();if(t.operator==="Negate")return ki(e,t.op1).neg();if(e.operator==="Divide"&&t.operator==="Divide"){let i=e.op2.mul(t.op2);return ki(e.op1,t.op1).div(i)}return e.operator==="Divide"?ki(e.op1,t).div(e.op2):t.operator==="Divide"?ki(e,t.op1).div(t.op2):e.operator==="Add"?Gt(...e.ops.map(i=>ki(i,t))):t.operator==="Add"?Gt(...t.ops.map(i=>ki(e,i))):new an(r,[e,t]).asExpression()}function q0(e,t){if(t.length===0)return null;if(t.length===1)return t[0];if(t.length===2)return ki(t[0],t[1]);let r=q0(e,t.slice(1));return r===null?null:ki(t[0],r)}var Va=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1]];function $7(e,t){for(;e>=Va.length;){let r=Va.length,i=[1],n=Va[r-1];for(let s=1;s<r;s++)i[s]=n[s-1]+n[s];i[r]=1,Va.push(i)}return Va[e][t]}function Hx(e){let t=e.reduce((i,n)=>i+n,0),r=1;for(let i=0;i<e.length;i+=1)r*=$7(t,e[i]),t-=e[i];return r}function*D7(e,t){if(e===1){yield[t];return}for(let r=0;r<=t;r+=1)for(let i of D7(e-1,t-r))yield[r,...i]}function qh(e,t){let r=e.engine;if(t<0){let a=qh(e,-t);return a?a.inv():null}if(t===0)return r.One;if(t===1)return zi(e);if(e.operator==="Negate"&&Number.isInteger(t)){let a=t%2===0?1:-1,u=qh(e.op1,t);return u===null?null:a>0?u:u.neg()}if(e.operator,e.operator!=="Add")return null;let i=e.ops,n=D7(i.length,t),s=[];for(let a of n){let u=[r.number(Hx(a))];for(let f=0;f<a.length;f+=1)a[f]!==0&&(a[f]===1?u.push(i[f]):u.push(i[f].pow(a[f])));s.push(Jr(...u))}return Gt(...s)}function P7(e,t,r){var n;let i=null;if(t==="Divide"){let s=zi(r[0]);return s===null?null:s.operator==="Add"?Gt(...s.ops.map(a=>a.div(r[1]))):e._fn("Divide",[s,r[1]])}if(t==="Multiply")return q0(e,r);if(t==="Negate")return((n=zi(r[0]))==null?void 0:n.neg())??null;if(t==="Add")return Gt(...r.map(s=>zi(s)??s));if(t==="Power"){let s=rt(r[1]);i=s!==null?qh(r[0],s):null}return i}function zi(e){return e=e==null?void 0:e.canonical,!e||typeof e.operator!="string"?null:ts(e.operator)?e.engine._fn(e.operator,e.ops.map(t=>zi(t)??t)):P7(e.engine,e.operator,e.ops??[])}function Ux(e){if(!e.operator||!e.ops)return null;let t=e.engine,r=e.ops.map(n=>n.ops?P7(t,n.operator,n.ops)??n:n),i=e.engine.function(e.operator,r);return zi(i)??i}function Gx(e){let t=-1;for(;e.operator==="Negate";)e=e.op1,t=-t;return t===1?e:e.isNumberLiteral?e.neg():e.engine._fn("Negate",[e])}function Bl(e){let t=-1;for(;e.operator==="Negate";)e=e.op1,t=-t;if(t===1)return e;if(e.numericValue!==null)return e.neg();let r=e.engine;return e.operator==="Subtract"?e.op2.sub(e.op1):e.operator==="Add"?Gt(...e.ops.map(i=>Bl(i))):e.operator==="Multiply"?O7(r,e.ops):e.operator==="Divide"?Bl(e.op1).div(e.op2):r._fn("Negate",[e])}function O7(e,t){if(t.length===0)return e.NegativeOne;if(t.length===1)return Bl(t[0]);let r=[],i=!1;for(let n of t)!i&&n.operator==="Negate"?(i=!0,n.op1.is(1)||r.push(n.op1)):r.push(n);if(!i){r=[];for(let n of t)i||n.numericValue===null&&!n.isInteger?r.push(n):(i=!0,n.is(-1)||r.push(n.neg()))}if(i)return e._fn("Multiply",r.sort(Ot));if(!i){r=[];for(let n of t)i||n.numericValue===null||!n.isNumber?r.push(n):(i=!0,n.is(-1)||r.push(n.neg()))}return i?e._fn("Multiply",r.sort(Ot)):e._fn("Negate",[e._fn("Multiply",[...t].sort(Ot))])}function sr(e,t){let r=1,i=[];for(let s of t){let[a,u]=Wx(s);r*=u,i.push(a)}i=i.filter(s=>!s.is(1));let n=[];for(let s=0;s<i.length;s++){let a=i[s];if(s+1>=i.length){n.push(a);continue}let u=i[s+1];if(a.isNumberLiteral){if(u.operator==="Sqrt"&&u.op1.isNumberLiteral&&G(u.op1.type,"finite_integer")){let f=u.op1.numericValue;if(typeof f!="number"&&(f=f.re),f>=Re){n.push(a);continue}if(G(a.type,"finite_rational")){let p=a.numericValue,[d,b]=typeof p=="number"?[p,1]:[p.numerator.re,p.denominator.re];n.push(e.number(e._numericValue({rational:[d,b],radical:f}))),s++;continue}}else if(u.isNumberLiteral&&u.numericValue instanceof Lt){let f=u.numericValue;if(f instanceof Vt&&Zr(f.rational)&&f.radical!==1){let p=Qn(a);if(p){n.push(e.number(e._numericValue({rational:p,radical:f.radical}))),s++;continue}}else if(f.im===1){let p=a.numericValue;if(typeof p=="number"){n.push(e.number(e.complex(0,p))),s++;continue}else if(p.im===0){if(Number.isInteger(p.re)){n.push(e.number(e.complex(0,p.re))),s++;continue}else if(!p.isExact){n.push(e.number(e.complex(0,p.re))),s++;continue}}}}}n.push(a)}return r<0?n.length===0?e.number(-1):n.length===1?n[0].neg():O7(e,n):n.length===0?e.number(1):n.length===1?n[0]:e._fn("Multiply",[...n].sort(Ot))}function Wx(e){let t=1;for(;e.operator==="Negate";)t=-t,e=e.op1;return e.isNumberLiteral&&e.isNegative&&(t=-t,e=e.neg()),[e,t]}function Jr(...e){if(e.length>0,e.length===1)return e[0];let t=e[0].engine,r=q0(t,e);if(r){if(r.operator!=="Multiply")return r;e=r.ops}return new an(t,e).asRationalExpression()}function Zx(...e){e.length>0;let t=e[0].engine;e=e.map(i=>i.N());let r=q0(t,e);if(r){if(r.operator!=="Multiply")return r;e=r.ops}return new an(t,e).asExpression({numericApproximation:!0})}function Hn(e,t){let r=e.engine;if(!e.isValid||!t.isValid)return r._fn("Divide",[e,t]);if(e.isNaN||t.isNaN)return r.NaN;if(t.is(0))return e.is(0)?r.NaN:r.ComplexInfinity;if(e.is(0))return r.Zero;if(t.is(0)===!1&&(e.symbol!==null&&e.symbol===t.symbol&&e.isConstant||e.isSame(t)))return r.One;if(e.operator==="Negate"&&t.operator==="Negate"&&(e=e.op1,t=t.op1),e.operator==="Divide"&&t.operator==="Divide")return Hn(sr(r,[e.op1,t.op2]),sr(r,[e.op2,t.op1]));if(e.operator==="Divide")return Hn(e.op1,sr(r,[e.op2,t]));if(t.operator==="Divide")return Hn(sr(r,[e,t.op2]),t.op1);if(t.is(1))return e;if(t.is(-1))return e.neg();if(e.is(1))return t.inv();if(t.isInfinity)return e.isInfinity?r.NaN:r.Zero;if(e.operator==="Sqrt"&&t.operator==="Sqrt"){let d=rt(e.op1),b=rt(t.op1);if(d!==null&&b!==null)return r.number(r._numericValue({radical:d*b,rational:[1,b]}))}else if(e.operator==="Sqrt"){let d=rt(e.op1),b=rt(t);if(d!==null&&b!==null)return r.number(r._numericValue({radical:d,rational:[1,b]}))}else if(t.operator==="Sqrt"){let d=rt(e),b=rt(t.op1);if(d!==null&&b!==null)return r.number(r._numericValue({radical:b,rational:[d,b]}))}let i=e.numericValue,n=t.numericValue;if(i!==null&&n!==null){if(typeof i!="number"&&i.im!==0||typeof n!="number"&&n.im!==0)return r._fn("Divide",[e,t]);if(typeof i=="number"&&Number.isInteger(i)&&typeof n=="number"&&Number.isInteger(n))return r.number([i,n]);if(typeof i=="number"&&Number.isInteger(i)){if(i===0)return r.Zero;if(typeof n!="number"&&G(n.type,"integer")){let d=n.bignumRe;if(d!==void 0){if(d.isInteger())return r.number([Kt(i),Kt(d)])}else{let b=n.re;if(Number.isInteger(b))return r.number([i,b])}}}return r._fn("Divide",[e,t])}let[s,a]=e.toNumericValue();if(s.isZero)return r.Zero;let[u,f]=t.toNumericValue();if(u.isZero)return r.NaN;let p=s.div(u);return p.isOne?f.is(1)?a:r._fn("Divide",[a,f]):p.isNegativeOne?f.is(1)?a.neg():r._fn("Divide",[a.neg(),f]):p.isExact?a.is(1)&&f.is(1)?r.number(p):f.is(1)?sr(r,[r.number(p),a]):r._fn("Divide",[sr(r,[r.number(p.numerator),a]),sr(r,[r.number(p.denominator),f])]):r._fn("Divide",[e,t])}function mm(e,t){let r=e.engine;if(e=e.canonical,typeof t!="number"&&(t=t.canonical),e.isNaN)return r.NaN;if(typeof t=="number"){if(isNaN(t))return r.NaN;if(e.is(0))return t===0||!isFinite(t)?r.NaN:e;if(t===1)return e;if(t===-1)return e.neg();if(t===0)return r.NaN;if(e.isNumberLiteral){let n=e.numericValue;if(typeof n=="number"){if(Number.isInteger(n)&&Number.isInteger(t))return r.number(r._numericValue({rational:[n,t]}))}else if(n.isExact&&Number.isInteger(t))return r.number(n.asExact.div(t))}}else{if(t.isNaN)return r.NaN;if(e.is(0))return t.is(0)||t.isFinite===!1?r.NaN:r.Zero;if(t.is(1))return e;if(t.is(-1))return e.neg();if(t.is(0))return r.NaN;if(e.isNumberLiteral&&t.isNumberLiteral){let n=e.numericValue,s=t.numericValue;if(typeof n=="number"&&typeof s=="number"&&Number.isInteger(n)&&Number.isInteger(s))return r.number(r._numericValue({rational:[n,s]}));if(typeof n=="number"&&Number.isInteger(n)&&typeof s!="number"){if(s.isExact)return r.number(r._numericValue(n).div(s.asExact))}else if(typeof s=="number"&&Number.isInteger(s)&&typeof n!="number"){if(n.isExact)return r.number(n.asExact.div(s))}else if(typeof n!="number"&&typeof s!="number"&&n.isExact&&s.isExact)return r.number(n.asExact.div(s.asExact))}}let i=new an(r,[e]);return i.div(typeof t=="number"?r._numericValue(t):t),i.asRationalExpression()}var an=class q7{constructor(t,r,i){if(this.options=i,this.terms=[],this._isCanonical=!0,i=i?{...i}:{},"canonical"in i||(i.canonical=!0),this._isCanonical=i.canonical,this.engine=t,this.coefficient=t._numericValue(1),r)for(let n of r)this.mul(n)}static from(t){return new q7(t.engine,[t])}mul(t,r){if(t.isCanonical||t.isStructural,this.coefficient.isNaN)return;if(t.isNaN){this.coefficient=this.engine._numericValue(NaN);return}if(t.operator==="Multiply"){for(let s of t.ops)this.mul(s,r);return}if(t.operator==="Negate"){this.mul(t.op1,r),this.coefficient=this.coefficient.neg();return}if(this._isCanonical){if(t.symbol==="Nothing")return;r??(r=[1,1]);let s=t.numericValue;if(s!==null){if(t.is(1))return;if(t.is(0)){this.coefficient=this.engine._numericValue(Zi(r)?NaN:0);return}if(t.is(-1)){Zr(r)?this.coefficient=this.coefficient.neg():this.coefficient=this.coefficient.mul(this.engine._numericValue(-1).pow(this.engine._numericValue(r)));return}if(t.isInfinity){Zr(r)?this.coefficient=this.engine._numericValue(t.isNegative?-1/0:1/0):this.terms.push({term:t,exponent:r});return}Zr(r)?this.coefficient=this.coefficient.mul(s):this.coefficient=this.coefficient.mul(this.engine._numericValue(s).pow(this.engine._numericValue(r)));return}let a=V7(t);if(a!==null){this.coefficient=this.coefficient.mul(this.engine._numericValue({radical:a[0]*a[1],rational:[1,Number(a[1])]}).pow(this.engine._numericValue(r)));return}if(!t.symbol){let u;[u,t]=t.toNumericValue(),r&&!Zr(r)&&(u=u.pow(this.engine._numericValue(r))),this.coefficient=this.coefficient.mul(u)}}if(t.is(1)&&(!r||Zr(r))||t.is(0)===!1&&r&&Zi(r))return;if(t.is(0)){r&&Zi(r)?this.coefficient=this.engine._numericValue(NaN):this.coefficient=this.engine._numericValue(0);return}let i=r??[1,1];if(t.operator==="Power"){let s=Qn(t.op2);if(s){this.mul(t.op1,aa(i,s));return}}if(t.operator==="Sqrt"){this.mul(t.op1,aa(i,[1,2]));return}if(t.operator==="Root"){let s=Qn(t.op2);if(s){this.mul(t.op1,aa(i,Cx(s)));return}}if(t.operator==="Divide"){this.mul(t.op1,i),this.mul(t.op2,r0(i));return}let n=!1;for(let s of this.terms)if(s.term.isSame(t)){s.exponent=rl(s.exponent,i),n=!0;break}n||this.terms.push({term:t,exponent:i})}div(t){t instanceof Lt?this.coefficient=this.coefficient.div(t):this.mul(t,[-1,1])}groupedByDegrees(t){t??(t={}),"mode"in t||(t.mode="expression");let r=t.mode;if(r==="numeric"&&(this.coefficient.isNegativeInfinity||this.coefficient.isPositiveInfinity))return[];if(this.coefficient.isZero)return[];let i=this.engine;if(this.terms.length===0)if(r==="numeric"){let s=this.coefficient.N();return[{exponent:[1,1],terms:[i.number(s)]}]}else return[{exponent:[1,1],terms:[i.number(this.coefficient)]}];let n=[];if(!this.coefficient.isOne)if(r==="rational"&&this.coefficient.type==="finite_rational"){let s=this.coefficient.numerator;s.isOne||n.push({exponent:[1,1],terms:[i.number(s)]});let a=this.coefficient.denominator;a.isOne||n.push({exponent:[-1,1],terms:[i.number(a)]})}else if(r==="numeric"){let s=this.coefficient.N();n.push({exponent:[1,1],terms:[i.number(s)]})}else n.push({exponent:[1,1],terms:[i.number(this.coefficient)]});for(let s of this.terms){let a=cm(s.exponent);if(a[0]===0)continue;let u=!1;for(let f of n)if(a[0]===f.exponent[0]&&a[1]===f.exponent[1]){f.terms.push(s.term),u=!0;break}u||n.push({exponent:a,terms:[s.term]})}return n}asExpression(t={numericApproximation:!1}){let r=this.engine,i=this.coefficient;if(i.isNaN)return r.NaN;if(i.isPositiveInfinity)return r.PositiveInfinity;if(i.isNegativeInfinity)return r.NegativeInfinity;if(i.isZero)return r.Zero;let n=i.isNegativeOne;n&&(this.coefficient=r._numericValue(1));let s=this.groupedByDegrees({mode:t.numericApproximation?"numeric":"expression"});if(s===null)return r.NaN;if(n){let a=Fo(r,s).neg();return this.coefficient=r._numericValue(-1),a}return Fo(r,s)}asNumeratorDenominator(){let t=this.engine,r=this.coefficient;if(r.isZero)return[t.Zero,t.One];if(r.isPositiveInfinity||r.isNegativeInfinity)return this.terms.length===0?[r.isPositiveInfinity?t.PositiveInfinity:t.NegativeInfinity,t.One]:[t.NaN,t.NaN];let i=r.isNegativeOne;i&&(this.coefficient=t._numericValue(1));let n=this.groupedByDegrees({mode:"rational"});if(this.coefficient=r,n===null)return[t.NaN,t.NaN];let s=n.filter(f=>f.exponent[0]>=0),a=n.filter(f=>f.exponent[0]<0).map(f=>({exponent:r0(f.exponent),terms:f.terms})),u=Fo(t,s);return[i?u.neg():u,Fo(t,a)]}asRationalExpression(){let[t,r]=this.asNumeratorDenominator();return Hn(t,r)}};function Qx(e,t){let r=e.engine,i=e.coefficient.gcd(t.coefficient);if(i.isOne)return[r._numericValue(1),r.One];let n=[];for(let s of e.terms){let a=t.terms.find(f=>s.term.isSame(f.term));if(!a)continue;let u=k7(s.exponent,a.exponent);if(Zr(u))n.push(s.term);else{let[f,p]=$x(u);p===1?n.push(s.term.pow(f)):f===1?n.push(s.term.root(p)):n.push(s.term.pow(f).root(p))}}return[i,n.length===0?r.One:Jr(...n)]}function Fo(e,t){let r=t.map(({terms:i,exponent:n})=>{let s=lr(i,"Multiply"),a=s.length<=1?s[0]:e._fn("Multiply",[...s].sort(Ot));return Zr(n)?a:a.pow(e.number(n))});return r=lr(r,"Multiply"),r.length===0?e.One:r.length===1?r[0]:e._fn("Multiply",r.sort(Ot))}function a0(e){let t=e.engine,r=e.operator;if(ts(r))return t.function(r,e.ops.map(a0));if(r==="Divide")return e.ops[0].div(e.ops[1]);if(r==="Negate")return a0(e.ops[0]).neg();if(r==="Add"){let[i,n]=e.ops.reduce((s,a)=>(a.operator==="Divide"?(s[0].push(a.ops[0]),s[1].push(a.ops[1])):s[0].push(a),s),[[],[]]);return Gt(...i).div(Gt(...n))}return e}function Vl(e){let t=e.operator;if(ts(t)){let r=an.from(e.op1),i=an.from(e.op2),[n,s]=Qx(r,i),a=n.sgn()===-1;return n.isOne||(r.div(n),i.div(n)),s.is(1)||(s.isPositive?(r.div(s),i.div(s)):s.isNegative&&(r.div(s.neg()),i.div(s.neg()),a=!a)),a&&([r,i]=[i,r]),e.engine.function(t,[r.asExpression(),i.asExpression()])}if(t==="Negate")return Vl(e.ops[0]).neg();if(t==="Add"){let r=e.engine,i,n=[];for(let a of e.ops){let[u,f]=a.toNumericValue();i=i?i.gcd(u):u,u.isZero||n.push({coeff:u,term:f})}if(!i||i.isOne)return e;let s=n.map(({coeff:a,term:u})=>Jr(u,r.box(a.div(i))));return Jr(r.number(i),Gt(...s))}return an.from(a0(e)).asExpression()}function wi(e){let t=e.engine;if(e.symbol==="Pi")return[t._numericValue(1),t._numericValue(0)];if(e.operator==="Negate"){let[r,i]=wi(e.ops[0]);return[r.neg(),i]}if(e.operator==="Add"&&e.nops===2){let[r,i]=wi(e.op1),[n,s]=wi(e.op2);return[r.add(n),i.add(s)]}if(e.operator==="Multiply"&&e.nops===2){if(e.op1.isNumberLiteral){let[r,i]=wi(e.op2),n=e.op1.numericValue;return[r.mul(n),i.mul(n)]}if(e.op2.isNumberLiteral){let[r,i]=wi(e.op1),n=e.op2.numericValue;return[r.mul(n),i.mul(n)]}}if(e.operator==="Divide"&&e.op2.isNumberLiteral){let[r,i]=wi(e.op1),n=e.op2.numericValue;return[r.div(n),i.div(n)]}if(e.operator==="Power"){let[r,i]=wi(e.op1),n=e.op2.re;if(!isNaN(n))return[r.pow(n),i.pow(n)]}if(e.operator==="Sqrt"){let[r,i]=wi(e.ops[0]);return[r.sqrt(),i.sqrt()]}if(e.operator==="Root"){let[r,i]=wi(e.ops[0]),n=e.ops[1].re;if(!isNaN(n))return[r.root(n),i.root(n)]}return[t._numericValue(0),t._numericValue(e.numericValue??0)]}var Yx={Sin:[[1,"Sin"],[1,"Cos"],[-1,"Sin"],[-1,"Cos"]],Cos:[[1,"Cos"],[-1,"Sin"],[-1,"Cos"],[1,"Sin"]],Sec:[[1,"Sec"],[-1,"Csc"],[-1,"Sec"],[1,"Csc"]],Csc:[[1,"Csc"],[1,"Sec"],[-1,"Csc"],[-1,"Sec"]],Tan:[[1,"Tan"],[-1,"Cot"],[1,"Tan"],[-1,"Cot"]],Cot:[[1,"Cot"],[-1,"Tan"],[1,"Cot"],[-1,"Tan"]]},xn=["Sqrt",2],Cs=["Sqrt",3],$s=["Sqrt",5],Bo=["Sqrt",6],Xx=[[[0,1],{Sin:0,Cos:1,Tan:0,Cot:"ComplexInfinity",Sec:1,Csc:"ComplexInfinity"}],[[1,12],{Sin:["Divide",["Subtract",Bo,xn],4],Cos:["Divide",["Add",Bo,xn],4],Tan:["Subtract",2,Cs],Cot:["Add",2,Cs],Sec:["Subtract",Bo,xn],Csc:["Add",Bo,xn]}],[[1,10],{Sin:["Divide",["Subtract",$s,1],4],Cos:["Divide",["Sqrt",["Add",10,["Multiply",2,$s]]],4],Tan:["Divide",["Sqrt",["Subtract",25,["Multiply",10,$s]]],5],Cot:["Sqrt",["Add",5,["Multiply",2,$s]]],Sec:["Divide",["Sqrt",["Subtract",50,["Multiply",10,$s]]],5],Csc:["Add",1,$s]}],[[1,8],{Sin:"$\\frac{\\sqrt{2-\\sqrt2}}{2}$",Cos:"$\\frac{\\sqrt {2+{\\sqrt {2}}}}{2}$",Tan:"$\\sqrt{2} - 1$",Cot:"$\\sqrt{2} + 1$",Sec:"$\\sqrt{ 4 - 2\\sqrt{2}}$",Csc:"$\\sqrt{ 4 + 2\\sqrt{2}}$"}],[[1,6],{Sin:"$\\frac{1}{2}$",Cos:"$\\frac{\\sqrt{3}}{2}$",Tan:"$\\frac{\\sqrt{3}}{3}$",Cot:"$\\sqrt{3}$",Sec:"$\\frac{2\\sqrt{3}}{3}$",Csc:2}],[[1,5],{Sin:"$\\frac{\\sqrt{10- 2\\sqrt{5}}} {4}$",Cos:"$\\frac{1+ \\sqrt{5}} {4}$",Tan:"$\\sqrt{5-2\\sqrt5}$",Cot:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Sec:"$\\sqrt{5} - 1$",Csc:"$\\frac{\\sqrt{50+10\\sqrt{5}}} {5}$"}],[[1,4],{Sin:["Divide",xn,2],Cos:["Divide",xn,2],Tan:1,Cot:1,Sec:xn,Csc:xn}],[[3,10],{Sin:"$\\frac{1+ \\sqrt5} {4}$",Cos:"$\\frac{\\sqrt{10- 2\\sqrt5}} {4}$",Tan:"$\\frac{\\sqrt{25+10\\sqrt5}} {5}$",Cot:"$\\sqrt{5-2\\sqrt5}$",Sec:"$\\frac{\\sqrt{50+10\\sqrt5}} {5}$",Csc:"$\\sqrt5-1$"}],[[1,3],{Sin:["Divide",Cs,2],Cos:"Half",Tan:Cs,Cot:["Divide",Cs,3],Sec:2,Csc:["Divide",["Multiply",2,Cs],3]}],[[3,8],{Sin:"$\\frac{ \\sqrt{2 + \\sqrt{2}} } {2}$",Cos:"$\\frac{ \\sqrt{2 - \\sqrt{2}} } {2}$",Tan:"$\\sqrt{2} + 1$",Cot:"$\\sqrt{2} - 1$",Sec:"$\\sqrt{ 4 + 2 \\sqrt{2} }$",Csc:"$\\sqrt{ 4 - 2 \\sqrt{2} }$"}],[[2,5],{Sin:"$\\frac{\\sqrt{10+ 2\\sqrt{5}}} {4}$",Cos:"$\\frac{\\sqrt{5}-1} {4}$",Tan:"$\\sqrt{5+2\\sqrt{5}}$",Cot:"$\\frac{\\sqrt{25-10\\sqrt{5}}} {5}$",Sec:"$1 + \\sqrt{5}$",Csc:"$\\frac{\\sqrt{50-10\\sqrt{5}}} {5}$"}],[[5,12],{Sin:"$\\frac{\\sqrt{6} + \\sqrt{2}} {4}$",Cos:"$\\frac{ \\sqrt{6} - \\sqrt{2}} {4}$",Tan:"$2+\\sqrt{3}$",Cot:"$2-\\sqrt{3}$",Sec:"$\\sqrt{6}+\\sqrt{2}$",Csc:"$\\sqrt{6} - \\sqrt{2}$"}],[[1,2],{Sin:1,Cos:0,Tan:"ComplexInfinity",Cot:0,Sec:"ComplexInfinity",Csc:1}]];function jr(e,t,r,i){var s;let n=(s=B7(e))==null?void 0:s.N();if(n!==void 0)return ut(n,t,r,i)}function Kx(e){if(!e)return e;let t=e.engine,r=t.angularUnit;return r==="rad"||(r==="deg"&&(e=e.mul(t.Pi).div(180)),r==="grad"&&(e=e.mul(t.Pi).div(200)),r==="turn"&&(e=e.mul(t.Pi).mul(2))),e}function Hr(e){if(!e)return e;let t=e.engine,r=t.angularUnit;if(r==="rad")return e;let i=e.N().re;return Number.isNaN(i)?e:r==="deg"?t.number(i*(180/Math.PI)):r==="grad"?t.number(i*(200/Math.PI)):r==="turn"?t.number(i/(2*Math.PI)):e}function l0(e,t){if(!t)return;let r=t.engine;switch(e){case"Arccos":return Hr(ut(t,Math.acos,i=>i.acos(),i=>i.acos()));case"Arccot":return Hr(ut(t,i=>Math.atan2(1,i),i=>dr.atan2(r._BIGNUM_ONE,i),i=>i.inverse().atan()));case"Arccsc":return Hr(ut(t,i=>Math.asin(1/i),i=>r._BIGNUM_ONE.div(i).asin(),i=>i.inverse().asin()));case"Arcosh":return Hr(ut(t,Math.acosh,i=>i.acosh(),i=>i.acosh()));case"Arcoth":return Hr(ut(t,i=>Math.log((1+i)/(i-1))/2,i=>r._BIGNUM_ONE.add(i).div(i.sub(r._BIGNUM_ONE)).log().div(2),i=>r.complex(1).add(i).div(i.sub(1)).log().div(2)));case"Arcsch":return Hr(ut(t,i=>Math.log(1/i+Math.sqrt(1/(i*i)+1)),i=>r._BIGNUM_ONE.div(i.mul(i)).add(r._BIGNUM_ONE).sqrt().add(r._BIGNUM_ONE.div(i)).log(),i=>i.mul(i).inverse().add(1).sqrt().add(i.inverse()).log()));case"Arcsec":return Hr(ut(t,i=>Math.acos(1/i),i=>r._BIGNUM_ONE.div(i).acos(),i=>i.inverse().acos()));case"Arcsin":return Hr(ut(t,Math.asin,i=>i.asin(),i=>i.asin()));case"Arsech":return Hr(ut(t,i=>Math.log((1+Math.sqrt(1-i*i))/i),i=>r._BIGNUM_ONE.sub(i.mul(i).add(r._BIGNUM_ONE).div(i)).log(),i=>r.complex(1).sub(i.mul(i)).add(1).div(i).log()));case"Arsinh":return Hr(ut(t,Math.asinh,i=>i.asinh(),i=>i.asinh()));case"Arctan":return Hr(ut(t,Math.atan,i=>i.atan(),i=>i.atan()));case"Artanh":return Hr(ut(t,Math.atanh,i=>i.atanh(),i=>i.atanh()));case"Cos":return jr(t,Math.cos,i=>i.toSignificantDigits(r.precision+4).cos().toSignificantDigits(r.precision),i=>i.cos());case"Cosh":return jr(t,Math.cosh,i=>i.cosh(),i=>i.cosh());case"Cot":return jr(t,i=>1/Math.tan(i),i=>r._BIGNUM_ONE.div(i.tan()),i=>i.tan().inverse());case"Coth":return jr(t,i=>1/Math.tanh(i),i=>r._BIGNUM_ONE.div(i.tanh()),i=>i.tanh().inverse());case"Csc":return jr(t,i=>1/Math.sin(i),i=>r._BIGNUM_ONE.div(i.sin()),i=>i.sin().inverse());case"Csch":return jr(t,i=>1/Math.sinh(i),i=>r._BIGNUM_ONE.div(i.sinh()),i=>i.sinh().inverse());case"Sec":return jr(t,i=>1/Math.cos(i),i=>r._BIGNUM_ONE.div(i.cos()),i=>i.cos().inverse());case"Sech":return jr(t,i=>1/Math.cosh(i),i=>r._BIGNUM_ONE.div(i.cosh()),i=>i.cosh().inverse());case"Sin":return jr(t,Math.sin,i=>i.toSignificantDigits(r.precision+4).sin().toSignificantDigits(r.precision),i=>i.sin());case"Sinh":return jr(t,Math.sinh,i=>i.sinh(),i=>i.sinh());case"Tan":return jr(t,i=>{let n=Math.tan(i);return n>1e6||n<-1e6?r.ComplexInfinity:n},i=>{let n=i.tan();return n.greaterThan(1e6)||n.lessThan(-1e6)?r.ComplexInfinity:n},i=>i.tan());case"Tanh":return jr(t,Math.tanh,i=>i.tanh(),i=>i.tanh())}}function Jx(e){return!!(e.startsWith("Ar")&&dm(e))}function dm(e){return{Sin:"Arcsin",Cos:"Arccos",Tan:"Arctan",Sec:"Arcsec",Csc:" Arccsc",Sinh:"Arsinh",Cosh:"Arcosh",Tanh:"Artanh",Sech:"Arcsech",Csch:"Arcsch",Arcosh:"Cosh",Arccos:"Cos",Arccsc:"Csc",Arcsch:"Csch",Arcsec:"Sec",Arcsin:"Sin",Arsinh:"Sinh",Arctan:"Tan",Artanh:"Tanh"}[e]}function Lh(e,t){if(t.length!==1||!t[0].isValid)return;let r=t[0],i=r.symbol;if(typeof i!="string")return;if(i==="InverseFunction")return r.op1;let n=dm(i);return n?e.symbol(n):void 0}function L7(e){return e!=="Cos"&&e!=="Sec"?-1:1}function e2(e,t,r,i){if(!r)return;let n=r.N().re;if(Number.isNaN(n))return;let s=dm(t),a=e.cache("constructible-inverse-trigonometric-values-"+t,()=>{let f=[];for(let[[p,d],b]of i){let x=b[s];if(x===void 0)continue;let I=x.N().re;Number.isNaN(I)||f.push([[x,I],[p,d]])}return f},f=>{for(let[[p,d],[b,x]]of f)p.reset();return f}),u=0;n<0&&(u=L7(s)==-1?-1:1,n=-n,r=r.neg());for(let[[f,p],[d,b]]of a)if(e.chop(n-p)===0){let x=e.Pi.mul(d).div(b);return u==-1?x=x.neg():u==1&&(x=e.Pi.sub(x)),x.evaluate()}}function R7(e,t){var n;let[r,i]=t2(t);if(r!==void 0)return i!==void 0&&((e==="Sin"||e==="Tan")&&(i===0||i===2)||(e==="Cos"||e==="Cot")&&(i===1||i===3))?"zero":(n={Sin:["positive","positive","negative","negative"],Cos:["positive","negative","negative","positive"],Sec:["positive","negative","negative","positive"],Csc:["positive","positive","negative","negative"],Tan:["positive","negative","positive","negative"],Cot:["positive","negative","positive","negative"]}[e])==null?void 0:n[r]}function F7(e){return["Sin","Cos","Tan","Csc","Sec","Cot"].includes(typeof e=="string"?e:e.operator)}function gm(e,t){var p;if(!t||!F7(e))return;let r=t.engine;if(t=t.N(),t.im!==0)return;let i=t.re;if(Number.isNaN(i))return;let n=r.cache("constructible-trigonometric-values",()=>Xx.map(([d,b])=>[d,Object.fromEntries(Object.entries(b).map(([x,I])=>[x,(r.parse(ql(I))??r.box(I)).simplify()]))]),d=>{for(let[b,x]of d)for(let I of Object.values(x))I.reset();return d});if(Jx(e))return e2(r,e,t,n);let s=r.angularUnit;s!=="rad"&&(s==="deg"&&(i*=Math.PI/180),s==="grad"&&(i*=Math.PI/200),s==="turn"&&(i*=2*Math.PI));let a=L7(e)==-1?Math.sign(i):1;i=Math.abs(i%(2*Math.PI));let u=Math.floor(i*2/Math.PI);i=i%(Math.PI/2);let f;[f,e]=((p=Yx[e])==null?void 0:p[u])??[1,e];for(let[[d,b],x]of n){let I=x[e];if(I&&Math.abs(i-Math.PI*d/b)<=1e-12)return I.symbol==="ComplexInfinity"?I:a*f<0?I.neg():I}}function t2(e){if(!e.isValid||!e.isNumberLiteral)return[void 0,void 0];if(e.im!==0)return[void 0,void 0];let t=e.re;if(isNaN(t))return[void 0,void 0];let r=(t%(2*Math.PI)+2*Math.PI)%(2*Math.PI);return Math.abs(r)<1e-12?[1,0]:Math.abs(r-Math.PI/2)<1e-12?[2,1]:Math.abs(r-Math.PI)<1e-12?[3,2]:Math.abs(r-3*Math.PI/2)<1e-12?[4,3]:[Math.floor(r/(Math.PI/2))+1,void 0]}function B7(e){if(!e)return e;let t=Kx(e);if(!t)return;if(t.N().im!==0)return t;let r=t.engine,[i,n]=wi(t);if(i.isZero)return r.number(n);let s=r._numericValue(i.bignumRe?i.bignumRe.mod(2):i.re%2);return r.number(n.add(r.Pi.mul(s).N().numericValue))}function T1(e){return e.operator==="Sqrt"||e.operator==="Power"&&e.op2.im===0&&e.op2.re===.5||e.operator==="Root"&&e.op2.im===0&&e.op2.re===2}function V7(e){if(T1(e))return Qn(e.op1)??null;if(e.operator==="Divide"&&e.op1.is(1)&&T1(e.op2)){let t=e.op2.re;return Number.isInteger(t)?[1,t]:null}return null}function mu(e,t){let r=e.engine;if(e=e.canonical,t=t.canonical,e.is(0)){if(t.is(0))return r.NaN;if(t.isPositive)return r.Zero;if(t.isNegative)return r.ComplexInfinity}if(e.is(1)||t.is(0))return r.One;if(t.is(1))return e;if(t.is(.5))return jl(e,2);let i=Qn(t);return i!==void 0&&i[0]===1?jl(e,r.number(i[1])):r._fn("Power",[e,t])}function jl(e,t){e=e.canonical;let r=e.engine,i;if(typeof t=="number"?i=t:(t=t.canonical,t.isNumberLiteral&&t.im===0&&(i=t.re)),i===1)return e;if(i===2){if(e.isNumberLiteral&&G(e.type,"rational")&&e.re<Re){let n=e.sqrt();if(typeof n.numericValue=="number"||n.numericValue.isExact)return n}return r._fn("Sqrt",[e])}return r._fn("Root",[e,typeof t=="number"?r.number(t):t])}function Yt(e,t,{numericApproximation:r}){if(!e.isCanonical)return e.canonical.pow(t);if(r&&e.isNumberLiteral){if(typeof t=="number")return ut(e,s=>Math.pow(s,t),s=>s.pow(t),s=>s.pow(t))??Yt(e,t,{numericApproximation:!1});if(t.isNumberLiteral)return cs(e,t,(s,a)=>Math.pow(s,a),(s,a)=>s.pow(a),(s,a)=>s.pow(a))??Yt(e,t,{numericApproximation:!1})}let i=e.engine;typeof t!="number"&&(t=t.canonical);let n=typeof t=="number"?t:t.im===0?t.re:void 0;if(n===0)return i.One;if(n===1)return e;if(n===-1)return e.isInfinity&&e.isNegative?i.Zero:e.is(-1)?i.NegativeOne:e.is(0)?i.ComplexInfinity:e.is(1)?i.One:e.isInfinity&&e.isPositive?i.Zero:e.inv();if(n===Number.POSITIVE_INFINITY){if(e.is(0))return i.Zero;if(e.is(1)||e.is(-1))return i.NaN;if(e.isInfinity){if(e.isPositive)return i.PositiveInfinity;if(e.isNegative)return i.NaN}}if(n===Number.NEGATIVE_INFINITY){if(e.is(-1))return i.NaN;if(e.isInfinity){if(e.isPositive)return i.Zero;if(e.isNegative)return i.NegativeInfinity}}if(typeof t!="number"){if(t.isInfinity&&!t.isPositive&&!t.isNegative)return i.NaN;if(e.isInfinity){if(t.type==="imaginary")return i.NaN;if(t.type==="complex"&&!isNaN(t.re)){if(t.re>0)return i.ComplexInfinity;if(t.re<0)return i.Zero}}}if(n===Number.POSITIVE_INFINITY){if(e.isGreater(1))return i.PositiveInfinity;if(e.isPositive&&e.isLess(1))return i.Zero}if(n===Number.NEGATIVE_INFINITY){if(e.isGreater(1))return i.Zero;if(e.isPositive&&e.isLess(1))return i.PositiveInfinity}if(typeof t!="number"&&t.operator==="Negate")return Yt(e,t.op1,{numericApproximation:r}).inv();if(e.symbol==="ComplexInfinity")return i.NaN;if(e.symbol==="ExponentialE"){let s=Ku(t);if(s!==void 0){if(s=B7(s),s!==void 0)return i.function("Cos",[s]).add(i.function("Sin",[s]).mul(i.I)).simplify()}else if(r){if(typeof t=="number")return i.number(i._numericValue(i.E.N().numericValue).pow(t));if(t.isNumberLiteral)return i.number(i._numericValue(i.E.N().numericValue).pow(t.numericValue))}}if(e.operator==="Power"){let[s,a]=e.ops;return Yt(s,a.mul(t),{numericApproximation:r})}if(e.operator==="Divide"){let[s,a]=e.ops;return Yt(s,t,{numericApproximation:r}).div(Yt(a,t,{numericApproximation:r}))}if(e.operator==="Negate"&&n!==void 0)return n%2===0?Yt(e.op1,t,{numericApproximation:r}):Yt(e.op1,t,{numericApproximation:r}).neg();if(e.operator==="Sqrt")return n===2?e.op1:n!==void 0&&n%2===0?e.op1.pow(n/2):Yt(e.op1,t,{numericApproximation:r}).sqrt();if(e.operator==="Exp")return Yt(i.E,e.op1.mul(t),{numericApproximation:r});if(e.operator==="Multiply"){let s=e.ops.map(a=>Yt(a,t,{numericApproximation:r}));return i._fn("Multiply",s)}if(typeof t!="number"&&t.isNumberLiteral){let s=Qn(t);if(s!==void 0&&s[0]===1)return ym(e,i.number(s[1]),{numericApproximation:r})}if(e.operator==="Root"){let[s,a]=e.ops;return Yt(s,i.box(t).div(a),{numericApproximation:r})}if(e.isNumberLiteral&&Number.isInteger(n)){let s=e.numericValue;if(typeof s=="number"){if(Number.isInteger(s))return ut(e,a=>Math.pow(a,n),a=>a.pow(n),a=>a.pow(n))??i._fn("Power",[e,i.box(t)])}else if(s.isExact){let a=s.asExact.pow(n);if(a.isExact)return i.number(a)}}return i._fn("Power",[e,i.box(t)])}function ym(e,t,{numericApproximation:r}){var i,n;if(r&&e.isNumberLiteral&&t.isNumberLiteral)return cs(e,t,(s,a)=>Math.pow(s,1/a),(s,a)=>s.pow(a.pow(-1)),(s,a)=>s.pow(typeof a=="number"?1/a:a.inverse()))??ym(e,t,{numericApproximation:!1});if(e.isNumberLiteral&&t.isNumberLiteral&&t.isInteger){let s=typeof t=="number"?t:t.im===0?t.re:void 0;if(s!==void 0)if(typeof e.numericValue=="number"){let a=(i=e.engine._numericValue(e.numericValue))==null?void 0:i.root(s);if(a!=null&&a.isExact)return e.engine.number(a)}else{let a=(n=e.numericValue.asExact)==null?void 0:n.root(s);if(a!=null&&a.isExact)return e.engine.number(a)}}return e.engine._fn("Root",[e,t])}var Ks=1e5,r2={Sin:!0,Cos:!0,Tan:!0,Cot:!0,Sec:!0,Csc:!0,Sinh:!0,Cosh:!0,Tanh:!0,Coth:!0,Sech:!0,Csch:!0,Arcsin:!0,Arccos:!0,Arctan:!0,Arccot:!0,Arcsec:!0,Arccsc:!0,Arsinh:!0,Arcosh:!0,Artanh:!0,Arcoth:!0,Arcsch:!0,Arsech:!0,Arcsech:!0};function i2(e){return!e||typeof e!="string"?!1:e in r2}function vm(e,t){let r=Ar(e),i=Ar(t);if(r!==i)return i-r;let n=_i(e),s=_i(t);if(n!==s)return s-n;let a=S1(e),u=S1(t);if(a||u){if(!a)return 1;if(!u||a<u)return-1;if(a>u)return 1}return Ot(e,t)}function sf(e,t){let r=s=>s.symbol!==null?1:s.isNumberLiteral?3:2,i=r(e),n=r(t);if(i<n)return-1;if(n<i)return 1;if(i===1)return e.symbol===t.symbol?0:e.symbol>t.symbol?1:-1;if(i===3){let s=e.numericValue,a=t.numericValue,u=typeof s=="number"?s:s.re,f=typeof a=="number"?a:a.re;return u-f}return Ot(e,t)}var M1=["integer","rational","radical","real","complex","constant","symbol","multiply","divide","add","trig","fn","power","string","other"];function E1(e){if(typeof e.numericValue=="number")return Number.isInteger(e.numericValue)?"integer":"real";if(e.numericValue){let t=e.numericValue.type;return t==="integer"||t==="finite_integer"?"integer":t==="rational"||t==="finite_rational"?"rational":t==="real"||t==="finite_real"?"real":t==="complex"||t==="finite_complex"||t==="imaginary"||t==="finite_imaginary"||t==="finite_number"?"complex":t==="non_finite_number"?"constant":t==="number"?"real":"other"}return e.symbol==="ImaginaryUnit"?"complex":V7(e)?"radical":e.symbol&&e.isConstant?"constant":e.symbol?"symbol":i2(e.operator)?"trig":e.operator==="Add"?"add":e.operator==="Power"||e.operator==="Root"?"power":e.operator==="Multiply"||e.operator==="Negate"?"multiply":e.operator==="Divide"?"divide":e.operator==="Rational"?"rational":e.operator==="Complex"?e.im!==0?"complex":"real":e.operator==="Sqrt"?e.op1.isNumberLiteral&&(e.op1.isInteger||e.op1.isRational)?"radical":"power":e.ops?"fn":e.string?"string":"other"}function Ot(e,t){var n,s;if(e===t)return 0;let r=E1(e),i=E1(t);if(r!==i)return M1.indexOf(r)-M1.indexOf(i);if(r==="complex"){let[a,u]=A1(e),[f,p]=A1(t);return u!==p?u-p:a-f}if(r==="integer"||r==="rational"||r==="real"){let a=e.numericValue,u=t.numericValue;a===null&&e.operator==="Rational"&&(a=e.op1.re/e.op2.re),u===null&&t.operator==="Rational"&&(u=t.op1.re/t.op2.re);let f=typeof a=="number"?a:a.re,p=typeof u=="number"?u:u.re;return f-p}if(r==="radical")return Ot(e.op1,t.op1);if(r==="constant"||r==="symbol")return e.symbol===t.symbol?0:e.symbol>t.symbol?1:-1;if(r==="add"){let a=e.ops,u=t.ops;if(a.length!==u.length)return u.length-a.length;for(let f=0;f<a.length;f++){let p=Ot(a[f],u[f]);if(p!==0)return p}return 0}if(r==="power"){let a=Ar(e),u=Ar(t);if(a!==u)return u-a;let f=_i(e),p=_i(t);return f!==p?f-p:Ot(e.op1,t.op1)}if(r==="multiply"){let a=Ar(e),u=Ar(t);if(a!==u)return u-a;let f=_i(e),p=_i(t);if(f!==p)return f-p;let d=e.ops,b=t.ops;if(d.length!==b.length)return b.length-d.length;for(let x=0;x<d.length;x++){let I=Ot(d[x],b[x]);if(I!==0)return I}return 0}if(r==="divide"){let a=Ar(e.op1),u=Ar(t.op1);if(a!==u)return u-a;let f=_i(e.op1),p=_i(t.op1);if(f!==p)return f-p;let d=Ot(e.op1,t.op1);return d!==0?d:Ot(e.op2,t.op2)}if(r==="fn"||r==="trig"){if(e.operator==t.operator&&e.nops===1&&t.nops===1)return Ot(e.op1,t.op1);let a=((n=e.functionDefinition)==null?void 0:n.complexity)??Ks,u=((s=t.functionDefinition)==null?void 0:s.complexity)??Ks;return a===u?e.operator===t.operator?Rh(e)-Rh(t):e.operator<t.operator?1:-1:a-u}return r==="string"?e.string===t.string?0:t.string<e.string?-1:1:(e.complexity??Ks)-(t.complexity??Ks)}function j7(e,{recursive:t=!1}){if(e.isCanonical||!e.ops)return e;let r=e.ops;return t&&(r=r.map(i=>j7(i,{recursive:t}))),r=bm(e.operator,r),e.engine._fn(e.operator,r,{canonical:!1})}function bm(e,t){if(t.length===0)return t;let r=t[0].engine;if(e==="Add")return[...t].sort(vm);if(e==="Multiply")return[...t].sort(Ot);let i=r.lookupFunction(e);return!i||!i.commutative?t:i.commutativeOrder?[...t].sort(i.commutativeOrder):[...t].sort(Ot)}function Rh(e){return e.ops?1+[...e.ops].reduce((t,r)=>t+Rh(r),0):1}function A1(e){if(e.symbol==="ImaginaryUnit")return[0,1];if(e.numericValue){if(typeof e.numericValue=="number")return[e.numericValue,0];let t=e.numericValue;return[t.re,t.im]}if(e.operator==="Complex"){let t=e.op1.numericValue;if(t===null)return[0,0];let r=typeof t=="number"?t:t.re,i=e.op2.numericValue;if(i===null)return[0,0];let n=typeof i=="number"?i:i.re;return[r,n]}return[0,0]}var o0=7,I1=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];function xm(e){if(e<0)return NaN;let t=Math.PI,r=e*e*e;return e*Math.log(e)-e-.5*Math.log(e)+.5*Math.log(2*t)+1/(12*e)-1/(360*r)+1/(1260*r*e*e)}function u0(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*u0(1-e));if(e>100)return Math.exp(xm(e));e-=1;let t=I1[0];for(let i=1;i<o0+2;i++)t+=I1[i]/(e+i);let r=e+o0+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,e+.5)*Math.exp(-r)*t}function n2(e){let t=Math.PI,r=t*t,i=r*t,n=e*e,s=e*n,a=s*n,u=a*n;return Math.sqrt(t)/2*(e+t/12*s+7*r/480*a+127*i/40320*u+4369*r*r/5806080*u*n+34807*i*r/182476800*u*n*n)}function z1(e){let t=.254829592,r=-.284496736,i=1.421413741,n=-1.453152027,s=1.061405429,a=.3275911,u=e<0?-1:1;e=Math.abs(e);let f=1/(1+a*e),p=((((s*f+n)*f+i)*f+r)*f+t)*f;return u*(1-p*Math.exp(-e*e))}function H7(e,t){if(t.isNegative())return e._BIGNUM_NAN;let r=e.cache("gamma-p-ln",()=>["0.99999999999999709182","57.156235665862923517","-59.597960355475491248","14.136097974741747174","-0.49191381609762019978","0.33994649984811888699e-4","0.46523628927048575665e-4","-0.98374475304879564677e-4","0.15808870322491248884e-3","-0.21026444172410488319e-3","0.2174396181152126432e-3","-0.16431810653676389022e-3","0.84418223983852743293e-4","-0.2619083840158140867e-4","0.36899182659531622704e-5"].map(a=>e.bignum(a))),i=r[0];for(let a=r.length-1;a>0;--a)i=i.add(r[a].div(t.add(a)));let n=e.cache("gamma-g-ln",()=>e.bignum(607).div(128)),s=t.add(n).add(e._BIGNUM_HALF);return e._BIGNUM_NEGATIVE_ONE.acos().mul(e._BIGNUM_TWO).log().mul(e._BIGNUM_HALF).add(s.log().mul(t.add(e._BIGNUM_HALF)).minus(s).add(i.log()).minus(t.log()))}function U7(e,t){if(t.lessThan(e._BIGNUM_HALF)){let s=e._BIGNUM_NEGATIVE_ONE.acos();return s.div(s.mul(t).sin().mul(U7(e,e._BIGNUM_ONE.sub(t))))}if(t.greaterThan(100))return H7(e,t).exp();t=t.sub(1);let r=e.cache("lanczos-7-c",()=>["0.99999999999980993227684700473478","676.520368121885098567009190444019","-1259.13921672240287047156078755283","771.3234287776530788486528258894","-176.61502916214059906584551354","12.507343278686904814458936853","-0.13857109526572011689554707","9.984369578019570859563e-6","1.50563273514931155834e-7"].map(s=>e.bignum(s))),i=r[0];for(let s=1;s<o0+2;s++)i=i.add(r[s].div(t.add(s)));let n=t.add(o0).add(e._BIGNUM_HALF);return e._BIGNUM_NEGATIVE_ONE.acos().times(e._BIGNUM_TWO).sqrt().mul(i.mul(n.neg().exp()).mul(n.pow(t.add(e._BIGNUM_HALF))))}function c0(e,t){if(e===t)return!0;if(e.ops)return e.operator!==t.operator||e.nops!==t.nops?!1:e.ops.every((r,i)=>c0(r,t.ops[i]));if(e.isNumberLiteral){if(!t.isNumberLiteral)return!1;let r=e.numericValue,i=t.numericValue;return r===i?!0:typeof r=="number"?typeof i=="number"?r===i:i.eq(r):r.eq(i)}if(e.string||t.string)return e.string===t.string;if(e.symbol||t.symbol)return e.symbol===t.symbol;if(e.rank!==0){if(e.rank!==t.rank)return!1;for(let r=0;r<e.rank;r++)if(e.shape[r]!==t.shape[r])return!1;return e.tensor.equals(t.tensor)}return!1}function s2(e,t){var i,n,s,a;if(e=e.N(),typeof t!="number"&&(t=t.N()),typeof t!="number"&&typeof t.numericValue=="number"&&(t=t.numericValue),typeof t=="number"){if(e.string||e.tensor||!e.isValid)return!1;if(!e.isNumberLiteral)return;let u=e.numericValue;return typeof u=="number"?u===t:u.eq(t)}if(e.ops||t.ops){let u=(n=(i=e.functionDefinition)==null?void 0:i.eq)==null?void 0:n.call(i,e,t);if(u!==void 0)return u;let f=e.sub(t).N();if(!f.isNumberLiteral)return!1;if(typeof f.numericValue=="number")return f.numericValue===0;let p=e.engine.tolerance;return f.numericValue.isZeroWithTolerance(p)}if(e.symbol){let u=(a=(s=e.symbolDefinition)==null?void 0:s.eq)==null?void 0:a.call(s,t);return u!==void 0?u:e.symbol===t.symbol}let r=e.engine;return r.ask(r.box(["Equal",e,t])).length>0?!0:r.ask(r.box(["NotEqual",e,t])).length>0?!1:c0(e,t)}function Vo(e,t){var r,i,n,s,a,u;if(e.isNumberLiteral){if(typeof t!="number"&&typeof t.numericValue=="number"&&(t=t.numericValue),typeof t=="number"){if(t===0){let d=e.sgn;return d===void 0?void 0:d==="zero"?"=":d==="positive"||d==="positive-infinity"?">":d==="negative"||d==="negative-infinity"?"<":d==="non-negative"?">=":d==="non-positive"?"<=":void 0}if(e.isNumberLiteral){let d=e.numericValue;return typeof d=="number"?d===t?"=":d<t?"<":">":d.eq(t)?"=":d.lt(t)?"<":">"}return}if(!t.isNumberLiteral)return;let f=e.numericValue,p=t.numericValue;return typeof f=="number"?p.eq(f)?"=":p.lt(f)?">":"<":f.eq(p)?"=":f.lt(p)?"<":">"}if(typeof t!="number"){if(e.ops||t.ops){if(((i=(r=e.functionDefinition)==null?void 0:r.eq)==null?void 0:i.call(r,e,t))!==void 0)return"=";let f=e.sub(t).N();if(!f.isNumberLiteral)return;if(typeof f.numericValue=="number")return f.numericValue===0?"=":f.numericValue<0?"<":">";let p=e.engine.tolerance;return f.numericValue.isZeroWithTolerance(p)?"=":f.numericValue.lt(0)?"<":">"}if(e.symbol)return e.symbol===t.symbol?"=":((s=(n=e.symbolDefinition)==null?void 0:n.cmp)==null?void 0:s.call(n,t))||(((u=(a=e.symbolDefinition)==null?void 0:a.eq)==null?void 0:u.call(a,t))===!0?"=":void 0);if(e.string)return t.string?e.string===t.string?"=":e.string<t.string?"<":">":void 0;if(e.tensor)return t.tensor&&e.tensor.equals(t.tensor)?"=":void 0}}function Fh(e,t=[]){let r=t.map((a,u)=>!a.symbol||a.symbol==="Nothing"?`_${u+1}`:a.symbol),i=e.unknowns;i.includes("_")&&(e=e.subs({_:"_1"}),i=e.unknowns);let n=r.length;for(let a of i)if(a.startsWith("_")){let u=Number(a.slice(1));u<=r.length&&(e=e.subs({[a]:r[u-1]})),u>n&&(n=u)}for(let a=r.length;a<n;a++)r.push(`_${a+1}`);let s=n;for(;s>0&&r[s-1]===`_${s}`;)i.includes(`_${s}`)||r.pop(),s--;return[e,...r]}function wm(e){let t=e.engine;if(e.symbol){let u=t.lookupFunction(e.symbol);if(u){let f=u.evaluate;return f?p=>f(p,{engine:t})??t._fn(e.symbol,p):p=>t._fn(e.symbol,p)}}let r;e.operator==="Function"?r=Fh(e.op1,e.ops.slice(1)):r=Fh(e);let[i,...n]=r;t.pushScope();for(let u of n)t.declare(u,{inferred:!0,type:void 0});let s=i.canonical;s.bind(),t.popScope();let a=s.scope;return a?n.length===0?()=>{let u=t.swapScope(a);t.resetContext();let f=s.N()??s.evaluate();return t.swapScope(u),f}:u=>{if(u.length>n.length||t.strict&&!u.every(b=>b.isValid))return;if(u.length<n.length){let b=n.slice(u.length).map((I,L)=>t.symbol(`_${L+1}`)),x=L0(t.function("Function",[i,...n]),[...u,...b]).evaluate();return t.function("Function",[x])}u=u.map(b=>b.evaluate());let f=t.swapScope(a);t.resetContext();let p=0;for(let b of n)t.assign(b,u[p++]);let d=s.evaluate();return t.swapScope(f),d.isValid?d:void 0}:()=>s.N()??s.evaluate()}function L0(e,t){var i;return((i=wm(e))==null?void 0:i(t))||e.engine.function("Apply",[e,...t])}function Yn(e){return wm(e)??(t=>e.engine.function("Apply",[e.N(),...t]).N())}function C1(e){let t=e.engine,r=wm(e);return r?i=>{var n;return((n=r([t.number(i)]))==null?void 0:n.value)??NaN}:i=>t.function("Apply",[e.evaluate(),t.number(i)]).value}function $1(e){let t=e.match(/(.+)\((.*)\)/);if(!t)return[e,void 0];let r=t[1],i=t[2].split(",").map(n=>n.trim());return[r,i]}function ja(e){if(e.operator==="Interval"){let t=e.op1,r=e.op2,i=!1,n=!1;t.operator==="Open"?(i=!0,t=t.op1):t.operator==="Closed"&&(t=t.op1),r.operator==="Open"?(n=!0,r=r.op1):r.operator==="Closed"&&(r=r.op1);let s=t.N(),a=r.N();return!s.isNumberLiteral||!a.isNumberLiteral?void 0:{start:s.re,openStart:i,end:a.re,openEnd:n}}if(e.symbol==="EmptySet")return{start:0,openStart:!0,end:0,openEnd:!0};if(e.symbol==="RealNumbers")return{start:-1/0,openStart:!1,end:1/0,openEnd:!1};if(e.symbol==="NegativeNumbers")return{start:-1/0,openStart:!1,end:0,openEnd:!0};if(e.symbol==="NonPositiveNumbers")return{start:-1/0,openStart:!1,end:0,openEnd:!1};if(e.symbol==="PositiveNumbers")return{start:0,openStart:!0,end:1/0,openEnd:!1};if(e.symbol==="NonNegativeNumbers")return{start:0,openStart:!1,end:1/0,openEnd:!1}}var Ha=50,a2={List:{complexity:8200,signature:"(...any) -> list",type:e=>Ee(`list<${fn(...e.map(t=>t.type))}>`),canonical:o2,eq:L1,collection:af()},Set:{complexity:8200,signature:"(...any) -> set",type:e=>Ee(`set<${fn(...e.map(t=>t.type))}>`),canonical:u2,eq:(e,t)=>{if(e.operator!==t.operator||e.nops!==t.nops)return!1;let r=i=>t.ops.some(n=>i.isSame(n));return e.ops.every(r)},collection:{...af(),at:(e,t)=>{},indexOf:(e,t)=>{}}},Dictionary:{complexity:8200,signature:"(...any) -> map",type:e=>Ee(`tuple<${Object.entries(jo(e)).map(([t,r])=>t?`${t}: ${r.type.toString()}`:r.type.toString()).join(", ")}>`),canonical:(e,{engine:t})=>{let r=jo(e);return t._fn("Dictionary",Object.entries(r).map(([i,n])=>t._fn("Tuple",[t.string(i),n])))},eq:(e,t)=>{if(e.operator!==t.operator||e.nops!==t.nops)return!1;let r=jo(e.ops),i=jo(t.ops);return Object.entries(r).every(([n,s])=>{let a=i[n];return a&&s.isSame(a)})},collection:{...af(),at:(e,t)=>{},indexOf:(e,t)=>{},elttype:e=>Ee("tuple<string, any>")}},Range:{complexity:8200,signature:"(number, number?, step: number?) -> collection<integer>",eq:(e,t)=>{if(e.operator!==t.operator)return!1;let[r,i,n]=ri(e),[s,a,u]=ri(t);return r===s&&i===a&&n===u},collection:{size:e=>{let[t,r,i]=ri(e);return i===0?0:!isFinite(t)||!isFinite(r)?1/0:1+Math.max(0,Math.floor((r-t)/i))},contains:(e,t)=>{if(t.type!=="integer")return!1;let r=t.re,[i,n,s]=ri(e);return s===0?!1:s>0?r>=i&&r<=n:r<=i&&r>=n},iterator:(e,t,r)=>{let[i,n,s]=ri(e),a=t??1,u=s===0?0:Math.floor((n-i)/s)+1;return r=Math.min(r??u,u),r<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>r>0?(r--,{value:e.engine.number(i+s*(a++-1)),done:!1}):{value:void 0,done:!0}}},at:(e,t)=>{if(typeof t!="number")return;let[r,i,n]=ri(e);if(!(t<1||t>1+(i-r)/n))return e.engine.number(r+n*(t-1))},indexOf:void 0,subsetOf:(e,t)=>{var n,s,a;if(t.operator==="Range"){let[u,f,p]=ri(e),[d,b,x]=ri(t);return u>=d&&f<=b&&p%x===0}if(!rf(t))return!1;let r=t.baseDefinition;if(!((n=r==null?void 0:r.collection)!=null&&n.iterator)||!((s=r==null?void 0:r.collection)!=null&&s.at))return!1;let i=1;for(let u of Ye(t)){if(!e.contains(u)||!((a=e.at(i))!=null&&a.isSame(u)))return!1;i++}return!0},eltsgn:e=>{let[t,r,i]=ri(e);return i===0?"zero":i>0?t<=r?"positive":"negative":t>=r?"positive":"negative"},elttype:e=>"finite_integer"}},Interval:{description:"A set of real numbers between two endpoints. The endpoints may or may not be included.",complexity:8200,hold:!0,signature:"(expression, expression) -> set<real>",eq:(e,t)=>{let r=ja(e),i=ja(t);return!r||!i?!1:r.start===i.start&&r.end===i.end&&r.openStart===i.openStart&&r.openEnd===i.openEnd},collection:{size:e=>1/0,contains:(e,t)=>{let r=ja(e);return!r||r.openStart&&t.isLessEqual(r.start)||r.openEnd&&t.isGreaterEqual(r.end)?!1:t.isGreaterEqual(r.start)&&t.isLessEqual(r.end)},eltsgn:e=>{let t=ja(e);if(!t)return"unsgined";if(t.start===t.end)return"unsigned";if(t.start>=0&&!t.openStart)return"non-negative";if(t.end<=0&&!t.openEnd)return"non-positive";if(t.start>0&&t.end>0)return"positive";if(t.start<0&&t.end<0)return"negative"},elttype:e=>{let t=ja(e);return t?isFinite(t.start)&&isFinite(t.end)?"finite_real":"real":"never"}}},Linspace:{complexity:8200,signature:"(start: number, end: number?, count: number?) -> collection",collection:{size:e=>{let t=e.op3.re;return isFinite(t)||(t=Ha),Math.max(0,Math.floor(t))},at:(e,t)=>{if(typeof t!="number")return;let r=e.op1.re,i=e.op2.re,n=e.op3.re;if(isFinite(n)||(n=Ha),!(!isFinite(r)||!isFinite(i))&&!(t<1||t>n))return e.engine.number(r+(i-r)*(t-1)/n)},iterator:(e,t,r)=>{let i=e.op1.re,n=e.op2.re,s;isFinite(n)?s=Math.max(0,isFinite(e.op3.re)?e.op3.re:Ha):(n=i,i=1,s=Ha);let a=t??1;return r=Math.min(r??s,s),r<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>r>0?(r--,{value:e.engine.number(i+(n-i)*(a++-1)/s),done:!1}):{value:void 0,done:!0}}},contains:(e,t)=>{if(!G(t.type,"finite_real"))return!1;let r=t.re,i=e.op1.re,n=e.op2.re;if(r<i||r>n)return!1;let s=e.op3.re;if(isFinite(s)||(s=Ha),s===0)return!1;let a=(n-i)/s;return(r-i)%a===0}}},Tuple:{description:"A fixed number of heterogeneous elements",complexity:8200,signature:"(...any) -> tuple",type:e=>Ee(`tuple<${e.map(t=>t.type).join(", ")}>`),canonical:(e,{engine:t})=>t.tuple(...e),eq:L1,collection:{size:e=>e.nops,contains:(e,t)=>e.ops.some(r=>r.isSame(t)),keys:e=>["first","second","last"],at:(e,t)=>{if(typeof t=="number")return e.ops[t-1]}}},KeyValuePair:{description:"A key/value pair",complexity:8200,signature:"(key: string, value: any) -> tuple<string, any>",type:([e,t])=>Ee(`tuple<string, ${t.type}>`),canonical:(e,{engine:t})=>{let[r,i]=N7(t,e,["string","any"]);return!r.isValid||!i.isValid?t._fn("KeyValuePair",[r,i]):t.tuple(r,i)}},Single:{description:"A tuple with a single element",complexity:8200,signature:"(value: any) -> tuple<any>",type:([e])=>Ee(`tuple<${e.type}>`),canonical:(e,{engine:t})=>t.tuple(...tn(t,e,1))},Pair:{description:"A tuple of two elements",complexity:8200,signature:"(first: any, second: any) -> tuple<any, any>",type:([e,t])=>Ee(`tuple<${e.type}, ${t.type}>`),canonical:(e,{engine:t})=>t.tuple(...tn(t,e,2))},Triple:{description:"A tuple of three elements",complexity:8200,signature:"(first: any, second: any, third: any) -> tuple<any, any, any>",type:([e,t,r])=>Ee(`tuple<${e.type}, ${t.type}, ${r.type}>`),canonical:(e,{engine:t})=>t.tuple(...tn(t,e,3))},String:{threadable:!0,signature:"(...any) -> string",evaluate:(e,{engine:t})=>e.length===0?t.string(""):t.string(e.map(r=>r.string??r.toString()).join(""))},Length:{complexity:8200,signature:"any -> integer",evaluate:([e],{engine:t})=>t.number(Ps(e)),sgn:([e])=>Ps(e)===0?"zero":"positive"},IsEmpty:{complexity:8200,signature:"any -> boolean",evaluate:([e],{engine:t})=>Ps(e)===0?t.True:t.False},At:{description:["Access an element of a collection or a character of a string.","If the index is negative, it is counted from the end.","If the collection has a rank greater than 1, the index is a tuple of indexes.","If the index is a list, each element of the list is used as an index and the result if a list of the elements."],complexity:8200,signature:"(value: list|tuple|string, index: number | string) -> any",evaluate:(e,{engine:t})=>{var n,s;let r=e[0],i=1;for(;e[i];){let a=(s=(n=r.baseDefinition)==null?void 0:n.collection)==null?void 0:s.at;if(!a)return;let u=e[i].string;if(u!==null)r=a(r,u)??t.Nothing;else{let f=e[i].re;if(!Number.isInteger(f))return;r=a(r,f)??t.Nothing}i+=1}return r}},Take:{description:["Take a range of elements from a collection or a string.","If the index is negative, it is counted from the end."],complexity:8200,signature:"(value: collection|string, count: number) -> list|string",type:e=>e[0].type==="string"?"string":Ee(`list<${el(e[0].type)}>`),evaluate:(e,{engine:t})=>{if(e.length<2)return;let r=e[0].string;if(r!==null){let n=e.slice(1).map(s=>Ds(s,r.length));return t.string(D1(r,n))}let i=Ps(e[0]);return Ua(e[0],e.slice(1).map(n=>Ds(n,i)))}},Drop:{complexity:8200,signature:"(value: collection|string, indexes: ...(number | string)) -> list",evaluate:(e,{engine:t})=>{var f;if(e.length<2)return;let r=e[0].string;if(r!==null){let p=P1(e.slice(1).map(d=>Ds(d,r.length)));return t.string(r.split("").filter((d,b)=>!p.includes(b+1)).join(""))}let i=e[0].baseDefinition,n=Ps(e[0]);if(n===0)return t.Nothing;let s=(f=i==null?void 0:i.collection)==null?void 0:f.at;if(!s)return;let a=P1(e.slice(1).map(p=>Ds(p,n))),u=[];for(let p=1;p<=n;p++)if(!a.includes(p)){let d=s(e[0],p);d&&u.push(d)}return t.function("List",u)}},First:{complexity:8200,signature:"(value: collection|string) -> any",evaluate:([e],{engine:t})=>lf(e,1)??t.Nothing},Second:{complexity:8200,signature:"(value: collection|string) -> any",evaluate:([e],{engine:t})=>lf(e,2)??t.Nothing},Last:{complexity:8200,signature:"(value: collection|string) -> any",evaluate:([e],{engine:t})=>lf(e,-1)??t.Nothing},Rest:{complexity:8200,signature:"(value: collection|string) -> list",evaluate:e=>Ua(e[0],[[2,-1,1]])},Slice:{description:["Return a range of elements from a collection or a string.","If the index is negative, it is counted from the end."],complexity:8200,signature:"(value: collection|string, start: number, end: number) -> list|string",type:e=>e[0].type==="string"?"string":Ee(`list<${el(e[0].type)}>`),evaluate:(e,{engine:t})=>{if(e.length<3)return;let r=e[0].string;if(r!==null){let[a,u]=e.slice(1).map(f=>Ds(f,r.length));return t.string(D1(r,[a,u]))}let i=Ps(e[0]),[n,s]=e.slice(1).map(a=>Ds(a,i));return Ua(e[0],[n,s])}},Most:{complexity:8200,signature:"(value: collection|string) -> list",evaluate:e=>Ua(e[0],[[1,-2,1]])},Reverse:{complexity:8200,signature:"(value: collection|string) -> collection",type:e=>e[0].type,evaluate:([e])=>Ua(e,[[-1,2,1]])},Ordering:{complexity:8200,hold:!0,signature:"(value: collection, f: function?) -> list<integer>",evaluate:e=>{}},Sort:{complexity:8200,hold:!0,signature:"(value: collection, f: function?) -> collection",type:e=>e[0].type,evaluate:e=>{}},Shuffle:{complexity:8200,signature:"(value: collection) -> collection",type:e=>e[0].type,evaluate:e=>{}},Map:{complexity:8200,hold:!0,signature:"(collection, function) -> collection",evaluate:(e,{engine:t})=>{let[r,i]=c2(e);if(!i)return;let n=[];for(let u of r)n.push(i([u])??t.Nothing);let s=e[0].operator,a={List:"List",Set:"Set",Range:"List",Linspace:"List",Single:"List",Pair:"List",Triple:"List",Tuple:"List",String:"String"}[s]??"List";return t.function(a,n)}},Filter:{complexity:8200,hold:!0,signature:"(collection, function) -> collection",type:e=>e[0].type,evaluate:(e,{engine:t})=>{var u;let r=Yn(e[1]);if(!r)return;let i=e[0];if(i.string)return t.string(i.string.split("").map(f=>{var p;return((p=r([t.string(f)]))==null?void 0:p.symbol)==="True"?f:""}).join(""));if(!Ct(e[0])||!e[1])return;let n=[];for(let f of Ye(i))((u=r([f]))==null?void 0:u.symbol)==="True"&&n.push(f);let s=i.operator,a={List:"List",Set:"Set",Range:"List",Linspace:"List",Single:"List",Pair:"List",Triple:"List",Tuple:"List"}[s]??"List";return t.function(a,n)}},Reduce:{complexity:8200,hold:!0,signature:"(collection, function, initial:value) -> collection",evaluate:e=>{}},Tabulate:{complexity:8200,hold:!0,signature:"(function, integer, integer?) -> collection",evaluate:(e,{engine:t})=>{let r=Yn(e[0]);if(!r)return;if(e.length===1)return t.function("List",[]);let i=e.slice(1).map(s=>rt(s));if(i.some(s=>s===null||s<=0))return;if(i.length===1)return t.function("List",Array.from({length:i[0]??0},(s,a)=>r([t.number(a+1)])??t.Nothing));let n=(s,a,u=0)=>{if(u===s.length){let p=a.map(d=>t.number(d));return r(p)}let f=["List"];for(let p=1;p<=s[u];p++)a[u]=p,f.push(n(s,a,u+1));return f};return t.box(n(i,Array(i.length).fill(0)))}},Tally:{complexity:8200,signature:"(collection) -> tuple<list, list<integer>>",type:e=>Ee(`tuple<list<${el(e[0].type)}>, list<integer>>`),evaluate:(e,{engine:t})=>{if(!rf(e[0]))return;let[r,i]=O1(e[0]);return t.tuple(t.function("List",r),t.function("List",i))}},Unique:{complexity:8200,signature:"(collection) -> list",type:e=>Ee(`list<${el(e[0].type)}>`),evaluate:(e,{engine:t})=>{if(!rf(e[0]))return;let[r]=O1(e[0]);return t.function("List",r)}},Zip:{complexity:8200,signature:"(collection, ...collection) -> list",evaluate:e=>{}},RotateLeft:{complexity:8200,signature:"(collection, integer?) -> collection",evaluate:e=>{}},RotateRight:{complexity:8200,signature:"(collection, integer?) -> collection",evaluate:e=>{}},Join:{description:["Join the elements of a sequence of collections or scalar values.","If all collections are `Set`, return a `Set`.","If all collections are `Map`, return a `Map`."],complexity:8200,signature:"(...any) -> collection",type:q1,evaluate:(e,{engine:t})=>{let r=q1(e);if(G(r,"map")){let i={};for(let n of e)if(i=G7(i,n),!i)return;return t.function("Dictionary",Object.entries(i).map(([n,s])=>t.function("KeyValuePair",[t.string(n),s])))}if(G(r,"set")){let i=[];for(let n of e)if(i=W7(i,n),!i)return;return t.function("Set",i)}if(G(r,"list")){let i=[];for(let n of e)if(i=Z7(i,n),!i)return;return t.function("List",i)}}},Iterate:{complexity:8200,signature:"(function, initial: any?) -> list",evaluate:e=>{}},Repeat:{complexity:8200,signature:"(value: any) -> list",type:e=>Ee(`collection<${e[0].type}>`),evaluate:e=>{}},Cycle:{complexity:8200,signature:"(list) -> list",type:e=>Ee(`list<${e[0].type}>`),evaluate:e=>{}},Fill:{complexity:8200,signature:"(function, tuple) -> list",evaluate:e=>{}}};function ri(e){if(e.nops===0)return[1,0,0];let t=Math.round(e.op1.re);if(isFinite(t)||(t=1),e.nops===1)return[1,t,1];let r=Math.round(e.op2.re);if(isFinite(r)||(r=1),e.nops===2)return[t,r,r>t?1:-1];let i=Math.abs(Math.round(e.op3.re));return isFinite(i)||(i=1),[t,r,t<r?i:-i]}function l2(e){let[t,r,i]=e;return Number.isFinite(r)?i>0?r-(r-t)%i:r+(t-r)%i:i>0?1/0:-1/0}function Ds(e,t){if(!e)return[0,0,0];let r=e.re;if(isFinite(r)){if(r=Math.round(r),r<0){if(t===void 0)return[0,0,0];r=t+r+1}return[r,r,1]}let i=e.operator;if(!i||typeof i!="string"||!/^(Single|Pair|Triple|Tuple|)$/.test(i))return[0,0,0];let[n,s,a]=ri(e);return(n<0||s<0)&&t===void 0?[0,0,0]:(n<0&&(n=t+n+1),s<0&&(s=t+s+1),a=Math.abs(Math.round(a)),a===0?[0,0,0]:(n>s&&(a=-a),[n,s,a]))}function Ua(e,t){var s,a;let r=e.engine,i=(a=(s=e.baseDefinition)==null?void 0:s.collection)==null?void 0:a.at;if(!i)return r.Nothing;let n=[];for(let u of t){let[f,p,d]=u;if(d!==0)if(d<0)for(let b=f;b>=p;b+=d){let x=i(e,b);x&&n.push(x)}else for(let b=f;b<=p;b+=d){let x=i(e,b);x&&n.push(x)}}return r.function("List",n)}function D1(e,t){let r="";for(let i of t){let[n,s,a]=i;if(a===1)r+=e.slice(n-1,s);else if(a<0)for(let u=n;u>=s;u+=a)r+=e[u-1];else for(let u=n;u<=s;u+=a)r+=e[u-1]}return r}function P1(e){let t=[];for(let r of e){let[i,n,s]=r;if(s!==0)if(s<0)for(let a=i;a>=n;a+=s)t.push(a);else for(let a=i;a<=n;a+=s)t.push(a)}return t}function o2(e,{engine:t}){let r=e[0];if(e.length===1&&r.operator==="Matrix"){let[i,n,s]=r.ops;if(!n||n.string==="..")return s?t._fn("Matrix",[i,t.string("[]"),s]):t._fn("Matrix",[i,n])}return e=e.map(i=>{var n;return i.operator==="Delimiter"?i.op1.operator==="Sequence"?t._fn("List",jn(t,i.op1.ops)):t._fn("List",[((n=i.op1)==null?void 0:n.canonical)??t.Nothing]):i.canonical}),t._fn("List",e)}function u2(e,{engine:t}){let r=[],i=n=>r.some(s=>s.isSame(n));for(let n of e)i(n)||r.push(n);return t._fn("Set",r)}function c2(e){if(e.length!==2)return[[],void 0];let t=Yn(e[1]);return t?e[0].string?[[e[0]],r=>{let i=r[0].string;if(i===null)return;let n=r[0].engine;return n.string(i.split("").map(s=>{var a;return((a=t([n.string(s)]))==null?void 0:a.string)??""}).join(""))}]:!Ct(e[0])||!e[1]?[[],void 0]:[Ye(e[0]),t]:[[],void 0]}function O1(e){let t=[],r=[],i=n=>{for(let s=0;s<t.length;s++)if(t[s].isSame(n))return s;return-1};for(let n of Ye(e)){let s=i(n);s>=0?r[s]++:(t.push(n),r.push(1))}return[t,r]}function f2(e,t,r){let i=r;for(let n of Ye(e)){let s=t(i,n);if(s===null)return;i=s}return i}function q1(e){return e.some(t=>t.type==="map")?"map":e.some(t=>t.type==="set")?"set":"list"}function G7(e,t){if(t.operator==="KeyValuePair"){let r=t.op1.string;return r?(e[r]=t.op2,e):void 0}if(t.operator==="Tuple"){let[r,i]=t.ops;return r.string?(e[r.string]=i,e):void 0}if(t.operator==="List"||t.operator==="Set"||t.operator==="Dictionary"){for(let r of t.ops){let i=G7(e,r);if(!i)return;e=i}return e}}function W7(e,t){if(t.operator==="Set"||t.operator==="List"){for(let r of t.ops)if(e=W7(e,r),!e)return}return(r=>e.some(i=>i.isSame(r)))(t)||e.push(t),e}function Z7(e,t){if(t.operator==="List"||t.operator==="Set"){for(let r of t.ops)if(e=Z7(e,r),!e)return}return e.push(t),e}function h2(e,t,r){var i;if(e.string&&t.string)return r&&e.string===t.string?!1:((i=e.string)==null?void 0:i.includes(t.string??""))??!1;if(!e.isCollection||!t.isCollection)return!1;for(let n of Ye(e))if(!t.contains(n))return!1;if(r){let n=e.size,s=t.size;if(n===s||n===void 0||s===void 0)return!1}return!0}function af(){return{size:e=>e.nops,contains:(e,t)=>e.ops.some(r=>r.isSame(t)),iterator:(e,t,r)=>{let i=(t??1)-1;return r=Math.min(r??e.nops,e.nops),{next:()=>r<=0?{value:void 0,done:!0}:(r--,{value:e.ops[i++],done:!1})}},at:(e,t)=>{if(typeof t=="number"&&!(t<1||t>e.nops))return e.ops[t-1]},keys:e=>[],indexOf:(e,t,r)=>{if(r??(r=1),r<0){if(r<-e.nops)return;r=e.nops+r+1;for(let i=r;i>=1;i--)if(e.ops[i-1].isSame(t))return i;return}for(let i=r;i<=e.nops;i++)if(e.ops[i-1].isSame(t))return i},subsetOf:h2,eltsgn:e=>{},elttype:e=>e.nops===0?"unknown":e.nops===1?e.ops[0].type:fn(...e.ops.map(t=>t.type))}}function jo(e){let t={},r=1;for(let i of e){if(i.operator==="KeyValuePair"||i.operator==="Tuple"||i.operator==="Pair"){let[n,s]=i.ops;if(n.symbol==="Nothing")continue;t[(n==null?void 0:n.string)??(n==null?void 0:n.toString())??r.toString()]=s??i.engine.Nothing}else t[r.toString()]=i;r+=1}return t}function Ps(e){var i;if(e.operator==="List"||e.operator==="Set")return e.nops;let t=e.baseDefinition;if((i=t==null?void 0:t.collection)!=null&&i.size)return t.collection.size(e);let r=e.string;return r!==null?r.length:0}function lf(e,t){var i;let r=e.baseDefinition;if((i=r==null?void 0:r.collection)!=null&&i.at)return r.collection.at(e,t)}function L1(e,t){return e.operator!==t.operator||e.nops!==t.nops?!1:e.ops.every((r,i)=>r.isSame(t.ops[i]))}function R1(e,t){return Array.from({length:t-e+1},(r,i)=>e+i)}function R0(e){e==null||e.operator;let t=1,r=t+Xu,i,n=!0;return i=e.op1.symbol,t=Math.floor(e.op2.re),isNaN(t)&&(t=1),Number.isFinite(t)||(n=!1),e.op3.symbol==="Nothing"||e.op3.isInfinity?n=!1:(isNaN(e.op3.re)||(r=Math.floor(e.op3.re??r)),Number.isFinite(r)||(n=!1)),!n&&Number.isFinite(t)&&(r=t+Xu),{index:i,lower:t,upper:r,isFinite:n}}function p2(e){return e.map(t=>R0(t))}function m2(e){e.length>0;let{index:t,lower:r,upper:i,isFinite:n}=e[0];n||(i=r+Xu);let s=R1(r,i).map(a=>[a]);if(e.length===1)return s;for(let a=1;a<e.length;a++){let{index:u,lower:f,upper:p,isFinite:d}=e[a];d||(p=f+Xu),s=d2(s.map(b=>b[0]),R1(f,p))}return s}function d2(e,t){return e.flatMap(r=>t.map(i=>[r,i]))}function g2(e){var s,a;let t=e.engine,r,i=null,n=null;if(e.operator==="Tuple"||e.operator==="Triple"||e.operator==="Pair"||e.operator==="Single"?(r=e.op1,n=((s=e.ops[1])==null?void 0:s.canonical)??null,i=((a=e.ops[2])==null?void 0:a.canonical)??null):r=e,r.operator==="Hold"&&(r=r.op1),!!r.symbol)return r.symbol&&r.symbol!=="Nothing"&&t.declare(r.symbol,"integer"),i&&n?t.tuple(r,n,i):i?t.tuple(r,t.One,i):n?t.tuple(r,n):t.tuple(r)}function F1(e,t,r){let i=t.engine;i.pushScope(),t??(t=i.error("missing"));let n=r.map(a=>g2(a)).filter(a=>a!==void 0),s=i._fn(e,[t.canonical,...n]);return i.popScope(),s}function Ga(e,t,r,i){if(e.isCollection)return f2(e,r,i);if(t.length===0)return r(i,e)??void 0;let n=e.engine,s=n.swapScope(e.scope),a=p2(t),u=m2(a),f=i;for(let p of u)if(a.forEach((d,b)=>n.assign(d.index,p[b])),f=r(f,e)??void 0,f===void 0)break;for(let p of a)n.assign(p.index,void 0);return n.swapScope(s),f??void 0}function of(e){if(e!==void 0)return isNaN(e)?"unsigned":e>0?"positive":e<0?"negative":"zero"}function Ho(e){return e==="positive"?"negative":e==="non-negative"?"non-positive":e==="negative"?"positive":e==="non-positive"?"non-negative":e}function Os(e){if(e.isGreater(1))return"positive";if(e.isGreaterEqual(1))return"non-negative";if(e.isLessEqual(1)&&e.isGreaterEqual(0))return"non-positive";if(e.isLess(1)&&e.isGreaterEqual(0))return"negative";if(e.is(1))return"zero";if(e.isNegative||e.isReal===!1)return"unsigned"}var y2=[{Abs:{wikidata:"Q3317982",threadable:!0,idempotent:!0,complexity:1200,signature:"number -> number",type:([e])=>e.type,sgn:([e])=>e.is(0)?"zero":e.isNumberLiteral?"positive":"non-negative",evaluate:([e])=>v2(e)},Add:{wikidata:"Q32043",associative:!0,commutative:!0,commutativeOrder:vm,threadable:!0,idempotent:!0,complexity:1300,hold:!0,signature:"(number, ...number) -> number",type:Vx,sgn:e=>{if(e.some(t=>t.isReal===!1||t.isNaN))return"unsigned";if(e.every(t=>t.is(0)))return"zero";if(e.every(t=>t.isNonNegative))return e.every(t=>t.isPositive)?"positive":"non-negative";if(e.every(t=>t.isNonPositive))return e.every(t=>t.isNegative)?"negative":"non-positive";if(e.every(t=>t.isReal))return"real"},evaluate:(e,{numericApproximation:t})=>t?jx(...e):Gt(...e.map(r=>r.evaluate()))},Ceil:{description:"Rounds a number up to the next largest integer",complexity:1250,threadable:!0,signature:"real -> integer",sgn:([e])=>{if(e.isLessEqual(-1))return"negative";if(e.isPositive)return"positive";if(e.isNegative&&e.isGreater(-1)||e.is(0))return"zero";if(e.isNonPositive)return"non-positive";if(e.isReal==!1&&e.isNumberLiteral)return e.im>0||e.im<=-1?"unsigned":of(e.re)},evaluate:([e])=>ut(e,Math.ceil,t=>t.ceil(),t=>t.ceil(0))},Chop:{associative:!0,threadable:!0,idempotent:!0,complexity:1200,signature:"number -> number",type:([e])=>e.type,evaluate:e=>{let t=e[0],r=t.engine;return ut(t,i=>r.chop(i),i=>r.chop(i),i=>r.complex(r.chop(i.re),r.chop(i.im)))}},Divide:{wikidata:"Q1226939",complexity:2500,threadable:!0,signature:"(number, ...number) -> number",type:([e,t])=>t.is(1)?e.type:t.isFinite===!1||e.isFinite===!1?"non_finite_number":t.isInteger&&e.isInteger?"finite_rational":t.isReal&&e.isReal?"finite_real":"finite_number",sgn:e=>{let[t,r]=[e[0],e[1]];if(r.is(0))return"unsigned";if(r.is(0)===!1&&t.is(0))return"zero";if(r.isPositive)return t.sgn;if(r.isNegative)return Ho(t.sgn);if(t.is(0)&&r.isFinite)return"zero";if(!t.is(0)&&!r.is(0))return"real-not-zero"},canonical:(e,{engine:t})=>{let r=t;e=li(r,e);let i=e[0];if(i===void 0)return r.error("missing");if(e.length<2)return i;let n=e.slice(1);for(let s of n)i=Hn(i,s);return i},evaluate:([e,t])=>e.div(t)},Exp:{wikidata:"Q168698",threadable:!0,complexity:3500,signature:"number -> number",canonical:(e,{engine:t})=>(e=li(t,e,1),t.function("Power",[t.E,...e]))},Factorial:{description:"Factorial Function",wikidata:"Q120976",threadable:!0,complexity:9e3,signature:"integer -> integer",sgn:([e])=>e.isNonNegative?"positive":e.isNegative||e.isReal===!1?"unsigned":void 0,canonical:(e,{engine:t})=>{let r=e[0];return r.isNumberLiteral&&r.isNegative?t._fn("Factorial",[r.neg()]).neg():t._fn("Factorial",[r])},evaluate:([e])=>{let t=e.engine;if(e.im!==0&&e.im!==void 0)return t.number(t.complex(e.im,e.re).add(1));let r=e.re;if(!isNaN(r))return r<0||!Number.isInteger(r)?t.number(u0(1+r)):Vn(t)?t.number(A7(t,t.bignum(r))):t.number(b7(r))}},Factorial2:{description:"Double Factorial Function",complexity:9e3,threadable:!0,signature:"integer -> integer",sgn:([e])=>e.isNonNegative?"positive":e.isNegative||e.isReal===!1?"unsigned":void 0,evaluate:e=>{let t=e[0],r=rt(t);if(r===null)return;let i=t.engine;return Vn(i)?i.number(Fx(i,i.bignum(r))):i.number(wx(r))}},Floor:{wikidata:"Q56860783",complexity:1250,threadable:!0,signature:"number -> integer",sgn:([e])=>{if(e.isNegative)return"negative";if(e.isGreaterEqual(1))return"positive";if(e.isPositive&&e.isLess(1)||e.is(0))return"zero";if(e.isNonNegative)return"non-negative";if(e.isReal==!1&&e.isNumberLiteral)return e.im<0||e.im>=1?"unsigned":of(e.re)},evaluate:([e])=>ut(e,Math.floor,t=>t.floor(),t=>t.floor(0))},Gamma:{wikidata:"Q190573",complexity:8e3,threadable:!0,signature:"number -> number",sgn:([e])=>e.isPositive?"positive":e.is(0)?"zero":void 0,evaluate:([e],{numericApproximation:t,engine:r})=>t?ut(e,i=>u0(i),i=>U7(r,i),i=>i):void 0},GammaLn:{complexity:8e3,threadable:!0,signature:"number -> number",evaluate:(e,{numericApproximation:t,engine:r})=>t?ut(e[0],i=>xm(i),i=>H7(r,i),i=>i):void 0},Ln:{description:"Natural Logarithm",wikidata:"Q204037",complexity:4e3,threadable:!0,signature:"(number, base: number?) -> number",sgn:([e])=>Os(e),evaluate:([e],{numericApproximation:t,engine:r})=>t?ut(e,i=>i===0?-1/0:i>=0?Math.log(i):r.complex(i).log(),i=>i.isZero()?-1/0:i.isNeg()?r.complex(i.toNumber()).log():i.ln(),i=>i.isZero()?NaN:i.log()):e.ln()},Log:{description:"Log(z, b = 10) = Logarithm of base b",wikidata:"Q11197",complexity:4100,threadable:!0,signature:"(number, base: number?) -> number",sgn:([e,t])=>{if(!t)return Os(e);if(t.is(1)||t.isReal==!1)return"unsigned";if(t.isGreater(1))return Os(e);if(t.isLess(1))return Ho(Os(e))},evaluate:(e,{numericApproximation:t,engine:r})=>{var n;if(!t)return((n=e[0])==null?void 0:n.ln(e[1]??10))??void 0;let i=r;return e[1]===void 0?ut(e[0],s=>s===0?-1/0:s>=0?Math.log10(s):i.complex(s).log().div(Math.LN10),s=>s.isZero()?-1/0:s.isNeg()?i.complex(s.toNumber()).log().div(Math.LN10):zt.log10(s),s=>s.isZero()?NaN:s.log().div(Math.LN10)):cs(e[0],e[1],(s,a)=>Math.log(s)/Math.log(a),(s,a)=>s.log(a),(s,a)=>s.log().div(typeof a=="number"?Math.log(a):a.log()))}},Lb:{description:"Base-2 Logarithm",wikidata:"Q581168",complexity:4100,threadable:!0,signature:"(number, base: number?) -> number",sgn:([e])=>Os(e),canonical:([e],{engine:t})=>t._fn("Log",[e,t.number(2)])},Lg:{description:"Base-10 Logarithm",wikidata:"Q966582",complexity:4100,threadable:!0,signature:"number -> number",sgn:([e])=>Os(e),canonical:([e],{engine:t})=>t._fn("Log",[e])},Mod:{description:"Modulo",wikidata:"Q1799665",complexity:2500,threadable:!0,signature:"(number, number) -> number",sgn:e=>{var r;let t=e[1];if(!(t===void 0||t.isReal==!1)){if(t.is(0))return"unsigned";if(e[0].isNumberLiteral&&t.isNumberLiteral)return((r=cs(e[0],t,(i,n)=>(i%n+n)%n,(i,n)=>i.modulo(n)))==null?void 0:r.sgn)??void 0}},evaluate:([e,t])=>cs(e,t,(r,i)=>(r%i+i)%i,(r,i)=>r.modulo(i))},Multiply:{wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,complexity:2100,threadable:!0,hold:!0,signature:"(number, ...number) -> number",type:e=>e.length===0?"finite_integer":e.length===1?e[0].type:e.some(t=>t.isFinite===!1)?"non_finite_number":e.every(t=>t.isInteger)?"finite_integer":e.every(t=>t.isReal)?"finite_real":e.every(t=>t.isRational)?"finite_rational":"finite_number",sgn:e=>{if(!e.some(t=>t.sgn===void 0||t.isReal===!1)){if(e.some(t=>t.is(0)))return e.every(t=>t.isFinite)?"zero":e.some(t=>t.isFinite===!1)?"unsigned":void 0;if(!(e.some(t=>t.isFinite===!1||t.isFinite===void 0)&&e.some(t=>t.is(0)===void 0))){if(e.every(t=>t.isPositive||t.isNegative)){let t=0;return e.forEach(r=>{r.isNegative&&t++}),t%2===0?"positive":"negative"}if(e.every(t=>t.isNonPositive||t.isNonNegative)){let t=0;return e.forEach(r=>{r.isNonPositive&&t++}),t%2===0?"non-positive":"non-negative"}if(e.every(t=>!t.is(0)&&t.isReal))return"real-not-zero";if(e.every(t=>!t.is(0)))return"not-zero";if(e.every(t=>t.isReal))return"real"}}},evaluate:(e,{numericApproximation:t})=>t?Zx(...e):Jr(...e.map(r=>r.evaluate()))},Negate:{description:"Additive Inverse",wikidata:"Q715358",complexity:2e3,threadable:!0,signature:"number -> number",type:([e])=>e.type,sgn:([e])=>Ho(e.sgn),canonical:(e,{engine:t})=>(e=li(t,e),e.length===0?t.error("missing"):e[0].neg()),evaluate:([e])=>e.neg()},PlusMinus:{description:"Plus or Minus",wikidata:"Q120812",complexity:1200,involution:!0,signature:"value -> tuple",type:([e])=>Ee(`tuple(${e.type.toString()}, ${e.type.toString()})`),evaluate:([e],{engine:t})=>t.tuple(e.abs(),e.abs().neg())},Power:{wikidata:"Q33456",threadable:!0,complexity:3500,signature:"(number, number) -> number",type:([e,t])=>t.isFinite?e.isInteger&&t.isInteger?"finite_integer":e.isRational&&t.isInteger?"finite_rational":e.isReal&&t.isReal?"finite_real":"finite_number":"non_finite_number",canonical:(e,{engine:t})=>{if(e=li(t,e,2),e.length!==2)return t._fn("Power",e);let[r,i]=e;return mu(r,i)},sgn:([e,t])=>{let r=e.sgn,i=t.sgn;if(!(e.isReal===!1||t.isReal===!1||e.isNaN||t.isNaN||r===void 0||i===void 0)){if(e.is(0))return t.isNonPositive?"unsigned":t.isPositive?"zero":void 0;if(e.is(0)&&t.is(0))return"unsigned";if(e.isNonNegative||t.numerator.isOdd&&t.denominator.isOdd)return e.sgn;if(t.numerator.isEven&&t.denominator.isOdd)return e.isReal?e.is(0)?"non-negative":"positive":e.type==="imaginary"?"negative":e.is(0)?void 0:"not-zero";if(t.isRational===!1||t.numerator.isOdd&&t.denominator.isEven&&e.isNonPositive)return"unsigned"}},evaluate:([e,t],{numericApproximation:r})=>Yt(e,t,{numericApproximation:r??!1})},Rational:{complexity:2400,signature:"(number, integer?) -> rational",sgn:([e])=>e.sgn,canonical:(e,{engine:t})=>{let r=t;return e=lr(e),e.length===0?r._fn("Rational",[r.error("missing")]):e.length===1?r._fn("Rational",[va(r,e[0],"real")]):(e=N7(r,e,["integer","integer"]),e.length!==2||!e[0].isValid||!e[1].isValid?r._fn("Rational",e):e[0].div(e[1]))},evaluate:(e,{numericApproximation:t,engine:r})=>{let i=r;if(e.length===1){let a=e[0].N();return a.numericValue===null||a.im!==0?void 0:i.number(Dx(a.re))}if(t)return cs(e[0],e[1],(a,u)=>a/u,(a,u)=>a.div(u),(a,u)=>a.div(u));let[n,s]=[rt(e[0]),rt(e[1])];if(n!==null&&s!==null)return i.number([n,s])}},Root:{complexity:3200,threadable:!0,signature:"(number, number) -> number",type:([e,t])=>e.isFinite===!1||t.isFinite===!1?"non_finite_number":t.is(0)?"finite_integer":t.is(1)?e.type:e.isReal&&t.isReal&&e.isPositive===!0?"finite_real":"finite_number",sgn:([e,t])=>{if(e.isReal===!1||t.isReal===!1)return"unsigned";if(e.is(0))return t.is(0)?"unsigned":"zero";if(e.isPositive===!0)return"positive";if(t.isOdd===!0)return"negative";if(t.isEven===!0)return"unsigned"},canonical:(e,{engine:t})=>{e=li(t,e,2);let[r,i]=e;return jl(r,i)},evaluate:([e,t],{numericApproximation:r})=>ym(e,t,{numericApproximation:r})},Round:{complexity:1250,threadable:!0,signature:"number -> integer",type:([e])=>e.isFinite===!1||e.isReal===!1?"non_finite_number":"finite_integer",sgn:([e])=>{if(e.isNaN)return"unsigned";if(e.isNumberLiteral)return e.im>=.5||e.im<=-.5?"unsigned":of(Math.round(e.re));if(e.isGreaterEqual(.5))return"positive";if(e.isLessEqual(-.5))return"negative";if(e.isLess(.5)&&e.isGreater(-.5))return"zero";if(e.isNonNegative)return"non-negative";if(e.isNonPositive)return"non-positive";if(e.isReal)return"real"},evaluate:([e])=>ut(e,Math.round,t=>t.round(),t=>t.round(0))},Sign:{complexity:1200,threadable:!0,signature:"number -> integer",sgn:([e])=>e.sgn,evaluate:([e],{engine:t})=>{if(e.is(0))return t.Zero;if(e.isPositive)return t.One;if(e.isNegative)return t.NegativeOne}},Sqrt:{description:"Square Root",wikidata:"Q134237",complexity:3e3,threadable:!0,signature:"number -> number",type:([e])=>e.isFinite===!1?"non_finite_number":e.isReal?"finite_real":"finite_number",sgn:([e])=>{if(e.isPositive)return"positive";if(e.isNegative)return"unsigned";if(e.isNonNegative)return"non-negative";if(!e.is(0))return"not-zero"},evaluate:([e],{numericApproximation:t,engine:r})=>{if(!t)return e.sqrt();let[i,n]=e.toNumericValue();return n.is(1)?r.number(i.sqrt().N()):r.number(i.sqrt().N()).mul(n)}},Square:{wikidata:"Q3075175",complexity:3100,threadable:!0,signature:"number -> number",sgn:([e])=>{if(e.is(0))return"zero";if(e.isReal)return e.is(0)?"non-negative":"positive";if(e.type==="imaginary"||e.type==="complex")return"negative";if(e.isReal==!1||e.isNaN)return"unsigned"},canonical:(e,{engine:t})=>{let r=t;return e=lr(e),e.length!==1?r._fn("Square",e):r._fn("Power",[e[0],r.number(2)]).canonical}},Subtract:{wikidata:"Q40754",complexity:1350,threadable:!0,signature:"(number, ...number) -> number",canonical:(e,{engine:t})=>{if(e=li(t,e),e.length===0)return t.error("missing");let r=e[0],i=e.slice(1);return sn(t,[r,...i.map(n=>n.neg())])}}},{ImaginaryUnit:{type:"finite_imaginary",constant:!0,holdUntil:"never",wikidata:"Q193796",value:e=>e.I},i:{type:"finite_imaginary",constant:!0,holdUntil:"never",value:e=>e.I},ExponentialE:{type:"finite_real",wikidata:"Q82435",constant:!0,holdUntil:"N",value:e=>e.number(Vn(e)?e._BIGNUM_ONE.exp():Math.exp(1))},e:{type:"finite_real",constant:!0,holdUntil:"never",value:"ExponentialE"},ComplexInfinity:{type:"non_finite_number",constant:!0,holdUntil:"never",value:e=>e.ComplexInfinity},PositiveInfinity:{type:"non_finite_number",constant:!0,holdUntil:"never",value:1/0},NegativeInfinity:{type:"non_finite_number",constant:!0,holdUntil:"never",value:-1/0},NaN:{type:"non_finite_number",constant:!0,holdUntil:"never",value:e=>e.NaN},MachineEpsilon:{type:"finite_real",holdUntil:"N",constant:!0,value:{num:Number.EPSILON.toString()}},Half:{type:"finite_rational",constant:!0,holdUntil:"never",value:["Rational",1,2]},GoldenRatio:{type:"finite_real",wikidata:"Q41690",constant:!0,holdUntil:"N",value:["Divide",["Add",1,["Sqrt",5]],2]},CatalanConstant:{type:"finite_real",wikidata:"Q855282",constant:!0,holdUntil:"N",value:{num:`0.91596559417721901505460351493238411077414937428167
                  21342664981196217630197762547694793565129261151062
                  48574422619196199579035898803325859059431594737481
                  15840699533202877331946051903872747816408786590902
                  47064841521630002287276409423882599577415088163974
                  70252482011560707644883807873370489900864775113225
                  99713434074854075532307685653357680958352602193823
                  23950800720680355761048235733942319149829836189977
                  06903640418086217941101917532743149978233976105512
                  24779530324875371878665828082360570225594194818097
                  53509711315712615804242723636439850017382875977976
                  53068370092980873887495610893659771940968726844441
                  66804621624339864838916280448281506273022742073884
                  31172218272190472255870531908685735423498539498309
                  91911596738846450861515249962423704374517773723517
                  75440708538464401321748392999947572446199754961975
                  87064007474870701490937678873045869979860644874974
                  64387206238513712392736304998503539223928787979063
                  36440323547845358519277777872709060830319943013323
                  16712476158709792455479119092126201854803963934243
                  `}},EulerGamma:{type:"finite_real",wikidata:"Q273023",holdUntil:"N",constant:!0,value:{num:`0.57721566490153286060651209008240243104215933593992359880576723488486772677766
          467093694706329174674951463144724980708248096050401448654283622417399764492353
          625350033374293733773767394279259525824709491600873520394816567085323315177661
          152862119950150798479374508570574002992135478614669402960432542151905877553526
          733139925401296742051375413954911168510280798423487758720503843109399736137255
          306088933126760017247953783675927135157722610273492913940798430103417771778088
          154957066107501016191663340152278935867965497252036212879226555953669628176388
          792726801324310104765059637039473949576389065729679296010090151251959509222435
          014093498712282479497471956469763185066761290638110518241974448678363808617494
          551698927923018773910729457815543160050021828440960537724342032854783670151773
          943987003023703395183286900015581939880427074115422278197165230110735658339673`}}},{PreIncrement:{signature:"number -> number"},PreDecrement:{signature:"number -> number"}},{IsPrime:{description:"`IsPrime(n)` returns `True` if `n` is a prime number",wikidata:"Q49008",complexity:1200,threadable:!0,signature:"(number) -> boolean",evaluate:([e],{engine:t})=>{let r=Bh(e);if(r!==void 0)return t.symbol(r?"True":"False")}},IsComposite:{description:"`IsComposite(n)` returns `True` if `n` is not a prime number",complexity:1200,threadable:!0,signature:"(number) -> boolean",canonical:(e,{engine:t})=>t.box(["Not",["IsPrime",...e]])},IsOdd:{description:"`IsOdd(n)` returns `True` if `n` is an odd number",complexity:1200,threadable:!0,signature:"(number) -> boolean",evaluate:(e,{engine:t})=>{let r=!1,i=e.every(n=>{if(n.im!==0)return!1;let s=fm(n);if(s!==null)return s%BigInt(2)!==BigInt(0);let a=n.re;return Number.isInteger(a)?a%2!==0:(r=!0,!1)});if(!r)return t.symbol(i?"False":"True")}},isEven:{description:"Odd Number",complexity:1200,threadable:!0,signature:"(number) -> boolean",canonical:(e,{engine:t})=>t.box(["Not",["IsOdd",...e]])}},{GCD:{description:"Greatest Common Divisor",complexity:1200,threadable:!1,signature:"(...any) -> integer",sgn:()=>"positive",evaluate:e=>B1(e,"GCD")},LCM:{description:"Least Common Multiple",complexity:1200,threadable:!1,signature:"(...any) -> integer",sgn:()=>"positive",evaluate:e=>B1(e,"LCM")},Numerator:{description:"Numerator of an expression",complexity:1200,threadable:!0,hold:!0,signature:"(number) -> number | nothing",canonical:(e,{engine:t})=>{if(e.length===0)return t.Nothing;let r=e[0];return r.operator==="Rational"||r.operator==="Divide"?r.op1:t._fn("Numerator",jn(t,e))},sgn:([e])=>e.sgn,evaluate:(e,{engine:t})=>{let r=t;if(e.length===0)return r.Nothing;let i=e[0];return i.operator==="Rational"||i.operator==="Divide"?i.op1.evaluate():i.numerator}},Denominator:{description:"Denominator of an expression",complexity:1200,threadable:!0,hold:!0,signature:"(number) -> number | nothing",canonical:(e,{engine:t})=>{if(e.length===0)return t.Nothing;let r=e[0];if(r.operator==="Rational"||r.operator==="Divide")return r.op2;let i=Qn(r);return i!==void 0?t.number(i[1]):t._fn("Denominator",jn(t,e))},sgn:()=>"positive",evaluate:(e,{engine:t})=>{let r=t;if(e.length===0)return r.Nothing;let i=e[0];return i.operator==="Rational"||i.operator==="Divide"?i.op2.evaluate():i.denominator}},NumeratorDenominator:{description:"Sequence of Numerator and Denominator of an expression",complexity:1200,threadable:!0,hold:!0,signature:"(number) -> tuple<number, number> | nothing",canonical:(e,{engine:t})=>{if(e.length===0)return t.Nothing;let r=e[0];if(r.operator==="Rational"||r.operator==="Divide")return t.tuple(...r.ops);let i=Qn(r.evaluate());return i!==void 0?t.tuple(t.number(i[0]),t.number(i[1])):t._fn("NumeratorDenominator",e.map(n=>n.evaluate()))},evaluate:(e,{engine:t})=>{let r=t;if(e.length===0)return r.Nothing;let i=e[0];return i.operator==="Rational"||i.operator==="Divide"?r.tuple(...i.ops):r.tuple(...i.numeratorDenominator)}}},{Max:{description:"Maximum of two or more numbers",complexity:1200,threadable:!1,signature:"(...value) -> number | list",sgn:e=>{if(e.some(t=>t.isReal==!1||t.isNaN))return"unsigned";if(!e.some(t=>t.isReal==!1||t.isNaN!==!1)){if(e.some(t=>t.isPositive))return"positive";if(e.every(t=>t.isNonPositive))return e.some(t=>t.is(0))?"zero":"non-positive";if(e.some(t=>t.isNonNegative))return"non-negative";if(e.every(t=>t.isNegative))return"negative";if(e.some(t=>!t.is(0)))return"real-not-zero"}},evaluate:(e,{engine:t})=>Uo(t,e,"Max")},Min:{description:"Minimum of two or more numbers",complexity:1200,threadable:!1,signature:"(...value) -> number | list",sgn:e=>{if(e.some(t=>t.isReal==!1||t.isNaN))return"unsigned";if(!e.some(t=>t.isReal==!1||t.isNaN!==!1)){if(e.some(t=>t.isNegative))return"negative";if(e.every(t=>t.isNonNegative))return e.some(t=>t.is(0))?"zero":"non-negative";if(e.some(t=>t.isNonPositive))return"non-positive";if(e.every(t=>t.isPositive))return"positive";if(e.some(t=>!t.is(0)))return"real-not-zero"}},evaluate:(e,{engine:t})=>Uo(t,e,"Min")},Supremum:{description:"Like Max, but defined for open sets",complexity:1200,threadable:!1,signature:"(...value) -> number | list",evaluate:(e,{engine:t})=>Uo(t,e,"Supremum")},Infimum:{description:"Like Min, but defined for open sets",complexity:1200,threadable:!1,signature:"(...value) -> number | list",evaluate:(e,{engine:t})=>Uo(t,e,"Infimum")},Product:{description:"`Product(f, a, b)` computes the product of `f` from `a` to `b`",wikidata:"Q901718",complexity:1e3,threadable:!1,hold:!0,signature:"(collection|function, ...(tuple<symbol>|tuple<symbol, integer>|tuple<symbol, integer, integer>)) -> number",canonical:([e,...t])=>F1("Product",e,t),sgn:e=>{var p,d;let t=(p=e[0])==null?void 0:p.sgn;if(t===void 0)return;if(["positive","zero"].includes(t))return t;let r=Ga(e[0],e.slice(1),(b,x)=>b+1,0);if(t==="real-not-zero"||t==="negative")return r%2===0?"positive":t;if(((d=e[0])==null?void 0:d.type)==="imaginary")return r%2===0?"negative":"unsigned";if(t==="unsigned")return;let i=!1,n=!1,s=!1,a=!1,u="positive",f=!1;if(Ga(e[0],e.slice(1),(b,x)=>(x.isInfinity?(a=!0,s=!0):x.isInfinity!==!1&&(s=!0),x.is(0)&&(i=!0,n=!0),x.is(0)&&(n=!0),x.isNonPositive?u=Ho(u):x.isNonNegative!==!0&&(f=!0),b+1),0),a&&i)return"unsigned";if(!(f||s&&n))return n?u==="positive"?"non-negative":"non-positive":u},evaluate:(e,t)=>{let r=(n,s)=>(s=s.evaluate(t),s.isNumberLiteral?n.mul(s.numericValue):null),i=Ga(e[0],e.slice(1),r,t.engine._numericValue(1));return t.engine.number(i??NaN)}},Sum:{description:"`Sum(f, a, b)` computes the sum of `f` from `a` to `b`",wikidata:"Q218005",complexity:1e3,threadable:!1,hold:!0,signature:"(collection|function, ...(tuple<symbol>|tuple<symbol, integer>|tuple<symbol, integer, integer>)) -> number",sgn:e=>{var i;let t=(i=e[0])==null?void 0:i.sgn;if(t===void 0)return;if(["positive","negative","zero"].includes(t))return t;let r=[];if(Ga(e[0],e.slice(1),(n,s)=>(r.push(s.sgn),n+1),0),!r.some(n=>[void 0,"unsigned"].includes(n))){if(r.every(n=>n==="zero"))return"zero";if(r.every(n=>n==="positive"||n==="non-negative"))return r.some(n=>n==="positive")?"positive":"non-negative";if(r.every(n=>n==="negative"||n==="non-negative"))return r.some(n=>n==="negative")?"negative":"non-positive";if(r.every(n=>n==="real"||n==="real-not-zero"))return"real"}},canonical:([e,...t])=>F1("Sum",e,t),evaluate:(e,{engine:t})=>t.number(Ga(e[0],e.slice(1),(r,i)=>(i=i.evaluate(),i.isNumberLiteral?r.add(i.numericValue):null),t._numericValue(0))??NaN)}},{BaseForm:{description:"`BaseForm(expr, base=10)`",complexity:9e3,signature:"(number, (string|integer)?) -> string | nothing",type:([e])=>e===void 0?"nothing":e.type,evaluate:([e])=>e},FromDigits:{description:"`FromDigits(s, base=10)`       return an integer representation of the string `s` in base `base`.",signature:"(string, (string|integer)?) -> integer",evaluate:(e,{engine:t})=>{var f,p;let r=(f=e[0])==null?void 0:f.string,i=t;if(!r)return i.typeError("string",(p=e[0])==null?void 0:p.type,e[0]);if(r=r.trim(),r.startsWith("0x"))return i.number(parseInt(r.slice(2),16));if(r.startsWith("0b"))return i.number(parseInt(r.slice(2),2));let n=e[1]??i.Nothing;if(n.symbol==="Nothing")return i.number(Number.parseInt(r,10));let s=n.re;if(n.type!=="integer"||!Number.isFinite(s)||s<2||s>36)return i.error(["unexpected-base",s.toString()],n.toString());let[a,u]=n0(r,n.string??n.symbol??10);return u?i.error(["unexpected-digit",u[0]],u):i.number(a)}},IntegerString:{description:"`IntegerString(n, base=10)`       return a string representation of the integer `n` in base `base`.",threadable:!0,signature:"(integer, integer?) -> string",evaluate:(e,{engine:t})=>{let r=t,i=e[0];if(i.type!=="integer")return r.typeError("integer",i.type,i);let n=i.re;if(!Number.isFinite(n))return r.typeError("integer",i.type,i);let s=e[1]??r.Nothing;if(s.symbol==="Nothing")return i.bignumRe!==void 0?r.string(i.bignumRe.abs().toString()):r.string(Math.abs(n).toString());let a=rt(s);return a===null?r.typeError("integer",s.type,s):a<2||a>36?r.error(["out-of-range","2","36",a.toString()],s.toString()):r.string(Math.abs(n).toString(a))}}}];function v2(e){let t=e.engine,r=e.numericValue;if(r!==null)return typeof r=="number"?t.number(Math.abs(r)):t.number(r.abs());if(e.isNonNegative)return e;if(e.isNegative)return e.neg()}function Q7(e,t){let r=e.engine,i=t==="Max"||t==="Supremum";if(e.operator==="Interval"){let n=i?e.op2:e.op1;return!n.isNumber||n.numericValue===null?[void 0,[e]]:[n,[]]}if(e.operator==="Range"){let n=ri(e),s=l2(n);return[r.number(Math.max(n[0],s)),[]]}if(e.operator==="Linspace")return e.nops===1?e=i?e.op1:r.One:i?e=e.op2:e=e.op1,[e,[]];if(e.isCollection){let n,s=[];for(let a of Ye(e)){let[u,f]=Q7(a,t);u&&(n?(i&&u.isGreater(n)||!i&&u.isLess(n))&&(n=u):n=u),s.push(...f)}return[n,s]}return!e.isNumber||e.numericValue===null?[void 0,[e]]:[e,[]]}function Uo(e,t,r){let i=r==="Max"||r==="Supremum";if(t.length===0)return i?e.NegativeInfinity:e.PositiveInfinity;let n,s=[];for(let a of t){let[u,f]=Q7(a,r);u&&(n?(i&&u.isGreater(n)||!i&&u.isLess(n))&&(n=u):n=u),s.push(...f)}return s.length>0?e.box(n?[r,n,...s]:[r,...s]):n??(i?e.NegativeInfinity:e.PositiveInfinity)}function B1(e,t){let r=e[0].engine,i=t==="LCM"?Rx:E7,n=[];if(Vn(r)){let s=null;for(let a of e)if(s===null)s=k1(a),(s===null||!s.isInteger())&&n.push(a);else{let u=k1(a);u&&u.isInteger()?s=i(s,u):n.push(a)}return n.length===0?s===null?r.One:r.number(s):s===null?r._fn(t,n):r._fn(t,[r.number(s),...n])}for(let s of e)G(s.type,"integer")&&n.push(s);return n.length===0?r.One:r._fn(t,n)}function Bh(e){if(!e.isInteger||e.isNegative||e.numericValue===null)return;let t=rt(e);if(t!==null)return y7(t);let r=fm(e);if(r!==null)return dx(r)}var Y7={boolean:e=>e.type==="boolean",string:e=>e.string!==null,number:e=>e.isNumberLiteral,symbol:e=>e.symbol!==null,expression:e=>!0,numeric:e=>{let[t,r]=e.toNumericValue();return r.is(1)},integer:e=>e.isInteger,rational:e=>e.isRational,irrational:e=>e.isRational===!1,real:e=>e.isReal,notreal:e=>!e.isReal,complex:e=>G(e.type,"complex"),imaginary:e=>e.type==="imaginary",positive:e=>e.isPositive,negative:e=>e.isNegative,nonnegative:e=>e.isNonNegative,nonpositive:e=>e.isNonPositive,even:e=>e.isEven,odd:e=>e.isOdd,prime:e=>Bh(e)===!0,composite:e=>Bh(e)===!1,notzero:e=>e.is(0)===!1,notone:e=>e.is(1)===!1,finite:e=>e.isFinite,infinite:e=>e.isFinite===!1,constant:e=>{var t;return((t=e.symbolDefinition)==null?void 0:t.isConstant)??!1},variable:e=>{var t;return!(((t=e.symbolDefinition)==null?void 0:t.isConstant)??!0)},function:e=>{var t;return((t=e.symbolDefinition)==null?void 0:t.isFunction)??!1},relation:e=>ts(e.operator),equation:e=>e.operator==="Equal",inequality:e=>P0(e),collection:e=>e.isCollection,list:e=>e.operator==="List",set:e=>e.operator==="Set",tuple:e=>e.operator==="Tuple"||e.operator==="Single"||e.operator==="Pair"||e.operator==="Triple",single:e=>e.operator==="Single",pair:e=>e.operator==="Pair",triple:e=>e.operator==="Triple",scalar:e=>e.rank===0,tensor:e=>e.rank>0,vector:e=>e.rank===1,matrix:e=>e.rank===2,unit:e=>e.operator==="Unit",dimension:e=>e.operator==="Dimension",angle:e=>e.operator==="Angle",polynomial:e=>e.unknowns.length===1};function b2(e,t){for(let r of t)if(Y7[r](e)!==!0)return!1;return!0}function x2(e){let t=/\\[a-zA-Z]+|[{}]|[\d]+|[+\-*/^_=()><,.;]|[a-zA-Z]/g,r=e.match(t);return r?r.filter(i=>!/^[ \f\n\r\t\v\xA0\u2028\u2029]+$/.test(i)):[]}function w2(e){let t=e.peek,r=null;if(t==="\\mathrm")e.nextToken(),r=e.parseStringGroup();else if(/^[a-z]$/.test(t))for(r=e.nextToken();/^[a-z]$/.test(e.peek);)r+=e.nextToken();else{let i={">0":"positive","\\gt0":"positive","<0":"negative","\\lt0":"negative",">=0":"nonnegative","\\geq0":"nonnegative","<=0":"nonpositive","\\leq0":"nonpositive","!=0":"notzero","\\neq0":"notzero","\\neq1":"notone","!=1":"notone","\\in\\Z":"integer","\\in\\mathbb{Z}":"integer","\\in\\N":"natural","\\in\\mathbb{N}":"natural","\\in\\R":"real","\\in\\mathbb{R}":"real","\\in\\C":"complex","\\in\\mathbb{C}":"complex","\\in\\Q":"rational","\\in\\mathbb{Q}":"rational","\\in\\Z^+":"integer,positive","\\in\\Z^-":"intger,negative","\\in\\Z^*":"nonzero","\\in\\R^+":"positive","\\in\\R^-":"negative","\\in\\R^*":"real,nonzero","\\in\\N^*":"integer,positive","\\in\\N_0":"integer,nonnegative","\\in\\R\\backslash\\Q":"irrational"};for(let n in i)if(e.matchAll(x2(n))){r=i[n];break}}if(!r)return null;if(!Object.keys(Y7).includes(r))throw new Error(`Unexpected condition "${r}" in a rule`);return r}function V1(e){let t=[];do{let r=w2(e);if(!r)break;t.push(r)}while(e.match(","));return t.join(",")}function uf(e){let t=null;if(e.match(":"))t=V1(e);else if(e.matchAll(["_","<{>"])&&(t=V1(e),!e.match("<}>")))return null;return t}function j1(e,t,r){if(!(t===void 0||typeof t=="function")){if(typeof t=="string"){let i=e.parse(t,{canonical:(r==null?void 0:r.canonical)??!1});return i=i.map(n=>n.symbol&&n.symbol.length===1?e.symbol("_"+n.symbol):n,{canonical:!1}),i}return e.box(t,{canonical:(r==null?void 0:r.canonical)??!1})}}function N2(e,t,r){let i=x=>({kind:"symbol",latexTrigger:x,parse:(I,L)=>{s[x]||(s[x]=`_${x}`);let O=uf(I);return O!==null&&(a[x]?a[x]+=","+O:a[x]=O),s[x]}}),n=e.latexDictionary,s={},a={};e.latexDictionary=[...n,{kind:"prefix",precedence:100,latexTrigger:"...",parse:(x,I)=>{let L=x.nextToken();if(!"abcfghjklmnopqrstuvwxyz".includes(L))return null;let O="__";if(x.match("?")&&(O="___"),s[L]&&s[L]!==`${O}${L}`)throw new Error(`Duplicate wildcard "${L}"`);s[L]||(s[L]=`${O}${L}`);let R=uf(x);return R===null?null:(a[L]?a[L]+=","+R:a[L]=R,`${O}${L}`)}},..."abcfghjklmnopqrstuvwxyz".split("").map(i),{kind:"infix",precedence:100,latexTrigger:"->",parse:(x,I,L)=>{let O=x.parseExpression({...L,minPrec:20});if(O===null)return null;let R=null;if(x.match(";")){let T=!1,q=x.index;do{x.skipSpace();let W=x.nextToken();if(s[W]){let J=uf(x);if(J===null||!J){T=!0,x.index=q;break}a[W]?a[W]+=","+J:a[W]=J}}while(!T&&!x.atEnd);R=x.parseExpression(L)}let A=[];for(let T in a){let q=a[T].split(",");q.length!==0&&(q.length===1?A.push(["Condition",s[T],q[0]]):A.push(["Condition",s[T],["And",...q]]))}let M;return R&&A.length>0?M=["And",R,...A]:R?M=R:A.length===1?M=A[0]:A.length>1&&(M=["And",...A]),M?["Rule",I,O,M]:["Rule",I,O]}}];let u=e.parse(t,{canonical:(r==null?void 0:r.canonical)??!1});if(e.latexDictionary=n,!u.isValid||u.operator!=="Rule")throw new Error(`Invalid rule "${t}"
|   ${f0(u).toString()}
|   A rule should be of the form:
|   <match> -> <replace>; <condition>`);let[f,p,d]=u.ops;if(!H1(p,f))throw new Error(`Invalid rule "${t}"
|   The replace expression contains wildcards not present in the match expression`);if(f.isSame(p))throw new Error(`Invalid rule "${t}"
|   The match and replace expressions are the same.
|   This may be because the rule is not necessary due to canonical simplification`);let b;if(d!==void 0){if(!H1(d,f))throw new Error(`Invalid rule "${t}"
|   The condition expression contains wildcards not present in the match expression`);b=x=>{var I;return((I=d.subs(x).evaluate())==null?void 0:I.symbol)==="True"}}return X7(e,{match:f,replace:p,condition:b,id:t},r)}function X7(e,t,r){if(t==null)throw new Error("Expected a rule, not "+t);if(U9(t))return t;if(typeof t=="string")return N2(e,t,r);if(typeof t=="function")return{_tag:"boxed-rule",match:void 0,replace:t,condition:void 0,id:t.toString().replace(/\n/g," ")};let{match:i,replace:n,condition:s,id:a}=t;if(n===void 0)throw new Error(`Invalid rule "${a??JSON.stringify(t)}"
|   A rule must include at least a replace property`);let u;if(typeof s=="string"){let d=ql(s);if(d){let b=e.parse(d,{canonical:(r==null?void 0:r.canonical)??!1});u=(x,I)=>{var L;return((L=b.subs(x).evaluate())==null?void 0:L.symbol)==="True"}}}else{if(s!==void 0&&typeof s!="function")throw new Error(`Invalid rule ${a??JSON.stringify(t)}
|   condition is not a valid function`);u=s}if(typeof i=="function")throw new Error(`Invalid rule ${a??JSON.stringify(t)}
|   match is not a valid expression.
|   Use a replace function instead to validate and replace the expression`);let f=j1(e,i,r),p=j1(e,n,r);if(a||(typeof i=="string"?a=i:a=JSON.stringify(i),n&&(a+=" -> ",typeof n=="string"?a+=n:typeof n=="function"?a+=n==null?void 0:n.toString().replace(/\n/g," "):a=JSON.stringify(n)),typeof s=="string"?a+=`; ${s}`:typeof s=="function"&&(a+=`; ${s.toString().replace(/\n/g," ")}`)),f&&!f.isValid)throw new Error(`Invalid rule ${a}
|   the match expression is not valid: ${f.toString()}`);if(p&&!p.isValid)throw new Error(`Invalid rule ${a??JSON.stringify(t)}
|   The replace expression is not valid: ${p==null?void 0:p.toString()}`);if(!p&&typeof n!="function")throw new Error(`Invalid rule ${a??JSON.stringify(t)}
|   The replace expression could not be parsed`);return{_tag:"boxed-rule",match:f,replace:p??n,condition:u,useVariations:t.useVariations,id:a}}function Go(e,t,r){if(!t)return{rules:[]};if(typeof t=="object"&&"rules"in t)return t;Array.isArray(t)||(t=[t]);let i=[];for(let n of t)try{i.push(X7(e,n,r))}catch(s){throw new Error(`
${s.message}
|   Skipping rule ${JSON.stringify(n)}

`)}return{rules:i}}function Nm(e,t,r,i){let n=(i==null?void 0:i.canonical)??(t.isCanonical||t.isStructural),s=!1;if(t.ops&&(i!=null&&i.recursive)){let L=t.ops.map(O=>{let R=Nm(e,O,{},i);return R?(s=!0,R.value):O});s&&(t=t.engine.function(t.operator,L,{canonical:n}))}let{match:a,replace:u,condition:f,id:p}=e,d=p??"";if(n&&a){let L=Hl(a),O=a;a=a.canonical;let R=Hl(a);if(!L.every(A=>R.includes(A)))throw new Error(`
|   Invalid rule "${e.id}"
|   The canonical form of ${f0(O).toString()} is "${f0(a).toString()}" and it does not contain all the wildcards of the original match.
|   This could indicate that the match expression in canonical form is already simplified and this rule may not be necessary`)}let b=e.useVariations??(i==null?void 0:i.useVariations)??!1,x=a?t.match(a,{substitution:r,...i,useVariations:b}):{};if(x===null)return s?{value:t,because:d}:null;if(typeof f=="function"){let L={...Object.fromEntries(Object.entries(x).map(([O,R])=>[O.slice(1),R])),...x};try{if(!f(L,t.engine))return s?{value:t,because:d}:null}catch(O){return console.error(`
|   Rule "${e.id}"
|   Error while checking condition
|    ${O.message}`),null}}let I=typeof u=="function"?u(t,x):u.subs(x,{canonical:n});return I?H9(I)?n?{...I,value:I.value.canonical}:I:{value:n?I.canonical:I,because:d}:null}function Kl(e,t,r){if(!t)throw new Error("replace(): Expected one or more rules");let i=(r==null?void 0:r.iterationLimit)??1,n=0,s=(r==null?void 0:r.once)??!1,a;typeof t=="object"&&"rules"in t?a=t.rules:a=e.engine.rules(Array.isArray(t)?t:[t]).rules;let u=!1,f=[];for(;!u&&n<i;){u=!0;for(let p of a)try{let d=Nm(p,e,{},r);if(d!==null&&d.value!==e&&!d.value.isSame(e)){if(s)return[d];if(f.some(b=>b.value.isSame(d.value)))return f;f.push(d),u=!1,e=d.value}}catch(d){return console.error(`
${e.toString()}
${p.id}
${d.message}`),f}n+=1}return f}function du(e,t,r,i){let n=[];for(let s of t.rules){let a=Nm(s,e,r,i);a!==null&&(n.some(u=>u.isSame(a.value))||n.push(a.value))}return n}function f0(e){let t=e.symbol;if(t&&t.startsWith("_"))return e.engine.symbol(t.slice(1));if(e.ops){let r=e.ops.map(i=>f0(i));return e.engine.function(e.operator,r,{canonical:!1})}return e}function Hl(e){let t=[];return e.symbol&&e.symbol.startsWith("_")&&t.push(e.symbol),e.ops&&e.ops.forEach(r=>t.push(...Hl(r))),t}function H1(e,t){let r=Hl(e),i=Hl(t);return r.every(n=>i.includes(n))}var k2=[{match:["Multiply","_x","__a"],replace:0,id:"ax",condition:({__a:e})=>!e.has("_x")},{match:["Add",["Divide","_a","_x"],"__b"],replace:1/0,useVariations:!0,condition:({_a:e,__b:t})=>!e.has("_x")&&!t.has("_x")},{match:["Add",["Multiply","_x","__a"],"__b"],replace:["Divide",["Negate","__b"],"__a"],useVariations:!0,condition:({__a:e,__b:t})=>!e.has("_x")&&!t.has("_x")},{match:["Add",["Multiply","_a",["Power","_x","_n"]],"__b"],replace:["Power",["Divide",["Negate","__b"],"_a"],["Divide",1,"_n"]],useVariations:!0,condition:({_a:e,__b:t,_n:r})=>!e.has("_x")&&!t.has("_x")&&!r.is(0)},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Add",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],useVariations:!0,condition:({__a:e,__b:t,__c:r})=>!e.has("_x")&&!t.has("_x")&&!r.has("_x")},{match:["Add",["Multiply","__a",["Power","_x",2]],["Multiply","__b","_x"],"__c"],replace:["Divide",["Subtract",["Negate","__b"],["Sqrt",["Subtract",["Square","__b"],["Multiply",4,"__a","__c"]]]],["Multiply",2,"__a"]],useVariations:!0,condition:({__a:e,__b:t,__c:r})=>!e.has("_x")&&!t.has("_x")&&!r.has("_x")},{match:["Add",["Multiply","__a",["Exp",["Multiply","__b","_x"]]],"__c"],replace:["Divide",["Ln",["Negate",["Divide","__c","__a"]]],"__b"],useVariations:!0,condition:({__a:e,__c:t})=>((!e.is(0)&&t.div(e).isNegative)??!1)&&!e.has("_x")&&!t.has("_x")},{match:["Add",["Multiply","__a",["Exp","_x"]],"__c"],replace:["Ln",["Negate",["Divide","__c","__a"]]],useVariations:!0,condition:({__a:e,__c:t})=>((!e.is(0)&&t.div(e).isNegative)??!1)&&!e.has("_x")&&!t.has("_x")},{match:["Add",["Exp","_x"],"__c"],replace:["Ln",["Negate","__c"]],useVariations:!0,condition:({__c:e})=>e.isNegative??!1},{match:["Add",["Exp",["Multiply","__b","_x"]],"__c"],replace:["Divide",["Ln",["Negate","__c"]],"__b"],useVariations:!0,condition:({__c:e})=>e.isNegative??!1},{match:["Add",["Multiply","__a",["Log","_x","__b"]],"__c"],replace:["Power","__b",["Negate",["Divide","__c","__a"]]],useVariations:!0,condition:({__a:e,__b:t})=>(!e.is(0)&&t.isPositive)??!1},{match:["Multiply","__a",["Log","_x","__b"]],replace:["Power","__b",["Negate",["Divide","__c","__a"]]],useVariations:!0,condition:({__a:e,__b:t})=>(!e.is(0)&&t.isPositive)??!1},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Divide",["Subtract","__b","__c"],"__a"]},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Divide",["Negate",["Add","__b","__c"],"__a"]]}];function K7(e,t){let r=e.engine;e.operator==="Equal"&&(e=e.op1.canonical.sub(e.op2).simplify());let i=r.getRuleSet("solve-univariate"),n=[e.subs({[t]:"_x"},{canonical:!1})],s=n.flatMap(a=>du(a,i,{_x:r.symbol("_x")},{useVariations:!0,canonical:!0}));return s.length===0&&(n=n.flatMap(a=>U1(a)),s=n.flatMap(a=>du(a,i,{_x:r.symbol(t)}))),s.length===0&&(n=n.flatMap(a=>zi(a.canonical)).filter(a=>a!==null),n=n.flatMap(a=>U1(a)),s=n.flatMap(a=>du(a,i,{_x:r.symbol(t)}))),s.map(a=>a.evaluate().simplify())}var S2=[{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Multiply","__a","_x"],"__b","__c"]},{match:["Add",["Abs",["Add",["Multiply","__a","_x"],"__b"]],"__c"],replace:["Add",["Negate",["Multiply","__a","_x"]],["Negate","__b"],"__c"]},{match:["Multiply","__a",["Power","_b","_n"]],replace:"_b",condition:({__a:e,_b:t,_n:r})=>!e.has("_x")&&t.has("_x")&&!r.is(0)&&!r.has("_x")},{match:["Multiply","__a",["Sqrt","_b"]],replace:["Multiply",["Square","_a"],"__b"],condition:({_b:e})=>e.has("_x")},{match:["Divide","_a","_b"],replace:"_a",condition:({_a:e,_b:t})=>e.has("_x")&&!t.is(0)},{match:["Multiply","__a","_b"],replace:"_b",condition:({__a:e,_b:t})=>!e.has("_x")&&t.has("_x")},{match:["Add",["Ln","_a"],["Ln","_b"],"__c"],replace:["Add",["Ln",["Multiply","_a","_b"]],"__c"]},{match:["Multiply",["Exp","__a"],["Exp","__b"],"__c"],replace:["Multiply",["Exp",["Add","_a","_b"]],"__c"]},{match:["Ln","_a"],replace:["Subtract","_a",1],condition:({_a:e})=>e.has("_x")},{match:["Sin","_a"],replace:"_a",condition:({_a:e})=>e.has("_x")},{match:["Cos","_a"],replace:["Subtract","_a",["Divide","Pi",2]],condition:({_a:e})=>e.has("_x")},{match:["Tan","_a"],replace:"_a",condition:({_a:e})=>e.has("_x")},{match:["Add",["Sin","_a"],["Cos","_a"]],replace:1,condition:({_a:e})=>e.has("_x")},{match:["Subtract",["Square",["Sin","_a"]],["Square",["Cos","_a"]]],replace:["PlusMinus",["Sin","_a"],["Divide",["Sqrt",2],2]],condition:({_a:e})=>e.has("_x")}];function U1(e){let t=e.engine,r=t.getRuleSet("harmonization");return du(e,r,{_x:t.symbol("_x")})}function _2(e){if(e.operator==="Element")return E2(e);if(e.operator==="Equal")return T2(e);if(P0(e))return M2(e);throw new Error("Unsupported assumption. Use `Element`, `Equal` or an inequality")}function T2(e){e.operator;let t=e.unknowns;if(t.length===0){let n=e.evaluate();return n.symbol==="True"?"tautology":n.symbol==="False"?"contradiction":(e.canonical.evaluate(),"not-a-predicate")}let r=e.engine,i=e.op1.symbol;if(i&&!I2(r,i)&&!e.op2.has(i)){let n=e.op2.evaluate();if(!n.isValid)return"not-a-predicate";let s=r.lookupSymbol(i);return s?s.type&&!G(n.type,s.type)&&!s.inferredType?"contradiction":(s.value=n,s.inferredType&&(s.type=n.type),"ok"):(r.defineSymbol(i,{value:n}),"ok")}if(t.length===1){let n=t[0],s=K7(e,n);s.length===0&&r.assumptions.set(r.function("Equal",[e.op1.sub(e.op2),0]),!0);let a=s.length===1?s[0]:r.function("List",s),u=r.lookupSymbol(n);return u?u.type&&!s.every(f=>!f.type||G(a.type,f.type))?"contradiction":(u.value=a,"ok"):(r.defineSymbol(n,{value:a}),"ok")}return r.assumptions.set(e,!0),"ok"}function M2(e){let t=e.engine;if(e.op1.symbol&&!km(t,e.op1.symbol))return e.op2.is(0)?e.operator==="Less"?t.defineSymbol(e.op1.symbol,{type:"real",flags:{sgn:"negative"}}):e.operator==="LessEqual"?t.defineSymbol(e.op1.symbol,{type:"real",flags:{sgn:"non-positive"}}):e.operator==="Greater"?t.defineSymbol(e.op1.symbol,{type:"real",flags:{sgn:"positive"}}):e.operator==="GreaterEqual"&&t.defineSymbol(e.op1.symbol,{type:"real",flags:{sgn:"non-negative"}}):(t.defineSymbol(e.op1.symbol,{type:"real"}),t.assumptions.set(e,!0)),"ok";let r="",i,n;if(e.operator==="Less"?(i=e.op1,n=e.op2,r="<"):e.operator==="LessEqual"?(i=e.op1,n=e.op2,r="<="):e.operator==="Greater"?(i=e.op2,n=e.op1,r="<"):e.operator==="GreaterEqual"&&(i=e.op2,n=e.op1,r="<="),!r)return"internal-error";let s=i.sub(n),a=t.box([r==="<"?"Less":"LessEqual",s,0]).evaluate();if(a.symbol==="True")return"tautology";if(a.symbol==="False")return"contradiction";let u=a.unknowns;return u.length===0?"not-a-predicate":(u.length===1&&(t.lookupSymbol(u[0])||t.defineSymbol(u[0],{type:"real"})),a.operator==="Less"||a.operator,t.assumptions.set(a,!0),"ok")}function E2(e){var n,s;e.operator;let t=e.engine,r=A2(e.op1);if(r.length===1){let a=e.op2.evaluate();if(!a.isValid)return"not-a-predicate";let u=tf(a);if(u==="unknown")throw new Error(`Invalid domain "${a.toString()}"`);return t.declare(r[0],u),"ok"}if(e.op1.symbol&&km(t,e.op1.symbol)){let a=e.op2.evaluate();if(!a.isValid)return"not-a-predicate";let u=tf(a);(s=(n=t.context)==null?void 0:n.ids)!=null&&s.has(e.op1.symbol)||t.declare(e.op1.symbol,tf(a));let f=t.lookupSymbol(e.op1.symbol);if(f)return f.type&&!G(u,f.type)?"contradiction":(f.type=u,"ok");let p=t.lookupFunction(e.op1.symbol);return p?G(u,am(p.signature))?"ok":"contradiction":"not-a-predicate"}if(r.length>0)return t.assumptions.set(e,!0),"ok";let i=e.evaluate();return i.symbol==="True"?"tautology":i.symbol==="False"?"contradiction":"not-a-predicate"}function km(e,t){return(e.lookupSymbol(t)??e.lookupFunction(t))!==void 0}function A2(e){return e.symbols.filter(t=>!km(e.engine,t))}function I2(e,t){var r;return e.lookupFunction(t)?!1:((r=e.lookupSymbol(t))==null?void 0:r.value)!==void 0}var cf;function J7(e){if(!cf){let t=`^[${["Zyyy","Zinh","Arab","Armn","Beng","Bopo","Cyrl","Deva","Ethi","Geor","Grek","Gujr","Guru","Hang","Hani","Hebr","Hira","Kana","Knda","Khmr","Laoo","Latn","Mlym","Mymr","Orya","Sinh","Taml","Telu","Thaa","Thai","Tibt"].map(r=>`\\p{Script=${r}}`).join("")}]*$`;cf=new RegExp(t,"u")}return cf.test(e)}function $r(e){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)||F0.test(e)?!0:J7(e)?new RegExp("^[\\p{XIDS}_]\\p{XIDC}*$","u").test(e):!1}var z2="\\u{FE0F}",C2="\\u{20E3}",$2="\\u{200D}",D2="\\p{RI}\\p{RI}",P2="(?:[\\u{E0020}-\\u{E007E}]+\\u{E007F})",G1=`(?:\\p{EMod}|${z2}${C2}?|${P2})`,O2="(?:(?=\\P{XIDC})\\p{Emoji})",W1=`(?:${O2}${G1}*|\\p{Emoji}${G1}+|${D2})`,e6=`(?:${W1})(${$2}${W1})*`,q2=new RegExp(`(?:${e6})+`,"u"),F0=new RegExp(`^(?:${e6})+$`,"u");function ds(e){return typeof e!="string"?"not-a-string":e===""?"empty-string":e.normalize()!==e?"expected-nfc":/[\u200E\u200F\u2066-\u2069\u202A-\u202E]/.test(e)?"unexpected-bidi-marker":F0.test(e)?"valid":new RegExp("\\p{XIDC}","u").test(e)&&q2.test(e)?"unexpected-mixed-emoji":J7(e)?$r(e)?"valid":$r(e[0])?"invalid-char":"invalid-first-char":"unexpected-script"}function t6(e,t,r,i=1e5){let n=0;if(t===-1/0&&r===1/0)for(let s=0;s<i;s++){let a=Math.random(),u=Math.tan(Math.PI*(a-.5)),f=Math.PI*(1+u*u);n+=e(u)/f}else if(t===-1/0)for(let s=0;s<i;s++){let a=Math.random(),u=r-Math.log(1-a),f=1/(1-a);n+=e(u)/f}else if(r===1/0)for(let s=0;s<i;s++){let a=Math.random(),u=t+Math.log(a),f=1/a;n+=e(u)/f}else for(let s=0;s<i;s++)n+=e(t+Math.random()*(r-t));return n/i*(r-t)}var L2={Add:["+",11],Negate:["-",14],Subtract:["-",11],Multiply:["*",12],Divide:["/",13],Equal:["===",8],NotEqual:["!==",8],LessEqual:["<=",9],GreaterEqual:[">=",9],Less:["<",9],Greater:[">",9],And:["&&",4],Or:["||",3],Not:["!",14]},R2={Abs:"Math.abs",Add:(e,t)=>e.length===1?t(e[0]):`(${e.map(r=>t(r)).join(" + ")})`,Arccos:"Math.acos",Arcosh:"Math.acosh",Arccot:([e],t)=>{if(e===null)throw new Error("Arccot: no argument");return`Math.atan(1 / (${t(e)}))`},Arccoth:([e],t)=>{if(e===null)throw new Error("Arccoth: no argument");return`Math.atanh(1 / (${t(e)}))`},Arccsc:([e],t)=>{if(e===null)throw new Error("Arccsc: no argument");return`Math.asin(1 / (${t(e)}))`},Arccsch:([e],t)=>{if(e===null)throw new Error("Arccsch: no argument");return`Math.asinh(1 / (${t(e)}))`},Arcsec:([e],t)=>{if(e===null)throw new Error("Arcsec: no argument");return`Math.acos(1 / (${t(e)}))`},Arcsech:([e],t)=>{if(e===null)throw new Error("Arcsech: no argument");return`Math.acosh(1 / (${t(e)}))`},Arsin:"Math.asin",Arsinh:"Math.asinh",Arctan:"Math.atan",Artanh:"Math.atanh",Ceiling:"Math.ceil",Chop:"_SYS.chop",Cos:"Math.cos",Cosh:"Math.cosh",Cot:([e],t)=>{if(e===null)throw new Error("Cot: no argument");return Z1("Math.cos(${x}) / Math.sin(${x})",t(e))},Coth:([e],t)=>{if(e===null)throw new Error("Coth: no argument");return Z1("(Math.cosh(${x}) / Math.sinh(${x}))",t(e))},Csc:([e],t)=>{if(e===null)throw new Error("Csc: no argument");return`1 / Math.sin(${t(e)})`},Csch:([e],t)=>{if(e===null)throw new Error("Csch: no argument");return`1 / Math.sinh(${t(e)})`},Exp:"Math.exp",Floor:"Math.floor",Gamma:"_SYS.gamma",GCD:"_SYS.gcd",Integrate:(e,t,r)=>H2(e,t,r),LCM:"_SYS.lcm",Limit:(e,t)=>`_SYS.limit(${t(e[0])}, ${t(e[1])})`,Ln:"Math.log",List:(e,t)=>`[${e.map(r=>t(r)).join(", ")}]`,Log:(e,t)=>e.length===1?`Math.log10(${t(e[0])})`:`(Math.log(${t(e[0])}) / Math.log(${t(e[1])}))`,LogGamma:"_SYS.lngamma",Lb:"Math.log2",Max:"Math.max",Min:"Math.min",Power:(e,t)=>{let r=e[0];if(r===null)throw new Error("Power: no argument");let i=e[1].re;return i===.5?`Math.sqrt(${t(r)})`:i===1/3?`Math.cbrt(${t(r)})`:i===1?t(r):i===-1?`(1 / (${t(r)}))`:i===-.5?`(1 / Math.sqrt(${t(r)}))`:`Math.pow(${t(r)}, ${t(e[1])})`},Range:(e,t)=>{if(e.length===0)return"[]";if(e.length===1)return`Array.from({length: ${t(e[0])}}, (_, i) => i)`;let r=t(e[0]),i=t(e[1]),n=e[2]?t(e[2]):"1";if(r===null)throw new Error("Range: no start");if(i===null&&(i=r,r="1"),n==="0")throw new Error("Range: step cannot be zero");if(parseFloat(n)===1){let s=parseFloat(i),a=parseFloat(r);return s!==null&&a!==null?s-a<50?`[${Array.from({length:s-a+1},(u,f)=>a+f).join(", ")}]`:`Array.from({length: ${s-a+1} 
        }, (_, i) => ${r} + i)`:`Array.from({length: ${i} - ${r} + 1
      }, (_, i) => ${r} + i)`}return`Array.from({length: Math.floor((${i} - ${r}) / ${n}) + 1}, (_, i) => ${r} + i * ${n})`},Root:([e,t],r)=>{if(e===null)throw new Error("Root: no argument");return t===null?`Math.sqrt(${r(e)})`:(t==null?void 0:t.re)===2?`Math.sqrt(${r(e)})`:(t==null?void 0:t.re)===3?`Math.cbrt(${r(e)})`:isNaN(t==null?void 0:t.re)?`Math.pow(${r(e)}, 1 / (${r(t)}))`:`Math.pow(${r(e)},  ${1/t.re})`},Random:"Math.random",Round:"Math.round",Square:(e,t)=>{let r=e[0];if(r===null)throw new Error("Square: no argument");return`Math.pow(${t(r)}, 2)`},Sec:(e,t)=>{let r=e[0];if(r===null)throw new Error("Sec: no argument");return`1 / Math.cos(${t(r)})`},Sech:(e,t)=>{let r=e[0];if(r===null)throw new Error("Sech: no argument");return`1 / Math.cosh(${t(r)})`},Sgn:"Math.sign",Sin:"Math.sin",Sinh:"Math.sinh",Sqrt:"Math.sqrt",Tan:"Math.tan",Tanh:"Math.tanh"},F2=class extends Function{constructor(e){return super("_SYS","_",`return ${e}`),this.sys={chop:Nx,factorial:b7,gamma:u0,gcd:ya,integrate:(t,r,i)=>t6(t,r,i,1e7),lcm:v7,lngamma:xm,limit:Ol},new Proxy(this,{apply:(t,r,i)=>super.apply(r,[this.sys,...i]),get:(t,r)=>r==="toString"?()=>e:t[r]})}};function B2(e,t){let r=vt(e,t);return new F2(r)}function V2(e){let t=e.unknowns;return B2(e,{operators:r=>L2[r],functions:r=>R2[r],var:r=>{let i={Pi:"Math.PI",ExponentialE:"Math.E",NaN:"Number.NaN",ImaginaryUnit:"Number.NaN",Half:"0.5",MachineEpsilon:"Number.EPSILON",GoldenRatio:"((1 + Math.sqrt(5)) / 2)",CatalanConstant:"0.91596559417721901",EulerGamma:"0.57721566490153286"}[r];if(i!==void 0)return i;if(t.includes(r))return`_.${r}`},string:r=>JSON.stringify(r),number:r=>r.toString(),indent:0,ws:r=>r??""})}function r6(e,t,r,i){var s,a;if(e==="Error")throw new Error("Error");if(e==="Sequence")return t.length===0?"":`(${t.map(u=>vt(u,i,r)).join(", ")})`;if(e==="Sum"||e==="Product")return j2(e,t,i);if(t.every(u=>!u.isCollection)){let u=(s=i.operators)==null?void 0:s.call(i,e);if(ts(e)&&t.length>2&&u){let f=[];for(let p=0;p<t.length-1;p++)f.push(r6(e,[t[p],t[p+1]],u[1],i));return`(${f.join(") && (")})`}if(u!==void 0){if(t===null)return"";let f;return t.length===1?f=`${u[0]}${vt(t[0],i,u[1])}`:f=t.map(p=>vt(p,i,u[1])).join(` ${u[0]} `),u[1]<r?`(${f})`:f}}if(e==="Function"){let u=t.slice(1).map(f=>f.symbol);return`((${u.join(", ")}) => ${vt(t[0].canonical,{...i,var:f=>u.includes(f)?f:i.var(f)})})`}if(e==="Declare")return`let ${t[0].symbol}`;if(e==="Assign")return`${t[0].symbol} = ${vt(t[1],i)}`;if(e==="Return")return`return ${vt(t[0],i)}`;if(e==="If"){if(t.length!==3)throw new Error("If: wrong number of arguments");return`((${vt(t[0],i)}) ? (${vt(t[1],i)}) : (${vt(t[2],i)}))`}if(e==="Block"){let u=[];for(let p of t)p.operator==="Declare"&&u.push(p.ops[0].symbol);if(t.length===1&&u.length===0)return vt(t[0],i);let f=t.map(p=>vt(p,{...i,var:d=>u.includes(d)?d:i.var(d)}));return f[f.length-1]=`return ${f[f.length-1]}`,`(() => {${i.ws(`
`)}${f.join(`;${i.ws(`
`)}`)}${i.ws(`
`)}})()`}let n=(a=i.functions)==null?void 0:a.call(i,e);if(!n)throw new Error(`Unknown function ${e}`);if(typeof n=="function"){if(t.length===1&&Ct(t[0])){let u=fs();return`(${vt(t[0],i)}).map((${u}) => ${n(t[0].engine.box(u),f=>vt(f,i))})`}return n(t,u=>vt(u,i),i)}if(t===null)return`${n}()`;if(t.length===1&&Ct(t[0])){let u=fs();return`(${vt(t[0],i)}).map((${u}) => ${n}(${vt(t[0].engine.box(u),i)}))`}return`${n}(${t.map(u=>vt(u,i)).join(", ")})`}function vt(e,t,r=0){var s;if(e===void 0)return"";if(!e.isValid)throw new Error(`Cannot compile invalid expression: "${e.toString()}"`);let i=e.symbol;if(i!==null)return((s=t.var)==null?void 0:s.call(t,i))??i;let n=e.re;if(!isNaN(n)){if(e.im!==0)throw new Error("Complex numbers are not supported");return t.number(n)}return e.string!==null?t.string(i):r6(e.operator,e.ops,r,t)}function j2(e,t,r){if(t===null)throw new Error("Sum/Product: no arguments");if(!t[0])throw new Error("Sum/Product: no body");let{index:i,lower:n,upper:s,isFinite:a}=R0(t[1]),u=e==="Sum"?"+":"*";if(!i){let b=fs(),x=fs();return`${vt(t[0],r)}.reduce((${x}, ${b}) => ${x} ${u} ${b}, ${u==="+"?"0":"1"})`}let f=vt(t[0],{...r,var:b=>b===i?i:r.var(b)}),p=fs(),d=fs();return`(() => {
  let ${d} = ${u==="+"?"0":"1"};
  let ${i} = ${n};
  const _fn = () => ${f};
  while (${p} <= ${s}) {
    ${d} ${u}= _fn();
    ${p}++;
  }
  return ${d};
})()`}function Z1(e,t){if(/^[\p{L}_][\p{L}\p{N}_]*$/u.test(t)||/^[0-9]+$/.test(t))return new Function("x",`return \`${e}\`;`)(t);{let r=fs();return new Function("x",`return \`(() => { const ${r} = \${x}; return ${e.replace(/\\\${x}/g,r)}; })()\`;`)(t)}}function fs(){return`_${Math.random().toString(36).substring(4)}`}function H2(e,t,r){let{index:i,lower:n,upper:s}=R0(e[1]),a=vt(e[0],{...r,var:u=>u===i?u:r.var(u)});return`_SYS.integrate((${i}) => (${a}), ${n}, ${s})`}function U2(e,t){return"normal"}function G2(e,t){return"normal"}function W2(e,t){return t>2?"solidus":"radical"}function Z2(e,t){if(t>3)return"inline-solidus";if(Q(e)==="Divide"){let[r,i]=ce(e),[n,s]=[i0(r),i0(i)];if(s<=2&&n>5)return"factor";if(n<=2&&s>5)return"reciprocal"}return"quotient"}function Q2(e,t){return"boolean"}function Y2(e,t){return"solidus"}function X2(e,t){return"compact"}function i6(e,t,r){if(r.repeatingDecimal&&r.repeatingDecimal!=="none"){let s=e.slice(0,-1);for(let a=0;a<e.length-16;a++){let u=s.substring(0,a);for(let f=0;f<17;f++){let p=s.substring(a,a+f+1),d=Math.floor((s.length-u.length)/p.length);if(d<=3)break;if((u+p.repeat(d+1)).startsWith(s)){if(p==="0")return ff(u,r);let b={vinculum:"\\overline{#}",parentheses:"(#)",dots:"\\overset{\\cdots}{#1}#2\\overset{\\cdots}{#3}",arc:"\\wideparen{#}"}[r.repeatingDecimal]??"\\overline{#}";return b=b.replace(/#1/g,p[0]).replace(/#2/g,p.slice(1)).replace(/#3/g,p.slice(-1)).replace(/#/,p),ff(u,r)+b}}}}let i=typeof r.fractionalDigits=="number"?r.fractionalDigits:1/0;i<0&&(i=i-t),i<0&&(i=0);let n=e.length>i;return n&&(e=e.substring(0,i)),e=ff(e,r),n&&(e+=r.truncationMarker),e}function n6(e,t){return!e||e==="0"?"":t.beginExponentMarker?t.beginExponentMarker+e+(t.endExponentMarker??""):`10^{${e}}`}function K2(e,t){if(e===null)return"";let r;if(typeof e=="number"||typeof e=="string")r=e;else if(typeof e=="object"&&"num"in e)r=e.num;else return"";if(typeof r=="number"){if(r===1/0)return t.positiveInfinity;if(r===-1/0)return t.negativeInfinity;if(Number.isNaN(r))return t.notANumber;let s;return t.notation==="engineering"?s=Wo(r.toExponential(),t,3):t.notation==="scientific"&&(s=Wo(r.toExponential(),t)),s??Vh(r.toString(),t)}if(r=r.toLowerCase().replace(/[\u0009-\u000d\u0020\u00a0]/g,""),r==="infinity"||r==="+infinity")return t.positiveInfinity;if(r==="-infinity")return t.negativeInfinity;if(r==="nan")return t.notANumber;if(!/^[-+\.]?[0-9]/.test(r))return"";if(r=r.replace(/[nd]$/,""),/\([0-9]+\)/.test(r)){let[s,a,u,f]=r.match(/(.+)\(([0-9]+)\)(.*)$/)??[];r=a+u.repeat(6)+f}let i="";for(r[0]==="-"?(i="-",r=r.substring(1)):r[0]==="+"&&(r=r.substring(1));r[0]==="0";)r=r.substring(1);r.length===0?r="0":r[0]==="."&&(r="0"+r);let n;return t.notation==="engineering"?n=Wo(r,t,3):t.notation==="scientific"&&(n=Wo(r,t)),i+(n??Vh(r,t))}function Wo(e,t,r=1){let i=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/);if(!i){let d="";if(e[0]==="-"?(d="-",e=e.substring(1)):e[0]==="+"&&(e=e.substring(1)),e.indexOf(".")<0)e.length===1?e=d+e+"e+0":e=d+e[0]+"."+e.slice(1)+"e+"+(e.length-1).toString();else{let[b,x,I]=e.match(/^(.*)\.(.*)$/);for(I||(I="");x.startsWith("0");)x=x.substring(1);x?e=d+x[0]+"."+x.slice(1)+I+"e+"+(x.length-1).toString():e=d+"0."+I+"e+0"}i=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/)}if(!i)return Vh(e,t);let n=parseInt(i[2]),s=i[1];if(Math.abs(n)%r!==0){let d=n>0?n%r:-((r+n)%r);n=n>=0?n-d:n+d;let[b,x,I]=s.match(/^(.*)\.(.*)$/)??["",s,""];s=x+(I+"00000000000000000").slice(0,Math.abs(d))+"."+I.slice(Math.abs(d))}let a=t.avoidExponentsInRange;if(a&&n>=a[0]&&n<=a[1])return;let u="",f=s;i=f.match(/^(.*)\.(.*)$/),i&&(f=i[1],u=i[2]);let p=n6(Number(n).toString(),t);if(u=i6(u,f.length,t),f=a6(f,t),u&&(u=t.decimalSeparator+u),!p)return f+u;if(!u){if(f==="1")return p;if(f==="-1")return"-"+p}return f+u+t.exponentProduct+p}function Vh(e,t){let r=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/i),i=0;r!=null&&r[1]&&r[2]&&(i=parseInt(r[2]),e=r[1]);let n=(r==null?void 0:r[1])??e,s="";r=e.match(/^(.*)\.(.*)$/),r!=null&&r[1]&&r[2]&&(n=r[1],s=r[2]),i!==0&&s&&(n+=s,i-=s.length,s="");let a=t.avoidExponentsInRange;i!==0&&a&&i>=a[0]&&i<=a[1]&&([n,s]=tw(n,s,i),i=0);let u=n6(i.toString(),t);if(s&&(s=t.decimalSeparator+i6(s,n.length,t)),n=a6(n,t),!u)return n+s;if(!s){if(n==="1")return u;if(n==="-1")return"-"+u}return n+s+t.exponentProduct+u}function Q1(e,t,r){let i=new RegExp(`(\\d{${t}})(?=\\d)`,"g");return e.replace(i,`$1${r}`)}function J2(e,t,r){let i=new RegExp(`(\\d{${t}})(?=\\d)`,"g"),n=r.split("").reverse().join("");return e.split("").reverse().join("").replace(i,`$1${n}`).split("").reverse().join("")}function ew(e,t){let r=e.split("").reverse().join(""),i=t.split("").reverse().join(""),n=r.replace(/(\d{3})(?=\d)/,`$1${i}`);return n=n.replace(/(\d{2})(?=(\d{2})+,)/g,`$1${i}`),n.split("").reverse().join("")}function s6(e,t,r){let i=t.digitGroup;typeof i!="string"&&Array.isArray(i)&&(i=i[r]);let n=typeof t.digitGroupSeparator=="string"?t.digitGroupSeparator:t.digitGroupSeparator[r];return n?i==="lakh"?r===0?ew(e,n):Q1(e,3,n):i===!1||i<=0?e:r===1?Q1(e,i,n):J2(e,i,n):e}function ff(e,t){return s6(e,t,1)}function a6(e,t){return s6(e,t,0)}function tw(e,t,r){let i=e+t,n=e.length+r,s,a;return n>0?n>=i.length?(i=i+"0".repeat(n-i.length),s=i,a=""):(s=i.slice(0,n),a=i.slice(n)):(s="0",a="0".repeat(-n)+i),[s,a]}var Yi=[["alpha","\\alpha",945],["beta","\\beta",946],["gamma","\\gamma",947],["delta","\\delta",948],["epsilon","\\epsilon",949],["epsilonSymbol","\\varepsilon",1013],["zeta","\\zeta",950],["eta","\\eta",951],["theta","\\theta",952],["thetaSymbol","\\vartheta",977],["iota","\\iota",953],["kappa","\\kappa",954],["kappaSymbol","\\varkappa",1008],["lambda","\\lambda",955],["mu","\\mu",956],["nu","\\nu",957],["xi","\\xi",958],["omicron","\\omicron",959],["pi","\\pi",960],["piSymbol","\\varpi",982],["rho","\\rho",961],["rhoSymbol","\\varrho",1009],["sigma","\\sigma",963],["finalSigma","\\varsigma",962],["tau","\\tau",964],["phi","\\phi",981],["phiLetter","\\varphi",966],["upsilon","\\upsilon",965],["chi","\\chi",967],["psi","\\psi",968],["omega","\\omega",969],["Alpha","\\Alpha",913],["Beta","\\Beta",914],["Gamma","\\Gamma",915],["Delta","\\Delta",916],["Epsilon","\\Epsilon",917],["Zeta","\\Zeta",918],["Eta","\\Eta",919],["Theta","\\Theta",920],["Iota","\\Iota",921],["Kappa","\\Kappa",922],["Lambda","\\Lambda",923],["Mu","\\Mu",924],["Nu","\\Nu",925],["Xi","\\Xi",926],["Omicron","\\Omicron",927],["Rho","\\Rho",929],["Sigma","\\Sigma",931],["Tau","\\Tau",932],["Phi","\\Phi",934],["Upsilon","\\Upsilon",933],["Chi","\\Chi",935],["Psi","\\Psi",936],["Omega","\\Omega",937],["digamma","\\digamma",989],["aleph","\\aleph",8501],["bet","\\beth",8502],["gimel","\\gimel",8503],["dalet","\\daleth",8504],["ell","\\ell",8499],["turnedCapitalF","\\Finv",8498],["turnedCapitalG","\\Game",8513],["weierstrass","\\wp",8472],["eth","\\eth",240],["invertedOhm","\\mho",8487],["hBar","\\hbar",295],["hSlash","\\hslash",8463],["blackClubSuit","\\clubsuit",9827],["whiteHeartSuit","\\heartsuit",9825],["blackSpadeSuit","\\spadesuit",9824],["whiteDiamondSuit","\\diamondsuit",9826],["sharp","\\sharp",9839],["flat","\\flat",9837],["natural","\\natural",9838]],rw=[...Yi.map(([e,t,r])=>({kind:"symbol",name:e,latexTrigger:[t],parse:e})),...Yi.map(([e,t,r])=>({kind:"symbol",latexTrigger:[String.fromCodePoint(r)],parse:e}))];function hf(e,t,r,i,n){if(t&&t.minPrec>=i)return null;let s=r?[r]:["Nothing"],a=!1;for(;!a;){for(a=!0,e.skipSpace();e.match(n);)s.push("Nothing"),e.skipSpace();if(e.atTerminator(t))s.push("Nothing");else{let u=e.parseExpression({...t,minPrec:i});s.push(u??"Nothing"),a=u===null}a||(e.skipSpace(),a=!e.match(n))}return s}function Js(e=""){return(t,r)=>{if(!r)return"";let i=ce(r);if(i.length===0)return"";if(i.length===1)return t.serialize(i[0]);e={"&":"\\&",":":"\\colon","|":"\\mvert","-":"-","":"\\cdot","":"-","":"--","":"---","":"-","":"\\bullet","":"\\ldots"}[e]??e;let n=i.reduce((s,a)=>(s.push(t.serialize(a),e),s),[]);return n.pop(),re(n)}}var iw=[{latexTrigger:["\\placeholder"],kind:"symbol",parse:e=>{for(;e.match("<space>"););if(e.match("["))for(;!e.match("]")&&!e.atBoundary;)e.nextToken();for(;e.match("<space>"););if(e.match("<{>"))for(;!e.match("<}>")&&!e.atBoundary;)e.nextToken();return"Nothing"}},{name:"Function",latexTrigger:["\\mapsto"],kind:"infix",precedence:270,parse:(e,t)=>{let r=[];if(Q(t)==="Delimiter"&&(t=$(t,1)??"Nothing"),Q(t)==="Sequence")for(let n of ce(t)){if(!we(n))return null;r.push(we(n))}else{if(!we(t))return null;r=[we(t)]}let i=e.parseExpression({minPrec:270})??"Nothing";return Q(i)==="Delimiter"&&(i=$(i,1)??"Nothing"),Q(i)==="Sequence"&&(i=["Block",...ce(i)]),["Function",i,...r]},serialize:(e,t)=>{var i;let r=ce(t);return r.length<1?"()\\mapsto()":r.length===1?re(["()","\\mapsto",e.serialize($(t,1))]):r.length===2?re([e.serialize($(t,2)),"\\mapsto",e.serialize($(t,1))]):re([e.wrapString((i=ce(t))==null?void 0:i.slice(1).map(n=>e.serialize(n)).join(", "),"normal"),"\\mapsto",e.serialize($(t,1))])}},{name:"Apply",kind:"function",identifierTrigger:"apply",serialize:(e,t)=>{let r=$(t,1),i=Q(r);if(i==="InverseFunction"||i==="Derivative"){let a=e.options.applyFunctionStyle(t,e.level),u=ce(t).slice(1);return e.serializeFunction(r,e.dictionary.ids.get(i))+e.wrapString(u.map(f=>e.serialize(f)).join(", "),a)}let n=$(t,2);if(typeof r=="string"||!n){let a=ce(t).slice(1);return e.serialize(a)}if(Tt(t)===2)return re([e.wrap(r,20),"\\lhd",e.wrap(n,20)]);let s=e.options.applyFunctionStyle(t,e.level);return re(["\\operatorname{apply}",e.wrapString(e.serialize(i)+", "+e.serialize(["List",...ce(t)]),s)])}},{latexTrigger:"\\lhd",kind:"infix",precedence:20,parse:"Apply"},{latexTrigger:"\\rhd",kind:"infix",precedence:20,parse:(e,t)=>["Apply",e.parseExpression({minPrec:21})??"Nothing",t]},{name:"Assign",latexTrigger:"\\coloneq",kind:"infix",associativity:"right",precedence:260,serialize:(e,t)=>{let r=w1($(t,1));if(Q($(t,2))==="Function"){let i=$(t,2),n=w1($(i,1)),s=ce(i).slice(1);return re([e.serialize(r),e.wrapString(s.map(a=>e.serialize(a)).join(", "),e.options.applyFunctionStyle(t,e.level)),"\\coloneq",e.serialize(n)])}return re([e.serialize(r),"\\coloneq",e.serialize($(t,2))])},parse:Zo},{latexTrigger:"\\coloneqq",kind:"infix",associativity:"right",precedence:260,parse:Zo},{latexTrigger:"\\colonequals",kind:"infix",associativity:"right",precedence:260,parse:Zo},{latexTrigger:[":","="],kind:"infix",associativity:"right",precedence:260,parse:Zo},{name:"BaseForm",serialize:(e,t)=>{let r=xe($(t,2))??NaN;if(isFinite(r)&&r>=2&&r<=36){let i=xe($(t,1))??NaN;if(isFinite(i)&&Number.isInteger(i)){let n=Number(i).toString(r),s=0;if(r===2||r===10?s=4:r===16?s=2:r>16&&(s=4),s>0){let a=n;n="";for(let u=0;u<a.length;u++)u>0&&u%s===0&&(n="\\, "+n),n=a[a.length-u-1]+n}return`(\\text{${n}}_{${r}}`}}return"\\operatorname{BaseForm}("+e.serialize($(t,1))+", "+e.serialize($(t,2))+")"}},{name:"Sequence",serialize:Js(" ")},{name:"InvisibleOperator",serialize:Js("")},{name:"Delimiter",serialize:(e,t)=>{let r=e.options.groupStyle(t,e.level+1),i=$(t,1),n={Set:"{,}",List:"[,]",Tuple:"(,)",Single:"(,)",Pair:"(,)",Triple:"(,)",Sequence:"(,)",String:'""'}[Q(i)],s=n?i:["Sequence",i];if(n??(n="(,)"),Tt(t)>1){let d=Fe($(t,2));typeof d=="string"&&d.length<=3&&(n=d)}let[a,u,f]=["","",""];n.length===3?[a,u,f]=n:n.length===2?[a,f]=n:n.length===1&&(u=n);let p=i?s?Js(u)(e,s):e.serialize(i):"";return e.wrapString(p,r,a+f)}},{name:"Domain",serialize:(e,t)=>Q(t)==="Error"?e.serialize(t):`\\mathbf{${e.serialize($(t,1))}}`},{latexTrigger:["\\mathtip"],parse:e=>{let t=e.parseGroup();return e.parseGroup(),t}},{latexTrigger:["\\texttip"],parse:e=>{let t=e.parseGroup();return e.parseGroup(),t}},{latexTrigger:["\\error"],parse:e=>["Error",e.parseGroup()]},{name:"Error",serialize:(e,t)=>{let r=$(t,1);if(Fe(r)==="missing")return`\\error{${e.options.missingSymbol??"\\placeholder{}"}}`;let i=aw(e,t)||"\\blacksquare",n=Q(r)==="ErrorCode"?Fe($(r,1)):Fe(r);return n==="incompatible-domain"?we($(r,3))==="Undefined"?`\\mathtip{\\error{${i}}}{\\notin ${e.serialize($(r,2))}}`:`\\mathtip{\\error{${i}}}{\\in ${e.serialize($(r,3))}\\notin ${e.serialize($(r,2))}}`:typeof n=="string"?`\\error{${i}}`:`\\error{${i}}`}},{name:"ErrorCode",serialize:(e,t)=>{let r=Fe($(t,1));return r==="missing"?e.options.missingSymbol??"\\placeholder{}":r==="unexpected-command"||r==="unexpected-operator"||r==="unexpected-token"||r==="invalid-identifier"||r==="unknown-environment"||r==="unexpected-base"||r==="incompatible-domain"||r==="invalid-domain"?"":`\\texttip{\\error{\\blacksquare}}{\\mathtt{${r}}}`}},{name:"FromLatex",serialize:(e,t)=>`\\texttt{${sw(Fe($(t,1)))}}`},{name:"Latex",serialize:(e,t)=>t===null?"":re(Ph(t,r=>Fe(r)??e.serialize(r)))},{name:"LatexString",serialize:(e,t)=>t===null?"":re(Ph(t,r=>e.serialize(r)))},{name:"LatexTokens",serialize:nw},{name:"At",kind:"postfix",precedence:810,latexTrigger:["["],parse:Qo("]"),serialize:(e,t)=>re(["\\lbrack",Js(", ")(e,t),"\\rbrack"])},{kind:"postfix",precedence:810,latexTrigger:["\\lbrack"],parse:Qo("\\rbrack")},{kind:"postfix",precedence:810,latexTrigger:["\\left","\\lbrack"],parse:Qo("\\right","\\rbrack")},{kind:"postfix",latexTrigger:["_"],parse:Qo()},{name:"List",kind:"matchfix",openTrigger:"[",closeTrigger:"]",parse:l6,serialize:ow},{kind:"matchfix",openTrigger:"(",closeTrigger:")",parse:lw},{latexTrigger:[","],kind:"infix",precedence:20,parse:(e,t,r)=>{let i=hf(e,r,t,20,",");return i===null?null:["Delimiter",["Sequence",...i],{str:","}]}},{latexTrigger:[","],kind:"prefix",precedence:20,parse:(e,t)=>{let r=hf(e,t,null,20,",");return r===null?null:["Delimiter",["Sequence",...r],{str:","}]}},{name:"Range",latexTrigger:[".","."],kind:"infix",precedence:800,parse:uw,serialize:(e,t)=>{let r=ce(t);if(r.length===0)return"";if(r.length===1)return"1.."+e.serialize($(t,1));if(r.length===2)return e.wrap($(t,1),10)+".."+e.wrap($(t,2),10);if(r.length===3){let i=xe($(t,3)),n=xe($(t,1));return i!==null&&n!==null?e.wrap($(t,1),10)+".."+e.wrap(n+i,10)+".."+e.wrap($(t,2),10):e.wrap($(t,1),10)+"..("+(e.wrap($(t,1),275)+"+"+e.wrap($(t,3),275))+").."+e.wrap($(t,2),10)}return""}},{latexTrigger:[";"],kind:"infix",precedence:19,parse:(e,t,r)=>{let i=hf(e,r,t,19,";");return i===null?null:["Delimiter",["Sequence",...i],"';'"]}},{name:"String",latexTrigger:["\\text"],parse:e=>jh(e),serialize:(e,t)=>{let r=ce(t);return r.length===0?"\\text{}":re(["\\text{",r.map(i=>e.serialize(i)).join(""),"}"])}},{name:"Subscript",latexTrigger:["_"],kind:"infix",serialize:(e,t)=>Tt(t)===2?e.serialize($(t,1))+"_{"+e.serialize($(t,2))+"}":"_{"+e.serialize($(t,1))+"}"},{name:"Superplus",latexTrigger:["^","+"],kind:"postfix"},{name:"Subplus",latexTrigger:["_","+"],kind:"postfix"},{name:"Superminus",latexTrigger:["^","-"],kind:"postfix"},{name:"Subminus",latexTrigger:["_","-"],kind:"postfix"},{latexTrigger:["^","*"],kind:"postfix",parse:(e,t)=>["Superstar",t]},{latexTrigger:["_","*"],kind:"postfix",parse:(e,t)=>["Substar",t]},{name:"Substar",latexTrigger:["_","\\star"],kind:"postfix"},{name:"Superdagger",latexTrigger:["^","\\dagger"],kind:"postfix"},{latexTrigger:["^","\\dag"],kind:"postfix",parse:(e,t)=>["Superdagger",t]},{name:"Prime",latexTrigger:["^","\\prime"],kind:"postfix",parse:(e,t)=>Vi(e,t,1),serialize:(e,t)=>{let r=xe($(t,2))??1,i=e.serialize($(t,1));return r===1?i+"^\\prime":r===2?i+"^\\doubleprime":r===3?i+"^\\tripleprime":i+"^{("+e.serialize($(t,2))+")}"}},{latexTrigger:"^{\\prime\\prime}",kind:"postfix",parse:(e,t)=>Vi(e,t,2)},{latexTrigger:"^{\\prime\\prime\\prime}",kind:"postfix",parse:(e,t)=>Vi(e,t,3)},{latexTrigger:["^","\\doubleprime"],kind:"postfix",parse:(e,t)=>Vi(e,t,2)},{latexTrigger:["^","\\tripleprime"],kind:"postfix",parse:(e,t)=>Vi(e,t,3)},{latexTrigger:"'",kind:"postfix",precedence:810,parse:(e,t)=>Vi(e,t,1)},{latexTrigger:"\\prime",kind:"postfix",precedence:810,parse:(e,t)=>Vi(e,t,1)},{latexTrigger:"\\doubleprime",kind:"postfix",precedence:810,parse:(e,t)=>Vi(e,t,2)},{latexTrigger:"\\tripleprime",kind:"postfix",precedence:810,parse:(e,t)=>Vi(e,t,3)},{latexTrigger:["^","<{>","("],kind:"postfix",parse:(e,t,r)=>{let i=we(t);if(!i||e.getIdentifierType(i)!=="function")return null;e.addBoundary([")"]);let n=e.parseExpression(r);return!e.matchBoundary()||!e.match("<}>")?null:["Derivative",t,n]}},{name:"InverseFunction",latexTrigger:"^{-1",kind:"postfix",parse:(e,t)=>{let r=we(t);if(!r||e.getIdentifierType(r)!=="function")return null;let i=0;for(;!e.atEnd&&!e.match("<}>");)if(e.match("'"))i++;else if(e.match("\\prime"))i++;else if(e.match("\\doubleprime"))i+=2;else if(e.match("\\tripleprime"))i+=3;else return null;return i===1?["Derivative",["InverseFunction",t]]:i>0?["Derivative",["InverseFunction",t],i]:["InverseFunction",t]},serialize:(e,t)=>e.serialize($(t,1))+"^{-1}"},{name:"Derivative",serialize:(e,t)=>{let r=xe($(t,2))??1,i=e.serialize($(t,1));return r===1?i+"^{\\prime}":r===2?i+"^{\\doubleprime}":r===3?i+"^{\\tripleprime}":i+"^{("+e.serialize($(t,2))+")}"}},{kind:"environment",name:"Which",identifierTrigger:"cases",parse:pf,serialize:(e,t)=>{let r=[],i=ce(t);if(i.length>0)for(let n=0;n<=i.length-2;n+=2){let s=[];s.push(e.serialize(i[n+1])),s.push(e.serialize(i[n])),r.push(s.join("&"))}return re(["\\begin{cases}",r.join("\\\\"),"\\end{cases}"])}},{kind:"environment",identifierTrigger:"dcases",parse:pf},{kind:"environment",identifierTrigger:"rcases",parse:pf}];function jh(e,t){if(!e.match("<{>"))return"''";let r=[],i="",n=null;for(;!e.atEnd&&!e.match("<}>");)if(e.peek==="<{>")r.push(jh(e));else if(e.match("\\textbf")&&e.match("<{>"))r.push(jh(e,{"font-weight":"bold"}));else if(e.match("\\color")){let a=e.parseStringGroup();a!==null&&(n!==null&&i?r.push(["Style",i,nf(n)]):i&&r.push(["String",i]),i="",n={color:a})}else if(e.match("<space>"))i+=" ";else if(e.match("<$>")){let a=e.index,u=e.parseExpression()??"Nothing";e.skipSpace(),e.match("<$>")?r.push(u):(i+="$",e.index=a)}else if(e.match("<$$>")){let a=e.index,u=e.parseExpression()??"Nothing";e.skipSpace(),e.match("<$$>")?r.push(u):(i+="$$",e.index=a)}else{let a=e.matchChar()??e.nextToken();i+={"\\enskip":"","\\enspace":"","\\quad":"","\\qquad":"","\\space":"","\\ ":"","\\;":"","\\,":"","\\:":"","\\!":"","\\{":"{","\\}":"}","\\$":"$","\\&":"&","\\#":"#","\\%":"%","\\_":"_","\\textbackslash":"\\","\\textasciitilde":"~","\\textasciicircum":"^","\\textless":"<","\\textgreater":">","\\textbar":"|","\\textunderscore":"_","\\textbraceleft":"{","\\textbraceright":"}","\\textasciigrave":"`","\\textquotesingle":"'","\\textquotedblleft":"","\\textquotedblright":"","\\textquotedbl":'"',"\\textquoteleft":"","\\textquoteright":"","\\textbullet":"","\\textdagger":"","\\textdaggerdbl":"","\\textsection":"","\\textparagraph":"","\\textperiodcentered":"","\\textellipsis":"","\\textemdash":"","\\textendash":"","\\textregistered":"","\\texttrademark":"","\\textdegree":""}[a]??a}n!==null&&i?r.push(["Style",`'${i}'`,nf(n)]):i&&r.push(`'${i}'`);let s;return r.length===1?s=r[0]:r.every(a=>Fe(a)!==null)?s="'"+r.map(a=>Fe(a)).join()+"'":s=["String",...r],t?["Style",s,nf(t)]:s}function nw(e,t){return t===null?"":re(Ph(t,r=>{let i=Fe(r);return i===null?e.serialize(r):i==="<{>"?"{":i==="<}>"?"}":i==="<$>"?"$":i==="<$$>"?"$$":i==="<space>"?" ":i}))}function sw(e){return e===null?"":e.replace(/[{}\[\]\\:\-\$%]/g,t=>({"{":"\\lbrace ","}":"\\rbrace ","[":"\\lbrack ","]":"\\rbrack ",":":"\\colon ","\\":"\\backslash "})[t]??"\\"+t)}function aw(e,t){let r=$(t,2);return r?Q(r)==="LatexString"?Fe($(r,1))??"":Q(r)==="Hold"?e.serialize($(r,1)):e.serialize(r):""}function Vi(e,t,r){let i=Q(t);if(i==="Derivative"||i==="Prime"){let s=xe($(t,2))??1;return[i,Oe($(t,1)),s+r]}let n=we(t);return n&&e.getIdentifierType(n)==="function"||Q(t)?r===1?["Derivative",t]:["Derivative",t,r]:r===1?["Prime",Oe(t)]:["Prime",Oe(t),r]}function lw(e,t){if(xt(t))return["Delimiter"];let r=Q(t);if(r==="Delimiter"&&$(t,2)!==null){let i=Fe($(t,2));if((i==null?void 0:i.length)===1)return["Delimiter",$(t,1)??"Nothing",{str:`(${i})`}]}return r==="Matrix"&&(Fe($(t,2))??"..")===".."?["Matrix",$(t,1)]:["Delimiter",t]}function l6(e,t){if(xt(t))return["List"];let r=Q(t);if(r==="Range"||r==="Linspace")return t;if(r==="Sequence")return["List",...ce(t)];if(r==="Delimiter"){let i=Fe($(t,2))??"...";if(i===";"||i===".;.")return["List",...(ce($(t,1))??[]).map(n=>l6(e,n))];if(i===","||i===".,.")return t=$(t,1),Q(t)==="Sequence"?["List",...ce(t)]:["List",t??"Nothing"]}return["List",t]}function ow(e,t){return Tt(t)>1&&ce(t).every(r=>{let i=Q(r);return um(i)||om(i)})?re(["\\begin{cases}",Js("\\\\")(e,t),"\\end{cases}"]):re(["\\bigl\\lbrack",Js(", ")(e,t),"\\bigr\\rbrack"])}function uw(e,t){if(t===null)return null;let r=e.parseExpression({minPrec:270});if(r===null)return null;if(e.matchAll([".","."])){let i=e.parseExpression({minPrec:270});if(i===null)return null;let n=xe(t),s=xe(r);return n!==null&&s!==null?s<=n?null:s-n===1?["Range",t,i]:["Range",t,i,s-n]:["Range",t,i,["Subtract",r,t]]}return["Range",t,r]}var h0={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","":"\\llbrack","":"\\rrbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","":"\\Vert","\\":"\\backslash","":"\\lceil","":"\\rceil","":"\\lfloor","":"\\rfloor","":"\\ulcorner","":"\\urcorner","":"\\llcorner","":"\\lrcorner","":"\\lmoustache","":"\\rmoustache"};function Zo(e,t){if(Q(t)==="InvisibleOperator"&&Tt(t)===2&&Q($(t,2))==="Delimiter"){let n=we($(t,1));if(!n)return null;let s=e.parseExpression({minPrec:0});if(s===null)return null;let a=$($(t,2),1),u=[];return Q(a)==="Sequence"?u=[...ce(a)]:a&&(u=[a]),["Assign",n,["Function",s,...u??[]]]}let r=Q(t);if(r){let n=ce(t),s=e.parseExpression({minPrec:0});return s===null?null:["Assign",r,["Function",s,...n]]}if(!we(t))return null;let i=e.parseExpression({minPrec:0});return i===null?null:["Assign",t,i]}function pf(e){let t=e.parseTabular();if(!t)return["List"];if(t.every(i=>{if(i.length!==1)return!1;let n=Q(i[0]);return om(n)||um(n)}))return["List",...t.map(i=>i[0])];let r=[];for(let i of t)if(i.length===1)r.push("True"),r.push(i[0]);else if(i.length===2){let n=Fe(i[1]);r.push(n?"True":_7(i[1])??"True"),r.push(i[0])}return["Which",...r]}function Qo(...e){return(t,r)=>{if(!we(r)&&Q(r)!=="List")return null;let i=null;return e.length===0&&(i=t.parseGroup()),i??(i=t.parseExpression({minPrec:0})),i===null||e.length>0&&!t.matchAll(e)||Fe(i)!==null?null:(Q(i)==="Delimiter"&&(i=$(i,1)??"Nothing"),Q(i)==="Sequence"?["At",r,...ce(i)]:["At",r,i])}}var Hh={deg:e=>`${e}\\degree`,prime:e=>`${e}^{\\prime}`,dprime:e=>`${e}^{\\doubleprime}`,ring:e=>`\\mathring{${e}}`,hat:e=>`\\hat{${e}}`,tilde:e=>`\\tilde{${e}}`,vec:e=>`\\vec{${e}}`,bar:e=>`\\overline{${e}}`,underbar:e=>`\\underline{${e}}`,dot:e=>`\\dot{${e}}`,ddot:e=>`\\ddot{${e}}`,tdot:e=>`\\dddot{${e}}`,qdot:e=>`\\ddddot{${e}}`,acute:e=>`\\acute{${e}}`,grave:e=>`\\grave{${e}}`,breve:e=>`\\breve{${e}}`,check:e=>`\\check{${e}}`},Uh={upright:e=>`\\mathrm{${e}}`,italic:e=>`\\mathit{${e}}`,bold:e=>`\\mathbf{${e}}`,script:e=>`\\mathscr{${e}}`,fraktur:e=>`\\mathfrak{${e}}`,doublestruck:e=>`\\mathbb{${e}}`,blackboard:e=>`\\mathbb{${e}}`,calligraphic:e=>`\\mathcal{${e}}`,gothic:e=>`\\mathfrak{${e}}`,sansserif:e=>`\\mathsf{${e}}`,monospace:e=>`\\mathtt{${e}}`},cw=class{constructor(e,t){this.level=-1,this.dictionary=e,this.options=t}wrap(e,t){if(e==null)return"";if(t===void 0)return this.wrapString(this.serialize(e),this.options.groupStyle(e,this.level+1));if(typeof e=="number"||O0(e)){let i=xe(e);return i!==null&&i<0&&t>275?this.wrap(e):this.serialize(e)}let r=Q(e);if(r&&r!=="Delimiter"&&r!=="Subscript"){let i=this.dictionary.ids.get(r);if(i&&(i.kind==="symbol"||i.kind==="expression"||i.kind==="prefix"||i.kind==="infix"||i.kind==="postfix")&&i.precedence<t)return this.wrapString(this.serialize(e),this.options.applyFunctionStyle(e,this.level))}return this.serialize(e)}wrapShort(e){if(e==null)return"";let t=this.serialize(e);if(we(e)!==null||la(e)&&!/^(-|\.)/.test(t))return t;let r=Q(e);return r==="Delimiter"&&Tt(e)===1||r!=="Add"&&r!=="Negate"&&r!=="Subtract"&&r!=="PlusMinus"&&r!=="Multiply"?t:this.wrapString(t,this.options.groupStyle(e,this.level+1))}wrapString(e,t,r){if(t==="none")return e;r??(r="()");let i=(r==null?void 0:r[0])??".",n=(r==null?void 0:r[1])??".";return i==='"'?i="``":i==="|"?i="\\lvert":i=h0[i]??i,n==='"'?n="''":n==="|"?n="\\rvert":n=h0[n]??n,i==="."&&n==="."?e:((i==="."||n===".")&&t==="normal"&&(t="scaled"),t==="scaled"?`\\left${i}${e}\\right${n}}`:t==="big"?`${`\\Bigl${i}`}${e}${`\\Bigr${n}`})`:i+e+n)}wrapArguments(e){return this.wrapString(ce(e).map(t=>this.serialize(t)).join(", "),this.options.applyFunctionStyle(e,this.level))}serializeSymbol(e,t){var r;return(t==null?void 0:t.kind)==="function"?mf(we(e)??"")??"":((r=t==null?void 0:t.serialize)==null?void 0:r.call(t,this,e))??mf(we(e))??""}serializeFunction(e,t){if(t!=null&&t.serialize)return t.serialize(this,e);let r=Q(e);return mf(r,"auto")+this.wrapArguments(e)}serialize(e){if(e==null)return"";this.level+=1;try{let t=(()=>{let r=K2(e,this.options);if(r)return r;let i=Fe(e);if(i!==null)return`\\text{${i}}`;let n=we(e);if(n!==null)return this.serializeSymbol(e,this.dictionary.ids.get(n));let s=Q(e);if(s){let a=this.dictionary.ids.get(s);return this.serializeFunction(e,a)}throw Error(`Syntax error ${e?JSON.stringify(e):""}`)})();return this.level-=1,t??""}catch{}return this.level-=1,""}applyFunctionStyle(e,t){return this.options.applyFunctionStyle(e,t)}groupStyle(e,t){return this.options.groupStyle(e,t)}rootStyle(e,t){return this.options.rootStyle(e,t)}fractionStyle(e,t){return this.options.fractionStyle(e,t)}logicStyle(e,t){return this.options.logicStyle(e,t)}powerStyle(e,t){return this.options.powerStyle(e,t)}numericSetStyle(e,t){return this.options.numericSetStyle(e,t)}};function fw(e){var a;let t=((a=e.match(/^([^_]+)/))==null?void 0:a[1])??"",r=Yi.findIndex(u=>t===u[0]);if(r>=0)return[Yi[r][1],e.substring(Yi[r][0].length)];let i={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"};if(r=Object.keys(i).findIndex(u=>e.startsWith(u)),r>=0){let u=Object.keys(i)[r];return[i[u],e.substring(u.length)]}let n=e.codePointAt(0);if(r=Yi.findIndex(u=>u[2]===n),r>=0)return[Yi[r][1],e.substring(1)];let s={plus:"+",minus:"-",pm:"\\pm",ast:"\\ast",dag:"\\dag",ddag:"\\ddag",hash:"\\#",bottom:"\\bot",top:"\\top",bullet:"\\bullet",circle:"\\circ",diamond:"\\diamond",times:"\\times",square:"\\square",star:"\\star"};if(r=Object.keys(s).findIndex(u=>t===u),r>=0){let u=Object.keys(s)[r];return[s[u],e.substring(u.length)]}return[t,e.substring(t.length)]}function hw(e){let[t,r]=fw(e),i=[];for(;r.length>0;){let s=r.match(/^_([a-zA-Z]+)(.*)/);if(!s||!Hh[s[1]])break;i.push(s[1]),r=s[2]}let n=[];for(;r.length>0;){let s=r.match(/^_([a-zA-Z]+)(.*)/);if(!s||!Uh[s[1]])break;n.push(s[1]),r=s[2]}return[t,i,n,r]}function p0(e,t=!0,r="auto"){let[i,n,s,a]=hw(e);for(let u of n)Hh[u]&&(i=Hh[u](i));if(t){let u=[],f=[],p=i.match(/^([^\d].*?)(\d+)$/);for(p&&(f.push(p[2]),i=p[1]);a.length>0;)if(a.startsWith("__")){let[d,b]=p0(a.substring(2),!1,"none");u.push(d),a=b}else if(a.startsWith("_")){let[d,b]=p0(a.substring(1),!1,"none");f.push(d),a=b}else break;u.length>0&&(i=`${i}${Zu("^",u.join(","))}`),f.length>0&&(i=`${i}${Zu("_",f.join(","))}`)}for(let u of s)Uh[u]&&(i=Uh[u](i));if(s.length===0&&r!=="none")switch(r){case"auto":h7(i)>1&&(i=`\\mathrm{${i}}`);break;case"operator":i=`\\operatorname{${i}}`;break;case"italic":i=`\\mathit{${i}}`;break;case"upright":i=`\\mathrm{${i}}`;break}return[i,a]}function mf(e,t="auto"){if(e===null)return null;if(F0.test(e))return e;let r=e.match(/^(_+)(.*)/);if(r){let[s,a]=p0(r[2],!0,"none");return`\\operatorname{${"\\_".repeat(r[1].length)+s+a}}`}let[i,n]=p0(e,!0,t);return n.length>0?`\\operatorname{${e}}`:i}function pw(e,t,r){if(r.invisibleMultiply&&(!/#1/.test(r.invisibleMultiply)||!/#2/.test(r.invisibleMultiply)))throw Error("Expected 2 arguments (#1 and #2) for invisibleMultiply");return new cw(t,r).serialize(e)}var Y1={PositiveInfinity:"+oo",NegativeInfinity:"-oo",ComplexInfinity:"~oo",NaN:"NaN",Pi:"pi",ExponentialE:"e",ImaginaryUnit:"i",alpha:"alpha",beta:"beta",gamma:"gamma",delta:"delta",epsilon:"epsilon",epsilonSymbol:"varepsilon",zeta:"zeta",eta:"eta",theta:"theta",thetaSymbol:"vartheta",iota:"iota",kappa:"kappa",lambda:"lambda",mu:"mu",nu:"nu",xi:"xi",omicron:"omicron",pi:"pi",rho:"rho",sigma:"sigma",tau:"tau",upsilon:"upsilon",phi:"phi",phiSymbol:"varphi",chi:"chi",psi:"psi",omega:"omega",Gamma:"Gamma",Delta:"Delta",Theta:"Theta",Lambda:"Lambda",Xi:"Xi",Sigma:"Sigma",Upsilon:"Upsilon",Phi:"Phi",Psi:"Psi",Omega:"Omega"},X1={Add:[(e,t)=>{var r;return((r=e.ops)==null?void 0:r.reduce((i,n)=>{if(n.operator==="Negate"){let s=t(n.op1,10);return i===""?`-${s}`:s.startsWith("+")?`${i} - ${s.substring(1)}`:s.startsWith("-")?`${i} + ${s.substring(1)}`:`${i} - ${s}`}return K1(i,t(n,10))},""))??""},11],Negate:[(e,t)=>{let r=t(e.op1,14);return r==="Power"?`-(${r})`:`-${r}`},14],Subtract:[(e,t)=>{var r;return((r=e.ops)==null?void 0:r.reduce((i,n)=>{let s=t(n,10);return i===""?s:s.startsWith("-")?`${i} - (${s})`:`${i} - ${s}`},""))??""},11],Multiply:[(e,t)=>{if(!e.ops)return"";if(e.nops===2){let r=e.op1.numericValue;if(r!==null){typeof r!="number"&&r.im!==0&&gf(t(e.op2,12),K1(r.re.toString(),`${r.im}i`));let i=e.op2;if((i.symbol||i.operator==="Power"||i.operator==="Square"||typeof Gh[i.operator]=="string")&&ba(r)&&r[0]===1){let n=r[1];return`${t(i,12)}/${n}`}return gf(t(e.op1,12),t(e.op2,12))}}return e.ops.reduce((r,i)=>gf(r,t(i,12)),"")},12],Divide:["/",13],Power:[(e,t)=>{let r=t(e.op2,14);if(r==="1")return t(e.op1);if(r==="(1/2)"||r==="1/2"||r==="0.5")return`sqrt(${t(e.op1)})`;if(r==="-0.5")return`(1/sqrt(${t(e.op1)}))`;let i=t(e.op1,14);return i.startsWith("-")&&(i=`(${i})`),r.length===1?`${i}^${r}`:`${i}^${gs(r)}`},15],Equal:["===",8],NotEqual:["!==",8],LessEqual:["<=",9],GreaterEqual:[">=",9],Less:["<",9],Greater:[">",9],And:["&&",4],Or:["||",3],Not:["!",14]},Gh={Abs:(e,t)=>`|${t(e.op1)}|`,Sin:"sin",Cos:"cos",Tan:"tan",Sec:"sec",Csc:"csc",Arcsin:"arcsin",Arccos:"arccos",Arctan:"arctan",Sinh:"sinh",Cosh:"cosh",Tanh:"tanh",Sech:"sech",Csch:"csch",Coth:"coth",Ceil:"ceil",Exp:"exp",Factorial:(e,t)=>`${t(e.op1,12)}!`,Floor:"floor",Log:"log",Ln:"ln",Log10:"log10",Sqrt:"sqrt",Root:(e,t)=>{let r=e.op1,i=e.op2;return i.is(2)?`sqrt${gs(t(r))}`:`root${gs(t(i))}${gs(t(r))}`},Square:(e,t)=>`${t(e.op1,12)}^2`,Det:"det",Dim:"dim",Mod:"mod",GCD:"gcd",LCM:"lcm",Lub:"lub",Glb:"glb",Max:"max",Min:"min",Sum:(e,t)=>df(e,"sum",t),Product:(e,t)=>df(e,"prod",t),Integrate:(e,t)=>df(e,"int",t),Delimiter:(e,t)=>{var r;return mw(e.ops[0],(r=e.ops[1])==null?void 0:r.string,t)},Sequence:(e,t)=>e.nops===0?"":e.ops.map(r=>t(r)).join(" "),List:(e,t)=>{var r;return`[${((r=e.ops)==null?void 0:r.map(i=>t(i)))??""}]`},Single:(e,t)=>`(${e.ops.map(r=>t(r)).join(", ")})`,Pair:(e,t)=>`(${e.ops.map(r=>t(r)).join(", ")})`,Triple:(e,t)=>`(${e.ops.map(r=>t(r)).join(", ")})`,Tuple:(e,t)=>`(${e.ops.map(r=>t(r)).join(", ")})`,Function:(e,t)=>`(${e.ops.slice(1).map(r=>t(r)).join(", ")}) |-> {${t(e.op1)}}`,Domain:e=>JSON.stringify(e.json),Error:(e,t)=>e.nops===1?`Error(${t(e.op1)})`:e.nops===2?e.op1.string?`Error("${e.op1.string}", ${t(e.op2)})`:`Error(${t(e.op1)}, ${t(e.op2)})`:`Error(${e.ops.map(r=>t(r)).join(", ")})`,LatexString:e=>`"${e.op1.string??""}"`};function df(e,t,r){let i=e.op2,n=i==null?void 0:i.op1,s=i==null?void 0:i.op2,a=i==null?void 0:i.op3;n.symbol==="Nothing"&&(n=null),s.symbol==="Nothing"&&(s=null),a.symbol==="Nothing"&&(a=null);let u=t;return n&&s&&(u+=`_(${r(n)}=${r(s)})`),a&&(u+=`^${gs(r(a))}`),u+gs(r(e.op1))}function mw(e,t,r){t||(t="(,)");let i="",n="",s="";if(t.length===1&&(i=t),t.length===2&&(n=t[0],s=t[1]),t.length===3&&(n=t[0],i=t[1],s=t[2]),!e)return`${n}${s}`;let a=[e.op1];return e.op1.operator==="Sequence"&&(a=e.op1.ops),`${n}${a.map(u=>r(u)).join(i)}${s}`}function gs(e,t=0,r=-1){return t>r&&!/^\(.+\)$/.test(e)?`(${e})`:e}function Yo(e,t={}){var r;return(r=t.symbols)!=null&&r[e]?t.symbols[e]:Y1[e]?Y1[e]:e.length===1?e:`"${e}"`}function Wh(e,t={},r=0){var s,a,u;if(e.symbol)return Yo(e.symbol,t);let i=(f,p=0)=>Wh(f,t,p);if(e.string)return e.string;let n=e.numericValue;if(n!==null)return e.engine,e.isNaN?Yo("NaN",t):e.isFinite===!1?e.isNegative!==!0&&e.isPositive!==!0?Yo("ComplexInfinity",t):Yo(e.isNegative?"NegativeInfinity":"PositiveInfinity",t):n.toString();if(e.operator){let f=t.operators?{...X1,...t.operators}:X1,[p,d]=f[e.operator]??[];if(p){let x="";if(typeof p=="function")x=p(e,i);else{if(e.nops===1)return`${p}${i(e.op1,d+1)}`;x=((s=e.ops)==null?void 0:s.map(I=>i(I,d+1)).join(` ${p} `))??""}return gs(x,r,d)}let b=(t.functions?{...Gh,...t.functions}:Gh)[e.operator];return typeof b=="function"?b(e,i):typeof b=="string"?`${b}(${((a=e.ops)==null?void 0:a.map(x=>i(x)).join(", "))??""})`:`${e.operator}(${((u=e.ops)==null?void 0:u.map(x=>i(x)).join(", "))??""})`}return JSON.stringify(e.json)}function gf(e,t){return e?t?e==="1"?t:t==="1"?e:(t.startsWith("-")&&(t=`(${t})`),e==="-1"?`-${t}`:t==="-1"?`-${e}`:e.match(/^[-+]?\d+$/)&&t.match(/^[a-zA-Z\(]/)?e+t:`${e} * ${t}`):e:t}function K1(e,t){return e?t?e==="0"?t:t==="0"?e:t.startsWith("-")?`${e} - ${t.substring(1)}`:`${e} + ${t}`:e:t}function J1(e,t,r,i,n){if(t.numericValue!==null&&t.isNegative){let s=t.numericValue;if(typeof s=="number")return Se(e,"Subtract",[r,e.number(-s)],i,n);if(G(t.type,"rational"))return Se(e,"Subtract",[r,e.number(s.neg())],i,n)}return t.operator==="Negate"&&r.operator!=="Negate"?Se(e,"Subtract",[r,t.op1],i,n):null}function dw(e,t,r,i,n){var a,u,f,p;let s=i.exclude;if(t==="Add"&&r.length===2&&!s.includes("Subtract")){let d=J1(e,r[0],r[1],i,n)??J1(e,r[1],r[0],i,n);if(d)return d}if(t==="Divide"&&r.length===2&&s.includes("Divide"))return Se(e,"Multiply",[r[0],e._fn("Power",[r[1],e.NegativeOne])],i,n);if(t==="Multiply"&&!s.includes("Negate")&&r[0].im===0&&r[0].re===-1)return r.length===2?Se(e,"Negate",[r[1]],i):Se(e,"Negate",[e._fn("Multiply",[...r.slice(1)].sort(Ot))],i,n);if(t==="Multiply"&&!s.includes("Divide")){let d=new an(e,r,{canonical:!1}).asRationalExpression();if(d.operator==="Divide")return Se(e,d.operator,d.ops,i,n)}if(t==="Power"){if(!s.includes("Exp")&&((a=r[0])==null?void 0:a.symbol)==="ExponentialE")return Se(e,"Exp",[r[1]],i,n);if(((u=r[1])==null?void 0:u.numericValue)!==null){let d=rt(r[1]);if(d===2&&!s.includes("Square"))return Se(e,"Square",[r[0]],i,n);if(d!==null&&d<0&&!s.includes("Divide"))return Se(e,"Divide",[e.One,d===-1?r[0]:r[0].pow(-d)],i,n);let b=r[1].re;if(!s.includes("Sqrt")&&b===.5)return Se(e,"Sqrt",[r[0]],i,n);if(!s.includes("Sqrt")&&b===-.5)return Se(e,"Divide",[e.One,e._fn("Sqrt",[r[0]])],i,n);if(ba(b)){let x=Ax(b),I=Ix(b);if(x===1){if(!s.includes("Sqrt")&&I===2)return Se(e,"Sqrt",[r[0]],i,n);if(!s.includes("Root"))return Se(e,"Root",[r[0],e.number(b[1])],i,n)}if(x===-1){if(!s.includes("Sqrt")&&I===2)return Se(e,"Divide",[e.One,e._fn("Sqrt",[r[0]])],i,n);if(!s.includes("Root"))return Se(e,"Divide",[e.One,e._fn("Root",[r[0],e.number(b[1])])],i,n)}}}}if(t==="Add"&&r.length===2&&!s.includes("Subtract")){if(((f=r[1])==null?void 0:f.numericValue)!==null){let d=rt(r[1]);if(d!==null&&d<0)return Se(e,"Subtract",[r[0],e.number(-d)],i,n)}if(((p=r[1])==null?void 0:p.operator)==="Negate")return Se(e,"Subtract",[r[0],r[1].op1],i,n)}if(t==="Tuple"){if(r.length===1&&!s.includes("Single"))return Se(e,"Single",r,i,n);if(r.length===2&&!s.includes("Pair"))return Se(e,"Pair",r,i,n);if(r.length===3&&!s.includes("Triple"))return Se(e,"Triple",r,i,n)}return Se(e,t,r,i,n)}function Se(e,t,r,i,n){var f,p;let s=i.exclude;if(t==="Negate"&&r.length===1){let d=(f=r[0])==null?void 0:f.numericValue;if(d!==null){if(typeof d=="number")return rn(e,-d,i);if(d instanceof zt||d instanceof je)return rn(e,d.neg(),i);if(ba(d))return rn(e,r0(d),i)}}if(typeof t=="string"&&s.includes(t)){if(t==="Rational"&&r.length===2)return Se(e,"Divide",r,i,n);if(t==="Complex"&&r.length===2)return Se(e,"Add",[r[0],e._fn("Multiply",[r[1]??e.symbol("Undefined"),e.I])],i,n);if(t==="Sqrt"&&r.length===1)return Se(e,"Power",[r[0],s.includes("Half")?e.number([1,2]):e.Half],i,n);if(t==="Root"&&r.length===2&&((p=r[1])==null?void 0:p.numericValue)!==null){let d=rt(r[1]);if(d===2)return Se(e,"Sqrt",[r[0]],i);if(d!==null)return d<0?Se(e,"Divide",[e.One,e._fn("Power",[r[0]??e.symbol("Undefined"),e.number([1,-d])])],i,n):Se(e,"Power",[r[0],e.number([1,-d])],i,n)}if(t==="Square"&&r.length===1)return Se(e,"Power",[r[0],e.number(2)],i,n);if(t==="Exp"&&r.length===1)return Se(e,"Power",[e.E,r[0]],i,n);if(t==="Pair"||t=="Single"||t==="Triple")return Se(e,"Tuple",r,i,n);if(t==="Subtract"&&r.length===2)return Se(e,"Add",[r[0],e._fn("Negate",[r[1]??e.symbol("Undefined")])],i,n);if(t==="Subtract"&&r.length===1)return Se(e,"Negate",r,i,n)}let a=[t,...r.map(d=>d?o6(e,d,i):"Undefined")],u={...n??{}};return i.metadata.includes("latex")?u.latex=u.latex??e.box({fn:a}).latex:u.latex="",i.metadata.includes("wikidata")||(u.wikidata=""),!u.latex&&!u.wikidata&&i.shorthands.includes("function")?a:u.latex&&u.wikidata?{fn:a,latex:u.latex,wikidata:u.wikidata}:u.latex?{fn:a,latex:u.latex}:u.wikidata?{fn:a,wikidata:u.wikidata}:{fn:a}}function gw(e,t){return e=e,t.shorthands.includes("string")?`'${e}'`:{str:e}}function wn(e,t,r,i){var n;if(t==="Half"&&r.exclude.includes("Half"))return rn(e,[1,2],r,i);if(i={...i},r.metadata.includes("latex")?(i.latex=i.latex??e.box({sym:t}).latex,i.latex!==void 0&&(i.latex=i.latex)):i.latex=void 0,r.metadata.includes("wikidata")){if(i.wikidata===void 0){let s=(n=e.lookupSymbol(t))==null?void 0:n.wikidata;s!==void 0&&(i.wikidata=s)}}else i.wikidata=void 0;return t=t,i.latex===void 0&&i.wikidata===void 0&&r.shorthands.includes("symbol")?t:i.latex!==void 0&&i.wikidata!==void 0?{sym:t,latex:i.latex,wikidata:i.wikidata}:i.latex!==void 0?{sym:t,latex:i.latex}:i.wikidata!==void 0?{sym:t,wikidata:i.wikidata}:{sym:t}}function e4(e,t){if(!t.repeatingDecimal)return e;let[r,i,n,s]=e.match(/^(.*)\.([0-9]+)([e|E][-+]?[0-9]+)?$/)??[];if(!n)return e.toLowerCase();let a=n[n.length-1];n=n.slice(0,-1);let u=16,f="";for(let p=0;p<n.length-u;p++){f=n.substring(0,p);for(let d=0;d<=u;d++){let b=n.substring(p,p+d+1),x=Math.floor((n.length-f.length)/b.length);if(x<3)break;if((f+b.repeat(x+1)).startsWith(n))return b==="0"?a==="0"?i+"."+f+(s??""):e:i+"."+f+"("+b+")"+(s??"")}}for(n+=a;n.endsWith("0");)n=n.slice(0,-1);return typeof t.fractionalDigits=="number"&&(n=n.slice(0,t.fractionalDigits)),s?`${i}.${n}${s.toLowerCase()}`:`${i}.${n}`}function rn(e,t,r,i){i={...i},r.metadata.includes("latex")||(i.latex=void 0);let n=i.latex===void 0&&i.wikidata===void 0&&!r.metadata.includes("latex")&&r.shorthands.includes("number"),s=r.exclude;if(t instanceof Lt){if(t.isNaN)return wn(e,"NaN",r,i);if(t.isPositiveInfinity)return wn(e,"PositiveInfinity",r,i);if(t.isNegativeInfinity)return wn(e,"NegativeInfinity",r,i);if(t.isComplexInfinity)return wn(e,"ComplexInfinity",r,i);if(n){if(t.isZero)return 0;if(t.isOne)return 1;if(t.isNegativeOne)return-1}if(t instanceof Vt){let f;return tl(t.rational)?f=rn(e,t.rational[0],r):f=["Rational",rn(e,t.rational[0],r),rn(e,t.rational[1],r)],t.radical===1?t.im===0?f:typeof f=="number"?["Complex",f,t.im]:["Add",f,["Complex",0,t.im]]:Zr(t.rational)?t.im===0?["Sqrt",t.radical]:["Add",["Sqrt",t.radical],["Complex",0,t.im]]:$h(t.rational)?t.im===0?["Negate",["Sqrt",t.radical]]:["Add",["Negate",["Sqrt",t.radical]],["Complex",0,t.im]]:t.im===0?["Multiply",f,["Sqrt",t.radical]]:["Add",["Multiply",f,["Sqrt",t.radical]],["Complex",0,t.im]]}if(t.im===0){let f=t.bignumRe??t.re;return rn(e,f,r,i)}return Number.isFinite(t.im)?Se(e,"Complex",[e.number(t.bignumRe??t.re),e.number(t.im)],r,{...i,wikidata:"Q11567"}):wn(e,"ComplexInfinity",r,i)}let a="";if(t instanceof zt){let f;if(t.isNaN())f="NaN";else if(!t.isFinite())f=t.isPositive()?"PositiveInfinity":"NegativeInfinity";else{if(n&&s0(t))return t.toNumber();if(t.isInteger()&&t.e<t.precision()+4)a=t.toFixed(0);else{let p=r.fractionalDigits,d;if(p==="max"?d=t.toString():p==="auto"?d=t.toPrecision(e.precision):d=t.toDecimalPlaces(p).toString(),a=e4(d,r),n){let b=t.toNumber();if(b.toString()===a)return b}}}return r.metadata.includes("latex")&&(i.latex=i.latex??e.box(f??{num:a}).latex),f?i.latex!==void 0?{sym:f,latex:i.latex}:n?f:{sym:f}:i.latex!==void 0?{num:a,latex:i.latex}:n?a:{num:a}}if(t instanceof je)return t.isInfinite()?wn(e,"ComplexInfinity",r,i):t.isNaN()?(a="NaN",r.metadata.includes("latex")&&(i.latex=i.latex??e.box({num:a}).latex),i.latex!==void 0?{num:a,latex:i.latex}:{num:a}):Se(e,"Complex",[e.number(t.re),e.number(t.im)],r,{...i,wikidata:"Q11567"});if(ba(t)){let f=!s.includes("Rational");return n&&r.shorthands.includes("function")&&bt(t)?t[0]===1&&t[1]===2&&!s.includes("Half")?wn(e,"Half",r,i):[f?"Rational":"Divide",t[0],t[1]]:Se(e,f?"Rational":"Divide",[e.number(t[0]),e.number(t[1])],r,{...i})}if(typeof t=="bigint")if(t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER)t=Number(t);else return r.metadata.includes("latex")&&(i.latex=i.latex??e.box({num:t.toString()}).latex),i.latex!==void 0?{num:t.toString(),latex:i.latex}:n?Ii(t,r.fractionalDigits):{num:gr(t,r.fractionalDigits)};let u;return Number.isNaN(t)?u="NaN":Number.isFinite(t)?a=e4(t.toString(),r):u=t>0?"PositiveInfinity":"NegativeInfinity",r.metadata.includes("latex")&&(i.latex=i.latex??e.box({num:a}).latex),u?i.latex!==void 0?{sym:u,latex:i.latex}:n?u:{sym:u}:i.latex!==void 0?{num:a,latex:i.latex}:n&&a===t.toString()?t:{num:a}}function o6(e,t,r){let i=t.scope?t.wikidata:void 0;return t.numericValue!==null?rn(e,t.numericValue,r,{latex:t.verbatimLatex}):t.rank>0?t.json:t.string!==null?gw(t.string,r):t.symbol!==null?wn(e,t.symbol,r,{latex:t.verbatimLatex,wikidata:i}):t.ops?t.isValid&&(t.isCanonical||t.isStructural)&&r.prettify?dw(e,t.operator,t.structural.ops,r,{latex:t.verbatimLatex,wikidata:i}):Se(e,t.operator,t.structural.ops,r,{latex:t.verbatimLatex,wikidata:i}):t.json}var Jt=class{get head(){return this.operator}constructor(e,t){this.engine=e,(t==null?void 0:t.latex)!==void 0&&(this.verbatimLatex=t.latex)}isSame(e){return c0(this,e)}isEqual(e){return s2(this,e)}isLess(e){let t=Vo(this,e);if(t!==void 0)return t==="<"}isLessEqual(e){let t=Vo(this,e);if(t!==void 0)return t==="<="||t==="<"||t==="="}isGreater(e){let t=Vo(this,e);if(t!==void 0)return t===">"}isGreaterEqual(e){let t=Vo(this,e);if(t!==void 0)return t===">="||t===">"||t==="="}valueOf(){return this.symbol==="True"?!0:this.symbol==="False"?!1:this.symbol==="NaN"?NaN:this.symbol==="PositiveInfinity"?1/0:this.symbol==="NegativeInfinity"?-1/0:this.isInfinity?this.isPositive?1/0:this.isNegative?-1/0:NaN:typeof this.string=="string"?this.string:typeof this.symbol=="string"?this.symbol:this.im===0?this.re:this.toString()}toAsciiMath(e={}){return Wh(this,e)}toString(){return Wh(this)}print(){let e=console.info;e==null||e(this.toString())}[Symbol.toPrimitive](e){if(e==="number"){let t=this.valueOf();return typeof t=="number"?t:null}return this.toString()}toJSON(){return this.json}toMathJson(e){var i,n;let t={exclude:[],shorthands:["function","symbol","string","number"],metadata:[],fractionalDigits:"max",repeatingDecimal:!0,prettify:!0};e&&((typeof e.shorthands=="string"&&e.shorthands==="all"||(i=e.shorthands)!=null&&i.includes("all"))&&(t.shorthands=["function","symbol","string","number"]),(typeof e.metadata=="string"&&e.metadata==="all"||(n=e.metadata)!=null&&n.includes("all"))&&(t.metadata=["latex","wikidata"]),e.fractionalDigits==="auto"&&(t.fractionalDigits=-this.engine.precision),typeof e.fractionalDigits=="number"&&(t.fractionalDigits=e.fractionalDigits));let r={...t,...e,fractionalDigits:t.fractionalDigits,shorthands:t.shorthands,metadata:t.metadata};return o6(this.engine,this,r)}toLatex(e){let t=this.toMathJson(),r={imaginaryUnit:"\\imaginaryI",positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalSeparator:this.engine.decimalSeparator,digitGroupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",digitGroup:3,truncationMarker:"\\ldots",repeatingDecimal:"vinculum",fractionalDigits:"max",notation:"auto",avoidExponentsInRange:[-7,20],prettify:!0,invisibleMultiply:"",invisiblePlus:"",multiply:"\\times",missingSymbol:"\\blacksquare",applyFunctionStyle:U2,groupStyle:G2,rootStyle:W2,fractionStyle:Z2,logicStyle:Q2,powerStyle:Y2,numericSetStyle:X2};return(e==null?void 0:e.fractionalDigits)==="auto"?r.fractionalDigits=-this.engine.precision:r.fractionalDigits=(e==null?void 0:e.fractionalDigits)??"max",typeof r.fractionalDigits=="number"&&r.fractionalDigits>this.engine.precision&&(r.fractionalDigits=this.engine.precision),r={...r,...e??{},fractionalDigits:r.fractionalDigits},!r.prettify&&this.verbatimLatex?this.verbatimLatex:pw(t,this.engine.indexedLatexDictionary,r)}toNumericValue(){return[this.engine._numericValue(1),this]}get scope(){return null}is(e){return typeof e=="number"||typeof e=="bigint"?!1:typeof e=="boolean"?this.symbol==="True"&&e===!0||this.symbol==="False"&&e===!1:e==null?!1:c0(this,this.engine.box(e))}get canonical(){return this}get structural(){return this}get isStructural(){return!0}get latex(){return this.toLatex()}set latex(e){this.verbatimLatex=e}get symbol(){return null}get tensor(){return null}get string(){return null}getSubexpressions(e){return h6(this,e)}get subexpressions(){return this.getSubexpressions("")}get symbols(){let e=new Set;return c6(this,e),Array.from(e)}get unknowns(){let e=new Set;return f6(this,e),Array.from(e)}get freeVariables(){let e=new Set;return u6(this,e),Array.from(e)}get errors(){return this.getSubexpressions("Error")}get ops(){return null}get nops(){return 0}get op1(){return this.engine.Nothing}get op2(){return this.engine.Nothing}get op3(){return this.engine.Nothing}get isValid(){return!0}get isPure(){return!1}get isConstant(){return!0}get isNaN(){}get isInfinity(){}get isFinite(){}get isEven(){}get isOdd(){}get numericValue(){return null}get isNumberLiteral(){return!1}get isFunctionExpression(){return!1}get re(){return NaN}get im(){return NaN}get bignumRe(){}get bignumIm(){}get numerator(){return this}get denominator(){return this.engine.One}get numeratorDenominator(){return[this,this.engine.One]}neg(){return this.engine.NaN}inv(){return this.engine.NaN}abs(){return this.engine.NaN}add(e){return this.engine.NaN}sub(e){return this.add(e.neg())}mul(e){return this.engine.NaN}div(e){return this.engine.NaN}pow(e){return this.engine.NaN}root(e){return this.engine.NaN}sqrt(){return this.engine.NaN}ln(e){return this.engine.NaN}get sgn(){}get shape(){return[]}get rank(){return 0}subs(e,t){return(t==null?void 0:t.canonical)===!0?this.canonical:this}map(e,t){if(!this.ops)return e(this);let r=(t==null?void 0:t.canonical)??this.isCanonical,i=(t==null?void 0:t.recursive)??!0,n=this.ops.map(s=>i?s.map(e,t):e(s));return e(this.engine.function(this.operator,n,{canonical:r}))}solve(e){return null}replace(e){return null}has(e){return!1}get isPositive(){}get isNonNegative(){}get isNegative(){}get isNonPositive(){}get description(){if(this.baseDefinition&&this.baseDefinition.description)return typeof this.baseDefinition.description=="string"?[this.baseDefinition.description]:this.baseDefinition.description}get url(){var e;return((e=this.baseDefinition)==null?void 0:e.url)??void 0}get wikidata(){var e;return((e=this.baseDefinition)==null?void 0:e.wikidata)??void 0}get complexity(){}get baseDefinition(){}get symbolDefinition(){}get functionDefinition(){}infer(e){return!1}bind(){}reset(){}get value(){return this.N().valueOf()}set value(e){throw new Error(`Can't change the value of \\(${this.latex}\\)`)}get type(){return"unknown"}set type(e){throw new Error(`Can't change the type of \\(${this.latex}\\)`)}get isNumber(){}get isInteger(){}get isRational(){}get isReal(){}simplify(e){return this}expand(){return zi(this)??this}evaluate(e){return this.simplify()}N(){return this.evaluate({numericApproximation:!0})}compile(e="javascript",t){if(e!=="javascript")return;t??(t={optimize:["simplify"]});let r=this;return t.optimize.includes("simplify")&&(r=r.simplify()),t.optimize.includes("evaluate")&&(r=r.evaluate()),V2(r)}get isCollection(){return!1}contains(e){return!1}subsetOf(e,t){return!1}get size(){return 0}each(e,t){return{next(){return{done:!0,value:void 0}}}}at(e){}get(e){}indexOf(e){return-1}};function u6(e,t){if(e.operator,e.symbol){let r=e.engine.lookupSymbol(e.symbol);if(r&&r.value!==void 0)return;let i=e.engine.lookupFunction(e.symbol);if(i&&i.evaluate)return;t.add(e.symbol);return}if(e.ops)for(let r of e.ops)u6(r,t)}function c6(e,t){if(e.symbol){t.add(e.symbol);return}if(e.ops)for(let r of e.ops)c6(r,t)}function f6(e,t){if(e.symbol){let r=e.symbol;if(r==="Unknown"||r==="Undefined"||r==="Nothing")return;let i=e.engine.lookupSymbol(r);if(i&&i.value!==void 0)return;let n=e.engine.lookupFunction(r);if(n&&n.evaluate)return;t.add(r);return}if(e.ops)for(let r of e.ops)f6(r,t)}function h6(e,t){let r=!t||e.operator===t?[e]:[];if(e.ops)for(let i of e.ops)r.push(...h6(i,t));return r}function yw(e){let t=[],r=(i,n=[])=>{if(i.length===0)t.push(n);else for(let s=0;s<i.length;s++){let a=i.slice(),u=a.splice(s,1);r(a.slice(),n.concat(u))}};return r(e),t}function vw(e){for(let t in e)t.startsWith("_")&&e.hasOwnProperty(t)&&Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:e[t]})}function p6(e,t){if(!e.ops)return[];let r=e.ops,i=e.functionDefinition;if(!i||r.length===0)return r;let n=i!=null&&i.associative?i.name:"";if(r=e0(r,n),i.hold)return r;let s=[];for(let a of r){let u=a.operator;if(u==="Hold")s.push(a);else{let f=u==="ReleaseHold"?a.op1:a;if(f){let p=t(f);p!==null&&s.push(p)}}}return e0(s,n)}function Jl(e,t,r){if((s=>r&&r.some(a=>a.value.isSame(s)))(e)||(r||(r=[{value:e,because:"initial"}]),!e.isValid))return r;if(!(e.isCanonical||e.isStructural)){let s=e.canonical;return s.isCanonical||s.isStructural?Jl(s,t,r):r}let i=e.engine,n=t!=null&&t.rules?i.rules(t.rules,{canonical:!0}):i.getRuleSet("standard-simplification");t={...t,rules:n};do{let s=xw(e,n,t,r);if(s.length<=r.length)break;e=s.at(-1).value,r=s}while(!r.slice(0,-1).some(s=>s.value.isSame(e)));return r}function bw(e,t,r){if(t==null||e===t||e.isSame(t))return!1;let i=e.engine;return r??(r=n=>i.costFunction(n)),r(t)<=1.2*r(e)}function m6(e,t){return e.ops?e.engine.function(e.operator,p6(e,r=>Jl(r,t).at(-1).value)):e}function xw(e,t,r,i){if(e.isNumberLiteral||e.string)return i;if(e.symbol){let a=Kl(e,t,{recursive:!1,canonical:!0,useVariations:!1});return a.length>0?[...i,...a]:i}let n=m6(e,r);n.isSame(e)||(i=[...i,{value:n,because:"simplified operands"}],e=n);let s=ww(e,t,r,i);return s.length>i.length?s:i}function ww(e,t,r,i){let n=Kl(e,t,{recursive:!1,canonical:!0,useVariations:r.useVariations??!1});if(n.length===0)return i;let s=n.at(-1).value;return s.isSame(e)||(s=m6(s),!bw(e,s,r==null?void 0:r.costFunction))?i:(n.at(-1).value=s,[...i,...n])}function B0(e){var t;return((t=e.symbol)==null?void 0:t.startsWith("_"))??(e.operator==="Wildcard"||e.operator==="WildcardSequence"||e.operator==="WildcardOptionalSequence")}function V0(e){var t;if((t=e.symbol)!=null&&t.startsWith("_"))return e.symbol;if(e.nops===1){let r=e.op1;if(e.operator==="Wildcard")return`_${r}`;if(e.operator==="WildcardSequence")return`__${r}`;if(e.operator==="WildcardOptionalSequence")return`___${r}`}return e.operator==="Wildcard"?"_":e.operator==="WildcardSequence"?"__":e.operator==="WildcardOptionalSequence"?"___":null}function Zh(e){return typeof e=="string"?e.startsWith("_"):B0(e)?!0:e.ops?Zh(e.operator)||e.ops.some(Zh):!1}function m0(e,t,r){return e.startsWith("_"),e==="_"||e==="__"||e==="___"?r:e in r?t.isSame(r[e])?r:null:Zh(t)?null:{...r,[e]:t}}function ys(e,t,r,i){var u;if(B0(t))return m0(V0(t),e,r);let n=i.acceptVariants??!0;if(i={...i,acceptVariants:!0},t.numericValue!==null)return e.numericValue===null?null:t.isEqual(e)?r:n?yf(e,t,r,i):null;let s=t.string;if(s!==null)return e.string===s?r:null;let a=t.symbol;if(a!==null)return a===e.symbol?r:n?yf(e,t,r,i):null;if(t.ops){let f=i.useVariations??!1,p=e.engine,d=null,b=t.operator;if(b.startsWith("_")?(d=m0(b,p.box(e.operator),r),d!==null&&(d=Qh(e,t.ops,d,i))):b===e.operator&&(d=(u=p.lookupFunction(b))!=null&&u.commutative?kw(e,t,r,i):Qh(e,t.ops,r,i)),d===null&&f){if(!n)return null;d=yf(e,t,r,i)}return d!==null&&(r=d),i.recursive&&e.ops&&(d=Nw(e,t,r,{...i,acceptVariants:n})??d),d}return null}function Nw(e,t,r,i){e.ops;let n=null;for(let s of e.ops){let a=ys(s,t,r,i);a!==null&&(n=a,r=a)}return n}function yf(e,t,r,i){if(!i.useVariations)return null;let n=e.engine,s={...i,acceptVariants:!1},a=(f,p)=>ys(n.function(f,p,{canonical:!1}),t,r,s),u=t.operator;if(u==="Negate"&&e.is(0))return ys(n.Zero,t.op1,r,s);if(u==="Add"){let f=a("Add",[0,e]);if(f!==null||(e.operator==="Subtract"&&(f=a("Add",[e.op1,["Negate",e.op2]])),f!==null))return f}if(u==="Subtract"){let f=a("Subtract",[e,0]);if(f!==null||(e.operator==="Negate"&&(f=a("Subtract",[0,e.op1])),f!==null))return f}if(u==="Multiply"){let f=a("Multiply",[1,e]);if(f!==null||e.operator==="Negate"&&(f=a("Multiply",[-1,e.op1]),f!==null)||e.operator==="Divide"&&(f=a("Multiply",[e.op1,["Divide",1,e.op2]]),f!==null))return f}if(u==="Divide"){let f=a("Divide",[e,1]);if(f!==null)return f}if(u==="Square"){let f=a("Power",[e,2]);if(f!==null)return f}if(u==="Exp"){let f=a("Power",[n.E,e]);if(f!==null)return f}if(u==="Power"){if(t.op2.re===2&&t.op2.im===0){let f=a("Square",[e]);if(f!==null)return f}if(t.op1.symbol==="ExponentialE"){let f=a("Exp",[e]);if(f!==null)return f}{let f=a("Power",[e,1]);if(f!==null)return f}}return null}function kw(e,t,r,i){e.operator,t.operator;let n=yw(t.ops);for(let s of n){let a=Qh(e,s,r,i);if(a!==null)return a}return null}function Qh(e,t,r,i){if(t.length===0)return e.ops&&e.ops.length===0?r:null;let n=t[0].engine,s={...r},a=[...e.ops],u=0;for(;u<t.length;){let f=t[u],p=V0(f);if(p!==null)if(p.startsWith("__")){let d=0;if(t[u+1]===void 0)d=a.length+1;else{let x=!1;for(;!x&&d<a.length;)x=ys(a[d],t[u+1],s,i)!==null,d+=1;if(!x&&p.startsWith("___"))return null}if(!p.startsWith("___")&&d<=1)return null;let b;if(d<=1)e.operator==="Add"?b=n.Zero:e.operator==="Multiply"?b=n.One:b=n.Nothing;else if(d===2){if(a.length===0)return null;b=a.shift()}else{let x=n.lookupFunction(e.operator),I=a.splice(0,d-1);x!=null&&x.associative?b=n.function(e.operator,I,{canonical:!1}):b=n.function("Sequence",I,{canonical:!1})}s=m0(p,b,s)}else if(p.startsWith("_")){if(a.length===0)return null;s=m0(p,a.shift(),s)}else s=ys(a.shift(),f,s,i);else{let d=a.shift();if(!d)return null;s=ys(d,f,s,i)}if(s===null)return null;u+=1}return a.length>0?null:s}function Sm(e,t,r){t=t.structural;let i=(r==null?void 0:r.useVariations)??!1,n={recursive:(r==null?void 0:r.recursive)??!1,useVariations:i,acceptVariants:i},s=(r==null?void 0:r.substitution)??{};return ys(e.structural,t.structural,s,n)}function Sw(e){var i;let t=e.engine;if(e.operator==="Hold")return;let r;if(e.ops){let n=e.functionDefinition;if(n!=null&&n.sgn){let s=t.swapScope(e.scope);r=n.sgn(e.ops,{engine:t}),t.swapScope(s)}return r}return e.symbol?(i=e.symbolDefinition)==null?void 0:i.sgn:e.isNumberLiteral?e.sgn:"unsigned"}function _m(e){if(e!==void 0){if(e==="positive")return!0;if(["non-positive","zero","unsigned","negative","negative-infinity"].includes(e))return!1}}function Tm(e){if(e!==void 0){if(e==="positive"||e==="positive-infinity"||e==="non-negative")return!0;if(["negative","negative-infinity","zero","unsigned"].includes(e))return!1}}function Mm(e){if(e!==void 0){if(e==="negative"||e==="negative-infinity")return!0;if(["non-negative","zero","unsigned","positive","positive-infinity"].includes(e))return!1}}function Em(e){if(e!==void 0){if(e==="negative"||e==="negative-infinity"||e==="non-positive")return!0;if(["positive","zero","unsigned"].includes(e))return!1}}function vf(e,t,r){return e.generation===void 0||e.generation===t?(e.value===null&&(e.value=r()),e.value):(e.generation=t,e.value=r(),e.value)}var Un=class extends Jt{constructor(e,t,r,i){super(e,i==null?void 0:i.metadata),this._value={value:null,generation:-1},this._valueN={value:null,generation:-1},this._sgn={value:null,generation:-1},this._type={value:null,generation:-1},this._name=t,this._ops=r,this._isStructural=(i==null?void 0:i.structural)??!1,i!=null&&i.canonical&&(this._canonical=this),(i!=null&&i.canonical||this._isStructural)&&this.bind(),e._register(this)}get hash(){if(this._hash!==void 0)return this._hash;let e=0;for(let t of this._ops)e=e<<1^t.hash|0;return e=e^Yl(this._name)|0,this._hash=e,e}infer(e){let t=this.functionDefinition;return!t||!t.inferredSignature?!1:(typeof t.signature!="string"&&t.signature.kind==="signature"&&(t.signature={...t.signature,result:s7(t.signature.result,e)}),!0)}bind(){this._def=void 0,this._scope=this.engine.context,this._def=this.engine.lookupFunction(this._name);for(let e of this._ops)e.bind()}reset(){}get isCanonical(){return this._canonical===this}set isCanonical(e){this._canonical=e?this:void 0}get isPure(){var t;if(this._isPure!==void 0)return this._isPure;if(!this.isCanonical)return this._isPure=!1,!1;let e=((t=this.functionDefinition)==null?void 0:t.pure)??!1;return e&&(e=this._ops.every(r=>r.isPure)),this._isPure=e,e}get isConstant(){return this.isPure?this._ops.every(e=>e.isConstant):!1}get json(){return[this._name,...this.structural.ops.map(e=>e.json)]}get scope(){return this._scope}get operator(){return this._name}get ops(){return this._ops}get nops(){return this._ops.length}get op1(){return this._ops[0]??this.engine.Nothing}get op2(){return this._ops[1]??this.engine.Nothing}get op3(){return this._ops[2]??this.engine.Nothing}get isValid(){return this._name==="Error"?!1:this._ops.every(e=>e==null?void 0:e.isValid)}get canonical(){return this._canonical??(this._canonical=this.isValid?this.engine.function(this._name,this._ops):this),this._canonical}get structural(){if(this.isStructural)return this;let e=this.functionDefinition;if(e!=null&&e.associative||e!=null&&e.commutative){let t=this.ops.map(i=>i.structural),r=[];if(!e.associative)r=t;else for(let i of t)i.operator===this.operator?r.push(...i.ops):r.push(i);return this.engine.function(this._name,this.isValid?bm(this._name,r):r,{canonical:!1,structural:!0})}return this.engine.function(this._name,this.ops.map(t=>t.structural),{canonical:!1,structural:!0})}get isStructural(){return this._isStructural}toNumericValue(){this.isCanonical||this.isStructural;let e=this.engine;if(this.operator==="Complex")return[e._numericValue({re:this.op1.re,im:this.op2.re}),e.One];let t=this;if(t.operator==="Add"&&(t=Vl(this),t.numericValue!==null)){if(typeof t.numericValue=="number"){if(Number.isInteger(t.numericValue))return[e._numericValue(t.numericValue),e.One]}else if(t.numericValue.isExact)return[t.numericValue,e.One]}if(t.operator==="Negate"){let[r,i]=t.op1.toNumericValue();return[r.neg(),i]}if(t.operator==="Multiply"){let r=[],i=e._numericValue(1);for(let n of t.ops){let[s,a]=n.toNumericValue();i=i.mul(s),a.is(1)||r.push(a)}return r.length===0?[i,e.One]:r.length===1?[i,r[0]]:[i,sr(this.engine,r)]}if(t.operator==="Divide"){let[r,i]=t.op1.toNumericValue(),[n,s]=t.op2.toNumericValue(),a=r.div(n);return s.is(1)?[a,i]:[a,e.function("Divide",[i,s])]}if(t.operator==="Power"){if(t.op2.numericValue===null)return[e._numericValue(1),this];let[r,i]=t.op1.toNumericValue();if(r.isOne)return[r,this];let n=rt(t.op2);return n!==null?[r.pow(n),e.function("Power",[i,t.op2])]:t.op2.is(.5)?[r.sqrt(),e.function("Sqrt",[i])]:[e._numericValue(1),this]}if(t.operator==="Sqrt"){let[r,i]=t.op1.toNumericValue();return i.is(1)||i.is(0)?r.isOne||r.isZero?[r,i]:[r.sqrt(),i]:[r.sqrt(),e.function("Sqrt",[i])]}if(t.operator==="Root"){let r=t.op2.re;if(isNaN(r)||t.op2.im!==0)return[e._numericValue(1),this];let[i,n]=t.op1.toNumericValue();return r===2?[i.sqrt(),e.function("Sqrt",[n])]:[i.root(r),e.function("Root",[n,t.op2])]}if(t.operator==="Abs"){let[r,i]=t.op1.toNumericValue();return[r.abs(),e.function("Abs",[i])]}if(t.operator,t.operator,t.operator==="Log"||t.operator==="Ln"){let r=t.op2.re;isNaN(r)&&t.operator==="Log"&&(r=10);let[i,n]=t.op1.toNumericValue();return i.isOne?[i,this]:e.box(i.ln(r)).add(e.function(t.operator,[n,t.op2])).toNumericValue()}return[e._numericValue(1),t]}subs(e,t){let r=this._ops.map(i=>i.subs(e,t));return r.every(i=>i.isValid)?this.engine.function(this._name,r,t):this.engine.function(this._name,r,{canonical:!1})}replace(e,t){var r;return((r=Kl(this,e,t).at(-1))==null?void 0:r.value)??null}match(e,t){return Sm(this,e,t)}has(e){if(typeof e=="string"){if(this._name===e)return!0}else if(e.includes(this._name))return!0;return this._ops.some(t=>t.has(e))}get sgn(){let e=this.isPure&&this._ops.every(t=>t.isConstant)?void 0:this.engine.generation;return vf(this._sgn,e,()=>{if(!(!this.isValid||this.isNumber!==!0))return Sw(this)})}get isNaN(){return this.sgn==="nan"}get isInfinity(){let e=this.sgn;return e==="positive-infinity"||e==="negative-infinity"||e==="complex-infinity"}get isFinite(){if(this.isNumber!==!0)return!1;if(!(this.isNaN===void 0||this.isInfinity===void 0))return!(this.isNaN||this.isInfinity)}get isOne(){if(this.isNonPositive===!0||this.isReal===!1)return!1}get isNegativeOne(){if(this.isNonNegative===!0||this.isReal===!1)return!1}get isPositive(){return _m(this.sgn)}get isNonNegative(){return Tm(this.sgn)}get isNegative(){return Mm(this.sgn)}get isNonPositive(){return Em(this.sgn)}get numerator(){return this.numeratorDenominator[0]}get denominator(){return this.numeratorDenominator[1]}get numeratorDenominator(){if(!this.isCanonical)return this.canonical.numeratorDenominator;if(this.isNumber!==!0)return[this.engine.Nothing,this.engine.Nothing];let e=this.operator;if(e==="Divide")return[this.op1,this.op2];if(e==="Negate"){let[t,r]=this.op1.numeratorDenominator;return[t.neg(),r]}if(e==="Power"){let[t,r]=this.op1.numeratorDenominator;return[t.pow(this.op2),r.pow(this.op2)]}if(e==="Root"){let[t,r]=this.op1.numeratorDenominator;return[t.root(this.op2),r.root(this.op2)]}if(e==="Sqrt"){let[t,r]=this.op1.numeratorDenominator;return[t.sqrt(),r.sqrt()]}if(e==="Abs"){let[t,r]=this.op1.numeratorDenominator;return[t.abs(),r.abs()]}return e==="Multiply"?new an(this.engine,this.ops).asNumeratorDenominator():[this,this.engine.One]}neg(){return Bl(this.canonical)}inv(){if(!this.isCanonical)return this.canonical.inv();if(this.isOne)return this;if(this.isNegativeOne)return this;if(this.operator==="Sqrt")return this.op1.inv().sqrt();if(this.operator==="Divide")return this.op2.div(this.op1);if(this.operator==="Power"){let e=this.op2.neg();return e.operator!=="Negate"?this.op1.pow(e):this.engine.function("Power",[this.op1,e])}if(this.operator==="Root"){let e=this.op2.neg();return e.operator!=="Negate"?this.op1.root(e):this.engine.function("Root",[this.op1,e])}return this.operator==="Exp"?this.engine.E.pow(this.op1.neg()):this.operator==="Rational"?this.op2.div(this.op1):this.operator==="Negate"?this.op1.inv().neg():this.engine._fn("Divide",[this.engine.One,this.canonical])}abs(){return this.isCanonical?this.operator==="Abs"||this.operator==="Negate"?this:this.isNonNegative?this:this.isNonPositive?this.neg():this.engine._fn("Abs",[this]):this.canonical.abs()}add(e){return e===0?this:Gt(this.canonical,this.engine.box(e))}mul(e){if(e===0)return this.engine.Zero;if(e===1)return this;if(e===-1)return this.neg();if(e instanceof Lt){if(e.isZero)return this.engine.Zero;if(e.isOne)return this.canonical;if(e.isNegativeOne)return this.neg()}return Jr(this.canonical,this.engine.box(e))}div(e){return mm(this,e)}pow(e){return Yt(this,e,{numericApproximation:!1})}root(e){if(!this.isCanonical)return this.canonical.root(e);typeof e!="number"&&(e=e.canonical);let t=typeof e=="number"?e:e.im===0?e.re:void 0;if(t===0)return this.engine.NaN;if(t===1)return this;if(t===-1)return this.inv();if(t===2)return this.engine.function("Sqrt",[this]);if(this.operator==="Power"&&t!==void 0){let[r,i]=this.ops;return r.pow(i.div(t))}if(this.operator==="Divide"){let[r,i]=this.ops;return r.root(e).div(i.root(e))}if(this.operator==="Negate"&&t!==void 0)return t%2===0?this.op1.root(e):this.op1.root(e).neg();if(this.operator==="Sqrt"){if(t!==void 0)return this.op1.root(t+2);if(typeof e!="number")return this.op1.root(e.add(2))}if(this.operator==="Multiply"){let r=this.ops.map(i=>i.root(e));return Jr(...r)}if(this.operator==="Root"){let[r,i]=this.ops;return r.root(i.mul(e))}if(this.isNumberLiteral){let r=this.numericValue;if(typeof r=="number"){if(r<0)return this.engine.NaN;if(r===0)return this.engine.Zero;if(r===1)return this.engine.One;if(t!==void 0){let i=this.engine.number(Math.pow(r,1/t));if(!i.isFinite||i.isInteger)return i}}else{if(r.isOne)return this.engine.One;if(r.isZero)return this.engine.Zero;if(t!==void 0){let i=r.root(t);if(i.isExact)return this.engine.number(i)}}}return this.engine._fn("Root",[this,this.engine.box(e)])}sqrt(){return this.root(2)}ln(e){let t=e?this.engine.box(e):void 0;if(!this.isCanonical)return this.canonical.ln(t);if(this.is(0))return this.engine.NegativeInfinity;if(this.operator==="Exp")return this.op1;if(t&&this.isSame(t))return this.engine.One;if(!t&&this.isSame(this.engine.E))return this.engine.One;if(this.operator==="Power"){let[r,i]=this.ops;return r.isSame(this.engine.E)?i:i.mul(r.ln(t))}if(this.operator==="Root"){let[r,i]=this.ops;return i.div(r.ln(t))}return this.operator==="Sqrt"?this.op1.ln(t).div(2):this.operator==="Divide"?this.op1.ln(t).sub(this.op2.ln(t)):t&&t.type==="finite_integer"?t.re===10?this.engine._fn("Log",[this]):this.engine._fn("Log",[this,t]):this.engine._fn("Ln",[this])}get complexity(){var e;if(this.isCanonical)return((e=this.functionDefinition)==null?void 0:e.complexity)??Ks}get baseDefinition(){return this._def}get functionDefinition(){return this._def}get isNumber(){let e=this.type;if(e!=="unknown")return G(e,"number")}get isInteger(){let e=this.type;if(e!=="unknown")return G(e,"integer")}get isRational(){let e=this.type;if(e!=="unknown")return G(e,"rational")}get isReal(){let e=this.type;if(e!=="unknown")return G(e,"real")}get isFunctionExpression(){return!0}get type(){let e=this.isPure&&this._ops.every(t=>t.isConstant)?void 0:this.engine.generation;return vf(this._type,e,()=>_w(this))??"unknown"}simplify(e){var t;return((t=Jl(this,e).at(-1))==null?void 0:t.value)??this}evaluate(e){let t=()=>{var s;if(!this.isValid)return this;if(e??(e={numericApproximation:!1}),e.numericApproximation){let a=this.operator;if(a==="Integrate"||a==="Limit")return this.engine.box(["N",this],{canonical:!0}).evaluate(e)}if(!this.isCanonical){this.engine.pushScope();let a=this.canonical;return this.engine.popScope(),!a.isCanonical||!a.isValid?this:a.evaluate(e)}let r=this.functionDefinition;if(r!=null&&r.threadable&&this.ops.some(a=>Ct(a))){let a=Math.max(...this._ops.map(f=>{var p,d,b;return((b=(d=(p=f.functionDefinition)==null?void 0:p.collection)==null?void 0:d.size)==null?void 0:b.call(d,f))??0})),u=[];for(let f=0;f<=a-1;f++){let p=this._ops.map(d=>Ct(d)?_x(d,f%a+1)??this.engine.Nothing:d);u.push(this.engine._fn(this.operator,p).evaluate(e))}return u.length===0?this.engine.Nothing:u.length===1?u[0]:this.engine._fn("List",u)}let i=p6(this,a=>a.evaluate(e)),n;if(r){let a=this.engine,u=a.swapScope(this.scope);n=(s=r.evaluate)==null?void 0:s.call(r,i,{...e,engine:a}),a.swapScope(u)}return n??this.engine.function(this._name,i)};return vf(e!=null&&e.numericApproximation?this._valueN:this._value,this.engine.generation,t)}N(){return this.evaluate({numericApproximation:!0})}solve(e){let t=lm(e);return t.length!==1?null:K7(this.simplify(),t[0])}get isCollection(){var t,r;let e=this.functionDefinition;return e?((t=e.collection)==null?void 0:t.contains)!==void 0||((r=e.collection)==null?void 0:r.size)!==void 0:!1}contains(e){var t,r,i;return((i=(r=(t=this.functionDefinition)==null?void 0:t.collection)==null?void 0:r.contains)==null?void 0:i.call(r,this,e))??!1}get size(){var e,t,r;return((r=(t=(e=this.functionDefinition)==null?void 0:e.collection)==null?void 0:t.size)==null?void 0:r.call(t,this))??0}each(e,t){var i,n,s;return((s=(n=(i=this.functionDefinition)==null?void 0:i.collection)==null?void 0:n.iterator)==null?void 0:s.call(n,this,e,t))||{next(){return{done:!0,value:void 0}}}}at(e){var t,r,i;return(i=(r=(t=this.functionDefinition)==null?void 0:t.collection)==null?void 0:r.at)==null?void 0:i.call(r,this,e)}get(e){var t,r,i,n,s,a;if(typeof e=="string")return(i=(r=(t=this.functionDefinition)==null?void 0:t.collection)==null?void 0:r.at)==null?void 0:i.call(r,this,e);if(e.string)return(a=(s=(n=this.functionDefinition)==null?void 0:n.collection)==null?void 0:s.at)==null?void 0:a.call(s,this,e.string)}indexOf(e){var t,r,i;return((i=(r=(t=this.functionDefinition)==null?void 0:t.collection)==null?void 0:r.indexOf)==null?void 0:i.call(r,this,e))??-1}subsetOf(e,t){var r,i,n;return((n=(i=(r=this.functionDefinition)==null?void 0:r.collection)==null?void 0:i.subsetOf)==null?void 0:n.call(i,this,e,t))??!1}};function _w(e){var t;if(!e.isValid)return"error";if(e.ops){if(e.operator==="Hold"){let[n]=e.ops;if(n.symbol)return"symbol";if(n.string!==void 0)return"string";if(n.isNumberLiteral)return n.type;if(n.isFunctionExpression){let s=n.functionDefinition;if(s){let a=s.signature;return typeof a!="string"&&a.kind==="signature"?{...a,result:Ee((t=s.type)==null?void 0:t.call(s,n.ops,{engine:e.engine}))??a.result}:a}}return"function"}let r=e.functionDefinition;if(!r)return"function";let i=am(r.signature)??"any";return typeof r.type=="function"?Ee(r.type(e.ops,{engine:e.engine}))??i:i}if(e.symbol||e.isNumberLiteral)return e.type;if(e.string)return"string";if(e.tensor)return e.type}var xa=class d6 extends Jt{constructor(t,r,i){super(t,i),this._string=r.normalize(),t._register(this)}get json(){return`'${this._string}'`}get hash(){return Yl("String"+this._string)}get operator(){return"String"}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(t){}get type(){return"string"}get complexity(){return 19}get string(){return this._string}match(t,r){return _s(t)||(t=this.engine.box(t,{canonical:!1})),B0(t)?{[V0(t)]:this}:t instanceof d6&&this._string===t._string?{}:null}get isCollection(){return!0}contains(t){return t.string?this._string.includes(t.string):!1}get size(){return this._string.length}each(t,r){let i=this.string,n=t??1;return r=Math.min(r??i.length,i.length),r<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>r>0?(r--,{value:this.engine.string(i[n++-1]),done:!1}):{value:void 0,done:!0}}}at(t){return this.engine.string(this._string[t-1])}get(t){}indexOf(t){return t.string?this._string.indexOf(t.string):-1}};function g6(e,t){switch(t){case"float64":case"float32":case"int32":case"uint8":return new Tw(e);case"complex128":case"complex64":return new Ew(e);case"bool":case"string":case"expression":return new Mw(e)}throw new Error(`Unknown dtype ${t}`)}var Tw=class{constructor(e){this.ce=e,this.one=1,this.zero=0,this.nan=NaN}cast(e,t){let r=this.ce;switch(t){case"float64":case"float32":case"int32":case"uint8":return e;case"complex128":case"complex64":return Array.isArray(e)?e.map(i=>r.complex(i)):this.ce.complex(e);case"bool":return Array.isArray(e)?e.map(i=>i!==0):e!==0;case"string":return Array.isArray(e)?e.map(i=>Number(i).toString()):Number(e).toString();case"expression":return Array.isArray(e)?e.map(i=>r.number(i)):r.number(e)}throw new Error(`Cannot cast ${e} to ${t}`)}expression(e){return this.ce.number(e)}isZero(e){return e===0}isOne(e){return e===1}equals(e,t){return e===t}add(e,t){return e+t}addn(...e){return e.reduce((t,r)=>t+r,0)}neg(e){return-e}sub(e,t){return e-t}mul(e,t){return e*t}muln(...e){return e.reduce((t,r)=>t*r,1)}div(e,t){return e/t}pow(e,t){return e**t}conjugate(e){return e}},Mw=class{constructor(e){this.one=e.One,this.zero=e.Zero,this.nan=e.NaN,this.ce=e}cast(e,t){if(Array.isArray(e))return e.map(i=>this.cast(i,t));let r=e.value;switch(t){case"float64":case"float32":return typeof r=="number"?r:void 0;case"int32":return typeof r=="number"?Math.round(r):void 0;case"uint8":if(typeof r!="number")return;let i=Math.round(r);return i>=0&&i<=255?i:void 0;case"complex128":case"complex64":return typeof r=="number"?this.ce.complex(r):isNaN(e.im)?void 0:this.ce.complex(e.re,e.im);case"bool":return typeof r=="boolean"?r:void 0;case"string":return typeof r=="string"?r:void 0;case"expression":return e}throw new Error(`Cannot cast ${e} to ${t}`)}expression(e){return e}isZero(e){return e.is(0)}isOne(e){return e.is(1)}equals(e,t){return e.isSame(t)===!0}add(e,t){return e.add(t)}addn(...e){return Gt(...e)}neg(e){return e.neg()}sub(e,t){return e.sub(t)}mul(e,t){return e.mul(t)}muln(...e){return Jr(...e)}div(e,t){return e.div(t)}pow(e,t){return e.pow(t)}conjugate(e){return this.ce.function("Conjugate",[e]).evaluate()}},Ew=class{constructor(e){this.ce=e,this.one=e.complex(1),this.zero=e.complex(0),this.nan=e.complex(NaN)}cast(e,t){if(Array.isArray(e))return e.map(r=>this.cast(r,t));switch(t){case"float64":return e.im===0?e.re:void 0;case"float32":return e.im===0?e.re:void 0;case"int32":return e.im===0?Math.round(e.re):void 0;case"uint8":if(e.im!==0)return;let r=Math.round(e.re);return r>=0&&r<=255?r:void 0;case"complex128":return e;case"complex64":return e;case"bool":return!(e.im===0&&e.re===0);case"string":return e.toString();case"expression":return this.ce.number(e)}throw new Error(`Cannot cast ${e} to ${t}`)}expression(e){return this.ce.number(e)}isZero(e){return e.isZero()}isOne(e){return e.re===1&&e.im===0}equals(e,t){return e.equals(t)}add(e,t){return e.add(t)}addn(...e){return e.reduce((t,r)=>t.add(r),this.zero)}neg(e){return e.neg()}sub(e,t){return e.sub(t)}mul(e,t){return e.mul(t)}muln(...e){return e.reduce((t,r)=>t.mul(r),this.one)}div(e,t){return e.div(t)}pow(e,t){return e.pow(t)}conjugate(e){return e.conjugate()}};function y6(e,t){return e===void 0?t:e===t?e:e==="expression"||t==="expression"||e==="string"||t==="string"?"expression":e==="complex128"||t==="complex128"?"complex128":e==="complex64"||t==="complex64"?"complex64":e==="float64"||t==="float64"?"float64":e==="float32"||t==="float32"?"float32":e==="int32"||t==="int32"?"int32":e==="uint8"||t==="uint8"?"uint8":e==="bool"||t==="bool"?"bool":"expression"}function Aw(e){if(ts(e))return"bool";if(!e.isNumberLiteral)return"expression";switch(e.type){case"real":case"rational":case"finite_real":case"finite_rational":case"integer":return"float64";case"complex":case"finite_complex":case"imaginary":case"finite_imaginary":return"complex128";case"finite_integer":{let t=e.re;return t>=0&&t<=255?"uint8":"int32"}case"boolean":return"bool";case"string":return"string";default:return"expression"}}var eo=class Nn{constructor(t,r){this.ce=t,this.shape=r.shape,this.rank=this.shape.length,this._strides=Iw(this.shape),this.field=g6(t,r.dtype)}static align(t,r){if(t.dtype===r.dtype)return[t,r];let i=y6(t.dtype,r.dtype);return t.dtype===i?[t,r.upcast(i)]:[t.upcast(i),r]}static broadcast(t,r,i){if(!(i instanceof Nn))return r.map1(t,i);let[n,s]=Nn.align(r,i),a=n.data.map((u,f)=>t(u,s.data[f]));return Ui(n.ce,{dtype:n.dtype,shape:n.shape,data:a})}get expression(){let t=this.shape,r=this.rank,i=this.data,n=this._index.bind(this),s=this.field.expression.bind(this.field),a=u=>{if(u.length===r-1){let f=n(u),p=this.ce._fn("List",i.slice(f,f+t[r-1]).map(d=>s(d)));return p.isCanonical=p.ops.every(d=>d.isCanonical),p}else{let f=[];for(let d=0;d<=t[u.length]-1;d++)f.push(a([...u,d+1]));let p=this.ce._fn("List",f);return p.isCanonical=p.ops.every(d=>d.isCanonical),p}};return a([])}get array(){let t=this.shape,r=this.rank,i=this.data;if(r===1)return i;if(r===2){let[a,u]=t,f=new Array(a);for(let p=0;p<a;p++)f[p]=i.slice(p*u,(p+1)*u);return f}let n=this._index.bind(this),s=a=>{if(a.length===r-1){let u=n(a);return i.slice(u,u+t[r-1])}else{let u=[];for(let f=0;f<t[a.length];f++)u.push(s([...a,f+1]));return u}};return s([])}_index(t){let r=this._strides;return t.reduce((i,n,s)=>i+(n-1)*r[s],0)}get isSquare(){let t=this.shape;return t.length===2&&t[0]===t[1]}get isSymmetric(){if(!this.isSquare)return!1;let t=this.shape[0],r=this.data,i=this.field.equals.bind(this.field);for(let n=0;n<t;n++)for(let s=n+1;s<t;s++)if(!i(r[n*t+s],r[s*t+n]))return!1;return!0}get isSkewSymmetric(){if(!this.isSquare)return!1;let t=this.shape[0],r=this.data,i=this.field.equals.bind(this.field),n=this.field.neg.bind(this.field);for(let s=0;s<t;s++)for(let a=s+1;a<t;a++)if(!i(r[s*t+a],n(r[a*t+s])))return!1;return!0}get isUpperTriangular(){if(!this.isSquare)return!1;let t=this.shape[0],r=this.data,i=this.field.isZero.bind(this.field);for(let n=1;n<t;n++)for(let s=0;s<n;s++)if(i(r[n*t+s]))return!1;return!0}get isLowerTriangular(){if(!this.isSquare)return!1;let t=this.shape[0],r=this.data,i=this.field.isZero.bind(this.field);for(let n=0;n<t-1;n++)for(let s=n+1;s<t;s++)if(!i(r[n*t+s]))return!1;return!0}get isTriangular(){if(!this.isSquare)return!1;let t=this.shape[0],r=this.data,i=this.field.isZero.bind(this.field);for(let n=0;n<t;n++)for(let s=0;s<t;s++)if(n<s&&!i(r[n*t+s])||n>s&&!i(r[n*t+s]))return!1;return!0}get isDiagonal(){if(!this.isSquare)return!1;let t=this.shape[0],r=this.data,i=this.field.isZero.bind(this.field);for(let n=0;n<t;n++)for(let s=0;s<t;s++)if(n===s&&!i(r[n*t+s])||n!==s&&!i(r[n*t+s]))return!1;return!0}get isIdentity(){if(!this.isSquare)return!1;let[t,r]=this.shape,i=this.data,n=this.field.isOne.bind(this.field),s=this.field.isZero.bind(this.field);for(let a=0;a<r;a++)for(let u=0;u<r;u++)if(a===u&&!n(i[a*r+u])||a!==u&&!s(i[a*r+u]))return!1;return!0}get isZero(){let t=this.field.isZero.bind(this.field);return this.data.every(r=>t(r))}at(...t){let r=this.data.length;return this.data[this._index(t)%r]}diagonal(t,r){if(t??(t=1),r??(r=2),t===r||t<=0||t>this.shape.length||this.shape[t-1]!==this.shape[r-1])return;let i=new Array(this.shape[t-1]),n=this.data,s=this.shape[t-1];for(let a=0;a<s;a++)i[a]=n[a*s+a];return i}trace(t,r){if(this.rank!==2)return;let[i,n]=this.shape;if(i!==n)return;let s=this.data,a=new Array(i);for(let u=0;u<i;u++)a[u]=s[u*i+u];return this.field.addn(...a)}reshape(...t){return Ui(this.ce,{dtype:this.dtype,shape:t,data:this.data})}flatten(){return this.data}upcast(t){let r=this.field.cast(this.data,t);if(r===void 0)throw Error(`Cannot cast tensor to ${t}`);return Ui(this.ce,{dtype:t,shape:this.shape,data:r})}transpose(t,r,i){if(this.rank!==2)return;if(t??(t=1),r??(r=2),t===r)return this;if(t<=0||t>2||r<=0||r>2)return;let[n,s]=this.shape,a=this.data;i&&(a=a.map(d=>i(d)));let u=0,f=new Array(n*s),p=s;for(let d=0;d<s;d++)for(let b=0;b<n;b++)f[u++]=a[b*p+d];return Ui(this.ce,{dtype:this.dtype,shape:[s,n],data:f})}conjugateTranspose(t,r){let i=this.field.conjugate.bind(this.field);return this.transpose(t,r,i)}determinant(){if(this.rank!==2)return;let[t,r]=this.shape;if(t!==r)return;if(t===1)return this.data[0];let i=this.field.add.bind(this.field),n=this.field.mul.bind(this.field),s=this.field.neg.bind(this.field);if(t===2){let[O,R,A,M]=this.data;return i(n(O,M),s(n(R,A)))}let a=this.field.addn.bind(this.field),u=this.field.muln.bind(this.field);if(t===3){let[O,R,A,M,T,q,W,J,te]=this.data;return a([u(O,T,te),u(R,q,W),u(A,M,J),s(u(A,T,W)),s(u(R,M,te)),s(u(O,q,J))])}let f=this.shape[0],p=!1,d=this.field.div.bind(this.field),b=this.field.sub.bind(this.field),x=new Array(f).fill(0).map((O,R)=>R),I=[...this.data];for(let O=0;O<f;O++){let R=x[O-1];if(this.at(R,O)===0){let T;for(T=O+1;T<f;T++)if(this.at(x[T],O)!==0){R=x[T],x[T-1]=x[O-1],x[O-1]=R,p=!p;break}if(T===f)return this.at(R,O)}let A=this.at(R,O),M=O===0?1:this.at(x[O-2],O-2);for(let T=O+1;T<f;T++){let q=x[T-1];for(let W=O+1;W<f;W++)I[q][W]=d(b(n(I[q][W],A),n(I[q][O],I[R][W])),M)}}let L=I[x[f-1]][f-1];return p?this.field.neg(L):L}inverse(){if(this.rank!==2)return;let[t,r]=this.shape;if(t!==r)return;if(t===2){let[x,I,L,O]=this.data,R=this.determinant();if(R===void 0||this.field.isZero(R))return;let A=this.field.div.bind(this.field),M=this.field.neg.bind(this.field),T=[A(O,R),M(A(I,R)),M(A(L,R)),A(x,R)];return Ui(this.ce,{dtype:this.dtype,shape:[r,r],data:T})}let i=this.shape[0],n=this.field.div.bind(this.field),s=this.field.sub.bind(this.field),a=this.field.mul.bind(this.field),u=this.array,f=new Array(i).fill(0).map((x,I)=>{let L=new Array(i).fill(0);return L[I]=1,L}),p=u.map((x,I)=>[...x,...f[I]]),d=new Array(i).fill(0).map((x,I)=>I);for(let x=0;x<i;x++){let I=d[x-1];if(this.at(I,x)===0){let R;for(R=x+1;R<i;R++)if(this.at(d[R],x)!==0){I=d[R],d[R-1]=d[x-1],d[x-1]=I;break}if(R===i)return}let L=this.at(I,x),O=x===0?1:this.at(d[x-2],x-2);for(let R=x+1;R<i;R++){let A=d[R-1];for(let M=x+1;M<i*2;M++)p[A][M]=s(p[A][M],a(n(a(p[A][x],p[I][M]),L),O))}}for(let x=i-1;x>=0;x--){let I=p[d[x],x];for(let L=0;L<x;L++){let O=d[L];for(let R=i;R<i*2;R++)p[O][R]=s(p[O][R],a(n(a(p[O][x],p[x][R]),I),I))}for(let L=i;L<i*2;L++)p[x][L]=n(p[x][L],I)}let b=p.map(x=>x.slice(i));return Ui(this.ce,{dtype:this.dtype,shape:[r,r],data:b})}pseudoInverse(){}adjugateMatrix(){}minor(t,r){}map1(t,r){return Ui(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map(i=>t(i,r))})}map2(t,r){let i=r.data;return Ui(this.ce,{dtype:this.dtype,shape:this.shape,data:this.data.map((n,s)=>t(n,i[s]))})}add(t){return Nn.broadcast(this.field.add.bind(this.field),this,t)}subtract(t){return Nn.broadcast(this.field.sub.bind(this.field),this,t)}multiply(t){return Nn.broadcast(this.field.mul.bind(this.field),this,t)}divide(t){return Nn.broadcast(this.field.div.bind(this.field),this,t)}power(t){return Nn.broadcast(this.field.pow.bind(this.field),this,t)}equals(t){if(this.rank!==t.rank||!this.shape.every((s,a)=>s===t.shape[a]))return!1;let r=this.field.equals.bind(this.field),i=this.field.cast.bind(this.field),n=this.dtype;return this.dtype!==t.dtype?!!this.data.every((s,a)=>r(s,i(t.data[a],n))):this.data.every((s,a)=>r(s,t.data[a]))}};function Iw(e){let t=new Array(e.length);for(let r=e.length-1,i=1;r>=0;r--)t[r]=i,i*=e[r];return t}var zw=class extends eo{constructor(e,t){super(e,t),this.dtype="float64",this.data=t.data}get isZero(){return this.data.every(e=>e===0)}},Cw=class extends eo{constructor(e,t){super(e,t),this.dtype="complex128",this.data=t.data}},$w=class extends eo{constructor(e,t){super(e,t),this.dtype="bool",this.data=t.data}},Dw=class extends eo{constructor(e,t){super(e,t),this.dtype="expression",this.data=t.data}};function Ui(e,t){let r=t.dtype;return r==="float64"||r==="float32"||r==="uint8"||r==="int32"?new zw(e,t):r==="bool"?new $w(e,t):r==="complex64"||r==="complex128"?new Cw(e,t):new Dw(e,t)}var v6=class Yh extends Jt{constructor(t,r,i){if(super(t,i==null?void 0:i.metadata),this.options=i,r instanceof eo)this._tensor=r;else{let n=(i==null?void 0:i.canonical)??!0;this._operator=r.op??"List",this._ops=n?jn(t,r.ops):r.ops,this._expression=t._fn(this._operator,this._ops,{canonical:n})}t._register(this)}get structural(){return this._expression??(this._expression=this._tensor.expression),this._expression}get tensor(){if(this._tensor===void 0){this._operator,this._ops;let t=t4(this._operator,this._ops);if(t===void 0)throw t4(this._operator,this._ops),new Error("Invalid tensor");this._tensor=Ui(this.engine,t)}return this._tensor}get baseDefinition(){return this.structural.baseDefinition}get functionDefinition(){return this.structural.functionDefinition}bind(){this.structural.bind()}reset(){}get hash(){return Yl("BoxedTensor")}get canonical(){return this.isCanonical?this:new Yh(this.engine,{op:this._operator,ops:this._ops},{canonical:!0})}get isCanonical(){return this._tensor?!0:this._expression.isCanonical}set isCanonical(t){this._tensor||(this.structural.isCanonical=t)}get isPure(){return this._tensor?!0:this.structural.isPure}get isValid(){return this._tensor?!0:this.structural.isValid}get complexity(){return 97}get operator(){return this._tensor?"List":this._operator}get nops(){return this._tensor?this._tensor.shape[0]:this.structural.nops}get ops(){return this.structural.ops}get op1(){if(this._tensor){let t=this._tensor.data;return t.length===0?this.engine.Nothing:this.engine.box(t[0])}return this.structural.op1}get op2(){if(this._tensor){let t=this._tensor.data;return t.length<2?this.engine.Nothing:this.engine.box(t[1])}return this.structural.op2}get op3(){if(this._tensor){let t=this._tensor.data;return t.length<3?this.engine.Nothing:this.engine.box(t[2])}return this.structural.op3}neg(){return this.structural.neg()}inv(){return this.engine.One.div(this.structural)}abs(){return this.structural.abs()}add(t){return this.structural.add(t)}sub(t){return this.structural.sub(t)}mul(t){return this.structural.mul(t)}div(t){return this.structural.div(t)}pow(t){return this.structural.pow(t)}root(t){return this.structural.root(t)}sqrt(){return this.structural.sqrt()}get shape(){return this.tensor.shape}get rank(){return this.tensor.rank}get type(){return this.isValid?Ee("list<number>"):"error"}get json(){return this.structural.json}isEqual(t){return this===t?!0:t instanceof Yh?this.tensor.equals(t.tensor):this.structural.isEqual(t)}get isCollection(){return!0}contains(t){let r=this.tensor.data,i=this.tensor.field.cast(t,this.tensor.dtype);if(typeof i=="number")return r.includes(i);let n=r.map(s=>this.tensor.field.cast(s,"expression")??t.engine.Nothing);for(let s of n)if(t.isSame(s))return!0;return!1}get size(){return this.tensor.shape.reduce((t,r)=>t*r,1)}each(t,r){let i=this.tensor.data,n=t??1;return r=Math.min(r??i.length,i.length),r<=0?{next:()=>({value:void 0,done:!0})}:{next:()=>r>0?(r--,{value:this.engine.box(i[n++-1]),done:!1}):{value:void 0,done:!0}}}at(t){}indexOf(t){return-1}match(t,r){return _s(t)||(t=this.engine.box(t,{canonical:!1})),B0(t)?{[V0(t)]:this}:this.structural.match(t,r)}evaluate(t){return this._tensor?this:this.structural.evaluate(t)}simplify(t){return this._tensor?this:this.structural.simplify(t)}N(){return this._tensor?this:this.structural.N()}};function _r(e){return e instanceof v6}function b6(e,t){let r,i=[],n=!0,s=(a,u=0)=>{if(a.length!==0){a.length>1&&i[u]!==void 0?n=n&&i[u]===a.length:i[u]=Math.max(i[u]??0,a.length);for(let f of a)if(f.operator===e?s(f.ops,u+1):r=y6(r,Aw(f)),!n)return}};return s(t),n?{shape:i,dtype:r}:void 0}function t4(e,t){let{shape:r,dtype:i}=b6(e,t)??{shape:[],dtype:void 0};if(i===void 0)return;let n=!0,s=[],a=g6(t[0].engine,"expression"),u=a.cast.bind(a),f=p=>{for(let d of p)if(d.operator===e)f(d.ops);else{let b=u(d,i);if(b===void 0){n=!1;return}s.push(b)}};if(f(t),!!n)return{shape:r,data:s,dtype:i}}function x6(e,{engine:t}){if(e.length===0)return null;let r=e[0];if(e.length===1)return r.canonical;if(e.length===2){let i=r.canonical.re;if(Number.isInteger(i)){let s=e[1];if(s.operator==="Divide"||s.operator==="Rational"){let[a,u]=[s.op1.canonical.re,s.op2.canonical.re];if(a>0&&a<=1e3&&u>1&&u<=1e3&&Number.isInteger(a)&&Number.isInteger(u)){let f=s.canonical;return i<0&&(f=f.neg()),t._fn("Add",[r.canonical,f])}}}let n=e[1];if(!isNaN(i)){let s=n.canonical;if(s.re===0&&s.im===1)return t.number(t.complex(0,i))}if(r.symbol&&n.operator==="Delimiter"&&!t.lookupSymbol(r.symbol)){if(n.nops===0)return t.lookupFunction(r.symbol)||t.declare(r.symbol,"function"),t.box([r.symbol]);let s=n.op1.operator==="Sequence"?n.op1.ops:[n.op1];if(s=lr(s),!t.lookupSymbol(r.symbol))return t.lookupFunction(r.symbol)||t.declare(r.symbol,"function"),t.function(r.symbol,s)}if(r.symbol&&n.operator==="Delimiter"&&(n.op2.string==="[,]"||n.op2.string==="[;]")){let s=n.op1.operator==="Sequence"?n.op1.ops:[n.op1];return t.function("At",[r,...s])}}return e=w6(e),e=lr(e),e.every(i=>i.isValid&&(i.type==="unknown"||G(i.type,"number")||Ju(i)&&!i.string))?sr(t,e):t._fn("Tuple",e)}function w6(e){let t=[];for(let r of e)r.operator==="InvisibleOperator"?t.push(...w6(r.ops)):t.push(r);return t}function pl(e,t){if(t===!1)return e;if(t===!0)return e.canonical;typeof t=="string"&&(t=[t]);for(let r of t)switch(r){case"InvisibleOperator":e=Kh(e);break;case"Number":e=N6(e);break;case"Multiply":e=k6(e);break;case"Add":e=S6(e);break;case"Power":e=oa(e);break;case"Divide":e=_6(e);break;case"Flatten":e=Xh(e);break;case"Order":e=j7(e,{recursive:!0});break;default:throw Error("Invalid canonical form")}return e}function Xh(e){var i;if(!e.operator||!e.ops||e.nops===0)return e;if(e.operator==="Delimiter")return Xh(e.op1);let t=e.engine,r=e.operator==="Add"||e.operator==="Multiply";return r||(i=t.lookupFunction(e.operator))!=null&&i.associative&&(r=!0),r?t.function(e.operator,e0(e.ops.map(Xh),e.operator)):e}function Kh(e){return e.ops?e.operator==="InvisibleOperator"?x6(e.ops.map(Kh),{engine:e.engine})??e:e.engine._fn(e.operator,e.ops.map(Kh)):e}function N6(e){return e.isNumberLiteral?e.canonical:e.ops?e.engine._fn(e.operator,e.ops.map(N6)):e}function k6(e){if(!e.ops)return e;let t=e.ops.map(k6);return e.operator==="Multiply"?sr(e.engine,t.map(r=>r.canonical)):e.operator==="Negate"?sr(e.engine,[t[0],e.engine.NegativeOne]):e}function S6(e){if(!e.ops)return e;let t=e.ops.map(S6);return e.operator==="Add"?sn(e.engine,t):e.operator==="Subtract"?sn(e.engine,[t[0],t[1].neg()]):e.engine._fn(e.operator,t)}function oa(e){return e.ops?e.operator==="Power"?oa(e.op1).pow(oa(e.op2)):e.ops?e.engine._fn(e.operator,e.ops.map(oa)):e:e}function _6(e){return e.operator==="Divide"?Hn(oa(e.op1),oa(e.op2)):e.ops?e.engine._fn(e.operator,e.ops.map(_6)):e}function Jh(e,t,r){if(t instanceof Jt)return t;if(t=Oe(t),typeof t=="string")return Mi(e,t,r);if(Array.isArray(t)){let[i,...n]=t;return new Un(e,i,n.map(s=>Jh(e,s,r)))}if(typeof t=="object"){if("fn"in t)return Jh(e,t.fn,r);if("str"in t)return new xa(e,t.str);if("sym"in t)return Mi(e,t.sym,r);if("num"in t)return Mi(e,t.num,r)}return Mi(e,t,r)}function ep(e,t,r,i){if(i=i?{...i}:{},"canonical"in i||(i.canonical=!0),!$r(t))throw new Error(`Unexpected function name: "${t}" (not a valid identifier: ${ds(t)})`);let n=i.structural??!1;if(t==="Hold")return new Un(e,"Hold",[Jh(e,r[0],i)],{...i,canonical:!0,structural:n});if(t==="Error"||t==="ErrorCode")return e._fn(t,r.map(s=>e.box(s,{canonical:!1})),i.metadata);if(t==="String")return r.length===0?new xa(e,"",i.metadata):new xa(e,r.map(s=>r4(s)??"").join(""),i.metadata);if(t==="Symbol"&&r.length>0)return e.symbol(r.map(s=>r4(s)??"").join(""),i);if(t==="Number"&&r.length===1)return Mi(e,r[0],i);if(n===!1&&(i.canonical===!0||i.canonical==="Number"||Array.isArray(i.canonical)&&i.canonical.includes("Number"))){if((t==="Divide"||t==="Rational")&&r.length===2){let s=i4(r[0]);if(s!==null){let a=i4(r[1]);if(a!==null)return e.number([s,a],i)}t="Divide"}if(t==="Complex"){if(r.length===1){let s=r[0];if(s instanceof Jt&&s.isNumberLiteral)return e.number(e.complex(0,s.re),i);let a=xe(r[0]);return a!==null&&a!==0?e.number(e.complex(0,a),i):e.box(s).mul(e.I)}if(r.length===2){let s=r[0]instanceof Jt?r[0].re:xe(r[0]),a=r[1]instanceof Jt?r[1].re:xe(r[1]);return a!==null&&s!==null&&!isNaN(a)&&!isNaN(s)?a===0&&s===0?e.Zero:a!==0?e.number(e._numericValue({re:s,im:a}),i):Mi(e,r[0],i):Mi(e,r[0],i).add(Mi(e,r[1],i).mul(e.I))}throw new Error("Expected one or two arguments with Complex expression")}if(t==="Negate"&&r.length===1){let s=r[0];if(typeof s=="number")return e.number(-s,i);if(s instanceof zt)return e.number(s.neg(),i);let a=e.box(s,i),u=a.numericValue;if(u!==null)return e.number(typeof u=="number"?-u:u.neg(),i);r=[a]}}return i.canonical===!0?Pw(e,t,r,i.metadata):pl(new Un(e,t,r.map(s=>Mi(e,s,{canonical:i.canonical,structural:n})),{metadata:i.metadata,canonical:!1,structural:n}),i.canonical??!1)}function Mi(e,t,r){if(t==null)return e.error("missing");if(t instanceof Lt)return qw(e,t);if(t instanceof Jt)return pl(t,(r==null?void 0:r.canonical)??!0);r=r?{...r}:{},"canonical"in r||(r.canonical=!0);let i=r.canonical===!0,n=r.structural??!1;if(Array.isArray(t)){if(typeof t[0]!="string")throw new Error(`The first element of an array should be a string (the function name): ${JSON.stringify(t)}`);return pl(ep(e,t[0],t.slice(1),{canonical:i,structural:n}),r.canonical)}if(typeof t=="number"||t instanceof zt||t instanceof je)return e.number(t);if(typeof t=="string")return t.startsWith("'")&&t.endsWith("'")?new xa(e,t.slice(1,-1)):/^[+-]?[0-9]/.test(t)?e.number(t):$r(t)?e.symbol(t,{canonical:i}):e.error("invalid-identifier",t);if(typeof t=="object"){if("fn"in t){let[s,...a]=t.fn;return pl(ep(e,s,a,{canonical:i,structural:n}),r.canonical)}if("str"in t)return new xa(e,t.str);if("sym"in t)return e.symbol(t.sym,{canonical:i});if("num"in t)return e.number(t,{canonical:i});throw new Error(`Unexpected MathJSON object: ${JSON.stringify(t)}`)}return e.symbol("Undefined")}function r4(e){if(typeof e=="string")return e;if(e instanceof Jt)return e.string??e.symbol??e.toString();if(typeof e=="object"){if("str"in e)return e.str;if("fn"in e&&e.fn[0]==="String"&&typeof e.fn[1]=="string")return e.fn[1]}return Array.isArray(e)&&e[0]==="String"&&typeof e[1]=="string"?e[1]:null}function Pw(e,t,r,i){let n=Ow(e,t,r,i);if(n)return n;if(t==="List"){let p=r.map(x=>e.box(x)),{shape:d,dtype:b}=b6("List",p)??{};return b&&d?new v6(e,{op:"List",ops:p}):e._fn("List",p)}let s=e.lookupFunction(t);if(!s)return new Un(e,t,lr(jn(e,r)),{metadata:i,canonical:!0});let a;if(s.hold?a=r.map(p=>{let d=e.box(p,{canonical:!1});return d.operator==="ReleaseHold"?d.op1.canonical:d}):a=r.map(p=>e.box(p)),s.canonical){try{let p=s.canonical(a,{engine:e});if(p)return p}catch(p){console.error(p.message)}return new Un(e,t,a,{metadata:i,canonical:!1})}let u=lr(a,s.associative?t:void 0),f=Mx(e,u,s);if(f)return e._fn(t,f,i);if(u.length===1&&u[0].operator===t){if(s.involution)return u[0].op1;if(s.idempotent)return e._fn(t,a[0].ops,i)}return e._fn(t,bm(t,u),i)}function Ow(e,t,r,i){let n=[];if(t==="Add"||t==="Multiply")n=li(e,Fa(e,r),{flatten:t});else if(t==="Negate"||t==="Square"||t==="Sqrt"||t==="Exp")n=li(e,Fa(e,r),1);else if(t==="Ln"||t==="Log")n=li(e,Fa(e,r)),n.length===0&&(n=[e.error("missing")]);else if(t==="Power"||t==="Root")n=li(e,Fa(e,r),2);else if(t==="Divide")n=li(e,Fa(e,r)),n.length===0&&(n=[e.error("missing"),e.error("missing")]),n.length===1&&(n=[n[0],e.error("missing")]);else return null;if(!n.every(s=>s.isValid))return e._fn(t,n,i);if(t==="Add")return sn(e,n);if(t==="Negate")return Gx(n[0]);if(t==="Multiply")return sr(e,n);if(t==="Divide")return n.length===2?Hn(...n):n.slice(1).reduce((s,a)=>Hn(s,a),n[0]);if(t==="Exp")return mu(e.E,n[0]);if(t==="Square")return mu(n[0],e.number(2));if(t==="Power")return mu(n[0],n[1]);if(t==="Root")return jl(n[0],n[1]);if(t==="Sqrt")return jl(n[0],2);if(t==="Ln"||t==="Log"){if(n.length>0){if(n[0].is(1))return e.Zero;if(n.length===1)return e._fn(t,n,i)}return e._fn("Log",n,i)}return null}function qw(e,t){if(t.isZero)return e.Zero;if(t.isOne)return e.One;if(t.isNegativeOne)return e.NegativeOne;if(t.isNaN)return e.NaN;if(t.isNegativeInfinity)return e.NegativeInfinity;if(t.isPositiveInfinity)return e.PositiveInfinity;if(t=t.asExact??t,!t.isExact){let s=t.im;return s===0?e.number(t.bignumRe??t.re):t.re===0?e.number(e.complex(0,s)):t.bignumRe!==void 0&&!s0(t.bignumRe)?sn(e,[e.number(t.bignumRe),e.number(e.complex(0,s))]):e.number(e.complex(t.re,t.im))}let r=[],i=t;if(i.sign!==0)if(i.radical===1)r.push(e.number(i.rational));else{let s=i.rational,a=e.function("Sqrt",[e.number(i.radical)]);if(Zr(s))r.push(a);else{let[u,f]=s;f===1?u===1?r.push(a):r.push(e.function("Multiply",[e.number(u),a])):u===1?r.push(e.function("Divide",[a,e.number(f)])):r.push(e.function("Divide",[e.function("Multiply",[e.number(u),a]),e.number(f)]))}}let n;return t.im===0?r.length===0?e.Zero:(n=r.length===1?r[0]:sr(e,r),n):r.length===0?e.number(e.complex(0,t.im)):(n=r.length===1?r[0]:sr(e,r),sn(e,[n,e.number(e.complex(0,t.im))]))}function i4(e){return typeof e=="bigint"?e:typeof e=="number"&&Number.isInteger(e)?BigInt(e):e instanceof Jt?fm(e):e instanceof zt||typeof e=="string"?Kt(e):e instanceof je?e.im===0?Kt(e.re):null:Lx(e)}var Lw={Sin:["Cos","_"],Cos:["Negate",["Sin","_"]],Tan:["Power",["Sec","_"],2],Sec:["Multiply",["Tan","_"],["Sec","_"]],Csc:["Multiply",["Negate",["Cot","_"]],["Csc","_"]],Cot:["Negate",["Power",["Csc","_"],2]],Arcsin:["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],Arccos:["Negate",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]]],Arctan:["Power",["Add",1,["Power","_",2]],-1],Arcsec:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccsc:["Multiply",["Power",["Subtract",1,["Power","_",2]],["Negate","Half"]],["Negate",["Power","_",2]]],Arccot:["Negate",["Power",["Add",1,["Power","_",2]],-1]],Sinh:["Cosh","_"],Cosh:["Sinh","_"],Tanh:["Power",["Sech","_"],2],Sech:["Multiply",["Tanh","_"],"Sech"],Csch:["Multiply",["Coth","_"],"Csch"],Coth:["Negate",["Power",["Csch","_"],2]],Arcsinh:["Power",["Add",["Power","_",2],1],["Negate","Half"]],Arccosh:["Power",["Subtract",["Power","_",2],1],["Negate","Half"]],Arctanh:["Power",["Subtract",1,["Power","_",2]],-1],Arcsech:["Negate",["Power",["Multiply","2","Subtract",["Power","_",2]],["Negate","Half"]]],Arccsch:["Negate",["Power",["Multiply","2","Add",["Power","_",2]],["Negate","Half"]]],Arcoth:["Negate",["Power",["Subtract",1,["Power","_",2]],-1]],Ln:["Divide",1,"_"],Log:["Power",["Multiply","_",["Ln","10"]],-1],Sqrt:["Multiply",["Power","_",["Negate","Half"]],"Half"],Abs:["Which",["Equal","_",0],NaN,["Less","_",0],-1,["Greater","_",0],1,"True",["D",["Abs","_"],"_"]],Erf:["Multiply",["Divide","2",["Sqrt","Pi"]],["Exp",["Negate",["Square","_"]]]],Gamma:["Multiply",["Gamma","_"],["Digamma","_"]],Digamma:["Add",["Multiply",["Digamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Zeta:["Multiply",["Multiply",-1,["Zeta","_"]],["Digamma","_"]],PolyGamma:["Add",["Multiply",["PolyGamma","_"],["Gamma","_"]],["Multiply",["Power","_",-1],["Gamma","_"]]],Beta:["Multiply",["Add",["Multiply",["Beta","_"],["Digamma","_"]],["Multiply",["Power","_",-1],["Beta","_"]]],["Beta","_"]],Erfc:["Multiply",["Negate",["Erfc","_"]],["Exp",["Negate",["Power","_",2]]],["Power","_",-1]],LambertW:["Multiply",["Power","_",-1],["Multiply",["Add","_",["LambertW","_"]],["Add",["LambertW","_"],1]]],AiryAi:["Multiply",["AiryAi","_"],["AiryBi","_"]],AiryBi:["Multiply",["AiryAi","_"],["AiryBi","_"]],BesselJ:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselY:["Multiply",["BesselJ","_"],["BesselY","_"]],BesselI:["Multiply",["BesselI","_"],["BesselK","_"]],BesselK:["Multiply",["BesselI","_"],["BesselK","_"]],FresnelS:["Multiply",["FresnelS","_"],["FresnelC","_"]],FresnelC:["Multiply",["FresnelS","_"],["FresnelC","_"]],Erfi:["Multiply",["Erfi","_"],["Erf","_"]]};function Rw(e,t){if(t===0)return e;let r=e.engine,i="_";e.symbol&&e.functionDefinition&&(e=L0(r.symbol(e.symbol),[r.symbol("_")])),e.operator==="Function"&&(i=e.ops[1].symbol??"_",e=e.ops[0]);let n=e;for(;t-- >0&&n;)n=ii(n,i);return n}function ii(e,t){let r=e.engine;if(e.string)return;if(e.isNumberLiteral)return e.engine.Zero;if(e.symbol===t)return e.engine.One;if(e.symbol)return e.engine.Zero;if(!e.operator)return;if(e.operator==="Negate"){let a=ii(e.op1,t);return a?a.neg():r._fn("D",[e.op1,r.symbol(t)]).neg()}if(e.operator==="Add"){let a=e.ops.map(u=>ii(u,t));return a.some(u=>u===void 0)?void 0:Gt(...a).evaluate()}if(e.operator==="Multiply"){let a=e.ops.map((u,f)=>{let p=e.ops.slice();p.splice(f,1);let d=Jr(...p);return(ii(u,t)??r._fn("D",[u,r.symbol(t)])).mul(d)});return a.some(u=>u===void 0)?void 0:Gt(...a).evaluate()}if(e.operator==="Power"){let[a,u]=e.ops;if(a.symbol===t)return u.mul(a.pow(u.add(r.NegativeOne))).evaluate();let f=a,p=u,d=ii(f,t)??r._fn("D",[f,r.symbol(t)]),b=(ii(p,t)??r._fn("D",[p,r.symbol(t)])).mul(f.ln()),x=p.mul(d).div(f);return e.mul(b.add(x)).evaluate()}if(e.operator==="Divide"){let[a,u]=e.ops,f=ii(a,t)??r._fn("D",[a,r.symbol(t)]),p=ii(u,t)??r._fn("D",[u,r.symbol(t)]);return f.mul(u).sub(p.mul(a)).div(u.pow(2)).evaluate()}let i=Lw[e.operator];if(!i){if(e.nops>1)return;let a=r._fn("Derivative",[r.symbol(e.operator),r.One]);if(!a.isValid)return;let u=e.ops[0],f=ii(u,t)??r._fn("D",[u,r.symbol(t)]);return f.isValid?r._fn("Apply",[a,u]).mul(f):void 0}if(e.nops>1)return r._fn("D",[e,r.symbol(t)]);let n=e.ops[0],s=ii(n,t)??r._fn("D",[n,r.symbol(t)]);return L0(r.box(i),[n]).mul(s)}var Fw=[{Derivative:{threadable:!1,hold:!0,signature:"(any, order:number?) -> function",evaluate:e=>{var i;let t=e[0].evaluate(),r=Math.floor((i=e[1])==null?void 0:i.N().re);return Rw(t,isNaN(r)?1:r)}},D:{threadable:!1,hold:!0,signature:"(expression, variable:symbol, variables:...symbol) -> expression",canonical:(e,{engine:t})=>{let r=t,i=e[0];if(!i)return null;r.pushScope();let n=e.slice(1);i.bind(),i=i.canonical;let s=r._fn("D",[i,...n]);return r.popScope(),s},evaluate:(e,{engine:t})=>{let r=t,i=e[0].canonical,n=r.swapScope(i.scope);i=i.evaluate();let s=e.slice(1);s.length===0&&(i=void 0);for(let a of s){if(!a.symbol){i=void 0;break}if(i=ii(i,a.symbol),i===void 0)break}return r.swapScope(n),i=i==null?void 0:i.canonical,(i==null?void 0:i.operator)==="D"?i:i==null?void 0:i.evaluate()}},ND:{threadable:!1,hold:!0,signature:"(function, point:number) -> number",evaluate:(e,{engine:t})=>{var n;let r=(n=e[1])==null?void 0:n.canonical.re;if(isNaN(r))return;let i=C1(t.box(e[0]));return t.number(kx(i,r))}},Integrate:{wikidata:"Q80091",threadable:!1,hold:!0,signature:"(expression, range:(tuple|symbol|nothing)) -> number",canonical:(e,{engine:t})=>{var f,p,d,b,x;let r=t,i=e[1],n=null,s=null,a=null;i&&i.operator!=="Tuple"&&i.operator!=="Triple"&&i.operator!=="Pair"&&i.operator!=="Single"?n=i:i&&(n=((f=i.ops)==null?void 0:f[0])??null,s=((d=(p=i.ops)==null?void 0:p[1])==null?void 0:d.canonical)??null,a=((x=(b=i.ops)==null?void 0:b[2])==null?void 0:x.canonical)??null),n&&n.operator==="Hold"&&(n=n.op1),n&&n.operator==="ReleaseHold"&&(n=n.op1.evaluate()),n??(n=r.Nothing),n.symbol||(n=r.typeError("symbol",n.type,n)),s&&s.symbol!=="Nothing"&&(s=va(r,s,"number")),a&&a.symbol!=="Nothing"&&(a=va(r,a,"number")),s&&a?i=r.tuple(n,s,a):a?i=r.tuple(n,r.NegativeInfinity,a):s?i=r.tuple(n,s):i=n;let u=e[0]??r.error("missing");return u=u.canonical,u.operator==="Delimiter"&&u.op1.operator==="Sequence"&&(u=u.op1.op1),r._fn("Integrate",[u,i])}},NIntegrate:{threadable:!1,hold:!0,signature:"(expression, lower:number, upper:number) -> number",evaluate:(e,{engine:t})=>{let r=t.precision;t.precision="machine";let i=t.strict;t.strict=!1;let[n,s]=e.slice(1).map(u=>u.value),a;if(typeof n=="number"&&typeof s=="number"){let u=C1(e[0]);a=t.number(t6(u,n,s))}return t.precision=r,t.strict=i,a}}},{Limit:{description:"Limit of a function",complexity:5e3,threadable:!1,hold:!0,signature:"(expression, point:number, direction:number?) -> number",evaluate:(e,{engine:t})=>{let[r,i,n]=e,s=i.N().re;if(!isFinite(s))return;let a=Yn(r);return t.number(Ol(u=>{var p;let f=(p=a([t.number(u)]))==null?void 0:p.value;return typeof f=="number"?f:Number.NaN},s,n?n.re:1))}},NLimit:{description:"Numerical approximation of the limit of a function",complexity:5e3,threadable:!1,hold:!0,signature:"(expression, point:number, direction:number?) -> number",evaluate:([e,t,r],{engine:i})=>{let n=t.N().re;if(Number.isNaN(n))return;let s=Yn(e);return i.number(Ol(a=>{var f;let u=(f=s([i.number(a)]))==null?void 0:f.value;return typeof u=="number"?u:Number.NaN},n,r?r.re:1))}}}],Bw=[{Block:{hold:!0,signature:"(any) -> any",canonical:Hw,evaluate:jw},Condition:{hold:!0,signature:"(value, symbol) -> boolean",evaluate:([e,t],{engine:r})=>{let i=[];return t.symbol?i=[t.symbol]:t.operator==="And"&&(i=t.ops.map(n=>n.symbol??"")),b2(e,i)?r.True:r.False}},If:{hold:!0,signature:"(expression, expression, expression) -> any",type:([e,t,r])=>fn(t.type,r.type),evaluate:([e,t,r],{engine:i})=>(e=e.evaluate(),e&&e.symbol==="True"?(t==null?void 0:t.evaluate())??i.Nothing:(r==null?void 0:r.evaluate())??i.Nothing)},Loop:{hold:!0,signature:"(body:expression, collection:expression) -> any",type:([e])=>e.type,evaluate:([e,t],{engine:r})=>{if(e??(e=r.Nothing),e.symbol==="Nothing")return e;if(t&&t.isCollection){let n,s=Yn(e),a=0;for(let u of Ye(t)){if(n=s([u])??r.Nothing,n.operator==="Break")return n.op1;if(n.operator==="Return")return n;if(a++>r.iterationLimit)return r.error("iteration-limit-exceeded")}}let i=0;for(;;){let n=e.evaluate();if(n.operator==="Break")return n.op1;if(n.operator==="Return")return n;if(i++>r.iterationLimit)return r.error("iteration-limit-exceeded")}}},Which:{hold:!0,signature:"(...expression) -> any",type:e=>e.length%2!==0?"nothing":fn(...e.filter((t,r)=>r%2===1).map(t=>t.type)),evaluate:(e,t)=>Vw(e,t)},FixedPoint:{hold:!0,signature:"any -> any"}}];function Vw(e,t){let r=0;for(;r<e.length-1;){if(e[r].evaluate().symbol==="True")return e[r+1]?e[r+1].evaluate(t):t.engine.symbol("Undefined");r+=2}return t.engine.symbol("Undefined")}function jw(e,{engine:t}){if(e.length===0)return t.Nothing;t.resetContext();let r;for(let i of e){let n=i.operator;if(n==="Return"){r=i.op1.evaluate();break}if(n==="Break"||n==="Continue"){r=t.box([n,i.op1.evaluate()]);break}r=i.evaluate()}return r??t.Nothing}function Hw(e,t){let{engine:r}=t;if(e.length===0)return null;r.pushScope();let i=[],n=[];for(let a of e)a.operator==="Declare"?i.push(a):n.push(T6(a));let s=r._fn("Block",[...i,...n]);return r.popScope(),s}function T6(e){return e.operator==="Declare"&&e.engine.error("unexpected-declare"),e.ops?e.engine._fn(e.operator,e.ops.map(T6)):e}var Uw=[{Real:{threadable:!0,complexity:1200,signature:"number -> real",sgn:([e])=>{let t=e.re;if(!isNaN(t))return t===0?"zero":t>0?"positive":"negative"},evaluate:(e,{engine:t})=>{let r=e[0].numericValue;if(r!==null)return typeof r=="number"?e[0]:t.number(r.bignumRe??r.re)}},Imaginary:{threadable:!0,complexity:1200,signature:"number -> real",sgn:([e])=>{let t=e.im;if(!isNaN(t))return t===0?"zero":t>0?"positive":"negative"},evaluate:(e,{engine:t})=>{let r=e[0].numericValue;if(r!==null)return typeof r=="number"?t.Zero:t.number(r.im)}},Argument:{threadable:!0,complexity:1200,signature:"number -> real",evaluate:(e,{engine:t})=>{let r=e[0].numericValue;if(r!==null)return typeof r=="number"?r>=0?t.Zero:t.Pi:r.im===0?r.re>=0?t.Zero:t.Pi:t.function("ArcTan2",[r.im,r.re]).evaluate()}},AbsArg:{threadable:!0,complexity:1200,signature:"number -> tuple<real, real>",evaluate:(e,{engine:t})=>{if(e[0].numericValue!==null)return t.tuple(t.function("Abs",e).evaluate(),t.function("Argument",e).evaluate())}},Conjugate:{threadable:!0,complexity:1200,signature:"number -> number",type:([e])=>e.type,sgn:([e])=>e.sgn,evaluate:(e,{engine:t})=>{let r=e[0].numericValue;if(r!==null)return typeof r=="number"||r.im===0?e[0]:t.number(t.complex(r.re,-r.im))}},ComplexRoots:{threadable:!0,complexity:1200,signature:"(number, number) -> list<number>",evaluate:(e,{engine:t})=>{let r=e[0].re;if(isNaN(r))return;let i=e[1].re;if(!Number.isInteger(i)||i<=0)return;let n=[],s=e[0].im??0,a=Math.atan2(s,r),u=Math.sqrt(r*r+s*s);for(let f=0;f<i;f++){let p=(a+2*Math.PI*f)/i,d=Math.pow(u,1/i);n.push([d*Math.cos(p),d*Math.sin(p)])}return t.function("List",n.map(f=>t.number(f[1]!==0?t.complex(f[0],f[1]):f[0])))}}}];function ml(e){return e[Math.floor(Math.random()*e.length)]}function n4(e,t){if(e==="Add"||e==="Multiply"){let r=[],i=1+Math.floor(Math.random()*12);for(;i>0;)r.push(Qi(t+1)),i-=1;return[e,...r]}return e==="Divide"||e==="Power"?[e,Qi(t+1),Qi(t+1)]:e==="Root"?[e,Qi(t+1),Qi(10)]:e==="trig"?Gw():[e,Qi(t+1)]}function Gw(){return[ml(["Cos","Sin","Tan","Sinh","Arccos","Arsinh"]),ml(["Pi","-1","0","1",["Divide","Pi",-5],["Multiply",-2,["Divide","Pi",11]],["Multiply","Half","Pi"],["Multiply",5,"Pi"],["Multiply",12,"Pi"],["Divide","Pi",5],["Divide","Pi",9],["Multiply",5,["Divide","Pi",9]],["Multiply",2,["Divide","Pi",11]],["Multiply",2,["Divide","Pi",3]]])]}function Qi(e){if(e??(e=1),e===1){let t=ml([["Sqrt",["Multiply",6,["Sum",["Divide",1,["Power","n",2]],["Triple",["Hold","n"],1,"PositiveInfinity"]]]],"Add","Add","Add","Add","Add","Multiply","Multiply","Multiply","Multiply","Divide","Divide","Divide","Root","Sqrt","Subtract","Negate","trig"]);return typeof t=="string"?n4(t,1):t}if(e===2){let t=Math.random();if(t>.75)return Qi(1);if(t>.5)return Qi(3);let r=ml(["Multiply","Multiply","Add","Power","trig","Ln","Exp"]);return n4(r,2)}return ml([-12345e-9,-2,-2,-2,-3,-5,-6,-12,-1654e-60,0,0,12345e-8,1654e-60,1,2,2,2,2,3,3,5,5,6,6,1234.5678,5678.1234,10,15,18,30,60,1234e54,"123456789.12345678912345e200","987654321.12345678912345",["Rational",-6,10],["Rational",-12,15],["Rational",-15,12],["Rational",3,5],["Rational",12,15],["Rational",15,12],"ExponentialE",["Sqrt",3],["Sqrt",5],["Sqrt",15],["Sqrt",25],["Complex",-1.1,1.1],["Complex",4,5],"x","x","x","x",["Add","x",1],["Divide","x",3],["Square","x"],["Power","x",3],["Power","x",4],["Subtract","x",1],["Add","x",1],"Pi"])}var Ww=[{Nothing:{signature:"nothing"}},{InvisibleOperator:{complexity:9e3,hold:!0,signature:"...any -> any",canonical:x6},Sequence:{hold:!0,signature:"...any -> any",type:e=>e.length===0?"nothing":e.length===1?e[0].type:"any",canonical:(e,{engine:t})=>{let r=lr(e);return r.length===0?t.Nothing:r.length===1?r[0]:t._fn("Sequence",r)}},Delimiter:{complexity:9e3,hold:!0,signature:"(any, string?) -> any",type:e=>e.length===0?"nothing":e[0].type,canonical:(e,{engine:t})=>{var n;if(e.length===0)return t._fn("Tuple",[]);if(e.length>2)return t._fn("Delimiter",tn(t,e,2));let r=e[0];if(r.operator==="Sequence")return t._fn("Tuple",jn(t,r.ops));r=r.canonical;let i=(n=e[1])==null?void 0:n.string;return!i||i.startsWith("(")&&i.endsWith(")")?r:((i==null?void 0:i.length)??0)>3?t._fn("Delimiter",[r,t.error("invalid-delimiter",e[1].toString())]):t._fn("Delimiter",[e[0],va(t,e[1],"string")])},evaluate:(e,t)=>{let r=t.engine;if(e.length===0)return r.Nothing;let i=e[0];return(i.operator==="Sequence"||i.operator==="Delimiter")&&(e=w7(e[0].ops)),e.length===1?e[0].evaluate(t):r._fn("Tuple",e.map(n=>n.evaluate(t)))}},Error:{hold:!0,complexity:500,signature:"((string|expression), expression?) -> nothing",canonical:(e,{engine:t})=>t._fn("Error",e)},ErrorCode:{complexity:500,hold:!0,signature:"(string, ...any) -> error",canonical:(e,{engine:t})=>{let r=va(t,e[0],"string").string;return r==="incompatible-domain"?t._fn("ErrorCode",[t.string(r),e[1],e[2]]):t._fn("ErrorCode",e)}},Hold:{description:"Hold an expression, preventing it from being evaluated",hold:!0,signature:"any -> any",type:([e])=>e.symbol?"symbol":e.string?"string":e.isNumberLiteral?e.type:e.ops?Xb(e.type)??"function":"expression",canonical:(e,{engine:t})=>e.length!==1?null:t.hold(e[0]),evaluate:([e])=>e},HorizontalSpacing:{signature:"number -> nothing",canonical:(e,{engine:t})=>e.length===2?e[0].canonical:t.Nothing},Style:{complexity:9e3,signature:"(expression, ...any) -> expression",type:([e])=>e.type,evaluate:([e])=>e}},{About:{description:"Return information about an expression",hold:!0,signature:"any -> string",evaluate:([e],{engine:t})=>{let r=[e.toString()];if(r.push(""),e.string)r.push("string");else if(e.symbol)if(e.symbolDefinition){let i=e.symbolDefinition;i.isConstant&&r.push("constant"),i.isFunction&&r.push("function"),typeof i.description=="string"?r.push(i.description):Array.isArray(i.description)&&r.push(i.description.join(`
`)),i.wikidata&&r.push(`WikiData: ${i.wikidata}`),i.url&&r.push(`Read More: ${i.url}`)}else r.push("symbol"),r.push(`value: ${e.evaluate().toString()}`);else e.isNumberLiteral?r.push(e.type.toString()):e.ops?(r.push(e.type.toString()),r.push(e.isCanonical?"canonical":"non-canonical")):r.push("Unknown expression's type");return t.string(r.join(`
`))}},Head:{description:"Return the head of an expression, the name of the operator",hold:!0,signature:"any -> symbol",canonical:(e,{engine:t})=>{if(e.length!==1)return null;let r=e[0];return r.operator?t.box(r.operator):t._fn("Head",jn(t,e))},evaluate:(e,{engine:t})=>{var r;return t.symbol(((r=e[0])==null?void 0:r.operator)??"Undefined")}},Tail:{description:"Return the tail of an expression, the operands of the expression",hold:!0,signature:"any -> collection",canonical:(e,{engine:t})=>{if(e.length!==1)return null;let r=e[0];return r.ops?t._fn("Sequence",r.ops):t._fn("Tail",jn(t,e))},evaluate:([e],{engine:t})=>e!=null&&e.ops?t._fn("Sequence",e.ops):t.Nothing},Identity:{description:"Return the argument unchanged",signature:"any -> any",type:([e])=>e.type,evaluate:([e])=>e}},{Apply:{description:"Apply a function to a list of arguments",signature:"(name:symbol, arguments:...expression) -> any",type:([e])=>am(e.type)??"any",canonical:(e,{engine:t})=>e[0].symbol?t.function(e[0].symbol,e.slice(1)):t._fn("Apply",e),evaluate:e=>L0(e[0],e.slice(1))},Assign:{description:"Assign a value to a symbol",hold:!0,pure:!1,signature:"(symbol, any) -> any",type:([e,t])=>t.type,canonical:(e,{engine:t})=>{if(e.length!==2)return null;let r=e[0];if(!r.symbol)return null;let i=e[1];return t._fn("Assign",[r.canonical,i.canonical])},evaluate:(e,{engine:t})=>{let r=e[0],i=e[1];if(!r.symbol)return t.Nothing;let n=i.evaluate();return t.assign(r.symbol,n),n}},Assume:{description:"Assume a type for a symbol",hold:!0,pure:!1,signature:"any -> symbol",evaluate:(e,{engine:t})=>t.symbol(t.assume(e[0]))},Declare:{hold:!0,pure:!1,signature:"symbol -> any",type:([e,t])=>t.type,canonical:(e,{engine:t})=>{if(e.length!==2)return null;let r=e[0],i=e[1];return r.symbol?i.symbol?t._fn("Declare",e):t._fn("Declare",[r,t._fn("Hold",[i])]):null},evaluate:(e,{engine:t})=>{let r=e[0],i=e[1];if(!r.symbol)return t.Nothing;let n=i.evaluate();if(!n.string)return;let s=Ee(n.string);if(Pl(s))return t.declare(r.symbol,s),n}},Type:{hold:!0,signature:"any -> string",evaluate:([e],{engine:t})=>t.string(e.type.toString())},Evaluate:{hold:!0,signature:"any -> any",type:([e])=>e.type,canonical:(e,{engine:t})=>t._fn("Evaluate",tn(t,e,1)),evaluate:([e],t)=>e.evaluate(t)},Function:{complexity:9876,hold:!0,signature:"(any, ...symbol) -> any",type:([e])=>e.type,canonical:(e,{engine:t})=>{if(e.length===0)return t.Nothing;let r=Fh(e[0],e.slice(1));if(!r)return null;let i=r[0].canonical,n=r.slice(1).map(s=>t.symbol(s));return n.length===0?i:t._fn("Function",[i,...n])},evaluate:e=>{}},Simplify:{hold:!0,signature:"any -> expression",canonical:(e,{engine:t})=>t._fn("Simplify",tn(t,e,1)),evaluate:([e])=>e.simplify()??void 0},CanonicalForm:{description:["Return the canonical form of an expression","Can be used to sort arguments of an expression.",'Sorting arguments of commutative functions is a weak form of canonicalization that can be useful in some cases, for example to accept "x+1" and "1+x" while rejecting "x+1" and "2x-x+1"'],complexity:8200,hold:!0,signature:"(any, ...symbol) -> any",canonical:e=>{if(e.length===1)return e[0].canonical;let t=e.slice(1).map(r=>r.symbol??r.string).filter(r=>r!=null);return pl(e[0],t)}},N:{description:"Numerically evaluate an expression",hold:!0,signature:"any -> any",type:([e])=>e.type,canonical:(e,{engine:t})=>{if(e.length!==1)return t._fn("N",tn(t,e,1));let r=e[0].operator;if(r==="N")return e[0].canonical;if(r==="Integrate"){let{index:i,lower:n,upper:s}=R0(e[0].op2);if(!i||n===void 0||s===void 0)return null;let a=e[0].op1;return t._fn("NIntegrate",[t.function("Function",[a,i]),t.number(n),t.number(s)])}return r==="Limit"?t._fn("NLimit",e[0].ops):t._fn("N",e)},evaluate:([e])=>e.N()},Random:{description:["Random(): Return a random number between 0 and 1","Random(n): Return a random integer between 0 and n-1","Random(m, n): Return a random integer between m and n-1"],pure:!1,signature:"(lower:integer?, upper:integer?) -> finite_number",type:([e,t])=>e===void 0&&t===void 0?"finite_number":"finite_integer",sgn:()=>"non-negative",evaluate:(e,{engine:t})=>{if(e.length===0)return t.number(Math.random());let[r,i]=e,n,s;return i===void 0?(n=0,s=Math.floor(r.re-1),isNaN(s)&&(s=0)):(n=Math.floor(r.re),s=Math.floor(i.re),isNaN(n)&&(n=0),isNaN(s)&&(s=0)),t.number(n+Math.floor(Math.random()*(s-n)))}},Signature:{hold:!0,signature:"symbol -> string | nothing",evaluate:([e],{engine:t})=>e.functionDefinition?t.string(e.functionDefinition.signature.toString()):t.Nothing},Subscript:{hold:!0,signature:"(collection|string, any) -> any",type:([e,t])=>e.string&&rt(t)!==null?"integer":e.isCollection&&Ju(e)?el(e.type)??"any":e.symbol?"symbol":"expression",canonical:([e,t],{engine:r})=>{var i;if(e=e.canonical,e.string){let n=rt(t.canonical);if(n!==null&&n>1&&n<=36){let[s,a]=n0(e.string,n);return a?r.error(["unexpected-digit",a[0]],e.toString()):r.number(s)}return r._fn("Baseform",[e,r.error(["invalid-base",t.toString()])])}if(e.isCollection&&Ju(e))return r._fn("At",[e,t.canonical]);if(e.symbol){let n=t.string??t.symbol??((i=rt(t))==null?void 0:i.toString());if(n)return r.symbol(e.symbol+"_"+n)}return t.operator==="Sequence"&&r._fn("Subscript",[e,r._fn("List",t.ops)]),r._fn("Subscript",[e,t])}},Symbol:{complexity:500,description:"Construct a new symbol with a name formed by concatenating the arguments",threadable:!0,hold:!0,signature:"...any -> any",type:e=>e.length===0?"nothing":"symbol",canonical:(e,{engine:t})=>{if(e.length===0)return t.Nothing;let r=e.map(i=>{var n;return i.symbol??i.string??((n=rt(i))==null?void 0:n.toString())??""}).join("");return r.length>0?t.symbol(r):t.Nothing}},Timing:{description:"`Timing(expr)` evaluates `expr` and return a `Pair` of the number of second elapsed for the evaluation, and the value of the evaluation",signature:"(value, repeat: integer?) -> tuple<result:value, time:number>",evaluate:(e,{engine:t})=>{if(e[1].symbol==="Nothing"){let f=globalThis.performance.now(),p=e[0].evaluate(),d=1e3*(globalThis.performance.now()-f);return t.tuple(t.number(d),p)}let r=Math.max(3,Math.round(rt(e[1])??3)),i=[],n;for(;r>0;){let f=globalThis.performance.now();n=e[0].evaluate(),i.push(1e3*(globalThis.performance.now()-f)),r-=1}let s=Math.max(...i),a=Math.min(...i);i=i.filter(f=>f>a&&f<s);let u=i.reduce((f,p)=>f+p,0);return u===0?t.tuple(t.number(s),n):t.tuple(t.number(u/i.length),n)}}},{Wildcard:{signature:"symbol -> symbol",canonical:(e,{engine:t})=>e.length!==1?t.symbol("_"):t.symbol("_"+e[0].symbol)},WildcardSequence:{signature:"symbol -> symbol",canonical:(e,{engine:t})=>e.length!==1?t.symbol("__"):t.symbol("__"+e[0].symbol)},WildcardOptionalSequence:{signature:"symbol -> symbol",canonical:(e,{engine:t})=>e.length!==1?t.symbol("___"):t.symbol("___"+e[0].symbol)}},{LatexString:{description:"Value preserving type conversion/tag indicating the string is a LaTeX string",signature:"string -> string",evaluate:([e])=>e},Latex:{description:"Serialize an expression to LaTeX",signature:"...any -> string",evaluate:(e,{engine:t})=>t.box(["LatexString",t.string(re(e.map(r=>r.latex)))])},Parse:{description:"Parse a LaTeX string and evaluate to a corresponding expression",signature:"string -> any",evaluate:([e],{engine:t})=>t.parse(e.string)??t.Nothing}},{RandomExpression:{signature:"() -> expression",evaluate:(e,{engine:t})=>t.box(Qi())}}],Zw=[{Matrix:{complexity:9e3,hold:!0,signature:"(matrix, string?, string?) -> matrix",type:([e])=>e.type,canonical:Qw,evaluate:(e,t)=>e[0].evaluate(t)},Vector:{complexity:9e3,hold:!0,signature:"...number -> vector",type:e=>Ee(`vector<${e.length}>`),canonical:(e,{engine:t})=>t._fn("Matrix",[t.function("List",e.map(r=>t.function("List",[r])))])}},{Shape:{complexity:8200,signature:"(value) -> tuple",evaluate:(e,{engine:t})=>{let r=e[0];return _r(r)?t.tuple(...r.tensor.shape):t.tuple()}},Rank:{description:"The length of the shape of the expression. Note this is not the matrix rank (the number of linearly independent rows or columns in the matrix)",complexity:8200,signature:"(value) -> number",sgn:()=>"positive",evaluate:(e,{engine:t})=>{let r=e[0];return _r(r)?t.number(r.tensor.rank):t.Zero}},Reshape:{complexity:8200,signature:"(list<number>, tuple) -> value",type:([e,t])=>{if(!G(e.type,"list"))return"nothing";let r=e.type;return G(r.elements,"number")?Ee(`list<number^${t.ops.map(i=>i.toString()).join("x")}>`):"nothing"},evaluate:(e,{engine:t})=>{var n;let r=e[0],i=((n=e[1].ops)==null?void 0:n.map(s=>s.value))??[];if(!_r(r)&&Ct(r)&&(r=t.function("List",[...Ye(r)])),_r(r))return i.join("x")===r.tensor.shape.join("x")?r:r.tensor.reshape(...i).expression}},Flatten:{complexity:8200,signature:"(value) -> list",evaluate:(e,{engine:t})=>{let r=e[0];if(_r(r))return t.box(["List",...r.tensor.flatten().map(i=>t.box(i))]);if(Ct(r))return t.function("List",[...Ye(r)])}},Transpose:{complexity:8200,signature:"(matrix|vector, axis1: integer?, axis2: integer?) -> matrix",evaluate:(e,{engine:t})=>{var s,a;let r=e[0],i=1,n=2;if(e.length===3&&(i=e[1].value,n=e[2].value,i>0&&n>0),i!==n&&(!_r(r)&&Ct(r)&&(r=t.function("List",[...Ye(r)])),_r(r)))return i===1&&n===2?(s=r.tensor.transpose())==null?void 0:s.expression:(a=r.tensor.transpose(i,n))==null?void 0:a.expression}},ConjugateTranspose:{complexity:8200,signature:"(tensor, axis1: integer?, axis2: integer?) -> matrix",evaluate:e=>{var n;let t=e[0],r=1,i=2;if(e.length===3&&(r=e[1].value,i=e[2].value,r>0&&i>0),r!==i&&_r(t))return(n=t.tensor.conjugateTranspose(r,i))==null?void 0:n.expression}},Determinant:{complexity:8200,signature:"(matrix) -> number",evaluate:e=>{let t=e[0];if(_r(t))return t.tensor.determinant()}},Inverse:{complexity:8200,signature:"(matrix) -> matrix",type:([e])=>e.type,evaluate:([e])=>{var t;if(_r(e))return(t=e.tensor.inverse())==null?void 0:t.expression}},PseudoInverse:{complexity:8200,signature:"(matrix) -> matrix",evaluate:([e])=>{var t;if(_r(e))return(t=e.tensor.pseudoInverse())==null?void 0:t.expression}},AdjugateMatrix:{complexity:8200,signature:"(matrix) -> matrix",evaluate:e=>{var r;let t=e[0];if(_r(t))return(r=t.tensor.adjugateMatrix())==null?void 0:r.expression}},Trace:{complexity:8200,signature:"(matrix) -> number",evaluate:e=>{let t=e[0];if(_r(t))return t.tensor.trace()}}}];function Qw(e,{engine:t}){var a,u;let r="Matrix";if(e.length===0)return t._fn(r,[]);let i=e[0].operator==="Vector"?e[0].canonical.ops[0]:e[0].canonical,n=(a=e[1])==null?void 0:a.canonical,s=(u=e[2])==null?void 0:u.canonical;return e.length>3?t._fn(r,tn(t,e,3)):s?t._fn(r,[i,n,s]):n?t._fn(r,[i,n]):t._fn(r,[i])}var Yw={True:{wikidata:"Q16751793",type:"boolean",constant:!0},False:{wikidata:"Q5432619",type:"boolean",constant:!0},And:{wikidata:"Q191081",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:"(boolean, ...boolean) -> boolean",evaluate:M6},Or:{wikidata:"Q1651704",threadable:!0,associative:!0,commutative:!0,idempotent:!0,complexity:1e4,signature:"(boolean, ...boolean) -> boolean",evaluate:E6},Not:{wikidata:"Q190558",threadable:!0,involution:!0,complexity:10100,signature:"boolean -> boolean",evaluate:A6},Equivalent:{wikidata:"Q220433",threadable:!0,complexity:10200,signature:"(boolean, boolean) -> boolean",canonical:(e,{engine:t})=>{let r=e[0].symbol,i=e[1].symbol;return r==="True"&&i==="True"||r==="False"&&i==="False"?t.True:r==="True"&&i==="False"||r==="False"&&i==="True"?t.False:t._fn("Equivalent",e)},evaluate:I6},Implies:{wikidata:"Q7881229",threadable:!0,complexity:10200,signature:"(boolean, boolean) -> boolean",evaluate:z6},Exists:{signature:"function",hold:!0},NotExists:{signature:"function",hold:!0},ExistsUnique:{signature:"function",hold:!0},ForAll:{signature:"function",hold:!0},NotForAll:{signature:"function",hold:!0},KroneckerDelta:{description:"Return 1 if the arguments are equal, 0 otherwise",signature:"(value, ...value) -> integer",evaluate:(e,{engine:t})=>{if(e.length===1)return e[0].symbol==="True"?t.One:t.Zero;if(e.length===2)return e[0].isEqual(e[1])?t.One:t.Zero;for(let r=1;r<e.length;r++)if(!e[r].isEqual(e[0]))return t.Zero;return t.One}},Boole:{description:"Return 1 if the argument is true, 0 otherwise. Also known as the Iverson bracket",signature:"boolean -> integer",evaluate:(e,{engine:t})=>e[0].symbol==="True"?t.One:t.Zero}};function M6(e,{engine:t}){if(e.length===0)return t.True;let r=[];for(let i of e){if(i.symbol==="False")return t.False;if(i.symbol!=="True"){let n=!1;for(let s of r)if(s.isSame(i))n=!0;else if(i.operator==="Not"&&i.op1.isSame(s)||s.operator==="Not"&&s.op1.isSame(i))return t.False;n||r.push(i)}}return r.length===0?t.True:r.length===1?r[0]:t._fn("And",r)}function E6(e,{engine:t}){if(e.length===0)return t.True;let r=[];for(let i of e){if(i.symbol==="True")return t.True;if(i.symbol!=="False"){let n=!1;for(let s of r)if(s.isSame(i))n=!0;else if(i.operator==="Not"&&i.op1.isSame(s)||s.operator==="Not"&&s.op1.isSame(i))return t.True;n||r.push(i)}}return r.length===0?t.False:r.length===1?r[0]:t._fn("Or",r)}function A6(e,{engine:t}){var i;let r=(i=e[0])==null?void 0:i.symbol;if(r==="True")return t.False;if(r==="False")return t.True}function I6(e,{engine:t}){let r=e[0].symbol,i=e[1].symbol;if(r==="True"&&i==="True"||r==="False"&&i==="False")return t.True;if(r==="True"&&i==="False"||r==="False"&&i==="True")return t.False}function z6(e,{engine:t}){let r=e[0].symbol,i=e[1].symbol;if(r==="True"&&i==="True"||r==="False"&&i==="False"||r==="False"&&i==="True")return t.True;if(r==="True"&&i==="False")return t.False}function Xw(e){var r,i;let t=(i=(r={And:M6,Or:E6,Not:A6,Equivalent:I6,Implies:z6})[e.operator])==null?void 0:i.call(r,e.engine,e.ops);if(t)return{value:t,because:"logic"}}function tp(e,t,r,i){let n=e.engine;return e.operator===r?n.box([i,...e.ops.map(s=>tp(s,t,r,i))]):t.operator===r?n.box([i,...t.ops.map(s=>tp(e,s,r,i))]):n.box([i,e,t])}function Kw(e,t="Add",r="Multiply"){if(e.operator!==r)return e;let i=e.ops;return!i||i.length<2?e:e.engine.box([t,i.slice(1).reduce((n,s)=>tp(n,s,t,r),i[0])])}var Jw=[{Expand:{description:"Expand out products and positive integer powers",hold:!0,signature:"(value)-> value",evaluate:([e])=>zi(e.canonical)??e},ExpandAll:{description:"Recursively expand out products and positive integer powers",hold:!0,signature:"(value)-> value",evaluate:([e])=>Ux(e)??e},Factor:{description:"Factors an algebraic expression into a product of irreducible factors",hold:!0,signature:"(value)-> value",evaluate:([e])=>Vl(e.canonical)},Together:{description:"Combine rational expressions into a single fraction",hold:!0,signature:"(value)-> value",evaluate:([e])=>a0(e)},Distribute:{description:"Distribute multiplication over addition",hold:!0,signature:"(value)-> value",evaluate:([e])=>e&&Kw(e)}}],eN={Congruent:{description:"Indicate that two expressions are congruent modulo a number",complexity:11e3,signature:"(number, number, modulo: integer) -> boolean",evaluate:(e,{engine:t})=>{if(e.length<3)return;let[r,i,n]=e,s=r.value,a=i.value,u=n.value;if(typeof s=="number"&&typeof a=="number"&&typeof u=="number")return s%u===a%u?t.True:t.False}},IsSame:{description:"Compare two expressions for structural equality",hold:!0,commutative:!0,commutativeOrder:sf,signature:"(any, any) -> boolean",evaluate:(e,{engine:t})=>{if(e.length!==2)return;let[r,i]=e;return r.isSame(i)===!0?t.True:t.False}},Equal:{commutative:!0,commutativeOrder:sf,complexity:11e3,signature:"(any, any) -> boolean",canonical:(e,{engine:t})=>lt(t,"Equal",e),eq:(e,t)=>e.operator!==t.operator?!1:!!(e.op1.isEqual(t.op1)&&e.op2.isEqual(t.op2)||e.op1.isEqual(t.op2)&&e.op2.isEqual(t.op1)),evaluate:(e,{engine:t})=>{if(e.length<2)return t.True;let r;for(let i of e)if(!r)r=i;else if(r.isEqual(i)!==!0)return t.False;return t.True}},NotEqual:{wikidata:"Q28113351",commutative:!0,commutativeOrder:sf,complexity:11e3,signature:"(any, any) -> boolean",canonical:(e,{engine:t})=>lt(t,"NotEqual",e),eq:(e,t)=>e.operator!==t.operator?!1:!!(e.op1.isEqual(t.op1)&&e.op2.isEqual(t.op2)||e.op1.isEqual(t.op2)&&e.op2.isEqual(t.op1)),evaluate:(e,{engine:t})=>{if(e.length<2)return t.False;let r;for(let i of e)if(!r)r=i;else if(r.isEqual(i)===!0)return t.False;return t.True}},Less:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"Less",e),eq:(e,t)=>s4(e,t,"Greater"),evaluate:(e,{engine:t})=>{if(e.length===2){let[i,n]=e,s=i.isLess(n);return s===void 0?void 0:s?t.True:t.False}if(e.length<2)return t.True;let r;for(let i of e)if(!r)r=i;else{let n=i.isLess(r);if(n===void 0)return;if(n===!1)return t.False;r=i}return t.True}},NotLess:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"Less",e)])},Greater:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"Less",[...e].reverse())},NotGreater:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[t._fn("Greater",e)])},LessEqual:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"LessEqual",e),eq:(e,t)=>s4(e,t,"LessGreater"),evaluate:(e,{engine:t})=>{if(e.length===2){let[i,n]=e,s=i.isLessEqual(n);return s===void 0?void 0:s?t.True:t.False}if(e.length<2)return t.True;let r;for(let i of e)if(!r)r=i;else{let n=i.isLessEqual(r);if(n===void 0)return;if(n===!1)return t.False;r=i}return t.True}},NotLessNotEqual:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"LessEqual",e)])},GreaterEqual:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"LessEqual",[...e].reverse())},NotGreaterNotEqual:{complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"GreaterEqual",e)])},TildeFullEqual:{description:"Indicate isomorphism, congruence and homotopic equivalence",signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"TildeFullEqual",e)},NotTildeFullEqual:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"TildeFullEqual",e)])},TildeEqual:{description:"Approximately or asymptotically equal",complexity:11e3,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"TildeEqual",e)},NotTildeEqual:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"TildeEqual",e)])},Approx:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"Approx",e)},NotApprox:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"Approx",e)])},ApproxEqual:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"ApproxEqual",e)},NotApproxEqual:{complexity:11100,canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"ApproxEqual",e)])},ApproxNotEqual:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"ApproxNotEqual",e)},NotApproxNotEqual:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"ApproxNotEqual",e)])},Precedes:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"Precedes",e)},NotPrecedes:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"Precedes",e)])},Succeeds:{signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>lt(t,"Succeeds",e)},NotSucceeds:{complexity:11100,signature:"(any, any, ...any) -> boolean",canonical:(e,{engine:t})=>t._fn("Not",[lt(t,"Succeeds",e)])}};function lt(e,t,r){r=lr(r,t);let i=[],n=[];for(let s of r)ts(s)?(i.push(s),n.push(s.ops[s.ops.length-1])):n.push(s);return i.length===0?e._fn(t,n):e._fn("And",[e._fn(t,n),...i])}function s4(e,t,r){return e.operator===t.operator?e.nops!==t.nops?!1:e.ops.every((i,n)=>i.isEqual(t.ops[n])):t.operator===r?e.nops!==t.nops?!1:e.ops.every((i,n)=>i.isEqual(t.ops[t.nops-1-n])):!1}var tN={EmptySet:{type:"set",constant:!0,wikidata:"Q226183",eq:e=>G(e.type,"set")&&e.size===0,collection:{size:()=>0,contains:()=>!1,subsetOf:()=>!0,eltsgn:()=>{},elttype:()=>"never"}},Numbers:{type:"set<number>",constant:!0,collection:{size:()=>1/0,contains:(e,t)=>G(t.type,"number"),subsetOf:(e,t,r)=>t.operator==="Range"||t.operator==="Linspace"?!0:G(t.type,"set<number>")&&(!r||t.symbol!=="Numbers"),eltsgn:()=>"unsigned",elttype:()=>"number"}},ComplexNumbers:{type:"set<complex>",constant:!0,collection:{size:()=>1/0,contains:(e,t)=>G(t.type,"complex"),subsetOf:(e,t,r)=>t.operator==="Range"||t.operator==="Linspace"?!0:G(t.type,"set<complex>")&&(!r||t.symbol!=="ComplexNumbers"),eltsgn:()=>"unsigned",elttype:()=>"complex"}},ImaginaryNumbers:{type:"set<imaginary>",constant:!0,collection:{size:()=>1/0,contains:(e,t)=>G(t.type,"imaginary"),subsetOf:(e,t,r)=>G(t.type,"set<imaginary>")&&(!r||t.symbol!=="ImaginaryNumbers"),eltsgn:()=>"unsigned",elttype:()=>"complex"}},Integers:{type:"set<integer>",constant:!0,collection:{contains:(e,t)=>G(t.type,"integer"),size:()=>1/0,subsetOf:(e,t,r)=>t.operator==="Range"?!0:G(t.type,"set<integer>")&&(!r||t.symbol!=="Integers"),eltsgn:()=>{},elttype:()=>"integer"}},RationalNumbers:{type:"set<rational>",constant:!0,collection:{size:()=>1/0,contains:(e,t)=>G(t.type,"rational"),subsetOf:(e,t,r)=>G(t.type,"set<rational>")&&(!r||t.symbol!=="RationalNumbers"),eltsgn:()=>{},elttype:()=>"rational"}},NegativeNumbers:{type:"set<real>",constant:!0,collection:{size:()=>1/0,contains:(e,t)=>G(t.type,"real")&&t.isNegative===!0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"||t.operator==="Linspace"){let a=t.ops[0].re,u=t.ops[1].re;return a<0&&u<0}return G(t.type,"set<real>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="negative"&&(!r||t.symbol!=="NegativeNumbers")},eltsgn:()=>"negative",elttype:()=>"real"}},NonPositiveNumbers:{type:"set<real>",constant:!0,collection:{contains:(e,t)=>G(t.type,"real")&&t.isNonPositive===!0,size:()=>1/0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"||t.operator==="Linspace"){let a=t.ops[0].re,u=t.ops[1].re;return a>=0&&u>=0}return G(t.type,"set<real>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="non-positive"&&(!r||t.symbol!=="NonPositiveNumbers")},eltsgn:()=>"non-positive",elttype:()=>"real"}},PositiveNumbers:{type:"set<real>",constant:!0,collection:{contains:(e,t)=>G(t.type,"real")&&t.isPositive===!0,size:()=>1/0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"||t.operator==="Linspace"){let a=t.ops[0].re,u=t.ops[1].re;return a>0&&u>0}return G(t.type,"set<real>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="positive"&&(!r||t.symbol!=="PositiveNumbers")},eltsgn:()=>"positive",elttype:()=>"real"}},NegativeIntegers:{type:"set<integer>",constant:!0,collection:{contains:(e,t)=>G(t.type,"integer")&&t.isNegative===!0,size:()=>1/0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"){let a=t.ops[0].re,u=t.ops[1].re;return a<0&&u<0}return G(t.type,"set<integer>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="negative"&&(!r||t.symbol!=="NegativeIntegers")},eltsgn:()=>"negative",elttype:()=>"integer"}},NonPositiveIntegers:{type:"set<integer>",constant:!0,collection:{contains:(e,t)=>G(t.type,"integer")&&t.isNonPositive===!0,size:()=>1/0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"){let a=t.ops[0].re,u=t.ops[1].re;return a<=0&&u<=0}return G(t.type,"set<integer>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="non-positive"&&(!r||t.symbol!=="NonPositiveIntegers")},eltsgn:()=>"non-positive",elttype:()=>"integer"}},PositiveIntegers:{type:"set<integer>",constant:!0,collection:{contains:(e,t)=>G(t.type,"integer")&&t.isPositive===!0,size:()=>1/0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"){let a=t.ops[0].re,u=t.ops[1].re;return a>0&&u>0}return G(t.type,"set<integer>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="positive"&&(!r||t.symbol!=="PositiveIntegers")},eltsgn:()=>"non-positive",elttype:()=>"integer"}},NonNegativeInteger:{type:"set<integer>",constant:!0,collection:{contains:(e,t)=>G(t.type,"integer")&&t.isNonNegative===!0,size:()=>1/0,subsetOf:(e,t,r)=>{var i,n,s;if(t.operator==="Range"){let a=t.ops[0].re,u=t.ops[1].re;return a>0&&u>0}return G(t.type,"set<integer>")&&((s=(n=(i=t.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.eltsgn)==null?void 0:s.call(n,t))==="non-negative"&&(!r||t.symbol!=="NonNegativeInteger")},eltsgn:()=>"non-negative",elttype:()=>"integer"}},Element:{complexity:11200,signature:"(value, collection|string) -> boolean",evaluate:([e,t],{engine:r})=>{let i=t.contains(e);if(i===!0)return r.True;if(i===!1)return r.False}},NotElement:{complexity:11200,signature:"(value, collection|string) -> boolean",evaluate:([e,t],{engine:r})=>{let i=t.contains(e);if(i===!0)return r.False;if(i===!1)return r.True}},Subset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(e,t);if(i===!0)return r.True;if(i===!1)return r.False}},SubsetEqual:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(e,t,!1);if(i===!0)return r.True;if(i===!1)return r.False}},NotSubset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(e,t);if(i===!0)return r.False;if(i===!1)return r.True}},Superset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(t,e);if(i===!0)return r.True;if(i===!1)return r.False}},SupersetEqual:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(t,e,!0);if(i===!0)return r.True;if(i===!1)return r.False}},NotSuperset:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(t,e);if(i===!0)return r.False;if(i===!1)return r.True}},NotSupersetEqual:{complexity:11200,signature:"(lhs:collection, rhs: collection) -> boolean",evaluate:([e,t],{engine:r})=>{let i=ns(t,e,!0);if(i===!0)return r.False;if(i===!1)return r.True}},CartesianProduct:{wikidata:"Q173740",signature:"(set, ...set) -> set"},Complement:{wikidata:"Q242767",signature:"(set, ...set) -> set"},Intersection:{wikidata:"Q185837",associative:!0,commutative:!0,involution:!0,signature:"(set, ...set) -> set",canonical:(e,{engine:t})=>e.length===0||e.length===1?t.symbol("EmptySet"):t._fn("Intersection",e),evaluate:iN},Union:{wikidata:"Q185359",associative:!0,commutative:!0,involution:!0,signature:"(collection, ...collection) -> set",canonical:(e,{engine:t})=>e.length===0?t.symbol("EmptySet"):t._fn("Union",e),evaluate:rN,collection:{contains:(e,t)=>e.ops.some(r=>r.contains(t)),size:e=>{if(e.ops.some(i=>i.size===1/0))return 1/0;let t=[],r=0;for(let i of e.ops){for(let n of Ye(i))t.every(s=>!s.contains(n))&&(r+=1);t.push(i)}return r},iterator:e=>{let t=[],r=0,i=hu(e.ops[r]);return i?{next:()=>{let n=!1,s;do{if(s=i.next(),s.done){if(t.push(e.ops[r]),r+=1,r===e.ops.length)return{value:void 0,done:!0};if(i=hu(e.ops[r]),!i)return{value:void 0,done:!0}}n=t.every(a=>!a.contains(s.value))}while(!n);return{value:s.value,done:!1}}}:{next:()=>({value:void 0,done:!0})}}}},SetMinus:{wikidata:"Q18192442",signature:"(set, ...value) -> set",evaluate:nN,collection:{contains:(e,t)=>{let[r,...i]=e.ops;return(r.contains(t)??!1)&&!i.some(n=>n.isSame(t))},iterator:e=>{let[t,...r]=e.ops,i=hu(t);return i?{next(){let n=i.next();for(;!n.done&&r.some(s=>s.isSame(n.value));)n=i.next();return n}}:{next:()=>({value:void 0,done:!0})}}}},SymmetricDifference:{wikidata:"Q1147242",signature:"(set, set) -> set"}};function ns(e,t,r=!0){var i,n,s;return!e.isCollection||!t.isCollection?!1:!!((s=(n=(i=e.symbolDefinition)==null?void 0:i.collection)==null?void 0:n.subsetOf)!=null&&s.call(n,e,t,r))}function rN(e,{engine:t}){let r=e.map(n=>n.isCollection?n:t._fn("Set",[n]));if(r.reduce((n,s)=>n+(s.size??0),0)>100)return t._fn("Union",r);let i=[];for(let n of r)for(let s of Ye(n))i.every(a=>!a.isSame(s))&&i.push(s);return i.length===0?t.symbol("EmptySet"):t._fn("Set",i)}function iN(e,{engine:t}){let r=[...e[0].ops??[]];for(let i of e.slice(1))Ct(i)?r=r.filter(n=>[...Ye(i)].some(s=>n.isSame(s))):r=r.filter(n=>n.isSame(i));return r.length===0?t.symbol("EmptySet"):t._fn("Set",r)}function nN(e,{engine:t}){return t.symbol("EmptySet")}var sN=[{Choose:{complexity:1200,signature:"(n:number, m:number) -> number",evaluate:(e,{engine:t})=>{let r=e[0].re,i=e[1].re;if(!(!Number.isFinite(r)||!Number.isFinite(i)))return r<0||i<0||i>r?t.NaN:t.number($7(r,i))}}},{Mean:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=0,i=0;for(let n of Ye(e[0]))r+=n.re,i++;return i===0?t.NaN:t.number(r/i)}},Median:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=[];for(let n of Ye(e[0])){let s=n.re;if(!Number.isFinite(s))return t.NaN;r.push(s)}if(r.length===0)return t.NaN;r.sort((n,s)=>n-s);let i=Math.floor(r.length/2);return r.length%2===0?t.number((r[i-1]+r[i])/2):t.number(r[i])}},Variance:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=0,i=0,n=0;for(let s of Ye(e[0])){let a=s.re;if(!Number.isFinite(a))return t.NaN;r+=a,i+=a*a,n++}return n===0?t.NaN:t.number((i-r*r/n)/(n-1))}},StandardDeviation:{complexity:1200,threadable:!1,description:"Sample Standard Deviation of a collection of numbers.",signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=0,i=0,n=0;for(let s of Ye(e[0])){let a=s.re;if(!Number.isFinite(a))return t.NaN;r+=a,i+=a*a,n++}return n===0?t.NaN:t.number(Math.sqrt((i-r*r/n)/(n-1)))}},Kurtosis:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=0,i=0,n=0,s=0;for(let f of Ye(e[0])){let p=f.re;if(!Number.isFinite(p))return t.NaN;r+=p,i+=p*p,n+=p*p*p*p,s++}if(s===0)return t.NaN;let a=(i-r*r/s)/(s-1),u=(n-i*i/s)/(s-1);return t.number((u/(a*a)-3)*(s*(s+1))/6)}},Skewness:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=0,i=0,n=0,s=0;for(let f of Ye(e[0])){let p=f.re;if(!Number.isFinite(p))return t.NaN;r+=p,i+=p*p,n+=p*p*p,s++}if(s===0)return t.NaN;let a=(i-r*r/s)/(s-1),u=(n-i*r/s)/(s-1);return t.number(u/Math.pow(a,3/2)*Math.sqrt(s*1))}},Mode:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=[];for(let a of Ye(e[0])){let u=a.re;if(!Number.isFinite(u))return t.NaN;r.push(u)}if(r.length===0)return t.NaN;r.sort((a,u)=>a-u);let i={};for(let a of r)i[a]=(i[a]??0)+1;let n=0,s=r[0];for(let a of r){let u=i[a];u>n&&(n=u,s=a)}return t.number(s)}},Quartiles:{complexity:1200,threadable:!1,signature:"collection -> tuple<mid:number, lower:number, upper:number>",evaluate:(e,{engine:t})=>{let r=[];for(let a of Ye(e[0])){let u=a.re;if(!Number.isFinite(u))return t.tuple(t.NaN,t.NaN,t.NaN);r.push(u)}if(r.length===0)return t.tuple(t.NaN,t.NaN,t.NaN);r.sort((a,u)=>a-u);let i=Math.floor(r.length/2),n=r.slice(0,i),s=r.slice(i+1);return t.tuple(t.number(r[i]),t.number(n[Math.floor(n.length/2)]),t.number(s[Math.floor(s.length/2)]))}},InterquartileRange:{complexity:1200,threadable:!1,signature:"collection -> number",evaluate:(e,{engine:t})=>{let r=[];for(let a of Ye(e[0])){let u=a.re;if(!Number.isFinite(u))return t.NaN;r.push(u)}if(r.length===0)return t.NaN;r.sort((a,u)=>a-u);let i=Math.floor(r.length/2),n=r.slice(0,i),s=r.slice(i+1);return t.number(s[Math.floor(s.length/2)]-n[Math.floor(n.length/2)])}},Erf:{complexity:7500,signature:"number -> number",evaluate:(e,{engine:t})=>{let r=e[0].re;if(Number.isFinite(r))return t.number(z1(r))}},Erfc:{complexity:7500,signature:"number -> number",evaluate:(e,{engine:t})=>{let r=e[0].re;if(Number.isFinite(r))return t.number(1-z1(r))}},ErfInv:{complexity:7500,signature:"number -> number",evaluate:(e,{engine:t})=>{let r=e[0].re;if(Number.isFinite(r))return t.number(n2(r))}}}],aN=[{Pi:{type:"real",constant:!0,holdUntil:"N",wikidata:"Q167",value:e=>e.number(Vn(e)?e._BIGNUM_PI:Math.PI)}},{Degrees:{signature:"real -> real",canonical:(e,{engine:t})=>{let r=t;if(r.angularUnit==="deg")return e[0];if(e.length!==1)return r._fn("Degrees",e);let i=e[0];if(i.numericValue===null||!i.isValid)return r._fn("Degrees",e);let n=i.re;if(Number.isNaN(n))return i.mul(r.Pi).div(180);if(n=n%360,n<0&&(n+=360),Number.isInteger(n)){let s=cm([n,180]);return s[0]===0?r.Zero:s[0]===1&&s[1]===1?r.Pi:s[0]===1?r.Pi.div(s[1]):r.number(s).mul(r.Pi)}return r.number(n).div(180).mul(r.Pi)},evaluate:(e,t)=>t.engine.angularUnit==="deg"?e[0]:e[0].mul(t.engine.Pi.div(180)).evaluate(t)},Hypot:{threadable:!0,signature:"(real, real) -> real",sgn:()=>"non-negative",evaluate:([e,t],{engine:r})=>r.box(["Sqrt",["Add",["Square",e],["Square",t]]])},Sin:ot("Sin",5e3)},{Arctan:{wikidata:"Q2257242",complexity:5200,threadable:!0,signature:"number -> real",sgn:([e])=>R7("Arctan",e),evaluate:([e],{numericApproximation:t})=>t?l0("Arctan",e):gm("Arctan",e)??l0("Arctan",e)},Arctan2:{wikidata:"Q776598",complexity:5200,threadable:!0,signature:"(y:number, x: number) -> real",evaluate:([e,t],{engine:r,numericApproximation:i})=>i?cs(e,t,Math.atan2,(n,s)=>zt.atan2(n,s)):e.isFinite===!1&&t.isFinite===!1?r.NaN:e.is(0)&&t.is(0)?r.Zero:t.isFinite===!1?t.isPositive?r.Zero:r.Pi:e.isFinite===!1?e.isPositive?r.Pi.div(2):r.Pi.div(-2):e.is(0)?t.isPositive?r.Zero:r.Pi:r.function("Arctan",[e.div(t)]).evaluate()},Cos:ot("Cos",5050),Tan:ot("Tan",5100)},{Arcosh:ot("Arcosh",6200),Arcsin:ot("Arcsin",5500),Arsinh:ot("Arsinh",6100),Artanh:ot("Artanh",6300),Cosh:ot("Cosh",6050),Cot:ot("Cot",5600),Csc:ot("Csc",5600,"Cosecant"),Sec:ot("Sec",5600,"Secant, inverse of cosine"),Sinh:ot("Sinh",6e3),Haversine:{wikidata:"Q2528380",threadable:!0,signature:"real -> number",evaluate:([e],{engine:t})=>t.box(["Divide",["Subtract",1,["Cos",e]],2])},InverseHaversine:{threadable:!0,signature:"real -> real",evaluate:([e],{engine:t})=>t.box(["Multiply",2,["Arcsin",["Sqrt",e]]])}},{Csch:ot("Csch",6200,"Hyperbolic cosecant"),Sech:ot("Sech",6200,"Hyperbolic secant"),Tanh:ot("Tanh",6200,"Hyperbolic tangent")},{Arccos:ot("Arccos",5550),Arccot:ot("Arccot",5650),Arcoth:ot("Arcoth",6350),Arcsch:ot("Arcsch",6250),Arcsec:ot("Arcsec",5650),Arsech:ot("Arsech",6250),Arccsc:ot("Arccsc",5650),Coth:ot("Coth",6300),InverseFunction:{hold:!0,signature:"(function) -> function",canonical:(e,{engine:t})=>(e=tn(t,e,1),Lh(t,e)??t._fn("InverseFunction",e)),evaluate:(e,{engine:t})=>Lh(t,e)}}];function ot(e,t,r){return{complexity:t,description:r,threadable:!0,signature:"number -> number",sgn:([i])=>R7(e,i),evaluate:([i],{numericApproximation:n})=>n?l0(e,i):gm(e,i)??l0(e,i)}}var Bt=class{constructor(e,t,r){if(this.constant=!1,this.holdUntil="evaluate",!e.context)throw Error("No context available");this.name=t,this._engine=e,this.scope=e.context,this.update(r)}get isFunction(){return G(this.type,"function")}get isConstant(){return this.constant}update(e){if(e.wikidata&&(this.wikidata=e.wikidata),e.description&&(this.description=e.description),e.url&&(this.url=e.url),e.flags&&(this._flags=v1(e.flags)),e.holdUntil&&(this.holdUntil=e.holdUntil),this.constant&&e.constant===!1)throw new Error(`The constant "${this.name}" cannot be changed to a variable`);if(e.constant&&(this.constant=e.constant,this._defValue=e.value),this._value=a4(this._engine,e.value),e.type){let t=Ee(e==null?void 0:e.type);if(!Pl(t))throw new Error(`Invalid type: "${e.type}"`);this._type=t,this.inferredType=!1}if(this._value){if(!this._type||this._type==="unknown")this._type=this._value.type,this.inferredType=!0;else if(!G(this._value.type,this._type))throw new Error([`Symbol "${this.name}"`,`The value "${this._value.toString()}" of type "${this._value.type.toString()}" is not compatible with the type "${this._type.toString()}"`].join(`
|   `))}e.eq&&(this.eq=e.eq),e.neq&&(this.neq=e.neq),e.cmp&&(this.cmp=e.cmp),e.collection&&(this.collection=Tx(e.collection))}reset(){this.constant&&(this._value=null)}get value(){return this._value===null&&(this._value=a4(this._engine,this._defValue)),this._value}set value(e){if(this.constant)throw new Error(`The value of the constant "${this.name}" cannot be changed`);if(this._defValue,e!==void 0){let t=this._engine.box(e);this.inferredType?(this._value=t,this._type=this._type?fn(this._type,t.type):t.type):!this._type||this.type==="unknown"||!t.type||G(t.type,this._type)?this._value=t:this._value=void 0}else this._value=void 0}get type(){var e;return this._type??((e=this._value)==null?void 0:e.type)??"unknown"}set type(e){var t;if(this.constant)throw new Error(`The type of the constant "${this.name}" cannot be changed`);if(!this.inferredType&&this.type!=="unknown")throw Error(`The type of "${this.name}" cannot be changed because it has already been declared`);if(e==="unknown"){this._defValue=void 0,this._value=void 0,this._flags=void 0,this._type="unknown";return}if(this._type&&this._type!=="unknown"&&!G(e,this._type))throw Error(`The type of "${this.name}" cannot be widened from "${this._type.toString()}" to "${e.toString()}"`);if((t=this._value)!=null&&t.type&&!G(this._value.type,e))throw Error(`The type of "${this.name}" cannot be changed to "${e.toString()}" because its value has a type of "${this._value.type.toString()}"`);this._type=e}get sgn(){var e,t;return((e=this.value)==null?void 0:e.sgn)??((t=this._flags)==null?void 0:t.sgn)}set sgn(e){this.updateFlags({sgn:e})}get even(){var e,t;return((e=this.value)==null?void 0:e.isEven)??((t=this._flags)==null?void 0:t.even)}set even(e){this.updateFlags({even:e})}get odd(){var e,t;return((e=this.value)==null?void 0:e.isOdd)??((t=this._flags)==null?void 0:t.odd)}set odd(e){this.updateFlags({odd:e})}updateFlags(e){if(this.constant)throw Error(`The flags of "${this.name}" cannot be changed because it is a constant`);this._flags=v1({...this._flags??{},...e})}};function a4(e,t){if(t!==void 0)return Ih(t)?e.parse(t)??e.symbol("Undefined"):typeof t=="function"?e.box(t(e)??"Undefined"):t instanceof Jt?t:e.box(t)}var lN=new Set(["description","wikidata","url","hold","threadable","associative","commutative","commutativeOrder","idempotent","involution","pure","signature","type","sgn","even","complexity","canonical","evaluate","evalDimension","compile","eq","neq","cmp","collection"]),Xi=class{constructor(e,t,r){if(!e.context)throw Error("No context available");this.engine=e,this.scope=e.context;for(let p in r)if(!lN.has(p))throw new Error(`Function Definition "${t}": unexpected key "${p}"`);this.hold=r.hold??!1;let i=r.idempotent??!1,n=r.involution??!1;if(i&&n)throw new Error(`Function Definition "${t}": the 'idempotent' and 'involution' flags are mutually exclusive`);this.name=t,this.description=r.description,this.wikidata=r.wikidata,this.threadable=r.threadable??!1,this.associative=r.associative??!1,this.commutative=r.commutative??!1,this.commutativeOrder=r.commutativeOrder,this.idempotent=i,this.involution=n,this.pure=r.pure??!0,this.complexity=r.complexity??Ks;let s,a=!0;r.signature?(a=!1,s=Ee(r.signature)):s=Ee("...any -> any");let u;r.type&&(typeof r.type=="string"?Ee(r.type):u=r.type);let f;if(r.evaluate&&typeof r.evaluate!="function"){let p=e.box(r.evaluate,{canonical:!1});if(!p.isValid)throw Error(`Invalid function ${p.toString()}`);let d=Yn(p);f=b=>d(b),Object.defineProperty(f,"toString",{value:()=>p.toString()})}else f=r.evaluate;this.inferredSignature=a,this.signature=s,this.type=u,this.evaluate=f,this.canonical=r.canonical,this.evalDimension=r.evalDimension,this.sgn=r.sgn,this.even=r.even,this.compile=r.compile,this.collection=r.collection}reset(){}};function C6(e,t,r){return r instanceof Xi?r:new Xi(e,t,r)}function $6(e){if(e==="all")return $6(["core","control-structures","logic","collections","relop","numeric","arithmetic","trigonometry","algebra","calculus","polynomials","combinatorics","linear-algebra","statistics","dimensions","units","physics","other"]);typeof e=="string"&&(e=[e]);let t=[];for(let r of e){let i=oN[r];if(!i)throw Error(`Unknown library category ${r}`);Array.isArray(i)?t.push(...i):t.push(i)}return Object.freeze(t)}var oN={algebra:[],arithmetic:[...y2,...Uw],calculus:Fw,collections:[tN,a2],combinatorics:[],"control-structures":Bw,core:Ww,dimensions:[],domains:[],"linear-algebra":Zw,logic:Yw,numeric:[],other:[],relop:eN,polynomials:Jw,physics:{Mu0:{description:"Vaccum permeability",constant:!0,wikidata:"Q1515261",type:"real",value:125663706212e-17}},statistics:sN,trigonometry:aN,units:[]};function uN(e){if(e=e.normalize(),$r(e))return e;throw new Error(`Invalid definition name "${e}": ${ds(e)}`)}function l4(e,t){var r;if(!e.context)throw Error("No context available");(r=e.context).ids??(r.ids=new Map);let i=e.context.ids;e.strict;for(let[n,s]of Object.entries(t))try{if(n=uN(n),Ch(s))try{let a=C6(e,n,s);if(i.has(n))throw new Error(`Duplicate function definition:
${JSON.stringify(i.get(n))}
${JSON.stringify(s)}`);i.set(n,a)}catch(a){console.error([`
Error in function definition`,"",JSON.stringify(s),"",a.message].join(`
|   `)+`
`)}else if(zh(s))try{let a=new Bt(e,n,s);if(e.strict&&s.wikidata){for(let[u,f]of i)if(f.wikidata===s.wikidata)throw new Error(`Duplicate entries with wikidata "${s.wikidata}": "${n}" and "${f.name}"`)}if(i.has(n))throw new Error("The symbol is already defined");i.set(n,a)}catch(a){console.error([`
Error in symbol definition of "${n}"`,"",JSON.stringify(s),"",a.message].join(`
|   `))}else{let a=new Bt(e,n,{value:e.box(s)});i.set(n,a)}}catch(a){console.error([`
Error in definition of "${n}"`,"",JSON.stringify(s),"",a.message].join(`
|   `)+`
`)}}function gu(e){return typeof e=="number"?e===0?1:Number.isInteger(e)?Math.floor(Math.log2(Math.abs(e))/Math.log2(10))+(e>0?1:2):2:e.isZero?1:e.im!==0?gu(e.re)+gu(e.im)+1:gu(e.re)}function rp(e){var i;if(e.symbol)return 1;if(e.isNumberLiteral)return gu(e.numericValue);let t=e.operator,r=2;if(["Add"].includes(t))r=3;else if(["Subtract","Negate"].includes(t))r=4;else if(["Square","Sqrt"].includes(t))r=5;else{if(["Power","Root"].includes(t))return rp(e.ops[1]);["Multiply"].includes(t)?r=7:["Divide"].includes(t)?r=8:["Ln","Exp","Log","Lb"].includes(t)?r=9:["Cos","Sin","Tan"].includes(t)?r=10:r=11}return r+(((i=e.ops)==null?void 0:i.reduce((n,s)=>n+rp(s),0))??0)}var o4=rp,bf=class D6{constructor(t){t?t instanceof D6?this._items=new Map(t._items):this._items=new Map(t):this._items=new Map}has(t){for(let r of this._items.keys())if(r.isSame(t))return!0;return!1}get(t){for(let[r,i]of this._items)if(r.isSame(t))return i}clear(){this._items.clear()}set(t,r){for(let i of this._items.keys())if(i.isSame(t)){this._items.set(i,r);return}this._items.set(t,r)}delete(t){this._items.delete(t)}[Symbol.iterator](){return this._items.entries()}entries(){return this._items.entries()}},Ur=class extends Jt{constructor(e,t,r){super(e,r==null?void 0:r.metadata),t instanceof Lt||typeof t=="number"?this._value=t:this._value=e._numericValue(t)}get hash(){return this._hash??(this._hash=Yl(this._value.toString())),console.info("hash BoxedNumber ",this._hash),this._hash}get json(){let e=this._value;return typeof e=="number"?Number.isNaN(e)?"NaN":Number.isFinite(e)?e:e>0?"PositiveInfinity":"NegativeInfinity":e.toJSON()}get operator(){return"Number"}get isPure(){return!0}get isCanonical(){return!0}set isCanonical(e){}get complexity(){return 1}get numericValue(){return this._value}get isNumberLiteral(){return!0}get re(){return typeof this._value=="number"?this._value:this._value.re}get im(){return typeof this._value=="number"?0:this._value.im}get bignumRe(){if(typeof this._value!="number")return this._value.bignumRe}get bignumIm(){}neg(){let e=this._value;return e===0?this:typeof e=="number"?this.engine.number(-e):this.engine.number(e.neg())}inv(){return this.value===1||this.value===-1?this:typeof this._value=="number"?Number.isInteger(this._value)?this.engine.number(this.engine._numericValue({rational:[1,this._value]})):this.engine.number(1/this._value):this.engine.number(this._value.inv())}abs(){return this.isPositive?this:typeof this._value=="number"?this.engine.number(-this._value):this.engine.number(this._value.abs())}add(e){let t=this.engine;return this.is(0)?t.box(e):typeof e=="number"?e===0?this:typeof this._value=="number"?t.number(this._value+e):t.number(this._value.add(e)):e.numericValue!==null?typeof this._value=="number"?typeof e.numericValue=="number"?t.number(this._value+e.numericValue):t.number(e.numericValue.add(this._value)):t.number(this._value.add(e.numericValue)):Gt(this.canonical,e.canonical)}mul(e){if(this.is(1))return this.engine.box(e);if(this.is(-1))return this.engine.box(e).neg();let t=this.engine;return typeof e=="number"?e===1?this:e===0||this.is(0)?this.engine.Zero:e===-1?this.neg():t.number(typeof this._value=="number"?this._value*e:this._value.mul(e)):typeof this._value=="number"&&typeof e=="number"?t.number(this._value*e):e instanceof Lt?this.is(1)?t.number(e):this.is(-1)?t.number(e.neg()):t.number(e.mul(this._value)):e.numericValue!==null?t.number(t._numericValue(this._value).mul(e.numericValue)):Jr(this,e)}div(e){return mm(this,e)}pow(e){return Yt(this,e,{numericApproximation:!1})}root(e){if(!this.isCanonical)return this.canonical.root(e);if(typeof e=="number"){if(e===0)return this.engine.NaN;if(e===1)return this;if(e===-1)return this.inv();if(e===2)return this.sqrt();if(this.isNegative){if(e%2===1)return this.neg().root(e).neg();if(e%2===0)return this.neg().root(e)}}else{if(e=e.canonical,e.is(0))return this.engine.NaN;if(e.is(1))return this;if(e.is(-1))return this.inv();if(e.is(2))return this.sqrt();if(this.isNegative){if(e.isOdd)return this.neg().root(e).neg();if(e.isEven)return this.neg().root(e)}}let t=typeof e=="number"?e:e.re;if(Number.isInteger(t))if(typeof this._value=="number"){let r=this._value**(1/t);if(Number.isInteger(r))return this.engine.number(r)}else{let r=this._value.root(t);if(G(r.type,"integer"))return this.engine.number(r)}return this.engine._fn("Root",[this,this.engine.box(e)])}sqrt(){return typeof this._value=="number"?this._value===0||this._value===1?this:this._value===-1?this.engine.I:this._value>0&&Number.isInteger(this._value)&&this._value<Re?this.engine.number(this.engine._numericValue({radical:this._value})):this.engine.number(this.engine._numericValue(this._value).sqrt()):this.is(0)||this.is(1)?this:this.engine.number(this._value.sqrt())}ln(e){let t=e?this.engine.box(e):void 0;if(!this.isCanonical)return this.canonical.ln(t);if(this.is(0))return this.engine.NegativeInfinity;if(t&&this.isSame(t))return this.engine.One;if((!t||t.symbol==="ExponentialE")&&this.symbol==="ExponentialE")return this.engine.One;let r=this.re;if(Number.isInteger(r)&&r>0){let i=this.engine,[n,s]=Ah(r,3);if(n!==1)return i.number(n).ln(t).mul(3).add(i.number(s).ln(t));if([n,s]=Ah(r,2),n!==1)return i.number(n).ln(t).mul(2).add(i.number(s).ln(t))}return t&&G(t.type,"integer")?typeof this._value=="number"?this.engine.number(Math.log(this._value)/Math.log(t.re)):this.engine.number(this._value.ln(t.re)):t===void 0?typeof this._value=="number"?this.engine.number(Math.log(this._value)):this.engine.number(this._value.ln()):this.engine._fn("Ln",[this])}get type(){return typeof this._value=="number"?Number.isFinite(this._value)?Number.isInteger(this._value)?"finite_integer":"finite_real":"non_finite_number":this._value.type}get sgn(){if(this._value===0)return"zero";let e;if(typeof this._value=="number"){if(Number.isNaN(this._value))return"unsigned";e=Math.sign(this._value)}else e=this._value.sgn();return e===void 0||Number.isNaN(e)?"unsigned":e===0?"zero":e>0?"positive":"negative"}get numerator(){return typeof this._value=="number"?this:this.engine.number(this._value.numerator)}get denominator(){return typeof this._value=="number"?this.engine.One:this.engine.number(this._value.denominator)}get numeratorDenominator(){if(typeof this._value=="number")return[this,this.engine.One];let e=this.engine;return[e.number(this._value.numerator),e.number(this._value.denominator)]}subs(e,t){return this.isStructural?this:this.structural.subs(e,t)}replace(e,t){var r;return((r=Kl(this.structural,e,t).at(-1))==null?void 0:r.value)??null}match(e,t){return Sm(this.structural,e,t)}get isPositive(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value>0:_m(this.sgn)}get isNonNegative(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value>=0:Tm(this.sgn)}get isNegative(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value<0:Mm(this.sgn)}get isNonPositive(){return typeof this._value=="number"?!Number.isNaN(this._value)&&this._value<=0:Em(this.sgn)}get isOdd(){if(this.is(1)||this.is(-1))return!0;if(this.is(0))return!1;if(!this.isFinite||!this.isInteger)return;if(typeof this._value=="number")return this._value%2!==0;let[e,t]=[this._value.numerator,this._value.denominator];return t.isOne?e.re%2!==0:e.re%2!==0&&t.re%2===0}get isEven(){let e=this.isOdd;return e!==void 0?!e:void 0}get isInfinity(){return typeof this._value=="number"?!Number.isFinite(this._value)&&!Number.isNaN(this._value):Number.isFinite(this._value.im)?this._value.isPositiveInfinity||this._value.isNegativeInfinity:!0}get isNaN(){return typeof this._value=="number"?Number.isNaN(this._value):this._value.isNaN}get isFinite(){return this.isInfinity===!1&&this.isNaN===!1}get isNumber(){return!0}get isInteger(){return typeof this._value=="number"?Number.isInteger(this._value):G(this._value.type,"integer")}get isRational(){return typeof this._value=="number"?Number.isInteger(this._value):G(this._value.type,"rational")}get isReal(){return typeof this._value=="number"?!0:G(this._value.type,"real")}is(e){return typeof e=="number"?typeof this._value=="number"?this._value===e:this._value.eq(e):!1}get canonical(){return this}get isStructural(){return typeof this._value=="number"||G(this.type,"rational")?!0:!(this._value instanceof Vt)}get structural(){return this.isStructural?this:this.engine.box(this.json,{canonical:!1,structural:!0})}toNumericValue(){let e=this._value;return typeof e=="number"?[this.engine._numericValue(e),this.engine.One]:[e,this.engine.One]}simplify(e){return Jl(this.canonical.structural,e).at(-1).value??this}evaluate(e){return e!=null&&e.numericApproximation?this.N():this}N(){let e=this._value;if(typeof e=="number")return this;let t=e.N();return e===t?this:this.engine.number(t)}};function ip(e,t){if(t instanceof Lt)return t;if(typeof t=="number")return Number.isInteger(t)&&t>=-Re&&t<=Re||!Number.isFinite(t)?t:e._numericValue(t);if(t instanceof zt){let r=t.toNumber();return t.isInteger()&&Math.abs(r)<=Re?r:t.isNaN()?NaN:t.isFinite()?e._numericValue(t):r>0?1/0:-1/0}if(typeof t=="bigint")return t>=-Re&&t<=Re?Number(t):e._numericValue(t);if(t instanceof je)return t.im===0?ip(e,t.re):t.isNaN()?NaN:!t.isFinite()&&t.im===0?t.re>0?1/0:-1/0:e._numericValue({re:t.re,im:t.im});if(typeof t=="object"&&"num"in t){if(typeof t.num=="number")return ip(e,t.num);if(typeof t.num!="string")throw new Error("MathJSON `num` property should be a string of digits");return u4(e,t.num)}if(typeof t=="string")return u4(e,t);if(t[1]==0)return NaN;if(typeof t[1]=="number"&&!Number.isFinite(t[1]))return Number.isFinite(t[0])?0:NaN;if(typeof t[0]=="number"&&!Number.isFinite(t[0])){let r=t[0]>0?1:-1;return t[0]>0?r>0?1/0:-1/0:t[0]<0?r>0?-1/0:1/0:NaN}return e._numericValue(t)}function u4(e,t){if(t=t.toLowerCase(),/[0-9][nd]$/.test(t)&&(t=t.slice(0,-1)),t=t.replace(/[\u0009-\u000d\u0020\u00a0]/g,""),t==="nan")return NaN;if(t==="infinity"||t==="+infinity")return Number.POSITIVE_INFINITY;if(t==="-infinity")return Number.NEGATIVE_INFINITY;if(t==="0")return 0;if(t==="1")return 1;if(t==="-1")return-1;if(/\([0-9]+\)/.test(t)){let[i,n,s,a]=t.match(/(.+)\(([0-9]+)\)(.+)?$/)??[];t=n+s.repeat(Math.ceil(e.precision/s.length))+(a??"")}let r=Kt(t);return r!==null?r>=-Re&&r<=Re?Number(r):e._numericValue(r):e._numericValue(e.bignum(t))}var yu=class P6 extends Jt{constructor(t,r,i){super(t,i==null?void 0:i.metadata),this._isStructural=!1,$r(r),`${r}${ds(r)}`,this._id=r,this._def=(i==null?void 0:i.def)??void 0,i!=null&&i.structural&&(this._isStructural=!0),((i==null?void 0:i.canonical)??!0)!==!0?this._scope=null:this._def?this._scope=t.context:this.bind()}get json(){return this._id}get hash(){return this._hash===void 0&&(this._hash=Yl(this._id)),this._hash}get isPure(){return!0}get isStructural(){return this._isStructural}get structural(){return this.isStructural?this:new P6(this.engine,this._id,{structural:!0,def:this._def??void 0})}get scope(){return this._scope}get isConstant(){let t=this._def??this.engine.lookupSymbol(this._id,this.wikidata);return!(t instanceof Bt)||t.constant}_lookupDef(){let t=this.engine;return t.lookupSymbol(this._id)??t.lookupFunction(this._id)}_getDef(){let t=this.symbolDefinition;if(!t)return;let r="value"in t?t.value:void 0;return r&&r!==this&&(t=r.baseDefinition??t),t}bind(){this._scope=this.engine.context;let t=this._lookupDef();if(t){this._def=t;return}this._def=this.engine.defineSymbol(this._id,{type:"unknown",inferred:!0}),this._id=this._def.name}reset(){var t;(t=this._def)==null||t.reset(),this._def=void 0}get isCanonical(){return this._scope!==null}set isCanonical(t){this._scope=t?this.engine.context:null,this._def=void 0}is(t){var r,i;return typeof t=="number"?((i=(r=this.symbolDefinition)==null?void 0:r.value)==null?void 0:i.is(t))??!1:!1}get canonical(){return this._scope?this:this.engine.box(this._id)}toNumericValue(){this.isCanonical;let t=this.engine;return this.symbol==="ImaginaryUnit"?[t._numericValue({re:0,im:1}),t.One]:this.symbol==="PositiveInfinity"||this.isInfinity&&this.isPositive?[t._numericValue(1/0),t.One]:this.symbol==="NegativeInfinity"||this.isInfinity&&this.isNegative?[t._numericValue(-1/0),t.One]:this.symbol==="NaN"?[t._numericValue(NaN),t.One]:[t._numericValue(1),this]}neg(){return Bl(this)}inv(){return this.engine._fn("Divide",[this.engine.One,this])}abs(){return this.isNonNegative?this:this.isNonPositive?this.neg():this.engine._fn("Abs",[this])}add(t){return t===0?this:Gt(this.canonical,this.engine.box(t))}mul(t){if(t===1)return this;if(t===-1)return this.neg();if(t===0)return this.engine.Zero;if(t instanceof Lt){if(t.isOne)return this;if(t.isNegativeOne)return this.neg();if(t.isZero)return this.engine.Zero}return Jr(this.canonical,this.engine.box(t))}div(t){return mm(this,t)}pow(t){return Yt(this,t,{numericApproximation:!1})}root(t){if(!this.isCanonical)return this.canonical.root(t);typeof t!="number"&&(t=t.canonical);let r=typeof t=="number"?t:t.im===0?t.re:void 0,i=this.engine;return this.symbol==="ComplexInfinity"||r===0?i.NaN:r===1?this:r===2?this.sqrt():r===-1?this.inv():i._fn("Root",[this,i.box(t)])}sqrt(){let t=this.engine;return this.symbol==="ComplexInfinity"?t.NaN:this.is(0)?this:this.is(1)?this.engine.One:this.is(-1)?t.I:t._fn("Sqrt",[this])}ln(t){let r=t?this.engine.box(t):void 0;return this.isCanonical?this.is(0)?this.engine.NegativeInfinity:(!r||r.symbol==="ExponentialE")&&this.symbol==="ExponentialE"?this.engine.One:r?r.re===10?this.engine._fn("Log",[this]):this.engine._fn("Log",[this,r]):this.engine._fn("Ln",[this]):this.canonical.ln(r)}solve(t){let r=lm(t);return r.length!==1?null:r.includes(this.symbol)?[this.engine.Zero]:null}get complexity(){return 7}get operator(){return"Symbol"}get symbol(){return this._id}get baseDefinition(){return this._def===void 0&&this.bind(),this._def??void 0}get symbolDefinition(){return this._def===void 0&&this.bind(),this._def instanceof Bt?this._def:void 0}get functionDefinition(){return this._def===void 0&&this.bind(),this._def instanceof Xi?this._def:void 0}infer(t){let r=this._lookupDef();if(!r){let i=this.engine.swapScope(this._scope??this.engine.context);return this._def=this.engine.defineSymbol(this._id,{type:t,inferred:!0}),this.engine.swapScope(i),!0}return r instanceof Bt&&(r.inferredType||r.type==="unknown")?(r.type=s7(r.type,t),!0):!1}get value(){var t,r;return(r=(t=this.symbolDefinition)==null?void 0:t.value)==null?void 0:r.value}set value(t){let r=this.engine;r.forget(this._id);let i;if(typeof t=="boolean"&&(t=t?r.True:r.False),typeof t=="string"&&(t=r.string(t)),typeof t=="object")if("re"in t&&"im"in t)t=r.complex(t.re??0,t.im);else if("num"in t&&"denom"in t)t=r.number([t.num,t.denom]);else if(Array.isArray(t))t=r._fn("List",t.map(s=>r.box(s)));else throw new Error(`Invalid value for symbol ${this._id}: ${t}`);if(t!==void 0&&(i=r.box(t).evaluate()),(i==null?void 0:i.type)&&G(i.type,"function")){this.engine.lookupSymbol(this._id),this._def=r.defineFunction(this._id,{signature:i.type.toString(),evaluate:i});return}let n=this.engine.lookupSymbol(this._id);n&&n instanceof Bt?n.value=i:this._def=r.defineSymbol(this._id,{value:i,type:i==null?void 0:i.type.toString()})}get type(){let t=this._def;return t?t instanceof Bt?t.type:t instanceof Xi?t.signature:"unknown":"unknown"}set type(t){if(this._def){if(this._id[0]==="_")throw new Error(`The type of the wildcard "${this._id}" cannot be changed`);t==="function"||Th(t)?(this.engine.forget(this._id),this._def=this.engine.defineFunction(this._id,{signature:t.toString()})):this._def instanceof Bt?this._def.type=typeof t=="string"?Ee(t):t:(this.engine.forget(this._id),this._def=this.engine.defineSymbol(this._id,{type:t.toString()}))}}get sgn(){let t=this._def;if(!(!t||!(t instanceof Bt)))return t.sgn}has(t){return typeof t=="string"?this._id===t:t.includes(this._id)}match(t,r){return Sm(this,t,r)}get isFunction(){return!!this.functionDefinition}get isOdd(){var t;return(t=this.symbolDefinition)==null?void 0:t.odd}get isEven(){var t;return(t=this.symbolDefinition)==null?void 0:t.even}get isInfinity(){let t=this.sgn;return t==="negative-infinity"||t==="positive-infinity"}get isNaN(){return this.sgn==="nan"}get isPositive(){return _m(this.sgn)}get isNonPositive(){return Em(this.sgn)}get isNegative(){return Mm(this.sgn)}get isNonNegative(){return Tm(this.sgn)}get isNumber(){let t=this.type;if(t!=="unknown")return G(t,"number")}get isInteger(){let t=this.type;if(t!=="unknown")return G(t,"integer")}get isRational(){let t=this.type;if(t!=="unknown")return G(t,"rational")}get isReal(){let t=this.type;if(t!=="unknown")return G(t,"real")}get re(){var t,r;return((r=(t=this.symbolDefinition)==null?void 0:t.value)==null?void 0:r.re)??NaN}get im(){var t,r;return((r=(t=this.symbolDefinition)==null?void 0:t.value)==null?void 0:r.im)??NaN}get bignumRe(){var t,r;return(r=(t=this.symbolDefinition)==null?void 0:t.value)==null?void 0:r.bignumRe}get bignumIm(){var t,r;return(r=(t=this.symbolDefinition)==null?void 0:t.value)==null?void 0:r.bignumIm}simplify(t){var r;return((r=Jl(this,t).at(-1))==null?void 0:r.value)??this}evaluate(t){var n,s;let r=this.symbolDefinition;if(!r)return this;let i=r.holdUntil;if(t!=null&&t.numericApproximation){if(i==="never"||i==="evaluate"||i==="N")return((n=r.value)==null?void 0:n.N())??this}else if(i==="never"||i==="evaluate")return((s=r.value)==null?void 0:s.evaluate(t))??this;return this}N(){var r;let t=this.symbolDefinition;return t&&t.holdUntil==="never"?this:((r=t==null?void 0:t.value)==null?void 0:r.N())??this}replace(t,r){var i;return((i=Kl(this,t,r).at(-1))==null?void 0:i.value)??null}subs(t,r){let i=(r==null?void 0:r.canonical)??this.isCanonical;return t[this._id]===void 0?i?this.canonical:this:this.engine.box(t[this._id],{canonical:i})}get isCollection(){var t,r;return((r=(t=this._getDef())==null?void 0:t.collection)==null?void 0:r.contains)!==void 0}contains(t){var r,i,n;return((n=(i=(r=this._getDef())==null?void 0:r.collection)==null?void 0:i.contains)==null?void 0:n.call(i,this,t))??!1}get size(){var t,r,i;return((i=(r=(t=this._getDef())==null?void 0:t.collection)==null?void 0:r.size)==null?void 0:i.call(r,this))??0}each(t,r){var n,s,a;return((a=(s=(n=this._getDef())==null?void 0:n.collection)==null?void 0:s.iterator)==null?void 0:a.call(s,this,t,r))||{next(){return{done:!0,value:void 0}}}}at(t){var r,i,n;return(n=(i=(r=this._getDef())==null?void 0:r.collection)==null?void 0:i.at)==null?void 0:n.call(i,this,t)}get(t){var r,i,n,s,a,u;if(typeof t=="string")return(n=(i=(r=this.baseDefinition)==null?void 0:r.collection)==null?void 0:i.at)==null?void 0:n.call(i,this,t);if(t.string)return(u=(a=(s=this.symbolDefinition)==null?void 0:s.collection)==null?void 0:a.at)==null?void 0:u.call(a,this,t.string)}indexOf(t){var r,i,n;return((n=(i=(r=this._getDef())==null?void 0:r.collection)==null?void 0:i.indexOf)==null?void 0:n.call(i,this,t))??-1}subsetOf(t,r){var i,n,s;return((s=(n=(i=this._getDef())==null?void 0:i.collection)==null?void 0:n.subsetOf)==null?void 0:s.call(n,this,t,r))??!1}};function cN(e,t){let r=e.lookupSymbol(t);return(r==null?void 0:r.holdUntil)==="never"&&r.value?r.value:new yu(e,t,{canonical:!0,def:r})}var Xo="\x1B[0m",fN="\x1B[33m",hN="\x1B[36;1m",c4="\x1B[101;97m",np={black:0,red:1,green:2,yellow:3,blue:4,magenta:5,cyan:6,white:7,grey:8,gray:8,"bright-red":9,"bright-green":10,"bright-yellow":11,"bright-blue":12,"bright-magenta":13,"bright-cyan":14,"bright-white":15},pN={black:"#2E3436",red:"#ff0000",green:"#4E9A06",yellow:"#C4A000",blue:"#3465A4",magenta:"#75507B",cyan:"#06989A",white:"#D3D7CF",grey:"#555753",gray:"#555753","bright-red":"#EF2929","bright-green":"#8AE234","bright-yellow":"#FCE94F","bright-blue":"#729FCF","bright-magenta":"#AD7FA8","bright-cyan":"#34E2E2","bright-white":"#EEEEEC"};function O6(e){let t=pN[e];if(t===void 0)return[];let r=[],i=t.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);return i!==null?r=i.slice(1).map(n=>parseInt(n,16)):(i=t.match(/#([\da-f])([\da-f])([\da-f])/i),r=i.slice(1).map(n=>16*parseInt(n,16))),r}function mN(e,t){if(t==="none")return[];if(e==="default")return[39];if(t==="basic"){let r=typeof e=="string"?np[e]:e;return r===void 0?[]:r<8?[30+r]:[90+r-8]}return typeof e=="number"&&(e=Object.keys(np)[e]),[38,2,...O6(e)]}function dN(e,t){if(t==="none")return[];if(e==="default")return[49];if(t==="basic"){let r=np[e];return r===void 0?[]:r<8?[40+r]:[100+r-8]}return[48,2,...O6(e)]}var gN=[{name:"To",latexTrigger:["\\to"],kind:"infix",precedence:270},{latexTrigger:["\\rightarrow"],kind:"infix",precedence:270,parse:"To"}];function yN(e){if(Q(e)!=="Multiply")return[[],[]];let t=[],r=[];for(let i of ce(e))if(Q(i)==="Power"){let n=$(i,1),s=$(i,2);if(Q(s)==="Negate"){let a=$(s,1);n&&a&&r.push(["Power",n,a])}else{let a=xe(s)??NaN;a===-1?n&&r.push(n):a<0?n&&r.push(["Power",n,-a]):t.push(i)}}else if(Q(i)==="Rational"&&Tt(i)===2||Q(i)==="Divide"){let n=$(i,1),s=$(i,2);xe(n)!==1&&t.push(n),xe(s)!==1&&r.push(s)}else{let n=Rl(i);n!==null?(n[0]!==1&&t.push(n[0]),r.push(n[1])):t.push(i)}return[t,r]}function vN(e){let t=e.parseOptionalGroup(),r=e.parseGroup()??e.parseToken();return xt(r)?t!==null?["Root",Ll,Oe(t)]:["Sqrt",Ll]:t!==null?["Root",r,t]:["Sqrt",r]}function il(e,t,r,i){return r==null?"\\sqrt{}":(i=i??2,t==="solidus"?e.wrapShort(r)+"^{1/"+e.serialize(i)+"}":t==="quotient"?e.wrapShort(r)+"^{\\frac{1}{"+e.serialize(i)+"}}":xe(i)===2?"\\sqrt{"+e.serialize(r)+"}":"\\sqrt["+e.serialize(i)+"]{"+e.serialize(r)+"}")}function bN(e,t){e.level-=1;let r=Q(t),i="",n=$(t,1);if(r==="Negate")i="-"+e.wrap(n,276);else if(r==="Subtract"){i=e.wrap(n,275);let s=$(t,2);if(s!==null){let a=e.wrap(s,275);a[0]==="-"?i+="+"+a.slice(1):a[0]==="+"?i+="-"+a.slice(1):i=i+"-"+a}}else if(r==="Add"){if(e.options.prettify&&Tt(t)===2&&e.options.invisiblePlus!=="+"){let[u,f]=[$(t,1),$(t,2)],[p,d]=[u,f],b=xe(p),x=Rl(d);if((b===null||x===null)&&([p,d]=[f,u],b=xe(p),x=Rl(d)),b!==null&&x!==null&&isFinite(b)&&Number.isInteger(b)&&b>=0&&b<=1e3&&isFinite(x[0])&&isFinite(x[1])&&x[0]>0&&x[0]<=100&&x[1]<=100)return i=re([e.serialize(p),e.options.invisiblePlus,e.serialize(d)]),e.level+=1,i}if(e.options.prettify&&Tt(t)===2){let[u,f]=dl(n),[p,d]=dl($(t,2));if(f<0&&d>0)return i=e.wrap(p,275)+"-"+e.wrap(u,275),e.level+=1,i}i=e.serialize(n);let s=Tt(t)+1,a=ce(t);for(let u=2;u<s;u++)if(n=a[u-1],e.options.prettify){let[f,p]=dl(n),d=e.wrap(f,275);p>0?d.startsWith("+")||d.startsWith("-")?i+=d:i+="+"+d:d.startsWith("+")?i+="-"+d.slice(1):d.startsWith("-")?i+="+"+d.slice(1):i+="-"+d}else{let f=e.wrap(n,275);f[0]==="-"||f[0]==="+"?i+=f:i+="+"+f}}return e.level+=1,i}function q6(e,t){if(t===null)return"";e.level-=1;let r="";if(e.options.prettify===!0){let[f,p]=yN(t);p.length>0&&(p.length===1&&p[0]===1?f.length===0?r="1":f.length===1?r=e.serialize(f[0]):r=q6(e,["Multiply",...f]):r=e.serialize(["Divide",f.length===1?f[0]:["Multiply",...f],p.length===1?p[0]:["Multiply",...p]]))}if(r)return e.level+=1,r;let i=!1,n=null,s=Tt(t)+1,a=ce(t);e.options.prettify===!0&&a.length===2&&la(a[1])&&!la(a[0])&&(a=[a[1],a[0]]);let u=!1;for(let f=1;f<s;f++){if(n=a[f-1],n===null)continue;let p;if(la(n)){p=e.serialize(n),p==="-1"&&!r?(r="",i=!i):(p[0]==="-"&&(p=p.slice(1),i=!i),r=r?re([r,e.options.multiply,p]):p),u=!0;continue}if(Q(n)==="Power"){let d=Rl($(n,2));if(d!=null){let[b,x]=d;if(b===1&&x!==null){r+=il(e,e.rootStyle(n,e.level),$(n,1),x),u=!1;continue}}}if(Q(n)==="Power"&&!isNaN(xe($(n,1))??NaN)){p=e.serialize(n),r=r?re([r,e.options.multiply,p]):p,u=!0;continue}if(Q(n)==="Negate"&&(n=$(n,1),i=!i),p=e.wrap(n,390),!r)r=p;else{let d=Q(n);u&&(d==="Divide"||d==="Rational")?r=re([r,e.options.multiply,p]):e.options.invisibleMultiply?r=re([r,e.options.invisibleMultiply,p]):r=re([r,p])}u=!1}return e.level+=1,i?"-"+r:r}function xN(e){let t=e.parseGroup(),r=null;if(t===null?(t=e.parseToken(),r=e.parseToken()):r=e.parseGroup(),t=Oe(t),r=Oe(r),Q(t)==="PartialDerivative"&&(Q(r)==="PartialDerivative"||Q(r)==="Multiply"&&Q($(r,1))==="PartialDerivative")){let i=$(t,3)??null,n=$(t,1);n==null&&(n=Oe(e.parseExpression()));let s=[];if(Q(r)==="Multiply"){for(let a of ce(r))if(Q(a)==="PartialDerivative"){let u=$(a,2);u&&s.push(u)}}else{let a=$(r,2);a&&s.push(a)}return s.length>1&&(s=["List",...s]),["PartialDerivative",n,...s,i===null?1:i]}return["Divide",t,r]}function f4(e,t){if(t===null)return"";let r=Oe($(t,1)),i=Oe($(t,2)),n=e.options.prettify?e.fractionStyle(t,e.level):"quotient";if(n==="inline-solidus"||n==="nice-solidus"){let f=e.wrapShort(r),p=e.wrapShort(i);return n==="inline-solidus"?`${f}/${p}`:`{}^{${f}}\\!\\!/\\!{}_{${p}}`}else{if(n==="reciprocal")return xe(r)===1?e.wrap(i)+"^{-1}":e.wrap(r)+e.wrap(i)+"^{-1}";if(n==="factor")return xe(i)===1?e.wrap(r):"\\frac{1}{"+e.serialize(i)+"}"+e.wrapString(e.serialize(r),e.groupStyle(t,1))}let s="\\frac";n==="block-quotient"?s="\\dfrac":n==="inline-quotient"&&(s="\\tfrac");let a=e.serialize(r),u=e.serialize(i);return`${s}{${a}}{${u}}`}function xf(e,t){if(!t)return"";let r=Q(t),i=Oe($(t,1));if(r==="Sqrt")return il(e,e.rootStyle(t,e.level-1),i,2);let n=Oe($(t,2));if(r==="Root")return il(e,e.rootStyle(t,e.level-1),i,n);if(e.options.prettify){let s=xe(n)??1;if(s===-1)return e.serialize(["Divide","1",i]);if(s<0)return e.serialize(["Divide","1",["Power",i,-s]]);if(Q(n)==="Divide"||Q(n)==="Rational"){if(xe($(n,1))===1){let a=e.rootStyle(t,e.level);return il(e,a,i,$(n,2))}if(xe($(n,2))===2)return`${e.serialize(["Sqrt",i])}${Zu("^",e.serialize($(n,1)))}`}else if(Q(n)==="Power"&&xe($(n,2))===-1){let a=e.rootStyle(t,e.level);return il(e,a,i,$(n,1))}}return e.wrapShort(i)+Zu("^",e.serialize(n))}var wN=[{name:"CatalanConstant",identifierTrigger:"G"},{name:"GoldenRatio",latexTrigger:"\\varphi"},{name:"EulerGamma",latexTrigger:"\\gamma"},{name:"Degrees",latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(e,t)=>["Degrees",t],serialize:(e,t)=>re([e.serialize($(t,1)),"\\degree"])},{latexTrigger:["\\degree"],kind:"postfix",precedence:880,parse:(e,t)=>["Degrees",t]},{latexTrigger:["^","<{>","\\circ","<}>"],kind:"postfix",parse:(e,t)=>["Degrees",t]},{latexTrigger:["^","\\circ"],kind:"postfix",parse:(e,t)=>["Degrees",t]},{latexTrigger:[""],kind:"postfix",precedence:880,parse:(e,t)=>["Degrees",t]},{latexTrigger:["\\ang"],parse:e=>{let t=e.parseGroup();return t===null?["Degrees"]:["Degrees",t]}},{latexTrigger:["\\infty"],parse:"PositiveInfinity"},{name:"PositiveInfinity",serialize:e=>e.options.positiveInfinity},{name:"NegativeInfinity",serialize:e=>e.options.negativeInfinity},{name:"ComplexInfinity",latexTrigger:["\\tilde","\\infty"],serialize:"\\tilde\\infty"},{latexTrigger:["\\tilde","<{>","\\infty","<}>"],parse:"ComplexInfinity"},{name:"Pi",kind:"symbol",latexTrigger:["\\pi"]},{latexTrigger:[""],parse:"Pi"},{name:"ExponentialE",latexTrigger:["\\exponentialE"],parse:"ExponentialE",serialize:"\\exponentialE"},{latexTrigger:"\\operatorname{e}",parse:"ExponentialE"},{latexTrigger:"\\mathrm{e}",parse:"ExponentialE"},{kind:"function",identifierTrigger:"exp",parse:"Exp"},{latexTrigger:"\\exp",parse:"Exp"},{name:"ImaginaryUnit",latexTrigger:["\\imaginaryI"]},{latexTrigger:"\\operatorname{i}",parse:"ImaginaryUnit"},{latexTrigger:"\\mathrm{i}",parse:"ImaginaryUnit"},{name:"Abs",kind:"matchfix",openTrigger:"|",closeTrigger:"|",parse:(e,t)=>xt(t)?null:["Abs",t]},{kind:"matchfix",openTrigger:["\\vert"],closeTrigger:["\\vert"],parse:(e,t)=>xt(t)?null:["Abs",t]},{identifierTrigger:"abs",kind:"function",parse:"Abs"},{name:"Add",latexTrigger:["+"],kind:"infix",associativity:"any",precedence:275,parse:(e,t,r)=>{let i=e.parseExpression({...r,minPrec:275});return i===null?null:pu("Add",t,i)},serialize:bN},{kind:"prefix",latexTrigger:["+"],precedence:275,parse:(e,t)=>e.parseExpression({...t,minPrec:400})},{name:"Ceil",kind:"matchfix",openTrigger:"\\lceil",closeTrigger:"\\rceil",parse:(e,t)=>xt(t)?null:["Ceil",t]},{kind:"matchfix",openTrigger:[""],closeTrigger:[""],parse:(e,t)=>xt(t)?null:["Ceil",t]},{identifierTrigger:"ceil",kind:"function",parse:"Ceil"},{name:"Chop",identifierTrigger:"chop",kind:"function",parse:"Chop"},{name:"Complex",precedence:274,serialize:(e,t)=>{let r=e.serialize($(t,1)),i=xe($(t,2));if(i===0)return r;let n=i===1?"\\imaginaryI":i===-1?"-\\imaginaryI":re([e.serialize($(t,2)),"\\imaginaryI"]);return xe($(t,1))===0?n:i!==null&&i<0?re([r,n]):re([r,"+",n])}},{name:"Divide",latexTrigger:"\\frac",precedence:600,parse:xN,serialize:f4},{kind:"infix",latexTrigger:"\\over",associativity:"none",precedence:600,parse:"Divide"},{latexTrigger:["\\/"],kind:"infix",associativity:"left",precedence:600,parse:"Divide"},{latexTrigger:["/"],kind:"infix",associativity:"left",precedence:600,parse:"Divide"},{latexTrigger:["\\div"],kind:"infix",associativity:"left",precedence:600,parse:"Divide"},{name:"Exp",serialize:(e,t)=>{let r=$(t,1);return we(r)||xe(r)!==null?re(["\\exponentialE^{",e.serialize(r),"}"]):re(["\\exp",e.wrap(Oe(r))])}},{name:"Factorial",latexTrigger:["!"],kind:"postfix",precedence:810},{name:"Factorial2",latexTrigger:["!","!"],kind:"postfix",precedence:810},{name:"Floor",kind:"matchfix",openTrigger:"\\lfloor",closeTrigger:"\\rfloor",parse:(e,t)=>xt(t)?null:["Floor",t]},{kind:"matchfix",openTrigger:[""],closeTrigger:[""],parse:(e,t)=>xt(t)?null:["Floor",t]},{identifierTrigger:"floor",kind:"function",parse:"Floor"},{latexTrigger:["\\Gamma"],parse:"Gamma"},{name:"GCD",identifierTrigger:"gcd",kind:"function"},{identifierTrigger:"GCD",kind:"function",parse:"GCD"},{name:"Half",serialize:"\\frac12"},{name:"Lg",latexTrigger:["\\lg"],serialize:(e,t)=>"\\log_{10}"+e.wrapArguments(t),parse:e=>{let t=e.parseArguments("implicit");return t===null?"Lg":["Log",...t,10]}},{name:"Lb",latexTrigger:"\\lb",parse:e=>{let t=e.parseArguments("implicit");return t===null?"Log":["Log",t[0],2]}},{name:"Ln",latexTrigger:["\\ln"],parse:e=>m4("Ln",e),serialize:(e,t)=>"\\ln"+e.wrapArguments(t)},{name:"Log",latexTrigger:["\\log"],parse:e=>m4("Log",e),serialize:(e,t)=>{let[r,i]=ce(t);return i?re(["\\log_{",e.serialize(i),"}",e.wrap(r)]):"\\log"+e.wrapArguments(t)}},{name:"LCM",identifierTrigger:"lcm",kind:"function"},{identifierTrigger:"LCM",kind:"function",parse:"LCM"},{identifierTrigger:"max",kind:"function",parse:"Max"},{identifierTrigger:"min",kind:"function",parse:"Min"},{name:"Max",latexTrigger:"\\max",kind:"function"},{name:"Min",latexTrigger:"\\min",kind:"function"},{name:"Supremum",latexTrigger:"\\sup",kind:"function"},{name:"Infimum",latexTrigger:"\\inf",kind:"function"},{name:"Limit",latexTrigger:"\\lim",kind:"expression",parse:e=>{if(!e.match("_"))return null;let t=e.parseGroup();if(Q(t)!=="To")return null;let r=e.parseArguments("implicit");return r?["Limit",["Function",r[0],$(t,1)],$(t,2)]:null},serialize:(e,t)=>{let r=$(t,1),i=$(r,2),n=$(t,2);return re(["\\lim_{",e.serialize(i),"\\to",e.serialize(n),"}",e.serialize($(r,1))])}},{name:"MinusPlus",latexTrigger:["\\mp"],kind:"infix",associativity:"any",precedence:270},{name:"Multiply",latexTrigger:["\\times"],kind:"infix",associativity:"any",precedence:390,serialize:q6},{latexTrigger:["\\cdot"],kind:"infix",associativity:"any",precedence:390,parse:(e,t,r)=>{let i=e.parseExpression({...r,minPrec:392});return i===null?["Multiply",t,Ll]:pu("Multiply",t,i)}},{latexTrigger:["*"],kind:"infix",associativity:"any",precedence:390,parse:(e,t,r)=>{let i=e.parseExpression({...r,minPrec:392});return i===null?["Multiply",t,Ll]:pu("Multiply",t,i)}},{name:"Mod",latexTrigger:"\\bmod",kind:"infix",precedence:600,serialize:(e,t)=>{if(Tt(t)!==2)return"";let r=e.serialize($(t,1)),i=e.serialize($(t,2));return re([r,"\\bmod",i])}},{latexTrigger:"\\mod",kind:"infix",precedence:600,parse:"Mod"},{latexTrigger:"\\pmod",kind:"prefix",precedence:245,parse:e=>{let t=e.parseGroup()??e.parseToken();return["Mod",Oe(t)]}},{name:"Congruent",serialize:(e,t)=>{let r=e.serialize($(t,1)),i=e.serialize($(t,2));if($(t,3)===null)return re([r,"\\equiv",i]);let n=e.serialize($(t,3));return re([r,"\\equiv",i,"\\pmod{",n,"}"])}},{name:"Negate",latexTrigger:["-"],kind:"prefix",precedence:701,parse:(e,t)=>{e.skipSpace();let r=e.parseExpression({...t,minPrec:703});return r===null?null:["Negate",r]}},{kind:"matchfix",openTrigger:"||",closeTrigger:"||",parse:(e,t)=>xt(t)?null:["Norm",t]},{name:"Norm",kind:"matchfix",openTrigger:["\\left","\\Vert"],closeTrigger:["\\right","\\Vert"],parse:(e,t)=>xt(t)?null:["Norm",t]},{name:"PlusMinus",latexTrigger:["\\pm"],kind:"infix",associativity:"any",precedence:270,serialize:(e,t)=>{let r=$(t,1);if(r===null)return"\\pm";if(Tt(t)===1)return re(["\\pm",e.serialize(r)]);let i=$(t,2);return re([e.serialize(r),"\\pm",e.serialize(i)])}},{latexTrigger:["\\pm"],kind:"prefix",precedence:270,parse:(e,t)=>{let r=e.parseExpression({...t,minPrec:400});return["PlusMinus",Oe(r)]}},{latexTrigger:["\\plusmn"],kind:"infix",associativity:"any",precedence:270,parse:(e,t,r)=>{let i=e.parseExpression({...r,minPrec:400});return["PlusMinus",t,Oe(i)]}},{latexTrigger:["\\plusmn"],kind:"prefix",precedence:270,parse:(e,t)=>{let r=e.parseExpression({...t,minPrec:400});return["PlusMinus",Oe(r)]}},{name:"Power",latexTrigger:["^"],kind:"infix",serialize:xf},{latexTrigger:"\\prod",precedence:390,name:"Product",parse:h4("Product",390),serialize:p4("\\prod")},{name:"Rational",precedence:600,serialize:(e,t)=>t&&Tt(t)===1?"\\operatorname{Rational}"+e.wrapArguments(t):f4(e,t)},{name:"Root",serialize:xf},{name:"Round",identifierTrigger:"round",kind:"function"},{name:"Square",precedence:720,serialize:(e,t)=>e.wrapShort($(t,1))+"^2"},{latexTrigger:["\\sum"],precedence:275,name:"Sum",parse:h4("Sum",275),serialize:p4("\\sum")},{name:"Sign",identifierTrigger:"sgn",kind:"function"},{name:"Sqrt",latexTrigger:["\\sqrt"],parse:vN,serialize:xf},{name:"Subtract",latexTrigger:["-"],kind:"infix",associativity:"left",precedence:277,parse:(e,t,r)=>{e.index-=1;let i=e.parseExpression({...r,minPrec:278});return i===null?null:["Add",t,i]},serialize:(e,t)=>{let r=e.wrap($(t,1),277),i=e.wrap($(t,2),278);return re([r,"-",i])}}];function NN(e,t){if(e!==null){if(we(e))return{index:we(e)??"Nothing",upper:t};if(Q(e)==="GreaterEqual"){let r=we($(e,1))??"Nothing",i=$(e,2)??1;return{index:r,lower:i,upper:t}}if(Q(e)==="Equal"){let r=we($(e,1))??"Nothing",i=$(e,2);if(Q(i)==="Range"){let n=$(i,1)??1,s=$(i,2)??void 0;return{index:r,lower:n,upper:s}}return{index:r,lower:i??1,upper:t}}}}function kN(e,t){xt(e)&&(e=null),xt(t)&&(t=null);let r=e===null?[]:Fl(e)??[e],i=t===null?[]:Fl(t)??[t];return r.map((n,s)=>NN(n,i[s])).filter(n=>n!==void 0)}function h4(e,t){return r=>{r.skipSpace();let i=null,n=null;for(;!(n&&i)&&(r.peek==="_"||r.peek==="^");)r.match("_")?n=r.parseGroup()??r.parseToken():r.match("^")&&(i=r.parseGroup()??r.parseToken()),r.skipSpace();let s=kN(n,i);r.pushSymbolTable();for(let f of s)r.addSymbol(f.index,"symbol");let a=r.parseExpression({minPrec:t+1});if(r.popSymbolTable(),a===null)return[e];let u=[];for(let f of s){let p=f.lower,d=f.upper,b=f.index??"Nothing";d!=null?u.push(["Tuple",b,p??1,d]):p!=null?u.push(["Tuple",b,p]):u.push(["Tuple",b])}return[e,a,...u]}}function p4(e){return(t,r)=>{if(!$(r,1))return e;let i=$(r,2),n=Q(i);n!=="Tuple"&&n!=="Triple"&&n!=="Pair"&&n!=="Single"&&(i=null);let s=$(i,1);s!==null&&Q(s)==="Hold"&&(s=$(s,1));let a=$(r,1);if(i!=null)return $(r,2)!==null?re([e,t.serialize(a)]):re([e,"_{",t.serialize($(r,2)),"}",t.serialize(a)]);let u=$(i,2),f=[];s&&we(s)!=="Nothing"&&u?f=[t.serialize(s),"=",t.serialize(u)]:s&&we(s)!=="Nothing"?f=[t.serialize(s)]:u!==null&&(f=[t.serialize(u)]),f.length>0&&(f=["_{",...f,"}"]);let p=[];return $(i,3)!==null&&(p=["^{",t.serialize($(i,3)),"}"]),re([e,...p,...f,t.serialize(a)])}}function m4(e,t){let r=null;t.match("_")&&(r=t.parseGroup()??t.parseToken());let i=t.parseArguments("implicit");return i===null&&r===null?[e]:i===null?[e,r]:r===null?[e,...i]:r===10?["Log",i[0]]:r===2?["Lb",...i]:["Log",i[0],r]}function dl(e){let t=1,r=e;do{e=r;let i=Q(e);if(i==="Negate")t*=-1,r=$(e,1);else if(i==="Multiply"){let[n,s]=dl($(e,1));s<0&&(t*=-1,n===1?r=["Multiply",...ce(e).slice(1)]:r=["Multiply",n,...ce(e).slice(1)])}else if(i==="Divide"||i==="Rational"){let[n,s]=dl($(e,1));s<0&&(t*=-1,r=[i,n,$(e,2)])}else{let n=xe(e);n!==null&&n<0&&(t*=-1,r=-n)}}while(r!==e);return[e,t]}var SN=[{name:"Matrix",serialize:(e,t)=>{let r=ce($(t,1));return d4(e,r,Fe($(t,2)),Fe($(t,3)))}},{name:"Vector",serialize:(e,t)=>{let r=ce(t);return d4(e,r.map(i=>["List",i]),Fe($(t,2)),Fe($(t,3)))}},{kind:"environment",identifierTrigger:"pmatrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:"()"},{str:t}]:[r,i]}},{kind:"environment",identifierTrigger:"bmatrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:"[]"},{str:t}]:[r,i,{str:"[]"}]}},{kind:"environment",identifierTrigger:"Bmatrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:"{}"},{str:t}]:[r,i,{str:"{}"}]}},{kind:"environment",identifierTrigger:"vmatrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:"||"},{str:t}]:[r,i,{str:"||"}]}},{kind:"environment",identifierTrigger:"Vmatrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:""},{str:t}]:[r,i,{str:""}]}},{kind:"environment",identifierTrigger:"smallmatrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:"()"},{str:t}]:[r,i]}},{kind:"environment",identifierTrigger:"array",parse:e=>{let t=Hi(e,!1),[r,i]=ji(e);return t?[r,i,{str:".."},{str:t}]:[r,i,{str:".."}]}},{kind:"environment",identifierTrigger:"matrix",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:".."},{str:t}]:[r,i,{str:".."}]}},{kind:"environment",identifierTrigger:"matrix*",parse:e=>{let t=Hi(e),[r,i]=ji(e);return t?[r,i,{str:".."},{str:t}]:[r,i,{str:".."}]}},{name:"ConjugateTranspose",kind:"postfix",latexTrigger:["^","\\star"]},{kind:"postfix",latexTrigger:["^","\\H"],parse:"ConjugateTranspose"},{kind:"postfix",latexTrigger:["^","\\dagger"],parse:(e,t)=>["ConjugateTranspose",t]},{kind:"postfix",latexTrigger:["^","\\ast"],parse:(e,t)=>["ConjugateTranspose",t]},{kind:"postfix",latexTrigger:["^","\\top"],parse:(e,t)=>["Transpose",t]},{kind:"postfix",latexTrigger:["^","\\intercal"],parse:(e,t)=>["Transpose",t]},{name:"Transpose",kind:"postfix",latexTrigger:["^","T"]},{name:"PseudoInverse",kind:"postfix",latexTrigger:["^","+"]},{name:"Trace",kind:"function",identifierTrigger:"tr"},{name:"Determinant",kind:"function",identifierTrigger:"det"}];function ji(e){let t=e.parseTabular();return t?["Matrix",["List",...t.map(r=>["List",...r])]]:["",null]}function Hi(e,t=!0){var n;let r=(n=e.parseStringGroup(t))==null?void 0:n.trim();if(!r)return"";let i="";for(let s of r)s==="c"&&(i+="="),s==="l"&&(i+="<"),s==="r"&&(i+=">"),s==="|"&&(i+="|"),s===":"&&(i+=":");return i}function d4(e,t,r,i){r??(r="()");let[n,s]=["",""];typeof r=="string"&&r.length===2&&([n,s]=r);let a="";if(i)for(let d of i)d==="<"?a+="l":d===">"?a+="r":d==="="?a+="c":d==="|"?a+="|":d===":"&&(a+=":");let u=[];for(let d of t??[]){let b=[];for(let x of ce(d))b.push(e.serialize(x));u.push(b.join(" & "))}let f=u.join(`\\\\
`),p=a.length>0?`[${a}]`:"";return re(n==="("&&s===")"?["\\begin{pmatrix}",p,f,"\\end{pmatrix}"]:n==="["&&s==="]"?["\\begin{bmatrix}",p,f,"\\end{bmatrix}"]:n==="{"&&s==="}"?["\\begin{Bmatrix}",p,f,"\\end{Bmatrix}"]:n==="|"&&s==="|"?["\\begin{vmatrix}",p,f,"\\end{vmatrix}"]:n===""&&s===""?["\\begin{Vmatrix}",p,f,"\\end{Vmatrix}"]:n==="{"&&s==="."?["\\begin{dcases}",p,f,"\\end{dcases}"]:n==="."&&s==="}"?["\\begin{rcases}",p,f,"\\end{rcases}"]:a||n!=="."||s!=="."?["\\left",h0[n]??n,"\\begin{array}",`{${a}}`,f,"\\end{array}","\\right",h0[s]??s]:["\\begin{matrix}",f,"\\end{matrix}"])}var _N=[{name:"True",kind:"symbol",latexTrigger:["\\top"]},{kind:"symbol",latexTrigger:"\\mathrm{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\operatorname{True}",parse:"True"},{kind:"symbol",latexTrigger:"\\mathsf{T}",parse:"True"},{name:"False",kind:"symbol",latexTrigger:["\\bot"]},{kind:"symbol",latexTrigger:"\\operatorname{False}",parse:"False"},{kind:"symbol",latexTrigger:"\\mathsf{F}",parse:"False"},{name:"And",kind:"infix",latexTrigger:["\\land"],precedence:317},{kind:"infix",latexTrigger:["\\wedge"],parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\&",parse:"And",precedence:317},{kind:"infix",latexTrigger:"\\operatorname{and}",parse:"And",precedence:317},{name:"Or",kind:"infix",latexTrigger:["\\lor"],precedence:310},{kind:"infix",latexTrigger:["\\vee"],parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\parallel",parse:"Or",precedence:310},{kind:"infix",latexTrigger:"\\operatorname{or}",parse:"Or",precedence:310},{name:"Xor",kind:"infix",latexTrigger:["\\veebar"],precedence:315},{name:"Not",kind:"prefix",latexTrigger:["\\lnot"],precedence:880},{kind:"prefix",latexTrigger:["\\neg"],parse:"Not",precedence:880},{name:"Nand",kind:"infix",latexTrigger:["\\barwedge"],precedence:315},{name:"Nor",kind:"infix",latexTrigger:[""],precedence:315},{kind:"function",identifierTrigger:"and",parse:"And"},{kind:"function",identifierTrigger:"or",parse:"Or"},{kind:"function",identifierTrigger:"not",parse:"Not"},{name:"Implies",kind:"infix",precedence:220,associativity:"right",latexTrigger:["\\implies"],serialize:"\\implies"},{latexTrigger:["\\Rightarrow"],kind:"infix",precedence:220,associativity:"right",parse:"Implies"},{name:"Equivalent",latexTrigger:["\\iff"],kind:"infix",associativity:"right",precedence:219},{latexTrigger:["\\Leftrightarrow"],kind:"infix",associativity:"right",precedence:219,parse:"Equivalent"},{latexTrigger:["\\equiv"],kind:"infix",associativity:"right",precedence:219,parse:(e,t,r)=>{let i=e.parseExpression({...r,minPrec:219}),n=e.index,s=e.parseExpression({...r,minPrec:219});return s!==null&&Q(s)==="Mod"?["Congruent",t,i,Oe($(s,1))]:(e.index=n,["Equivalent",t,Oe(i)])}},{name:"Proves",kind:"infix",latexTrigger:["\\vdash"],precedence:220,associativity:"right",serialize:"\\vdash"},{name:"Entails",kind:"infix",latexTrigger:["\\vDash"],precedence:220,associativity:"right",serialize:"\\vDash"},{name:"Satisfies",kind:"infix",latexTrigger:["\\models"],precedence:220,associativity:"right",serialize:"\\models"},{name:"ForAll",kind:"prefix",latexTrigger:["\\forall"],precedence:200,serialize:"\\forall",parse:Wa("ForAll")},{name:"Exists",kind:"prefix",latexTrigger:["\\exists"],precedence:200,serialize:"\\exists",parse:Wa("Exists")},{name:"ExistsUnique",kind:"prefix",latexTrigger:["\\exists","!"],precedence:200,serialize:"\\exists!",parse:Wa("ExistsUnique")},{name:"NotForAll",kind:"prefix",latexTrigger:["\\lnot","\\forall"],precedence:200,serialize:"\\lnot\\forall",parse:Wa("NotForAll")},{name:"NotExists",kind:"prefix",latexTrigger:["\\lnot","\\exists"],precedence:200,serialize:"\\lnot\\exists",parse:Wa("NotExists")},{name:"KroneckerDelta",kind:"prefix",latexTrigger:["\\delta","_"],precedence:200,serialize:(e,t)=>{let r=ce(t);return r.length===0?"\\delta":r.every(i=>we(i))?`\\delta_{${r.map(i=>e.serialize(i)).join("")}}`:`\\delta_{${r.map(i=>e.serialize(i)).join(", ")}}`},parse:e=>{let t=e.parseGroup();if(t===null){let i=e.parseToken();return i?["KroneckerDelta",i]:null}let r=Fl(t);return r&&r.length<=2?["KroneckerDelta",...r]:Q(t)==="InvisibleOperator"?["KroneckerDelta",...ce(t)]:t!==null?["KroneckerDelta",t]:null}},{name:"Boole",kind:"matchfix",openTrigger:"[",closeTrigger:"]",parse:(e,t)=>{let r=Q(t);return!r||!Yu.some(i=>i.name===r)?null:["Boole",t]}},{kind:"matchfix",openTrigger:"\\llbracket",closeTrigger:"\\rrbracket",parse:(e,t)=>{let r=Q(t);return!r||!Yu.some(i=>i.name===r)?null:["Boole",t]}}];function Wa(e){return(t,r)=>{let i=t.index,n=t.parseSymbol(r);if(n){if(t.skipSpace(),t.match(",")||t.match("\\mid")||t.match(".")||t.match(":")||t.match("\\colon")){let u=t.parseExpression(r);return[e,n,Oe(u)]}let a=t.parseEnclosure();if(a)return[e,n,Oe(a)]}t.index=i;let s=t.parseExpression(r);if(s===null)return null;if(t.skipSpace(),t.matchAny([",","\\mid",":","\\colon"])){let a=t.parseExpression(r);return[e,s,Oe(a)]}if(t.match("(")){let a=t.parseExpression(r);return t.match(")")?[e,s,Oe(a)]:null}return null}}function pr(e){return t=>{let r=t.parseGroup();return r===null?[e]:[e,r]}}var TN=[{name:"Overscript",latexTrigger:["\\overset"],kind:"infix",precedence:700},{name:"Underscript",latexTrigger:["\\underset"],kind:"infix",precedence:700},{name:"Increment",latexTrigger:["+","+"],kind:"postfix",precedence:880,parse:(e,t)=>we(t)===null?null:["Decrement",t]},{name:"Decrement",latexTrigger:["-","-"],kind:"postfix",precedence:880,parse:(e,t)=>we(t)===null?null:["Decrement",t]},{name:"PreIncrement",latexTrigger:["+","+"],kind:"prefix",precedence:880,parse:(e,t)=>{let r=e.parseExpression(t);return we(r)===null?null:["PreIncrement",r]}},{name:"PreDecrement",latexTrigger:["-","-"],kind:"prefix",precedence:880,parse:(e,t)=>{let r=e.parseExpression(t);return we(r)===null?null:["PreDecrement",r]}},{name:"Ring",latexTrigger:["\\circ"],kind:"infix",precedence:265},{name:"StringJoin",latexTrigger:["\\lt","\\gt"],kind:"infix",precedence:780},{name:"Starstar",latexTrigger:["\\star","\\star"],kind:"infix",precedence:780},{name:"PartialDerivative",latexTrigger:["\\partial"],kind:"prefix",parse:e=>{let t=!1,r="Nothing",i="Nothing";for(;!t;)e.skipSpace(),e.match("_")?i=e.parseGroup()??e.parseToken():e.match("^")?r=e.parseGroup()??e.parseToken():t=!0;let n=Fl(i);if(n&&(i=["List",...n]),i===null||r===null)return null;let s=e.parseGroup()??"Nothing";if(!xt(s)){let a=e.parseArguments()??["Nothing"];s=[s,...a]}return["PartialDerivative",s,i,r]},serialize:(e,t)=>{let r="\\partial",i=$(t,1),n=$(t,2),s=$(t,3);return n!==null&&n!=="Nothing"&&(Q(n)==="List"?r+="_{"+e.serialize(["Sequence",...ce(n)])+"}":r+="_{"+e.serialize(n)+"}"),s!==null&&s!=="Nothing"&&(r+="^{"+e.serialize(s)+"}"),i!==null&&i!=="Nothing"&&(r+=e.serialize(i)),r},precedence:740},{name:"OverBar",latexTrigger:["\\overline"],parse:pr("OverBar")},{name:"UnderBar",latexTrigger:["\\underline"],parse:pr("UnderBar")},{name:"OverVector",latexTrigger:["\\vec"],parse:pr("OverVector")},{name:"OverTilde",latexTrigger:["\\tilde"],parse:pr("OverTilde")},{name:"OverHat",latexTrigger:["\\hat"],parse:pr("OverHat")},{name:"OverRightArrow",latexTrigger:["\\overrightarrow"],parse:pr("OverRightArrow")},{name:"OverLeftArrow",latexTrigger:["\\overleftarrow"],parse:pr("OverLeftArrow")},{name:"OverRightDoubleArrow",latexTrigger:["\\Overrightarrow"],parse:pr("OverRightDoubleArrow")},{name:"OverLeftHarpoon",latexTrigger:["\\overleftharpoon"],parse:pr("OverLeftHarpoon")},{name:"OverRightHarpoon",latexTrigger:["\\overrightharpoon"],parse:pr("OverRightHarpoon")},{name:"OverLeftRightArrow",latexTrigger:["\\overleftrightarrow"],parse:pr("OverLeftRightArrow")},{name:"OverBrace",latexTrigger:["\\overbrace"],parse:pr("OverBrace")},{name:"OverLineSegment",latexTrigger:["\\overlinesegment"],parse:pr("OverLineSegment")},{name:"OverGroup",latexTrigger:["\\overgroup"],parse:pr("OverGroup")},{latexTrigger:["\\displaystyle"],parse:()=>"Nothing"},{latexTrigger:["\\textstyle"],parse:()=>"Nothing"},{latexTrigger:["\\scriptstyle"],parse:()=>"Nothing"},{latexTrigger:["\\scriptscriptstyle"],parse:()=>"Nothing"},{latexTrigger:["\\tiny"],parse:()=>"Nothing"},{latexTrigger:["\\scriptsize"],parse:()=>"Nothing"},{latexTrigger:["\\footnotesize"],parse:()=>"Nothing"},{latexTrigger:["\\small"],parse:()=>"Nothing"},{latexTrigger:["\\normalsize"],parse:()=>"Nothing"},{latexTrigger:["\\large"],parse:()=>"Nothing"},{latexTrigger:["\\Large"],parse:()=>"Nothing"},{latexTrigger:["\\LARGE"],parse:()=>"Nothing"},{latexTrigger:["\\huge"],parse:()=>"Nothing"},{latexTrigger:["\\Huge"],parse:()=>"Nothing"},{name:"Style",serialize:(e,t)=>{let r=e.serialize($(t,1)),i=T7($(t,2));if(i===null)return r;Fe(i.display)==="block"?r=re(["{\\displaystyle",r,"}"]):Fe(i.display)==="inline"?r=re(["{\\textstyle",r,"}"]):Fe(i.display)==="script"?r=re(["{\\scriptstyle",r,"}"]):Fe(i.display)==="scriptscript"&&(r=re(["{\\scriptscriptstyle",r,"}"]));let n=xe(i.size);return n!==null&&n>=1&&n<=10&&(r=re(["{",{1:"\\tiny",2:"\\scriptsize",3:"\\footnotesize",4:"\\small",5:"\\normalsize",6:"\\large",7:"\\Large",8:"\\LARGE",9:"\\huge",10:"\\Huge"}[n],r,"}"])),r}},{latexTrigger:["\\!"],parse:()=>["HorizontalSpacing",-3]},{latexTrigger:["\\ "],parse:()=>["HorizontalSpacing",6]},{latexTrigger:["\\:"],parse:()=>["HorizontalSpacing",4]},{latexTrigger:["\\enskip"],parse:()=>["HorizontalSpacing",9]},{latexTrigger:["\\quad"],parse:()=>["HorizontalSpacing",18]},{latexTrigger:["\\qquad"],parse:()=>["HorizontalSpacing",36]},{latexTrigger:["\\,"],parse:()=>["HorizontalSpacing",3]},{latexTrigger:["\\;"],parse:()=>["HorizontalSpacing",5]},{latexTrigger:["\\enspace"],parse:()=>["HorizontalSpacing",9]},{name:"HorizontalSpacing",serialize:(e,t)=>{if($(t,2)!==null)return e.serialize($(t,1));let r=xe($(t,1));return r===null?"":{"-3":"\\!",6:"\\ ",3:"\\,",4:"\\:",5:"\\;",9:"\\enspace",18:"\\quad",36:"\\qquad"}[r]??""}}];function ze(e){return(t,r)=>{let i={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arccot","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arsech":"Arcsech","\\arcsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\csch":"Csch","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sech":"Sech","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"},n=i[e??""]??e??"";if(t.atTerminator(r))return n;let s=n;do{let p=t.parsePostfixOperator(s,r);if(p===null)break;s=p}while(!0);t.skipSpace();let a=null;t.match("^")&&(a=t.parseGroup()??t.parseToken()),t.skipSpace();let u=t.parseArguments("implicit",{minPrec:390,condition:p=>{var d;return i[p.peek]||(((d=r==null?void 0:r.condition)==null?void 0:d.call(r,p))??!1)}}),f=u===null?s:typeof s=="string"?[s,...u]:["Apply",s,...u];return a===null?f:["Power",f,a]}}var MN=[{name:"Arcsin",latexTrigger:["\\arcsin"],parse:ze("Arcsin")},{name:"Arccos",latexTrigger:["\\arccos"],parse:ze("Arccos")},{name:"Arctan",latexTrigger:["\\arctan"],parse:ze("Arctan")},{latexTrigger:["\\arctg"],parse:ze("Arctan")},{name:"Arccot",latexTrigger:["\\arcctg"],parse:ze("Arccot")},{name:"Arcoth",identifierTrigger:"arcoth",parse:ze("Arccot")},{name:"Arcsec",latexTrigger:["\\arcsec"],parse:ze("Arcsec")},{name:"Arccsc",latexTrigger:["\\arccsc"],parse:ze("Arccsc")},{name:"Arsinh",latexTrigger:["\\arsinh"],parse:ze("Arsinh")},{name:"Arcosh",latexTrigger:["\\arcosh"],parse:ze("Arcosh")},{name:"Artanh",latexTrigger:["\\artanh"],parse:ze("Artanh")},{name:"Arsech",latexTrigger:["\\arsech"],parse:ze("Arsech")},{name:"Arcsch",latexTrigger:["\\arcsch"],parse:ze("Arcsch")},{latexTrigger:["\\ch"],parse:ze("Cosh")},{name:"Cosec",latexTrigger:["\\cosec"],parse:ze("Cosec")},{name:"Cosh",latexTrigger:["\\cosh"],parse:ze("Cosh")},{name:"Cot",latexTrigger:["\\cot"],parse:ze("Cot")},{latexTrigger:["\\cotg"],parse:ze("Cot")},{name:"Coth",latexTrigger:["\\coth"],parse:ze("Coth")},{name:"Csc",latexTrigger:["\\csc"],parse:ze("Csc")},{name:"Csch",latexTrigger:["\\csch"],parse:ze("Csch")},{latexTrigger:["\\ctg"],parse:ze("Cot")},{latexTrigger:["\\cth"],parse:ze("Cotanh")},{name:"Sec",latexTrigger:["\\sec"],parse:ze("Sec")},{name:"Sech",latexTrigger:["\\sech"],parse:ze("Sech")},{name:"Sinh",latexTrigger:["\\sinh"],parse:ze("Sinh")},{latexTrigger:["\\sh"],parse:ze("Sinh")},{name:"Tan",latexTrigger:["\\tan"],parse:ze("Tan")},{latexTrigger:["\\tg"],parse:ze("Tan")},{name:"Tanh",latexTrigger:["\\tanh"],parse:ze("Tanh")},{latexTrigger:["\\th"],parse:ze("Tanh")},{name:"Cos",latexTrigger:["\\cos"],parse:ze("Cos")},{name:"Sin",latexTrigger:["\\sin"],parse:ze("Sin")}],EN=[{name:"AlgebraicNumbers",latexTrigger:"\\bar\\Q"},{name:"ComplexNumbers",latexTrigger:["\\C"]},{latexTrigger:"\\mathbb{C}",parse:"ComplexNumbers"},{name:"ImaginaryNumbers",latexTrigger:["\\imaginaryI","\\R"]},{name:"EmptySet",latexTrigger:["\\emptyset"]},{latexTrigger:["\\varnothing"],parse:"EmptySet"},{name:"Integers",latexTrigger:["\\Z"]},{latexTrigger:"\\mathbb{Z}",parse:"Integers"},{name:"RationalNumbers",latexTrigger:["\\Q"]},{name:"RealNumbers",latexTrigger:["\\R"]},{latexTrigger:"\\mathbb{R}",parse:"RealNumbers"},{name:"TranscendentalNumbers",latexTrigger:"\\R-\\bar\\Q"},{latexTrigger:"\\R\\backslash\\bar\\Q",parse:"TranscendentalNumbers"},{name:"NegativeNumbers",latexTrigger:"\\R^-"},{latexTrigger:"\\R^{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R_-",parse:"NegativeNumbers"},{latexTrigger:"\\R_{-}",parse:"NegativeNumbers"},{latexTrigger:"\\R^{\\lt}",parse:"NegativeNumbers"},{name:"PositiveNumbers",latexTrigger:"\\R^+"},{latexTrigger:"\\R^{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R_+",parse:"PositiveNumbers"},{latexTrigger:"\\R_{+}",parse:"PositiveNumbers"},{latexTrigger:"\\R^{\\gt}",parse:"PositiveNumbers"},{name:"NonPositiveNumbers",latexTrigger:"\\R^{0-}"},{latexTrigger:"\\R^{-0}",parse:"NonPositiveNumbers"},{latexTrigger:"\\R^{\\leq}",parse:"NonPositiveNumbers"},{name:"NegativeIntegers",latexTrigger:"\\Z^-"},{latexTrigger:"\\Z^-",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z_-",parse:"NegativeIntegers"},{latexTrigger:"\\Z_{-}",parse:"NegativeIntegers"},{latexTrigger:"\\Z^{\\lt}",parse:"NegativeIntegers"},{name:"PositiveIntegers",latexTrigger:"\\Z^+"},{latexTrigger:"\\Z^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z_+",parse:"PositiveIntegers"},{latexTrigger:"\\Z_{+}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt}",parse:"PositiveIntegers"},{latexTrigger:"\\Z^{\\gt0}",parse:"PositiveIntegers"},{latexTrigger:"\\N^+",parse:"PositiveIntegers"},{latexTrigger:"\\N^{+}",parse:"PositiveIntegers"},{latexTrigger:"\\N^*",parse:"PositiveIntegers"},{latexTrigger:"\\N^{*}",parse:"PositiveIntegers"},{latexTrigger:"\\N^\\star",parse:"PositiveIntegers"},{latexTrigger:"\\N^{\\star}",parse:"PositiveIntegers"},{latexTrigger:"\\N_1",parse:"PositiveIntegers"},{latexTrigger:"\\N_{1}",parse:"PositiveIntegers"},{name:"NonNegativeIntegers",latexTrigger:["\\N"]},{latexTrigger:"\\Z^{+0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{\\geq0}",parse:"NonNegativeIntegers"},{latexTrigger:"\\Z^{0+}",parse:"NonNegativeIntegers"},{latexTrigger:"\\mathbb{N}",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_0",parse:"NonNegativeIntegers"},{latexTrigger:"\\N_{0}",parse:"NonNegativeIntegers"},{latexTrigger:["^","\\complement"],kind:"postfix",parse:(e,t)=>["Complement",t]},{name:"Complement",latexTrigger:["^","<{>","\\complement","<}>"],kind:"postfix"},{name:"Intersection",latexTrigger:["\\cap"],kind:"infix",precedence:350},{name:"Interval",serialize:g4},{name:"Multiple",serialize:g4},{name:"Union",latexTrigger:["\\cup"],kind:"infix",precedence:350},{name:"Set",kind:"matchfix",openTrigger:"{",closeTrigger:"}",parse:(e,t)=>xt(t)?"EmptySet":(Q(t)=="Delimiter"&&Fe($(t,2))===","&&(t=$(t,1)),Q(t)!=="Sequence"?["Set",t]:["Set",...ce(t)]),serialize:(e,t)=>re(["\\lbrace",ce(t).map(r=>e.serialize(r)).join(", "),"\\rbrace"])},{name:"SetMinus",latexTrigger:["\\setminus"],kind:"infix",precedence:650},{name:"SymmetricDifference",latexTrigger:["\\triangle"],kind:"infix",precedence:245},{latexTrigger:["\\ni"],kind:"infix",associativity:"none",precedence:160,parse:(e,t,r)=>{let i=e.parseExpression(r);return i===null?null:["Element",i,t]}},{name:"Element",latexTrigger:["\\in"],kind:"infix",precedence:240},{name:"NotElement",latexTrigger:["\\notin"],kind:"infix",precedence:240},{name:"NotSubset",latexTrigger:["\\nsubset"],kind:"infix",associativity:"none",precedence:240},{name:"NotSuperset",latexTrigger:["\\nsupset"],kind:"infix",associativity:"none",precedence:240},{name:"NotSubsetNotEqual",latexTrigger:["\\nsubseteq"],kind:"infix",associativity:"none",precedence:240},{name:"NotSupersetNotEqual",latexTrigger:["\\nsupseteq"],kind:"infix",associativity:"none",precedence:240},{name:"SquareSubset",latexTrigger:["\\sqsubset"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSubsetEqual",latexTrigger:["\\sqsubseteq"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSuperset",latexTrigger:["\\sqsupset"],kind:"infix",associativity:"none",precedence:265},{name:"SquareSupersetEqual",latexTrigger:["\\sqsupseteq"],kind:"infix",associativity:"none",precedence:265},{name:"Subset",latexTrigger:["\\subset"],kind:"infix",associativity:"none",precedence:240},{latexTrigger:["\\subsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Subset"},{latexTrigger:["\\varsubsetneqq"],kind:"infix",associativity:"none",precedence:240,parse:"Subset"},{name:"SubsetEqual",latexTrigger:["\\subseteq"],kind:"infix",associativity:"none",precedence:240},{name:"Superset",latexTrigger:["\\supset"],kind:"infix",associativity:"none",precedence:240},{latexTrigger:["\\supsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Superset"},{latexTrigger:["\\varsupsetneq"],kind:"infix",associativity:"none",precedence:240,parse:"Superset"},{name:"SupersetEqual",latexTrigger:["\\supseteq"],kind:"infix",associativity:"none",precedence:240}];function g4(e,t){if(t===null)return"";let r=Q(t);if(!r)return"";if(r==="Set")return Tt(t)===0?"\\emptyset":Tt(t)===2&&Q($(t,2))==="Condition"?re(["\\left\\lbrace",e.serialize($(t,1)),"\\middle\\mid",e.serialize($(t,2)),"\\right\\rbrace"]):re(["\\left\\lbrace",...ce(t).map(i=>e.serialize(i)+" ,"),"\\right\\rbrace"]);if(r==="Range")return re(["\\mathopen\\lbrack",e.serialize($(t,1)),", ",e.serialize($(t,2)),"\\mathclose\\rbrack"]);if(r==="Interval"){let i=$(t,1),n=$(t,2),s=!1,a=!1;return Q(i)==="Open"&&(i=$(i,1),s=!0),Q(n)==="Open"&&(n=$(n,1),a=!0),re([`\\mathopen${s?"\\rbrack":"\\lbrack"}`,e.serialize(i),", ",e.serialize(n),`\\mathclose${a?"\\lbrack":"\\rbrack"}`])}return e.numericSetStyle(t,e.level),""}function qs(e,t=1){return r=>{r.skipSpace();let i=null,n=null;for(;!(n!==null&&i!==null)&&(r.peek==="_"||r.peek==="^");)r.match("_")?n=r.parseGroup()??r.parseToken():r.match("^")&&(i=r.parseGroup()??r.parseToken()),r.skipSpace();xt(n)&&(n=null),xt(i)&&(i=null);let[s,a]=IN(r,t);if(s&&!a){if(Q(s)==="Add"||Q(s)==="Subtract"){let u=[],f=[];for(let p of ce(s))if(a)f.push(p);else{let d;[d,a]=Si(p),u.push(d??p)}if(a!==null&&f.length>0)return["Add",y4(r,e,["Add",...u],[{index:a,sub:n,sup:i}]),...f]}else if(Q(s)==="Divide"){let u;[u,a]=Si($(s,1)),u!==null&&a!==null&&(s=["Divide",u,$(s,2)])}}return y4(r,e,s,[{index:a,sub:n,sup:i}])}}function y4(e,t,r,i){if(r&&i.length===0)return[t,r];r??(r="Nothing"),e.pushSymbolTable();for(let n of i)n.index&&e.addSymbol(n.index,"symbol");return e.popSymbolTable(),[t,r,...i.map(n=>AN(n))]}function AN(e){let t=e.index?["Hold",e.index]:"Nothing";return e.sup!==null?["Tuple",t,e.sub??"Nothing",e.sup]:e.sub!==null?["Tuple",t,e.sub]:t}function IN(e,t=1){let r=e.index,i=!1,n=e.parseExpression({minPrec:266,condition:()=>((e.matchAll(["\\mathrm","<{>","d","<}>"])||e.matchAll(["\\operatorname","<{>","d","<}>"]))&&(i=!0),i)});if(i||(e.index=r,n=e.parseExpression({minPrec:266,condition:()=>(e.match("d")&&(i=!0),i)})),n!==null&&!i)return Si(n);let s=zN(e,t);return[n,s[0]??null]}function zN(e,t=1){e.skipSpace();let r=[],i=we(e.parseSymbol());return i===null?[]:(r.push(i),r)}function Si(e){let t=Q(e),r=$(e,1);if(!r)return[e,null];if(t==="Sequence"&&Tt(e)===1)return Si(r);if(t==="Multiply"||t==="InvisibleOperator"){let i=ce(e);if(i&&i.length>1){let n=we(i[i.length-2]);if(n==="d"||n==="d_upright")return i.length===2?[null,we(i[1])]:i.length===3?[i[0],we(i[2])]:[["Multiply",...i.slice(0,-2)],we(i[i.length-1])];let[s,a]=Si(i[i.length-1]);if(s)return[["Multiply",...i.slice(0,-1),s],a]}}else if(t==="Delimiter"){let[i,n]=Si(r);if(n)return i?[["Delimiter",["Sequence",i],...ce(e).slice(1)],n]:[null,n]}else if(t==="Add"){let i=ce(e);if(i.length>0){let[n,s]=Si(i[i.length-1]);if(s){if(n)return[["Add",...i.slice(0,-1),n],s];if(i.length>2)return[["Add",...i.slice(0,-1)],s];if(i.length>2)return[i[0],s]}}}else if(t==="Negate"){let[i,n]=Si(r);if(n)return[i?["Negate",i]:null,n]}else if(t==="Divide"){let[i,n]=Si(r);if(n)return[["Divide",i??1,$(e,2)],n]}else{let i=ce(e);if(i.length===1){let[n,s]=Si(i[0]);if(s)return[[Q(e),n],s]}}return[e,null]}function v4(e){return(t,r)=>{if(!$(r,1))return e;let i=$(r,2),n=Q(i),s=null;n==="Tuple"||n==="Triple"||n==="Pair"||n==="Single"||n==="Hold"?s=$(i,1):(s=$(i,1)??"x",i=null),Q(s)==="Hold"&&(s=$(s,1));let a=s!==null?we(s):null,u=$(r,1);if(Q(u)==="Lambda"&&$(u,1)!==null&&(u=Dh($(u,1),{_:a??"x",_1:a??"x"})),!i)return re(!a||a==="Nothing"?[e,"\\!",t.serialize(u)]:[e,"\\!",t.serialize(u),"\\,\\operatorname{d}",t.serialize(a)]);let f=$(i,2)?we($(i,2)):null,p=i&&f!=="Nothing"?t.serialize($(i,2)):"";p.length>0&&(p=`_{${p}}`);let d="",b=$(i,3)?we($(i,3)):null;return $(i,3)!==null&&b!=="Nothing"&&(d=`^{${t.serialize($(i,3))}}`),re([e,d,p,"\\!",t.serialize(u),...a&&we(a)!=="Nothing"?["\\,\\operatorname{d}",t.serialize(a)]:[]])}}var CN=[{kind:"expression",name:"Integrate",latexTrigger:["\\int"],parse:qs("Integrate"),serialize:v4("\\int")},{kind:"expression",latexTrigger:["\\iint"],parse:qs("Integrate",2)},{kind:"expression",latexTrigger:["\\iiint"],parse:qs("Integrate",3)},{kind:"expression",name:"CircularIntegrate",latexTrigger:["\\oint"],parse:qs("CircularIntegrate"),serialize:v4("\\oint")},{kind:"expression",latexTrigger:["\\oiint"],parse:qs("CircularIntegrate",2)},{kind:"expression",latexTrigger:["\\oiiint"],parse:qs("CircularIntegrate",3)}],$N=[{name:"Real",kind:"function",latexTrigger:["\\Re"]},{name:"Imaginary",kind:"function",latexTrigger:["\\Im"]},{name:"Argument",kind:"function",latexTrigger:["\\arg"]},{name:"Conjugate",latexTrigger:["^","\\star"],kind:"postfix"}],DN=[{name:"Mean",kind:"function",identifierTrigger:"mean"},{name:"Median",kind:"function",identifierTrigger:"median"},{name:"StandarDeviation",kind:"function",identifierTrigger:"stddev"},{latexTrigger:["\\bar"],kind:"expression",parse:(e,t)=>{let r=e.parseGroup()??e.parseToken();return!r||!we(r)?null:["Mean",r]}}],b4={"(":"(",")":")","[":"\\lbrack","]":"\\rbrack","{":"\\lbrace","}":"\\rbrace","<":"\\langle",">":"\\rangle","|":"\\vert","||":"\\Vert","\\lceil":"\\lceil","\\lfloor":"\\lfloor","\\rceil":"\\rceil","\\rfloor":"\\rfloor"};function L6(e,t,r){let i=PN(t,r);if(i===null)return;let n="kind"in t?t.kind:"expression",s=i.latexTrigger;typeof s=="string"&&(e.lookahead=Math.max(e.lookahead,h7(s)));let a=Dt(s??"");if(a.length===2&&/[_^]/.test(a[0])&&a[1]!=="<{>"&&n!=="function"&&n!=="environment"&&n!=="matchfix"){let u=t.parse;!u&&t.name&&(n==="postfix"||n==="prefix"?u=(f,p)=>[t.name,p]:u=t.name),L6(e,{...t,kind:n,name:void 0,serialize:void 0,parse:u,latexTrigger:[a[0],"<{>",a[1],"<}>"]},r)}e.defs.push(i),i.name!==void 0&&(e.ids.has(i.name)&&r({severity:"warning",message:["invalid-dictionary-entry",i.name,"Duplicate definition. The name (MathJSON identifier) must be unique, but triggers can be shared by multiple definitions."]}),e.ids.set(i.name,i))}function x4(e,t){let r={lookahead:1,ids:new Map,defs:[]};for(let i of e)L6(r,i,t);return r}function PN(e,t){if(!LN(e,t))return null;let r={kind:"kind"in e?e.kind:"expression"},i=null;"latexTrigger"in e&&(typeof e.latexTrigger=="string"?i=Dt(e.latexTrigger):i=e.latexTrigger);let n=null;"identifierTrigger"in e&&(n=e.identifierTrigger),i!==null&&(r.latexTrigger=Bn(i)),n!==null&&(r.identifierTrigger=n),e.name&&(r.name=e.name,r.serialize=ON(e,i,n)),r.kind==="matchfix"&&Qu(e)&&(r.openTrigger=e.openTrigger,r.closeTrigger=e.closeTrigger),r.kind==="symbol"&&fx(e)&&(r.precedence=e.precedence??1e4),r.kind==="expression"&&cx(e)&&(r.precedence=e.precedence??1e4),(r.kind==="prefix"||r.kind==="postfix")&&(Mh(e)||m7(e))&&(i&&(i[0]==="^"||i[0]==="_")?(r.precedence=720,e.precedence):r.precedence=e.precedence??1e4),r.kind==="infix"&&p7(e)&&(!i||i[0]!=="^"&&i[0]!=="_"||!e.associativity||e.associativity,r.associativity=e.associativity??"none",r.precedence=e.precedence??1e4);let s=qN(e,i,n);return s&&(r.parse=s),r}function ON(e,t,r){if(typeof e.serialize=="function")return e.serialize;let i=e.kind??"expression";if(i==="environment"){let a=e.identifierTrigger??e.name??"unknown";return(u,f)=>re([`\\begin{${a}}`,u.serialize($(f,1)),`\\end{${a}}`])}if(Qu(e)){let a=typeof e.openTrigger=="string"?b4[e.openTrigger]:Bn(e.openTrigger),u=typeof e.closeTrigger=="string"?b4[e.closeTrigger]:Bn(e.closeTrigger);return(f,p)=>re([a,f.serialize($(p,1)),u])}let n=e.serialize;if(n===void 0&&t&&(n=Bn(t)),n)return i==="postfix"?(a,u)=>re([a.serialize($(u,1)),n]):i==="prefix"?(a,u)=>re([n,a.serialize($(u,1))]):i==="infix"?(a,u)=>{let f=Tt(u);if(f===0)return"";let p=e.precedence??1e4;return re(ce(u).flatMap((d,b)=>{let x=a.wrap(d,p+1);return b<f-1?[x,n]:[x]}))}:(a,u)=>Q(u)?re([n,a.wrapArguments(u)]):n;let s=r??e.name??"unknown";return i==="postfix"?(a,u)=>re([a.serialize($(u,1)),a.serializeSymbol(s)]):i==="prefix"?(a,u)=>re([a.serializeSymbol(s),a.serialize($(u,1))]):i==="infix"?(a,u)=>re([a.serialize($(u,1)),a.serializeSymbol(s),a.serialize($(u,2))]):(a,u)=>Q(u)?re([a.serializeSymbol(s),a.wrapArguments(u)]):a.serializeSymbol(s)}function qN(e,t,r){if("parse"in e&&typeof e.parse=="function")return e.parse;let i=("kind"in e?e.kind:"expression")??"expression";if(i==="environment"){let n=e.parse??e.name??r;if(n)return(s,a)=>{let u=s.parseTabular();return u===null?null:[n,["List",u.map(f=>["List",...f])]]}}if(i==="function"){let n=e.parse??e.name??r;if(n)return(s,a)=>{let u=s.parseArguments("enclosure",a);return u===null?n:[n,...u]}}if(i==="symbol"){let n=e.parse??e.name??r;if(n)return(s,a)=>n}if(i==="prefix"){let n=e.parse??e.name??r;if(n){let s=e.precedence??1e4;return(a,u)=>{let f=a.parseExpression({...u??[],minPrec:s});return f===null?null:[n,f]}}}if(i==="postfix"){let n=e.parse??e.name;if(n)return(s,a)=>a===null?null:[n,a]}if(i==="infix"){if(/[_^]/.test((t==null?void 0:t[0])??"")){let s=e.name??e.parse;return(a,u)=>[s,Oe($(u,1)),Oe($(u,2))]}let n=e.parse??e.name??r;if(n){let s=e.precedence??1e4,a=e.associativity??"none";return a==="none"?(u,f,p)=>{if(f===null)return null;let d=Oe(u.parseExpression({...p,minPrec:s}));return[n,f,d]}:a==="left"?(u,f,p)=>{if(f===null)return null;let d=Oe(u.parseExpression({...p,minPrec:s+1}));return typeof n!="string"?[n,f,d]:[n,f,d]}:a==="right"?(u,f,p)=>{if(f===null)return null;let d=Oe(u.parseExpression({...p,minPrec:s}));return typeof n!="string"?[n,f,d]:[n,f,d]}:(u,f,p)=>{if(f===null)return null;let d=Oe(u.parseExpression({...p,minPrec:s}));return typeof n!="string"?[n,f,d]:pu(n,f,d)}}}if(i==="matchfix"){let n=e.parse??e.name;if(n)return(s,a)=>xt(a)?null:[n,a]}if(i==="expression"){let n=e.parse??e.name??r;if(n)return()=>n}if("parse"in e){let n=e.parse;return()=>n}}function LN(e,t){let r=e.name??e.latexTrigger??e.identifierTrigger??e.openTrigger;if(!r)try{r=JSON.stringify(e)}catch{r="???"}if(Array.isArray(r)&&(r=Bn(r)),"trigger"in e&&t({severity:"warning",message:["invalid-dictionary-entry",r,"The 'trigger' property is deprecated. Use 'latexTrigger' or 'identifierTrigger' instead"]}),"kind"in e&&!["expression","symbol","function","infix","postfix","prefix","matchfix","environment"].includes(e.kind)&&t({severity:"warning",message:["invalid-dictionary-entry",r,"The 'kind' property must be one of 'expression', 'symbol', 'function', 'infix', 'postfix', 'prefix', 'matchfix', 'environment'"]}),e.serialize!==void 0&&!e.name)return t({severity:"warning",message:["invalid-dictionary-entry",r,"A 'name' property must be provided if a 'serialize' handler is provided"]}),!1;if("identifierTrigger"in e&&(!("kind"in e)||e.kind!=="environment")&&(typeof e.identifierTrigger!="string"||!$r(e.identifierTrigger))&&t({severity:"warning",message:["invalid-dictionary-entry",r,"The 'identifierTrigger' property must be a valid identifier"]}),"name"in e&&(typeof e.name!="string"?e.name!==void 0&&t({severity:"warning",message:["invalid-dictionary-entry",r,"The 'name' property must be a string"]}):$r(e.name)||t({severity:"warning",message:["invalid-dictionary-entry",e.name,"The 'name' property must be a valid identifier"]})),Qu(e)){if("latexTrigger"in e||"identifierTrigger"in Mh)return t({severity:"warning",message:["invalid-dictionary-entry",r,"'matchfix' operators use a 'openTrigger' and 'closeTrigger' instead of a 'latexTrigger' or 'identifierTrigger'. "]}),!1;if(!e.openTrigger||!e.closeTrigger)return t({severity:"warning",message:["invalid-dictionary-entry",r,"Expected `openTrigger` and a `closeTrigger` for matchfix operator"]}),!1;if(typeof e.openTrigger!=typeof e.closeTrigger)return t({severity:"warning",message:["invalid-dictionary-entry",r,"Expected `openTrigger` and `closeTrigger` to both be strings or array of LatexToken"]}),!1}if(p7(e)||m7(e)||Mh(e)){if(Array.isArray(e.latexTrigger)&&(e.latexTrigger[0]==="_"||e.latexTrigger[0]==="^")||typeof e.latexTrigger=="string"&&(e.latexTrigger.startsWith("^")||e.latexTrigger.startsWith("_"))){if(e.precedence!==void 0||e.associativity!==void 0)return t({severity:"warning",message:["invalid-dictionary-entry",r,'Unexpected "precedence" or "associativity" for superscript/subscript operator']}),!1}else if(e.precedence===void 0)return t({severity:"warning",message:["invalid-dictionary-entry",r,`Expected a "precedence" for ${e.kind} operator`]}),!1}else if(e.associativity!==void 0)return t({severity:"warning",message:["invalid-dictionary-entry",r,'Unexpected "associativity" operator']}),!1;return!Qu(e)&&!hx(e)&&!e.latexTrigger&&!e.identifierTrigger&&!e.name?(t({severity:"warning",message:["invalid-dictionary-entry",r,"Expected a 'name', a 'latexTrigger' or a 'identifierTrigger'"]}),!1):e.parse===void 0&&e.name===void 0?(t({severity:"warning",message:["invalid-dictionary-entry",r,"Expected a 'parse' or 'name'"]}),!1):!0}var Za={symbols:rw,algebra:gN,arithmetic:wN,calculus:CN,complex:$N,core:iw,"linear-algebra":SN,logic:_N,relop:Yu,other:TN,physics:[{name:"mu0",kind:"symbol",latexTrigger:"\\mu_0"}],sets:EN,statistics:DN,trigonometry:MN};function RN(e="all"){if(e==="all"){let t=[];for(let r of Object.keys(Za))Za[r]&&t.push(...Za[r]);return t}return Za[e]?Object.freeze([...Za[e]]):[]}var FN={"\\mathord":"","\\mathop":"","\\mathbin":"","\\mathrel":"","\\mathopen":"","\\mathclose":"","\\mathpunct":"","\\mathinner":"","\\operatorname":"","\\mathrm":"_upright","\\mathit":"_italic","\\mathbf":"_bold","\\mathscr":"_script","\\mathcal":"_calligraphic","\\mathfrak":"_fraktur","\\mathsf":"_sansserif","\\mathtt":"_monospace","\\mathbb":"_doublestruck"},BN={"\\mathring":"_ring","\\hat":"_hat","\\tilde":"_tilde","\\vec":"_vec","\\overline":"_bar","\\underline":"_underbar","\\dot":"_dot","\\ddot":"_ddot","\\dddot":"_dddot","\\ddddot":"_ddddot","\\acute":"_acute","\\grave":"_grave","\\breve":"_breve","\\check":"_check"};function R6(e,t){if(e.atEnd)return null;let r=e.peek,i={"\\_":"_","\\#":"hash"}[r];if(!i&&!t.toplevel&&(i={"+":"plus","-":"minus","\\plusmn":"pm","\\pm":"pm","\\ast":"ast","\\dag":"dag","\\ddag":"ddag","\\bot":"bottom","\\top":"top","\\bullet":"bullet","\\cir":"circle","\\diamond":"diamond","\\times":"times","\\square":"square","\\star":"star"}[r]),i)return e.nextToken(),i;let n=Yi.findIndex(s=>s[1]===r);return n>=0?(e.nextToken(),Yi[n][0]):e.matchChar()??e.nextToken()}function vu(e){let t=Am(e),r=BN[e.peek]??null;if(r){if(e.nextToken(),!e.match("<{>"))return null;let s=vu(e);if(s===null||!e.match("<}>"))return null;t=`${s}${r}`}if(t===null){for(t="";!e.atEnd;){let s=e.peek;if(s==="<}>"||s==="_"||s==="^")break;let a=R6(e,{toplevel:!1});if(a===null)return null;t+=a}for(;!e.atEnd&&/\d/.test(e.peek);)t+=e.nextToken()}for(;!e.atEnd;)if(e.match("\\degree"))t+="_deg";else if(e.matchAll(["^","\\prime"]))t+="_prime";else if(e.matchAll(["^","<{>","\\prime","<}>"]))t+="_prime";else if(e.matchAll(["^","<{>","\\doubleprime","<}>"]))t+="_dprime";else if(e.matchAll(["^","<{>","\\prime","\\prime","<}>"]))t+="_dprime";else break;let i=[],n=[];for(;!e.atEnd;)if(e.match("_")){let s=e.match("<{>"),a=vu(e);if(s&&!e.match("<}>")||a===null)return null;n.push(a)}else if(e.match("^")){let s=e.match("<{>"),a=vu(e);if(s&&!e.match("<}>")||a===null)return null;i.push(a)}else break;return i.length>0&&(t+="__"+i.join("")),n.length>0&&(t+="_"+n.join("")),t}function Am(e){let t=FN[e.peek]??null;if(t===null)return null;if(e.nextToken(),e.match("<{>")){let r="",i={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"}[e.peek]??"";return i&&(r=i,e.nextToken()),r+=vu(e),r===null||!e.match("<}>")?null:t==="_upright"&&r.length>1?r:r+t}return null}function w4(e){let t=e.index,r=Am(e);return r===null||$r(r)?null:e.error(["invalid-identifier",{str:ds(r)}],t)}function bu(e){if(/^[a-zA-Z]$/.test(e.peek)||new RegExp("^\\p{XIDS}$","u").test(e.peek))return e.nextToken();let t=Am(e);if(!t){for(t="";!e.atEnd&&F0.test(t+e.peek);)t+=e.nextToken();t||(t=null)}let r=e.index;return t??(t=R6(e,{toplevel:!0})),t&&(t=t.normalize(),$r(t))?t:(e.index=r,null)}var VN={"(":["\\lparen","("],")":["\\rparen",")"],"[":["\\lbrack","\\[","["],"]":["\\rbrack","\\]","]"],"<":["<","\\langle"],">":[">","\\rangle"],"{":["\\{","\\lbrace"],"}":["\\}","\\rbrace"],":":[":","\\colon"],"|":["|","\\|","\\lvert","\\rvert"],"||":["||","\\Vert","\\lVert","\\rVert"]},sp={"\\left":"\\right","\\bigl":"\\bigr","\\Bigl":"\\Bigr","\\biggl":"\\biggr","\\Biggl":"\\Biggr","\\big":"\\big","\\Big":"\\Big","\\bigg":"\\bigg","\\Bigg":"\\Bigg"},ap={"(":")","[":"]","|":"|","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache","\\llbracket":"\\rrbracket"},jN=class{constructor(e,t,r){this._index=0,this.symbolTable={parent:null,ids:{}},this._boundaries=[],this._lastPeek="",this._peekCounter=0,this._tokens=e,this.options=r,this._dictionary=t,this._positiveInfinityTokens=Dt(this.options.positiveInfinity),this._negativeInfinityTokens=Dt(this.options.negativeInfinity),this._notANumberTokens=Dt(this.options.notANumber),this._decimalSeparatorTokens=Dt(this.options.decimalSeparator),this._wholeDigitGroupSeparatorTokens=[],this._fractionalDigitGroupSeparatorTokens=[],this.options.digitGroupSeparator&&(typeof this.options.digitGroupSeparator=="string"?(this._wholeDigitGroupSeparatorTokens=Dt(this.options.digitGroupSeparator),this._fractionalDigitGroupSeparatorTokens=this._wholeDigitGroupSeparatorTokens):Array.isArray(this.options.digitGroupSeparator)&&(this._wholeDigitGroupSeparatorTokens=Dt(this.options.digitGroupSeparator[0]),this._fractionalDigitGroupSeparatorTokens=Dt(this.options.digitGroupSeparator[1]))),this._exponentProductTokens=Dt(this.options.exponentProduct),this._beginExponentMarkerTokens=Dt(this.options.beginExponentMarker),this._endExponentMarkerTokens=Dt(this.options.endExponentMarker),this._truncationMarkerTokens=Dt(this.options.truncationMarker),this._imaginaryUnitTokens=Dt(this.options.imaginaryUnit)}pushSymbolTable(){this.symbolTable={parent:this.symbolTable,ids:{}}}popSymbolTable(){this.symbolTable=this.symbolTable.parent??this.symbolTable}addSymbol(e,t){if(e in this.symbolTable.ids&&this.symbolTable.ids[e]!==t)throw new Error(`Symbol ${e} already declared as a different type`);this.symbolTable.ids[e]=t}get index(){return this._index}set index(e){this._index=e,this._lastPeek="",this._peekCounter=0}getIdentifierType(e){let t=this.symbolTable;for(;t;){if(e in t.ids)return t.ids[e];t=t.parent}return this.options.getIdentifierType?this.options.getIdentifierType(e):"unknown"}get peek(){let e=this._tokens[this.index];if(e===this._lastPeek?this._peekCounter+=1:this._peekCounter=0,this._peekCounter>=1024){let t=`Infinite loop detected while parsing "${this.latex(0)}" at "${this._lastPeek}" (index ${this.index})`;throw console.error(t),new Error(t)}return this._lastPeek=e,e}nextToken(){return this._tokens[this.index++]}get atEnd(){return this.index>=this._tokens.length}atTerminator(e){return this.atBoundary||(((e==null?void 0:e.condition)&&e.condition(this))??!1)}get atBoundary(){if(this.atEnd)return!0;let e=this.index;for(let t of this._boundaries)if(this.matchAll(t.tokens))return this.index=e,!0;return!1}addBoundary(e){this._boundaries.push({index:this.index,tokens:e})}removeBoundary(){this._boundaries.pop()}matchBoundary(){let e=this._boundaries[this._boundaries.length-1],t=e&&this.matchAll(e.tokens);return t&&this._boundaries.pop(),t}boundaryError(e){let t=this._boundaries[this._boundaries.length-1];return this._boundaries.pop(),this.error(e,t.index)}latex(e,t){return Bn(this._tokens.slice(e,t))}latexAhead(e){return this.latex(this.index,this.index+e)}lookAhead(){let e=Math.min(this._dictionary.lookahead,this._tokens.length-this.index);if(e<=0)return[];let t=[];for(;e>0;)t.push([e,this.latexAhead(e--)]);return t}peekDefinitions(e){if(this.atEnd)return[];let t=[],r=[...this.getDefs(e)];for(let i of r)i.latexTrigger===""&&t.push([i,0]);for(let[i,n]of this.lookAhead())for(let s of r)s.latexTrigger===n&&t.push([s,i]);for(let i of r)if(i.identifierTrigger){let n=HN(this,i.identifierTrigger);n>0&&t.push([i,n])}return t}skipSpaceTokens(){for(;this.match("<space>"););}skipSpace(){if(!this.atEnd&&this.peek==="<{>"){let t=this.index;for(this.nextToken();this.match("<space>"););if(this.nextToken()==="<}>")return this.skipSpace(),!0;this.index=t}if(!this.options.skipSpace)return!1;let e=!1;for(;this.match("<space>");)e=!0;return e&&this.skipSpace(),e}skipVisualSpace(){this.options.skipSpace&&(this.skipSpace(),["\\!","\\,","\\:","\\;","\\enskip","\\enspace","\\space","\\quad","\\qquad"].includes(this.peek)&&(this.nextToken(),this.skipVisualSpace()),this.skipSpace())}match(e){return this._tokens[this.index]!==e?!1:(this.index++,!0)}matchAll(e){if(e.length===0)return!1;let t,r=0;do t=this._tokens[this.index+r]===e[r++];while(t&&r<e.length);return t&&(this.index+=r),t}matchAny(e){return e.includes(this._tokens[this.index])?this._tokens[this.index++]:""}matchLatexNumber(e=!0){let t=!1,r=this.peek;for(;r==="<space>"||r==="+"||r==="-";)r==="-"&&(t=!t),this.nextToken(),r=this.peek;let i=10,n=["0","1","2","3","4","5","6","7","8","9"];if(this.match("'"))i=8,n=["0","1","2","3","4","5","6","7"],e=!0;else if(this.match('"')||this.match("x"))i=16,n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],e=!0;else if(this.match("`"))return r=this.nextToken(),r?r.startsWith("\\")&&r.length===2?(t?-1:1)*(r.codePointAt(1)??0):(t?-1:1)*(r.codePointAt(0)??0):null;let s="";for(;n.includes(this.peek);)s+=this.nextToken();if(!e&&this.match("."))for(s+=".";n.includes(this.peek);)s+=this.nextToken();let a=e?Number.parseInt(s,i):Number.parseFloat(s);return Number.isNaN(a)?null:t?-a:a}matchChar(){let e=this.index,t=0;for(;this.match("^");)t+=1;if(t<2&&(this.index=e),t>=2){let r="",i=0;for(;i!=t;){let n=this.matchAny(["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"]);if(!n)break;r+=n,i+=1}if(r.length===t)return String.fromCodePoint(Number.parseInt(r,16))}else if(this.match("\\char")){let r=Math.floor(this.matchLatexNumber()??Number.NaN);return(!Number.isFinite(r)||r<0||r>1114111)&&(r=10067),String.fromCodePoint(r)}else if(this.match("\\unicode"))if(this.skipSpaceTokens(),this.match("<{>")){let r=this.matchLatexNumber();if(this.match("<}>")&&r!==null&&r>=0&&r<=1114111)return String.fromCodePoint(r)}else{let r=this.matchLatexNumber();if(r!==null&&r>=0&&r<=1114111)return String.fromCodePoint(r)}return this.index=e,null}matchDelimiter(e,t){if(Array.isArray(e))return this.matchAll(e)?(this.addBoundary(t),!0):!1;let r=this.index,i=sp[this.peek];return i&&this.nextToken(),e==="||"&&this.matchAll(["|","|"])?(this.addBoundary(["|","|"]),!0):(VN[e]??[e]).includes(this.peek)?(e=this.nextToken(),t=ap[e]??t,this.addBoundary(i?[i,t]:[t]),!0):(this.index=r,!1)}parseGroup(){let e=this.index;if(this.skipSpaceTokens(),this.match("<{>")){this.addBoundary(["<}>"]);let t=this.parseExpression();if(this.skipSpace(),this.matchBoundary())return t??"Nothing";for(;!this.matchBoundary()&&!this.atEnd;)this.nextToken();if(Q(t)==="Error")return t;let r=this.error("expected-closing-delimiter",e);return t!==null?["InvisibleOperator",t,r]:r}return this.index=e,null}parseOptionalGroup(){let e=this.index;if(this.skipSpaceTokens(),this.match("[")){this.addBoundary(["]"]);let t=this.parseExpression();return this.skipSpace(),this.matchBoundary()?t:this.boundaryError("expected-closing-delimiter")}return this.index=e,null}parseToken(){return this.skipSpace(),[...'!"#$%&(),/;:?@[]\\`|~'.split(""),"\\left","\\bigl"].includes(this.peek)?null:/^[0-9]$/.test(this.peek)?parseInt(this.nextToken(),10):this.parseGenericExpression()??this.parseSymbol()}parseTabular(){let e=[],t=[],r=null;for(;!this.atBoundary;)if(this.skipSpace(),this.match("&"))t.push(r??"Nothing"),r=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.parseOptionalGroup(),r!==null&&t.push(r),e.push(t),t=[],r=null;else{let i=[],n=this.peek;for(;n!=="&"&&n!=="\\\\"&&n!=="\\cr"&&!this.atBoundary;)r=this.parseExpression({minPrec:0,condition:s=>{let a=s.peek;return a==="&"||a==="\\\\"||a==="\\cr"}}),r!==null?i.push(r):(i.push(["Error",["'unexpected-token'",n]]),this.nextToken()),this.skipSpace(),n=this.peek;i.length>1?r=["Sequence",...i]:r=i[0]??"Nothing"}return r!==null&&t.push(r),t.length>0&&e.push(t),e}parseStringGroupContent(){let e=this.index,t="",r=0;for(;!this.atBoundary||r>0;){let i=this.nextToken();if(i==="<$>"||i==="<$$>")return this.index=e,"";i==="<{>"?(r+=1,t+="\\{"):i==="<}>"?(r-=1,t+="\\}"):i==="<space>"?t+=" ":(i[0],t+=i)}return t}parseStringGroup(e){e===void 0&&(e=!1);let t=this.index;for(;this.match("<space>"););if(this.match(e?"[":"<{>")){this.addBoundary([e?"]":"<}>"]);let r=this.parseStringGroupContent();if(this.matchBoundary())return r;this.removeBoundary()}return this.index=t,null}parseEnvironment(e){var i;let t=this.index;if(!this.match("\\begin"))return null;let r=(i=this.parseStringGroup())==null?void 0:i.trim();if(!r)return this.error("expected-environment-name",t);this.addBoundary(["\\end","<{>",...r.split(""),"<}>"]);for(let n of this.getDefs("environment"))if(n.identifierTrigger===r){let s=n.parse(this,e);return this.skipSpace(),this.matchBoundary()?s!==null?this.decorate(s,t):(this.index=t,null):this.boundaryError("unbalanced-environment")}return this.parseTabular(),this.skipSpace(),this.matchBoundary()?this.error(["unknown-environment",{str:r}],t):this.boundaryError("unbalanced-environment")}parseOptionalSign(){let e=!!this.matchAny(["-",""]);for(;this.matchAny(["+",""])||this.skipSpace();)this.matchAny(["-",""])&&(e=!e);return e?"-":"+"}parseDecimalDigits(e="whole"){let t=[],r=!1;for(;!r;){for(;/^[0-9]$/.test(this.peek);)t.push(this.nextToken()),this.skipVisualSpace();r=!0;let i=e==="whole"?this._wholeDigitGroupSeparatorTokens:this._fractionalDigitGroupSeparatorTokens;if(e!=="none"&&i.length>0){let n=this.index;this.skipVisualSpace(),this.matchAll(i)&&(this.skipVisualSpace(),/^[0-9]$/.test(this.peek)?r=!1:this.index=n)}}return t.join("")}parseSignedInteger(e){let t=this.index,r=this.parseOptionalSign(),i=this.parseDecimalDigits(e);return i?r==="-"?"-"+i:i:(this.index=t,"")}parseExponent(){let e=this.index;if(this.skipVisualSpace(),this.matchAny(["e","E"])){let t=this.parseSignedInteger("none");if(t)return t}if(this.index=e,this.match("\\times")&&(this.skipVisualSpace(),this.matchAll(["1","0"])&&(this.skipVisualSpace(),this.match("^")))){if(this.skipVisualSpace(),/^[0-9]$/.test(this.peek))return this.nextToken();if(this.match("<{>")){this.skipVisualSpace();let t=this.parseSignedInteger("whole");if(this.skipVisualSpace(),t&&this.match("<}>"))return t}}if(this.index=e,this.skipVisualSpace(),this.match("\\%"))return"-2";if(this.index=e,this.matchAll(this._exponentProductTokens)&&(this.skipVisualSpace(),this.matchAll(this._beginExponentMarkerTokens))){this.skipVisualSpace();let t=this.parseSignedInteger("none");if(this.skipVisualSpace(),t&&this.matchAll(this._endExponentMarkerTokens))return t}return this.index=e,""}parseRepeatingDecimal(){let e=this.index,t=this.options.repeatingDecimal,r="";if((t==="auto"||t==="parentheses")&&this.match("("))return r=this.parseDecimalDigits("fraction"),r&&this.match(")")?`(${r})`:(this.index=e,"");if(this.index=e,(t==="auto"||t==="parentheses")&&this.matchAll(["\\left","("]))return r=this.parseDecimalDigits("fraction"),r&&this.matchAll(["\\right",")"])?`(${r})`:(this.index=e,"");if(this.index=e,(t==="auto"||t==="vinculum")&&this.matchAll(["\\overline","<{>"]))return r=this.parseDecimalDigits("fraction"),r&&this.match("<}>")?`(${r})`:(this.index=e,"");if(this.index=e,(t==="auto"||t==="arc")&&(this.matchAll(["\\wideparen","<{>"])||this.matchAll(["\\overarc","<{>"])))return r=this.parseDecimalDigits("fraction"),r&&this.match("<}>")?`(${r})`:(this.index=e,"");if(this.index=e,t==="auto"||t==="dots"){let i=N4(this);if(i!==null){if(r=this.parseDecimalDigits("fraction"),!r)return`(${i})`;let n=N4(this);if(n!==null)return`(${i}${r}${n})`}}return this.index=e,""}parseNumber(){if(this.options.parseNumbers===!1||this.options.parseNumbers==="never")return null;let e=this.index;this.skipVisualSpace();let t=1;for(;this.peek==="-"||this.peek==="+";)this.match("-")?t=-t:this.match("+"),this.skipVisualSpace();let r="",i="",n=!1;if(this.match(".")||this.matchAll(this._decimalSeparatorTokens)){let p=this.peek;(/^[\d]$/.test(p)||GN(this))&&(n=!0,r="0")}else r=this.parseDecimalDigits("whole");if(!r)return this.index=e,null;let s=this.index,a=!1;(n||this.match(".")||this.matchAll(this._decimalSeparatorTokens))&&(i=this.parseDecimalDigits("fraction"),a=!0);let u=!1;if(a){let p=this.parseRepeatingDecimal();p&&(i+=p,u=!0),this.match("\\ldots")||this.matchAll(this._truncationMarkerTokens)}if(a&&!i)return this.index=s,r.length<10?wf(t*parseInt(r,10)):{num:t<0?"-"+r:r};let f=this.parseExponent();if(!a&&!f&&r.length<10)return wf(t*parseInt(r,10));if(!u&&this.options.parseNumbers==="rational"){let p=parseInt(r,10);if(!i)return f?["Multiply",t*p,["Power",10,f]]:wf(t*p);let d=parseInt(i,10),b=i.length,x=p*10**b+d,I=10**b;return f?["Multiply",["Rational",t*x,I],["Power",10,f]]:["Rational",t*x,I]}return{num:(t<0?"-":"")+r+(a?"."+i:"")+(f?"e"+f:"")}}parsePrefixOperator(e){e||(e={minPrec:0}),e.minPrec||(e={...e,minPrec:0});let t=this.index;for(let[r,i]of this.peekDefinitions("prefix")){this.index=t+i;let n=r.parse(this,{...e,minPrec:r.precedence+1});if(n!==null)return n}return this.index=t,null}parseInfixOperator(e,t){t??(t={minPrec:0}),t.minPrec,t.minPrec===void 0&&(t={...t,minPrec:0});let r=this.index;for(let[i,n]of this.peekDefinitions("infix"))if(i.precedence>=t.minPrec){this.index=r+n;let s=i.parse(this,e,t);if(s!==null)return s}return this.index=r,null}parseArguments(e="enclosure",t){if(this.atTerminator(t))return null;let r=this.index,i=this.parseEnclosure();if(e==="enclosure")return i===null?null:Fl(i)??[];if(e==="implicit"){if(Q(i)==="Delimiter"){let s=$(i,1);return Q(s)==="Sequence"?ce(s):s===null?[]:[s]}if(i!==null)return[i];let n=this.parseExpression({...t,minPrec:390});return n===null?null:[n]}return this.index=r,null}parseEnclosure(){let e=this.getDefs("matchfix"),t=this.index;for(let r of e){if(this.index=t,!this.matchDelimiter(r.openTrigger,r.closeTrigger))continue;let i=this.index;this.skipSpace();let n=this.parseExpression();if(this.skipSpace(),!this.matchBoundary()){let a=this._boundaries[this._boundaries.length-1].tokens;if(this.removeBoundary(),this.index=i,this.skipSpace(),n=this.parseExpression(),this.skipSpace(),!this.matchAll(a)){if(this.index=t,!this.atEnd)continue;return null}}let s=r.parse(this,n??"Nothing");if(s!==null)return s}return this.index=t,null}parseGenericExpression(e){if(this.atTerminator(e))return null;let t=this.index,r=null,i=this.peekDefinitions("expression")??[];for(let[n,s]of i)if(this.index=t+s,typeof n.parse=="function"){if(r=n.parse(this,e),r!==null)return r}else return n.name;return this.index=t,null}parseFunction(e){if(this.atTerminator(e))return null;let t=this.index,r=null;for(let[n,s]of this.peekDefinitions("function"))if(this.index=t+s,typeof n.parse=="function"){if(r=n.parse(this,e),r!==null)return r}else{r=n.name;break}if(r===null&&(this.index=t,r=bu(this),!this.isFunctionOperator(r)))return this.index=t,null;do{let n=this.parsePostfixOperator(r,e);if(n===null)break;r=n}while(!0);let i=this.parseArguments("enclosure",e);return i===null?r:typeof r=="string"?[r,...i]:["Apply",r,...i]}parseSymbol(e){if(this.atTerminator(e))return null;let t=this.index;for(let[i,n]of this.peekDefinitions("symbol"))if(this.index=t+n,typeof i.parse=="function"){let s=i.parse(this,e);if(s!==null)return s}else return i.name;this.index=t;let r=bu(this);return r!==null&&this.getIdentifierType(r)==="symbol"?r:(this.index=t,null)}parseSupsub(e){if(this.atEnd)return e;let t=this.index;this.skipSpace();let r=[],i=[],n=t;for(;this.peek==="_"||this.peek==="^";){if(this.match("_"))if(n=this.index,this.match("_")||this.match("^"))i.push(this.error("syntax-error",n));else{let a=this.parseGroup()??this.parseToken()??this.parseStringGroup();if(a===null)return this.error("missing",t);i.push(a)}else if(this.match("^"))if(n=this.index,this.match("_")||this.match("^"))r.push(this.error("syntax-error",n));else{let a=this.parseGroup()??this.parseToken();if(a===null)return this.error("missing",t);r.push(a)}n=this.index,this.skipSpace()}if(r.length===0&&i.length===0)return this.index=t,e;let s=e;if(i.length>0){let a=[...this.getDefs("infix")].filter(u=>u.latexTrigger==="_");if(a){let u=["Subscript",s,i.length===1?i[0]:["List",...i]];for(let f of a)if(typeof f.parse=="function"?s=f.parse(this,u,{minPrec:0}):s=u,s!==null)break}}if(r.length>0){let a=[...this.getDefs("infix")].filter(u=>u.latexTrigger==="^");if(a){let u=r.filter(f=>!xt(f));if(u.length!==0){let f=u.length===1?u[0]:["List",...u],p=["Superscript",s,f];for(let d of a)if(typeof d.parse=="function"?s=d.parse(this,p,{minPrec:0}):s=p,s!==null)break}}}return s===null&&(this.index=t),s}parsePostfixOperator(e,t){if(e===null||this.atEnd)return null;let r=this.index;for(let[i,n]of this.peekDefinitions("postfix")){this.index=r+n;let s=i.parse(this,e,t);if(s!==null)return s}return this.index=r,null}parseSyntaxError(){let e=this.index;if(this.peek==="^")return this.index+=1,["Superscript",this.error("missing",e),Oe(this.parseGroup())];let t=this.peekDefinitions("operator");if(t.length>0){if(t=this.peekDefinitions("postfix"),t.length>0){let[a,u]=t[0];if(this.index+=u,typeof a.parse=="function"){let f=a.parse(this,this.error("missing",e));if(f!==null)return f}return a.name?[a.name,this.error("missing",e)]:this.error("unexpected-operator",e)}if(t=this.peekDefinitions("prefix"),t.length>0){let[a,u]=t[0];if(this.index+=u,typeof a.parse=="function"){let f=a.parse(this,{minPrec:0});if(f!==null)return f}return a.name?[a.name,this.parseExpression()??this.error("missing",e)]:this.error("unexpected-operator",e)}if(t=this.peekDefinitions("infix"),t.length>0){let[a,u]=t[0];this.index+=u;let f=a.parse(this,this.error("missing",e),{minPrec:0});return f!==null?f:this.error("unexpected-operator",e)}}let r=this.index,i=w4(this);if(i!==null)return i;if(i=bu(this),i!==null)return this.error(["unexpected-identifier",{str:i}],r);let n=this.peek;if(!n)return this.error("syntax-error",e);if(UN(this))return this.error("unexpected-delimiter",e);if(n[0]!=="\\")return this.error(["unexpected-token",{str:Bn(n)}],e);let s=this.nextToken();if(this.skipSpaceTokens(),s==="\\end"){let a=this.parseStringGroup();return a===null?this.error("expected-environment-name",e):this.error(["unbalanced-environment",{str:a}],e)}for(;this.match("[");){let a=0;for(;!this.atEnd&&a===0&&this.peek!=="]";)this.peek==="["&&(a+=1),this.peek==="]"&&(a-=1),this.nextToken();this.match("]")}for(;this.match("<{>");){let a=0;for(;!this.atEnd&&a===0&&this.peek!=="<}>";)this.peek==="<{>"&&(a+=1),this.peek==="<}>"&&(a-=1),this.nextToken();this.match("<}>")}return this.error(["unexpected-command",{str:Bn(s)}],e)}parsePrimary(e){var i,n;if(this.atBoundary||this.atTerminator(e))return null;let t=null,r=this.index;if(this.match("<}>"))return this.error("unexpected-closing-delimiter",r);if(t??(t=this.parseGroup()),t??(t=this.parseNumber()),t??(t=this.parseEnclosure()),t??(t=this.parseEnvironment(e)),t===null&&this.matchAll(this._positiveInfinityTokens)&&(t="PositiveInfinity"),t===null&&this.matchAll(this._negativeInfinityTokens)&&(t="NegativeInfinity"),t===null&&this.matchAll(this._notANumberTokens)&&(t="NaN"),t===null&&this.matchAll(this._imaginaryUnitTokens)&&(t="ImaginaryUnit"),t??(t=this.parseGenericExpression(e)??this.parseFunction(e)??this.parseSymbol(e)??w4(this)),t!==null){t=this.decorate(t,r);let s=null,a=this.index;do{if(s=this.parsePostfixOperator(t,e),t=s??t,this.index===a&&s!==null){this.index;break}a=this.index}while(s!==null)}return t!==null&&(t=this.parseSupsub(t)),t===null&&(t=((n=(i=this.options).parseUnexpectedToken)==null?void 0:n.call(i,null,this))??null,t===null&&this.peek.startsWith("\\")&&(this.nextToken(),t=this.error("unexpected-command",r))),this.decorate(t,r)}parseExpression(e){var i,n;this.skipSpace();let t=this.index;if(this.atBoundary)return this.index=t,null;e??(e={minPrec:0}),e.minPrec,e.minPrec===void 0&&(e={...e,minPrec:0});let r=this.parsePrefixOperator({...e,minPrec:0});if(r===null&&(r=this.parsePrimary(e),xt(r)&&(r=null)),r!==null){let s=!1;for(;!s&&!this.atTerminator(e);){this.skipSpace();let a=this.parseInfixOperator(r,e);if(a===null&&this.peekDefinitions("operator").length===0){let u=this.parseExpression({...e,minPrec:390});u!==null?Q(r)==="InvisibleOperator"?Q(u)==="InvisibleOperator"?a=["InvisibleOperator",...ce(r),...ce(u)]:a=["InvisibleOperator",...ce(r),u]:Q(u)==="InvisibleOperator"?a=["InvisibleOperator",r,...ce(u)]:a=["InvisibleOperator",r,u]:a===null&&(a=((n=(i=this.options).parseUnexpectedToken)==null?void 0:n.call(i,r,this))??null)}a!==null?r=a:s=!0}}return this.decorate(r,t)}decorate(e,t){if(e===null)return null;if(!this.options.preserveLatex)return e;let r=this.latex(t,this.index);return Array.isArray(e)?e={latex:r,fn:e}:typeof e=="number"?e={latex:r,num:Number(e).toString()}:typeof e=="string"?e={latex:r,sym:e}:typeof e=="object"&&e!==null&&(e.latex=r),e}error(e,t){let r;typeof e=="string"?(e.startsWith("'"),r={str:e}):(e[0].startsWith("'"),r=["ErrorCode",{str:e[0]},...e.slice(1)]);let i=this.latex(t,this.index);return i?["Error",r,["LatexString",{str:i}]]:["Error",r]}isFunctionOperator(e){return e===null?!1:this.getIdentifierType(e)==="function"}*getDefs(e){if(e==="operator")for(let t=this._dictionary.defs.length-1;t>=0;t--){let r=this._dictionary.defs[t];/^prefix|infix|postfix/.test(r.kind)&&(yield r)}else for(let t=this._dictionary.defs.length-1;t>=0;t--){let r=this._dictionary.defs[t];r.kind===e&&(yield r)}}};function HN(e,t){var s;let r=e.index,i=(s=bu(e))==null?void 0:s.trim();if(i===null)return 0;let n=i!==t?0:e.index-r;return e.index=r,n}function UN(e){let t=e.peek;return Object.values(ap).includes(t)||ap[t]?(e.nextToken(),!0):sp[t]||Object.values(sp).includes(t)?(e.nextToken(),e.nextToken(),!0):!1}function N4(e){let t=e.index;if(e.matchAll(["\\overset","<{>"])&&(e.match(".")||e.match("\\cdots"))&&e.matchAll(["<}>","<{>"])){let r=e.nextToken();if(r&&/^\d$/.test(r)&&e.match("<}>"))return r}return e.index=t,null}function GN(e){let t=e.peek;return t==="\\overline"||t==="\\overset"||t==="\\wideparent"||t==="\\overarc"||t==="("||t==="\\left"}function WN(e,t,r){let i=new jN(Dt(e),t,r),n=i.parseExpression();if(!i.atEnd){let s=i.parseSyntaxError();n=n!==null?["Sequence",n,s]:s}return n??(n="Nothing"),r.preserveLatex&&(Array.isArray(n)?n={latex:e,fn:n}:typeof n=="number"?n={latex:e,num:Number(n).toString()}:typeof n=="string"&&n.startsWith("'")&&n.endsWith("'")?n={latex:e,str:n.slice(1,-1)}:typeof n=="string"?n={latex:e,sym:n}:typeof n=="object"&&n!==null&&(n.latex=e)),n}function wf(e){return e===0?{num:"0"}:Number.isInteger(e)&&Math.abs(e)<Re?e:{num:e.toString()}}var ZN=["\\varphi -> \\frac{1+\\sqrt{5}}{2}",QN,YN,e=>{let t=zi(e);return t?{value:t,because:"expand"}:void 0},e=>{if(e.operator==="Add")return{value:Gt(...e.ops.map(t=>t.canonical.simplify())),because:"addition"}},e=>{if(e.operator==="Negate")return{value:e.op1.neg(),because:"negation"}},e=>{if(e.operator==="Multiply")return{value:Jr(...e.ops.map(t=>t.canonical.simplify())),because:"multiplication"}},e=>{if(e.operator==="Divide")return{value:e.op1.div(e.op2),because:"division"};if(e.operator==="Rational"&&e.nops===2)return{value:e.op1.div(e.op2),because:"rational"}},e=>{if(e.operator==="Power")return{value:e.op1.pow(e.op2),because:"power"};if(e.operator==="Root")return{value:e.op1.root(e.op2),because:"root"};if(e.operator==="Sqrt")return{value:e.op1.sqrt(),because:"sqrt"}},e=>{if(e.operator!=="Abs")return;let t=e.op1;if(t.isNonNegative)return{value:t,because:"|x| -> x"};if(t.isNegative)return{value:t.neg(),because:"|x| -> -x"}},e=>{if(e.operator!=="Sign")return;let t=e.sgn,r=e.engine;if(t!==void 0){if(t==="positive")return{value:r.One,because:"sign positive"};if(t==="negative")return{value:r.One,because:"sign negative"};if(t==="zero")return{value:r.Zero,because:"sign zero"};if(t==="unsigned")return{value:r.NaN,because:"sign unsinged"}}},e=>{if(e.operator==="Ln")return{value:e.op1.ln(e.ops[1]),because:"ln"};if(e.operator==="Log")return{value:e.op1.ln(e.ops[1]??10),because:"log"}},e=>{if(e.operator==="Max"){if(e.nops===0)return{value:e.engine.NegativeInfinity,because:"max"};if(e.nops===1)return{value:e.op1,because:"max"}}else if(e.operator==="Min"){if(e.nops===0)return{value:e.engine.PositiveInfinity,because:"min"};if(e.nops===1)return{value:e.op1,because:"min"}}else if(e.operator==="Supremum"){if(e.nops===0)return{value:e.engine.NegativeInfinity,because:"sup"};if(e.nops===1)return{value:e.op1,because:"sup"}}else if(e.operator==="Infimum"){if(e.nops===0)return{value:e.engine.PositiveInfinity,because:"inf"};if(e.nops===1)return{value:e.op1,because:"inf"}}},e=>{if(e.operator!=="Derivative")return;let t=e.engine,[r,i]=e.ops;if(e.nops===2)return{value:t.function("Derivative",[r.simplify(),i]),because:"derivative"};if(e.nops===1)return{value:t.function("Derivative",[r.simplify()]),because:"derivative"}},e=>e.operator!=="Hypot"?void 0:{value:e.engine.box(["Sqrt",["Add",["Square",e.op1],["Square",e.op2]]]).simplify(),because:"hypot(x,y) -> sqrt(x^2+y^2)"},e=>{if(e.operator!=="Congruent"||e.nops<3)return;let t=e.engine;return{value:t._fn("Equal",[t.function("Mod",[e.ops[0],e.ops[2]]).simplify(),t.function("Mod",[e.ops[1],e.ops[2]]).simplify()]).simplify(),because:"congruent"}},e=>{e.operator},e=>{if(!F7(e))return;let t=gm(e.operator,e.op1);if(t)return{value:t,because:"constructible value"}},e=>{if(e.operator!=="InverseFunction")return;let t=Lh(e.engine,e.ops);if(t)return{value:t,because:"inverse function"}},e=>{if(e.operator!=="Arctan2")return;let[t,r]=e.ops,i=e.engine;return t.isFinite===!1&&r.isFinite===!1?{value:i.NaN,because:"arctan2"}:t.is(0)&&r.is(0)?{value:i.Zero,because:"arctan2"}:r.isFinite===!1?{value:r.isPositive?i.Zero:i.Pi,because:"arctan2"}:t.isFinite===!1?{value:t.isPositive?i.Pi.div(2):i.Pi.div(-2),because:"arctan2"}:t.is(0)?{value:r.isPositive?i.Zero:i.Pi,because:"arctan2"}:{value:i.function("Arctan",[t.div(r)]).simplify(),because:"arctan2"}},"\\arsinh(x) -> \\ln(x+\\sqrt{x^2+1})","\\arcosh(x) -> \\ln(x+\\sqrt{x^2-1})","\\artanh(x) -> \\frac{1}{2}\\ln(\\frac{1+x}{1-x})","\\operatorname{arcoth}(x) -> \\frac{1}{2}\\ln(\\frac{x+1}{x-1})","\\arsech(x) -> \\ln(\\frac{1+\\sqrt{1-x^2}}{x})","\\operatorname{arccsch}(x) -> \\ln(\\frac{1}{x} + \\sqrt{\\frac{1}{x^2}+1})",Xw];function QN(e){if(!P0(e)&&!x7(e))return;let t=e,r=e.engine,i=e.op1.simplify(),n=e.op2.simplify();if(e=r.function(e.operator,[i,n]),e=Vl(e)??e,ts(e.operator),e.nops===2&&!e.op2.is(0)){let s=Vl(r.function(e.operator,[e.op1.sub(e.op2),r.Zero]));r.costFunction(s)<r.costFunction(e)&&(e=s)}if(!e.isSame(t))return{value:e,because:"simplify-relational-operator"}}function YN(e){return e.operator!=="List"||!e.ops.every(t=>x7(t)||P0(t))?void 0:{value:e.engine.function("List",e.ops.map(t=>t.simplify())),because:"simplify-system-of-equations"}}var F6=class xu{constructor(t){if(this.decimalSeparator=".",this._cache={},this._commonSymbols={True:null,False:null,All:null,Nothing:null,None:null,Undefined:null,Pi:null,ImaginaryUnit:null,ExponentialE:null},this._commonNumbers={"-5":null,"-4":null,"-3":null,"-2":null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,12:null,36:null},this.generation=0,t!==void 0&&typeof t!="object")throw Error("Unexpected argument");this.strict=!0,this._stats={highwaterMark:0,symbols:new Set,expressions:new Set};let r=(t==null?void 0:t.precision)??y1;r==="machine"&&(r=Math.floor(En)),this._bignum=zt.clone({precision:r}),this._precision=r,this.tolerance=(t==null?void 0:t.tolerance)??"auto",this._angularUnit="rad",this.Zero=new Ur(this,0),this.One=new Ur(this,1),this.Half=new Ur(this,{rational:[1,2]}),this.NegativeOne=new Ur(this,-1),this.Two=new Ur(this,2),this.NaN=new Ur(this,Number.NaN),this.PositiveInfinity=new Ur(this,Number.POSITIVE_INFINITY),this.NegativeInfinity=new Ur(this,Number.NEGATIVE_INFINITY),this.I=new Ur(this,{im:1}),this.ComplexInfinity=new Ur(this,{re:1/0,im:1/0}),this.reset(),this.context={assumptions:new bf,timeLimit:2,memoryLimit:1,recursionLimit:1024,iterationLimit:Number.POSITIVE_INFINITY};for(let n of xu.getStandardLibrary("domains"))l4(this,n);let i=(t==null?void 0:t.ids)??xu.getStandardLibrary();for(let n of i)l4(this,n);for(let n of Object.keys(this._commonSymbols)){let s=new yu(this,n,{canonical:!0});s.bind(),this._commonSymbols[n]=s}this.True=this._commonSymbols.True,this.False=this._commonSymbols.False,this.Pi=this._commonSymbols.Pi,this.E=this._commonSymbols.ExponentialE,this.Nothing=this._commonSymbols.Nothing,this.pushScope(),vw(this)}static getStandardLibrary(t="all"){return $6(t)}static getLatexDictionary(t="all"){return RN(t)}get latexDictionary(){return this._latexDictionaryInput??xu.getLatexDictionary()}set latexDictionary(t){this._latexDictionaryInput=t,this._indexedLatexDictionary=x4(t,r=>{throw Error(typeof r.message=="string"?r.message:r.message.join(","))})}get indexedLatexDictionary(){return this._indexedLatexDictionary??(this._indexedLatexDictionary=x4(this.latexDictionary,t=>console.error(t))),this._indexedLatexDictionary}reset(){this._bignum,this.generation+=1,this._BIGNUM_NEGATIVE_ONE=this.bignum(-1),this._BIGNUM_NAN=this.bignum(NaN),this._BIGNUM_ZERO=this.bignum(0),this._BIGNUM_ONE=this.bignum(1),this._BIGNUM_TWO=this.bignum(2),this._BIGNUM_HALF=this._BIGNUM_ONE.div(this._BIGNUM_TWO),this._BIGNUM_PI=this._BIGNUM_NEGATIVE_ONE.acos();let t=this._stats.symbols.values(),r=this._stats.expressions.values();this._stats.symbols=new Set,this._stats.expressions=new Set;for(let n of t)n.reset();for(let n of r)n.reset();for(let n of Object.values(this._commonSymbols))n==null||n.reset();let i=this.context;for(;i;){if(i.ids)for(let[n,s]of i.ids)s.reset();i=i.parentScope??null}for(let n of Object.keys(this._cache))this._cache[n].value&&(this._cache[n].purge?this._cache[n].value=this._cache[n].purge(this._cache[n].value):delete this._cache[n])}_register(t){this._stats.highwaterMark+=1}_unregister(t){}get stats(){let t=this._stats.expressions;return this._stats.expressions=null,this._stats.expressions=t,{...this._stats}}get precision(){return this._precision}set precision(t){t==="machine"&&(t=En),t==="auto"&&(t=y1);let r=this._precision;if(t!==r){if(typeof t!="number"||t<=0)throw Error('Expected "machine" or a positive number');this._precision=Math.max(t,En),this._bignum=this._bignum.config({precision:this._precision}),this.tolerance="auto",this.reset()}}get angularUnit(){return this._angularUnit}set angularUnit(t){if(t!==this._angularUnit){if(typeof t!="string")throw Error("Expected a string");this._angularUnit=t,this.reset()}}get timeLimit(){let t=this.context;for(;t;){if(t.timeLimit!==void 0)return t.timeLimit;t=t.parentScope??null}return 2}get iterationLimit(){let t=this.context;for(;t;){if(t.iterationLimit!==void 0)return t.iterationLimit;t=t.parentScope??null}return 1024}get recursionLimit(){let t=this.context;for(;t;){if(t.recursionLimit!==void 0)return t.recursionLimit;t=t.parentScope??null}return 1024}get tolerance(){return this._tolerance}set tolerance(t){t==="auto"&&(this._precision<=En?t=D0:t=-1),(!Number.isFinite(t)||t<=0)&&(t=Math.pow(10,-this._precision+2)),this._tolerance=t,this._bignumTolerance=this.bignum(t),this._negBignumTolerance=this.bignum(-t)}chop(t){return typeof t=="number"?Math.abs(t)<=this._tolerance?0:t:t instanceof zt?t.isPositive()&&t.lte(this._bignumTolerance)||t.isNegative()&&t.gte(this._negBignumTolerance)||t.isZero()?0:t:t instanceof je&&Math.abs(t.re)<=this._tolerance&&Math.abs(t.im)<=this._tolerance?0:t}bignum(t){if(typeof t=="bigint")return new this._bignum(t.toString());try{return new this._bignum(t)}catch(r){console.error(r.message)}return this._BIGNUM_NAN}complex(t,r){return t instanceof zt&&(t=t.toNumber()),r instanceof zt&&(r=r.toNumber()),new je(t,r)}_numericValue(t){if(t instanceof Lt)return t.asExact??t;let r=n=>this.bignum(n),i=this._precision>En?n=>new hm(n,r):n=>new pm(n,r);if(typeof t=="number")return Number.isInteger(t)?new Vt(t,i,r):i(t);if(typeof t=="bigint")return new Vt(t,i,r);if(ba(t))return new Vt({rational:t},i,r);if(t instanceof zt)return t.isInteger()&&t.e<=xx?new Vt(Kt(t.toString()),i,r):i(t);if(t instanceof je)return t.im===0?this._numericValue(t.re):i({re:t.re,im:t.im});if("im"in t||"re"in t)return t.im!==void 0&&t.im!==0?i(t):t.re instanceof zt&&t.re.isInteger()?new Vt({rational:[Kt(t.re.toString()),BigInt(1)]},i,r):typeof t.re=="number"&&Number.isInteger(t.re)?new Vt({rational:[t.re,1]},i,r):i(t);if("radical"in t||"rational"in t){if(t.radical!==void 0&&(!Number.isInteger(t.radical)||t.radical>=Re))throw Error("Unexpected value for radical part:"+t.radical);return t.rational&&bt(t.rational)&&(!Number.isInteger(t.rational[0])||!Number.isInteger(t.rational[1]))?i(t):new Vt(t,i,r)}throw Error("Unexpected value")}get costFunction(){return this._cost??o4}set costFunction(t){typeof t!="function"&&(this._cost=o4),this._cost=t}lookupSymbol(t,r,i){var s,a;if(!this.strict){for(i??(i=this.context??void 0);i;){let u=(s=i.ids)==null?void 0:s.get(t);if(u&&u instanceof Bt)return u;i=i.parentScope}return}if(typeof t!="string")throw Error("Expected a string");if(t.length===0||!this.context)return;let n=i??this.context;if(r)for(i=n;i;){if(i.ids){for(let[u,f]of i.ids)if(f instanceof Bt&&f.wikidata===r)return f}i=i.parentScope}for(i=n;i;){let u=(a=i.ids)==null?void 0:a.get(t);if(u instanceof Bt)return u;i=i.parentScope}}lookupFunction(t,r){var i;if(typeof t=="string"&&this.context)for(r??(r=this.context);r;){let n=(i=r.ids)==null?void 0:i.get(t);if(n instanceof Xi)return n;r=r.parentScope}}defineSymbol(t,r){if(!this.context)throw Error("Symbol cannot be defined: no scope available");if(t.length===0||!$r(t))throw Error(`Invalid identifier "${t}": ${ds(t)}}`);return this._defineSymbol(t,r)}_defineSymbol(t,r){var i;(i=this.context).ids??(i.ids=new Map);let n=new Bt(this,t,r);return n.name&&this.context.ids.set(n.name,n),this.generation+=1,n}defineFunction(t,r){if(!this.context)throw Error("Function cannot be defined: no scope available");if(t.length===0||!$r(t))throw Error(`Invalid identifier "${t}": ${ds(t)}}`);return this._defineFunction(t,r)}_defineFunction(t,r){var i;(i=this.context).ids??(i.ids=new Map);let n=C6(this,t,r);return n.name&&this.context.ids.set(n.name,n),this.generation+=1,n}pushScope(t){if(this.context===null)throw Error("No parent scope available");return this.context={timeLimit:this.context.timeLimit,memoryLimit:this.context.memoryLimit,recursionLimit:this.context.recursionLimit,iterationLimit:this.context.iterationLimit,...t??{},parentScope:this.context,assumptions:new bf(this.context.assumptions)},this}popScope(){if(!this.context)throw Error("No scope available");return this.context=this.context.parentScope??null,this.context,this.context,this}swapScope(t){let r=this.context;return this.context=t,this.context,this.context,r}_printScope(t,r,i=0){var s,a;if(t??(t={details:!1,maxDepth:1}),r??(r=this.context),!r||t.maxDepth&&i>t.maxDepth)return null;let n=`${fN}[undefined]${Xo}`;if(i===0?console.group("current scope - level 0"):console.groupCollapsed(r.parentScope?`scope - level ${i}`:`root scope - level ${i}`),r.ids){let u=0;for(let[f,p]of r.ids){let d=`${hN}${f}${Xo}`;try{if(p instanceof Bt){let b=(s=p.value)!=null&&s.isValid?p.value.toString():p.value?`${c4}${p.value.toString()}${Xo}`:n;console.info(`${d}: ${((a=p.type)==null?void 0:a.toString())??n} = ${b}`)}else p instanceof Xi&&(typeof p.evaluate=="function"?console.info(`${d}(): ${t.details?p.evaluate.toString():"[native-code]"}`):p.evaluate===void 0?console.info(`${d}(): ${n}`):console.info(`${d}(): ${p.toString()}`));u===11&&console.groupCollapsed(`... and ${r.ids.size-u} more`),u+=1}catch(b){console.info(`${d}: ${c4}${b.message}${Xo}`)}}u>=11&&console.groupEnd()}if(r.assumptions){let u=[...r.assumptions.entries()].map(([f,p])=>`${f}: ${p}`);if(u.length>0){console.groupCollapsed(`${u.length} assumptions)`);for(let f of u)console.info(f);console.groupEnd()}}return r.parentScope&&this._printScope(t,r.parentScope,i+1),console.groupEnd(),this.context}resetContext(){if(this.context)for(let[t,r]of this.context.ids??[])r instanceof Bt?r.constant||(r.value=void 0):r instanceof Xi&&(r.evaluate=void 0,r.canonical=void 0)}declare(t,r){var a,u;if(typeof t!="string"||r===void 0){for(let[f,p]of Object.entries(t))this.declare(f,p);return this}let[i,n]=$1(t);if(n!==void 0)throw Error(`Unexpected arguments with ${t}. Use 'ce.assign()' instead to assign a value, or a use a function definition with 'ce.declare()'.`);if(i==="Nothing")return this;if((u=(a=this.context)==null?void 0:a.ids)!=null&&u.get(i)){let f=this.context.ids.get(i);if(this.generation+=1,f instanceof Bt&&f.inferredType){try{if(zh(r))f.update(r);else{if(Ch(r))throw new Error("Cannot redeclare a symbol as a function");f.type=Ee(r),f.inferredType=!1}}catch(p){console.error([`
Invalid definition for ${i}`,p.message].join(`
|   `)+`
`)}return this}throw f instanceof Xi?Error(`The symbol "${i}" has already been declared in the current scope as a function with signature ${f.signature.toString()}.`):Error(`The symbol "${i}" has already been declared in the current scope.`)}let s=r;if(!s)throw Error(`Expected a definition for ${i}`);if(typeof s=="object"&&"type"in s&&(typeof s.type=="string"&&G(s.type,"function")||s.type&&Pl(s.type)))throw new Error(`Invalid definition for "${i}": use a FunctionDefinition to define a function or use 'ce.declare("${i}", "function")'`);if(zh(s))return this.defineSymbol(i,s),this;if(Ch(s))return this.defineFunction(i,s),this;{let f=Ee(s);if(!Pl(f))throw typeof s=="object"&&"N"in s?Error([`Invalid argument for "${i}"`,"Use `evaluate` handler instead of `N`"].join(`
|   `)):Error([`Invalid argument for "${i}"`,s.toString(),"Use a type, a `FunctionDefinition` or a `SymbolDefinition`"].join(`
|   `));if(f==="function")this.defineFunction(i,{signature:"...any -> any"});else if(Th(f))this.defineFunction(i,{signature:f});else{if(n)throw Error(`Unexpected arguments with type for "${i}"`);this.defineSymbol(i,{type:f})}}return this}assign(t,r){var f,p,d;if(typeof t=="object"){for(let[b,x]of Object.entries(t))this.assign(b,x);return this}let[i,n]=$1(t);if(i==="Nothing")return this;let s=r;if(typeof s=="boolean"&&(s=s?this.True:this.False),typeof s=="string"){let b=s.trim();b.startsWith("$$")&&b.endsWith("$$")?s=this.parse(b.slice(2,-2),{canonical:!1}):b.startsWith("$")&&b.endsWith("$")?s=this.parse(b.slice(1,-1),{canonical:!1}):s=this.string(s)}let a=this.lookupSymbol(i);if(a){if(a.constant)throw Error(`Cannot assign a value to the constant "${i}"`);if(!a.inferredType&&Nf(s))throw Error(`Cannot assign a function to symbol "${i}"`);let b=a.scope;if((f=b==null?void 0:b.ids)==null||f.delete(a.name),!n&&!Nf(s))return s==null?a.value=void 0:a.value=this.box(s),(p=b==null?void 0:b.ids)==null||p.set(a.name,a),this.generation+=1,this}let u=this.lookupFunction(i);if(u){let b=u.scope;if((d=b==null?void 0:b.ids)==null||d.delete(u.name),s==null)return this;if(typeof s=="function"){let O=this.swapScope(b);return this.defineFunction(i,{evaluate:s}),this.swapScope(O),this}if(n&&Nf(s))throw Error(`Unexpected arguments for "${i}"`);let x=n?this.box(["Function",s,...n]):this.box(s);if(!x.isValid)throw Error(`Invalid function ${x.toString()}`);let I=this.swapScope(b),L=Yn(x);return this.defineFunction(i,{evaluate:O=>L(O)}),this.swapScope(I),this.generation+=1,this}if(s==null)return this.declare(i,{inferred:!0,type:"unknown"}),this;if(typeof s=="function")return this.defineFunction(i,{evaluate:s}),this;if(s instanceof Jt&&(s.type==="function"||Th(s.type)))return this.defineFunction(i,{evaluate:s}),this;if(Array.isArray(s)||s instanceof Jt||n){let b=this.box(s,{canonical:!1});if(b.operator==="Function")return b=this.box(["Function",...b.ops,...(n??[]).map(I=>this.symbol(I))]),this.defineFunction(i,{evaluate:b}),this;let x=[...b.unknowns].sort();if(x.length===0){let I=b.evaluate();return this.defineSymbol(i,{value:I}),this}if(x.some(I=>/\_[\d]+/.test(I)))return b=this.box(["Function",b]),this.defineFunction(i,{evaluate:b}),this;if(n&&n.length>0)return this.pushScope(),b=this.box(["Function",b,...n]),this.popScope(),this.defineFunction(i,{evaluate:b}),this;this.pushScope(),s=b.evaluate(),this.popScope()}return this.defineSymbol(i,{value:s}),this}_assign(t,r){let i=this.lookupSymbol(t);if(i){i.value=r.evaluate(),this.generation+=1;return}let n=this.lookupFunction(t);if(n){n.canonical=void 0,n.evaluate=r,this.generation+=1;return}}shouldContinueExecution(){return this.deadline===void 0||this.deadline>=Date.now()}checkContinueExecution(){if(!this.shouldContinueExecution())throw new Error("timeout")}cache(t,r,i){var n;if(this._cache[t]===void 0)try{this._cache[t]={build:r,purge:i,value:r()}}catch(s){console.error(`Fatal error building cache "${t}":
	 ${s.toString()}`)}return(n=this._cache[t])==null?void 0:n.value}box(t,r){return Mi(this,t,r)}function(t,r,i){return ep(this,t,r,i)}error(t,r){let i;typeof t=="string"?i=this.string(t):i=this._fn("ErrorCode",t.map(a=>this.string(a)));let n;r&&Ih(r)?n=this._fn("LatexString",[this.string(ql(r))]):typeof r=="string"&&r.length>0&&(n=this.string(r));let s=[this.box(i)];return n&&s.push(n),new Un(this,"Error",s,{canonical:!1})}typeError(t,r,i){return r?this.error(["incompatible-type",t.toString(),r.toString()],i):this.error(["incompatible-type",t.toString()],i)}hold(t){return this._fn("Hold",[this.box(t,{canonical:!1})])}tuple(...t){return new Un(this,"Tuple",t.map(r=>typeof r=="number"?this.number(r):r.canonical),{canonical:!0})}string(t,r){return new xa(this,t,r)}symbol(t,r){var n,s,a;if(r=r?{...r}:{},"canonical"in r||(r.canonical=!0),t=t.normalize(),t==="NaN")return this.NaN;if(t==="Infinity"||t==="+Infinity"||t==="PositiveInfinity")return this.PositiveInfinity;if(t==="-Infinity"||t==="NegativeInfinity")return this.NegativeInfinity;if(t==="Half")return this.Half;if(this.strict&&!$r(t)){let u=(n=r==null?void 0:r.metadata)==null?void 0:n.latex;return this.error(["invalid-identifier",ds(t)],u?`$$${u}$$`:t)}if(((s=r==null?void 0:r.metadata)==null?void 0:s.latex)!==void 0&&r.canonical!==!0)return new yu(this,t,r);let i=this._commonSymbols[t];return i&&(!((a=r==null?void 0:r.metadata)!=null&&a.wikidata)||!i.wikidata||i.wikidata===r.metadata.wikidata)?i:r.canonical===!0?cN(this,t):new yu(this,t,r)}number(t,r){var i;let n=r==null?void 0:r.metadata,s=!1;if((!r||r.canonical===void 0||r.canonical==="Number"||r.canonical===!0||Array.isArray(r.canonical)&&r.canonical.includes("Number"))&&(s=!0),!s&&ba(t))return this._fn("Rational",[this.number(t[0]),this.number(t[1])],{...n,canonical:!1});if(t=ip(this,t),n===void 0){if(typeof t=="number"){let a=t;if(a===1)return this.One;if(a===0)return this.Zero;if(a===-1)return this.NegativeOne;if(a===2)return this.Two;if(Number.isInteger(a)&&this._commonNumbers[a]!==void 0)return(i=this._commonNumbers)[a]??(i[a]=new Ur(this,t)),this._commonNumbers[a];if(Number.isNaN(a))return this.NaN;if(!Number.isFinite(a))return a<0?this.NegativeInfinity:this.PositiveInfinity}else if(t instanceof Lt){if(t.isZero)return this.Zero;if(t.isOne)return this.One;if(t.isNegativeOne)return this.NegativeOne;if(t.isNaN)return this.NaN;if(t.isNegativeInfinity)return this.NegativeInfinity;if(t.isPositiveInfinity)return this.PositiveInfinity}}return new Ur(this,t,{metadata:n})}rules(t,r){return Go(this,t,r)}getRuleSet(t){if(t??(t="standard-simplification"),t==="standard-simplification")return this.cache("standard-simplification-rules",()=>Go(this,ZN,{canonical:!0}));if(t==="solve-univariate")return this.cache("univariate-roots-rules",()=>Go(this,k2));if(t==="harmonization")return this.cache("harmonization-rules",()=>Go(this,S2))}_fn(t,r,i){let n=(i==null?void 0:i.canonical)??!0;return new Un(this,t,r,{...i,canonical:n})}parse(t,r){if(t==null)return null;if(typeof t!="string")throw Error("ce.parse(): expected a LaTeX string");let i={imaginaryUnit:"\\imaginaryI",positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalSeparator:this.decimalSeparator,digitGroup:3,digitGroupSeparator:"\\,",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",truncationMarker:"\\ldots",repeatingDecimal:"auto",skipSpace:!0,parseNumbers:"auto",getIdentifierType:s=>this.lookupFunction(s)?"function":"symbol",parseUnexpectedToken:(s,a)=>null,preserveLatex:!1},n=WN(ql(t)??t,this.indexedLatexDictionary,{...i,...r});if(n===null)throw Error("Failed to parse LaTeX string");return this.box(n,{canonical:(r==null?void 0:r.canonical)??!0})}get assumptions(){if(!this.context)throw Error("No scope available");return this.context.assumptions?this.context.assumptions:(this.context.assumptions=new bf,this.context.assumptions)}ask(t){let r=this.box(t,{canonical:!1}),i=[];for(let[n,s]of this.assumptions){let a=r.match(n);a!==null&&s===!0&&i.push(a)}return i}verify(t){return!1}assume(t){try{let r=Ih(t)?this.parse(t,{canonical:!1}):this.box(t,{canonical:!1});return this.generation+=1,_2(r)}catch(r){throw console.error(r.message.toString()),r}}forget(t){if(!this.context)throw Error("No scope available");if(t===void 0){if(this.context.ids)for(let r of this.context.ids.keys())this.forget(r);this.generation+=1,this.assumptions.clear();return}if(Array.isArray(t)){for(let r of t)this.forget(r);return}if(typeof t=="string"){if(this.context.ids){let r=this.context.ids.get(t);r instanceof Bt?r.value=void 0:r instanceof Xi&&(r.evaluate=void 0,r.canonical=void 0)}for(let[r,i]of this.assumptions)r.symbols.includes(t)&&this.assumptions.delete(r)}this.generation+=1}};function Nf(e){return!!(typeof e=="function"||e instanceof Jt&&G(e.type,"function"))}function kf(e){return e.fg===void 0&&e.bg===void 0&&(e.weight===void 0||e.weight==="normal")&&(e.italic===void 0||e.italic===!1)}var B6=class{constructor(e){this.width=e==null?void 0:e.width,this.indent=(e==null?void 0:e.indent)??0}renderBlock(e){let t="spans"in e?this.renderSpans(e.spans):e.blocks.map(r=>this.renderBlock(r)).join(`
`);return e.tag==="paragraph"?`
${Qa(t,this.width).join(`
`)}

`:e.tag==="blockquote"?Qa(t,(this.width??40)-4).map(r=>`>  ${r}`).join(`
`):e.tag==="note"?Qa(t,(this.width??40)-3).map(r=>`|  ${r}`).join(`
`):e.tag==="warning"?Qa(t,(this.width??40)-3).map(r=>`!! ${r}`).join(`
`):e.tag==="error"?Qa(t,(this.width??40)-3).map(r=>`XX ${r}`).join(`
`):t}renderSpans(e){return e.map(t=>this.renderSpan(t)).join("")}display(e){Array.isArray(e)?console.info(this.renderSpans(e)):console.info(this.renderBlock(e))}},XN=class extends B6{renderSpan(e){let t=typeof e.content=="string"?e.content:this.renderSpans(e.content);return t=t.replace(/[\u2551\u2502\u2503\u2506\u2507\u250a\u250b]/g,"|").replace(//g,"--").replace(//g,"-").replace(/|/g,"'").replace(/|/g,'"').replace(//g,"..."),e.italic?e.weight==="bold"?t=`***${t}***`:t=`*${t}*`:e.weight==="bold"&&(t=`**${t}**`),e.mono&&(t=`\`${t}\``),t}constructor(e){super(e)}},k4=class extends B6{constructor(e){super(),this.state={},this.colorMode=e.mode}renderBlock(e){return super.renderBlock(e)}getStyleCodes(e){let t=[],r=e,i=this.state;return kf(r)&&!kf(i)?(t.push(0),i.fg=void 0,i.bg=void 0,i.weight=void 0,i.italic=void 0):(i.weight!==r.weight&&(r.weight==="bold"?(i.weight==="thin"&&t.push(22),t.push(1)):r.weight==="thin"?(i.weight==="bold"&&t.push(22),t.push(2)):i.weight!==void 0&&i.weight!=="normal"&&t.push(22)),i.italic!==r.italic&&(r.italic===!0?t.push(3):i.italic&&t.push(23)),i.bg!==r.bg&&(r.bg!==void 0?t.push(...dN(r.bg,this.colorMode)):i.bg!==void 0&&t.push(49)),i.fg!==r.fg&&(r.fg!==void 0?t.push(...mN(r.fg,this.colorMode)):i.fg!==void 0&&t.push(39))),this.state.fg=r.fg,this.state.bg=r.bg,this.state.weight=r.weight,this.state.italic=r.italic,t}renderSpan(e){if(typeof e.content=="string"&&/^\s+$/.test(e.content)&&this.state.bg===void 0)return e.content;let t=this.getStyleCodes(e),r=typeof e.content=="string"?e.content:this.renderSpans(e.content);return e.mono&&t.push(7),t.length>0&&(r=`\x1B[${t.join(";")}m${r}`),e.mono&&(r=`${r}\x1B[27m`),r}renderSpans(e){let t=e.map(r=>this.renderSpan(r)).join("");return kf(this.state)||(t+="\x1B[0m"),t}};({none:new XN,basic:new k4({mode:"basic"}),full:new k4({mode:"full"})})[KN()];var Qa=(e,t)=>{if(t===void 0||t<=0)return[e];let r=/\x1B\[[0-9;]*[A-Za-z]/g,i=[],n=0,s;for(;s=r.exec(e);){let u=s[0],f=s.index;f!=n&&i.push(["string",e.slice(n,f)]),i.push(["ansi",u]),n=f+u.length}n!=e.length-1&&i.push(["string",e.slice(n,e.length)]);let a=0;return i.reduce((u,[f,p])=>{if(f==="string")if(a+p.length>t)for(;p.length;){let d=p.slice(0,t-a),b=p.slice(t-a,p.length);u[u.length-1]+=d,a+=d.length,p=b,p.length&&(u.push(""),a=0)}else u[u.length-1]+=p,a+=p.length;else u[u.length-1]+=p;return u},[""])};function KN(){var e;if(typeof process>"u")return globalThis.navigator.userAgentData&&((e=navigator.userAgentData.brands.find(({brand:t})=>t==="Chromium"))==null?void 0:e.version)>93?"full":"none";if(et.JEST_WORKER_ID!==void 0||et.NO_COLOR||et.NODE_DISABLE_COLORS||et.FORCE_COLOR==="0"||et.FORCE_COLOR==="false")return"none";if(et.FORCE_COLOR==="1"||et.FORCE_COLOR==="true"||typeof et.FORCE_COLOR=="string"&&et.FORCE_COLOR.length===0)return"basic";if(et.FORCE_COLOR==="2")return"256";if(typeof et.FORCE_COLOR=="string"&&et.FORCE_COLOR.length===0)return"basic";if(et.FORCE_COLOR==="3")return"full";if(process.stdout&&!process.stdout.isTTY||process.stderr&&!process.stderr.isTTY)return"none";if("CI"in et)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(t=>t in et)?"basic":"GITHUB_ACTIONS"in et||"GITEA_ACTIONS"in et?"full":"none";if("TERM_PROGRAM"in et)switch(et.TERM_PROGRAM){case"iTerm.app":return Number.parseInt((et.TERM_PROGRAM_VERSION||"").split(".")[0],10)>=3?"full":"256";case"Apple_Terminal":return"256"}if(et.COLORTERM==="truecolor"||et.COLORTERM==="24bit")return"full";if(typeof et.TERM=="string"){let t=et.TERM.toLowerCase();if(t==="dumb")return"none";if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(t))return"basic";if(t==="xterm-kitty")return"full";if(/-256(color)?$/i.test(t))return"256"}return"basic"}globalThis[Symbol.for("io.cortexjs.compute-engine")]={ComputeEngine:F6.prototype.constructor,version:"0.26.4"};/*! Bundled license information:

complex-esm/dist/src/complex.js:
  (**
   * @license Complex.js v2.1.1 12/05/2020
   *
   * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
   * Dual licensed under the MIT or GPL Version 2 licenses.
   **)

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)
*/var lp={exports:{}},Sf={exports:{}},_f,S4;function JN(){if(S4)return _f;S4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _f=e,_f}var Tf,_4;function ek(){if(_4)return Tf;_4=1;var e=JN();function t(){}function r(){}return r.resetWarningCache=t,Tf=function(){function i(a,u,f,p,d,b){if(b!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function n(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:n,element:i,elementType:i,instanceOf:n,node:i,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s},Tf}var T4;function tk(){return T4||(T4=1,Sf.exports=ek()()),Sf.exports}var Mf={exports:{}},M4;function rk(){return M4||(M4=1,function(e,t){(function(i,n){e.exports=n()})(typeof self<"u"?self:I4,function(){return function(){var r={};(function(){r.d=function(o,l){for(var c in l)r.o(l,c)&&!r.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:l[c]})}})(),function(){r.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)}}();var i={};r.d(i,{default:function(){return p8}});class n{constructor(l,c){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let h="KaTeX parse error: "+l,m,y;const w=c&&c.loc;if(w&&w.start<=w.end){const _=w.lexer.input;m=w.start,y=w.end,m===_.length?h+=" at end of input: ":h+=" at position "+(m+1)+": ";const C=_.slice(m,y).replace(/[^]/g,"$&");let P;m>15?P=""+_.slice(m-15,m):P=_.slice(0,m);let F;y+15<_.length?F=_.slice(y,y+15)+"":F=_.slice(y),h+=P+C+F}const k=new Error(h);return k.name="ParseError",k.__proto__=n.prototype,k.position=m,m!=null&&y!=null&&(k.length=y-m),k.rawMessage=l,k}}n.prototype.__proto__=Error.prototype;var s=n;const a=function(o,l){return o===void 0?l:o},u=/([A-Z])/g,f=function(o){return o.replace(u,"-$1").toLowerCase()},p={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g;function b(o){return String(o).replace(d,l=>p[l])}const x=function(o){return o.type==="ordgroup"||o.type==="color"?o.body.length===1?x(o.body[0]):o:o.type==="font"?x(o.body):o},I=function(o){const l=x(o);return l.type==="mathord"||l.type==="textord"||l.type==="atom"},L=function(o){if(!o)throw new Error("Expected non-null, but got "+String(o));return o};var R={deflt:a,escape:b,hyphenate:f,getBaseElem:x,isCharacterBox:I,protocolFromUrl:function(o){const l=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(o);return l?l[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(l[1])?null:l[1].toLowerCase():"_relative"}};const A={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:o=>"#"+o},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(o,l)=>(l.push(o),l)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:o=>Math.max(0,o),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:o=>Math.max(0,o),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:o=>Math.max(0,o),cli:"-e, --max-expand <n>",cliProcessor:o=>o==="Infinity"?1/0:parseInt(o)},globalGroup:{type:"boolean",cli:!1}};function M(o){if(o.default)return o.default;const l=o.type,c=Array.isArray(l)?l[0]:l;if(typeof c!="string")return c.enum[0];switch(c){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class T{constructor(l){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,l=l||{};for(const c in A)if(A.hasOwnProperty(c)){const h=A[c];this[c]=l[c]!==void 0?h.processor?h.processor(l[c]):l[c]:M(h)}}reportNonstrict(l,c,h){let m=this.strict;if(typeof m=="function"&&(m=m(l,c,h)),!(!m||m==="ignore")){if(m===!0||m==="error")throw new s("LaTeX-incompatible input and strict mode is set to 'error': "+(c+" ["+l+"]"),h);m==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(c+" ["+l+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+m+"': "+c+" ["+l+"]"))}}useStrictBehavior(l,c,h){let m=this.strict;if(typeof m=="function")try{m=m(l,c,h)}catch{m="error"}return!m||m==="ignore"?!1:m===!0||m==="error"?!0:m==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(c+" ["+l+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+m+"': "+c+" ["+l+"]")),!1)}isTrusted(l){if(l.url&&!l.protocol){const h=R.protocolFromUrl(l.url);if(h==null)return!1;l.protocol=h}return!!(typeof this.trust=="function"?this.trust(l):this.trust)}}class q{constructor(l,c,h){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=l,this.size=c,this.cramped=h}sup(){return gt[pn[this.id]]}sub(){return gt[Nt[this.id]]}fracNum(){return gt[$e[this.id]]}fracDen(){return gt[Sa[this.id]]}cramp(){return gt[le[this.id]]}text(){return gt[ve[this.id]]}isTight(){return this.size>=2}}const W=0,J=1,te=2,ne=3,ke=4,he=5,Pe=6,He=7,gt=[new q(W,0,!1),new q(J,0,!0),new q(te,1,!1),new q(ne,1,!0),new q(ke,2,!1),new q(he,2,!0),new q(Pe,3,!1),new q(He,3,!0)],pn=[ke,he,ke,he,Pe,He,Pe,He],Nt=[he,he,he,he,He,He,He,He],$e=[te,ne,ke,he,Pe,He,Pe,He],Sa=[ne,ne,he,he,He,He,He,He],le=[J,J,ne,ne,he,he,He,He],ve=[W,J,te,ne,te,ne,te,ne];var K={DISPLAY:gt[W],TEXT:gt[te],SCRIPT:gt[ke],SCRIPTSCRIPT:gt[Pe]};const We=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function kt(o){for(let l=0;l<We.length;l++){const c=We[l];for(let h=0;h<c.blocks.length;h++){const m=c.blocks[h];if(o>=m[0]&&o<=m[1])return c.name}}return null}const $i=[];We.forEach(o=>o.blocks.forEach(l=>$i.push(...l)));function pi(o){for(let l=0;l<$i.length;l+=2)if(o>=$i[l]&&o<=$i[l+1])return!0;return!1}const mi=80,Di=function(o,l){return"M95,"+(622+o+l)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+o/2.075+" -"+o+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+o)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+o)+" "+l+"h400000v"+(40+o)+"h-400000z"},Ts=function(o,l){return"M263,"+(601+o+l)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+o/2.084+" -"+o+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+o)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+o)+" "+l+"h400000v"+(40+o)+"h-400000z"},V6=function(o,l){return"M983 "+(10+o+l)+`
l`+o/3.13+" -"+o+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+o)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+o)+" "+l+"h400000v"+(40+o)+"h-400000z"},j6=function(o,l){return"M424,"+(2398+o+l)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+o/4.223+" -"+o+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+o)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+o)+" "+l+`
h400000v`+(40+o)+"h-400000z"},H6=function(o,l){return"M473,"+(2713+o+l)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+o/5.298+" -"+o+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+o)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+o)+" "+l+"h400000v"+(40+o)+"H1017.7z"},U6=function(o){const l=o/2;return"M400000 "+o+" H0 L"+l+" 0 l65 45 L145 "+(o-80)+" H400000z"},G6=function(o,l,c){const h=c-54-l-o;return"M702 "+(o+l)+"H400000"+(40+o)+`
H742v`+h+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+l+"H400000v"+(40+o)+"H742z"},W6=function(o,l,c){l=1e3*l;let h="";switch(o){case"sqrtMain":h=Di(l,mi);break;case"sqrtSize1":h=Ts(l,mi);break;case"sqrtSize2":h=V6(l,mi);break;case"sqrtSize3":h=j6(l,mi);break;case"sqrtSize4":h=H6(l,mi);break;case"sqrtTall":h=G6(l,mi,c)}return h},Z6=function(o,l){switch(o){case"":return"M291 0 H417 V"+l+" H291z M291 0 H417 V"+l+" H291z";case"":return"M145 0 H188 V"+l+" H145z M145 0 H188 V"+l+" H145z";case"":return"M145 0 H188 V"+l+" H145z M145 0 H188 V"+l+" H145z"+("M367 0 H410 V"+l+" H367z M367 0 H410 V"+l+" H367z");case"":return"M457 0 H583 V"+l+" H457z M457 0 H583 V"+l+" H457z";case"":return"M319 0 H403 V"+l+" H319z M319 0 H403 V"+l+" H319z";case"":return"M263 0 H347 V"+l+" H263z M263 0 H347 V"+l+" H263z";case"":return"M384 0 H504 V"+l+" H384z M384 0 H504 V"+l+" H384z";case"":return"M312 0 H355 V"+l+" H312z M312 0 H355 V"+l+" H312z";case"":return"M257 0 H300 V"+l+" H257z M257 0 H300 V"+l+" H257z"+("M478 0 H521 V"+l+" H478z M478 0 H521 V"+l+" H478z");default:return""}},Im={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Q6=function(o,l){switch(o){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+l+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+l+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+l+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+l+" v1759 h84z";case"vert":return"M145 15 v585 v"+l+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-l+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+l+" v585 h43z";case"doublevert":return"M145 15 v585 v"+l+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-l+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+l+` v585 h43z
M367 15 v585 v`+l+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-l+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+l+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+l+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+l+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+l+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+l+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+l+` v602 h84z
M403 1759 V0 H319 V1759 v`+l+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+l+` v602 h84z
M347 1759 V0 h-84 V1759 v`+l+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(l+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(l+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(l+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(l+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};var di={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const to={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},zm={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Y6(o,l){di[o]=l}function j0(o,l,c){if(!di[l])throw new Error("Font metrics not found for font: "+l+".");let h=o.charCodeAt(0),m=di[l][h];if(!m&&o[0]in zm&&(h=zm[o[0]].charCodeAt(0),m=di[l][h]),!m&&c==="text"&&pi(h)&&(m=di[l][77]),m)return{depth:m[0],height:m[1],italic:m[2],skew:m[3],width:m[4]}}const H0={};function X6(o){let l;if(o>=5?l=0:o>=3?l=1:l=2,!H0[l]){const c=H0[l]={cssEmPerMu:to.quad[l]/18};for(const h in to)to.hasOwnProperty(h)&&(c[h]=to[h][l])}return H0[l]}const K6=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Cm=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],$m=function(o,l){return l.size<2?o:K6[o-1][l.size-1]};class Pi{constructor(l){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=l.style,this.color=l.color,this.size=l.size||Pi.BASESIZE,this.textSize=l.textSize||this.size,this.phantom=!!l.phantom,this.font=l.font||"",this.fontFamily=l.fontFamily||"",this.fontWeight=l.fontWeight||"",this.fontShape=l.fontShape||"",this.sizeMultiplier=Cm[this.size-1],this.maxSize=l.maxSize,this.minRuleThickness=l.minRuleThickness,this._fontMetrics=void 0}extend(l){const c={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const h in l)l.hasOwnProperty(h)&&(c[h]=l[h]);return new Pi(c)}havingStyle(l){return this.style===l?this:this.extend({style:l,size:$m(this.textSize,l)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(l){return this.size===l&&this.textSize===l?this:this.extend({style:this.style.text(),size:l,textSize:l,sizeMultiplier:Cm[l-1]})}havingBaseStyle(l){l=l||this.style.text();const c=$m(Pi.BASESIZE,l);return this.size===c&&this.textSize===Pi.BASESIZE&&this.style===l?this:this.extend({style:l,size:c})}havingBaseSizing(){let l;switch(this.style.id){case 4:case 5:l=3;break;case 6:case 7:l=1;break;default:l=6}return this.extend({style:this.style.text(),size:l})}withColor(l){return this.extend({color:l})}withPhantom(){return this.extend({phantom:!0})}withFont(l){return this.extend({font:l})}withTextFontFamily(l){return this.extend({fontFamily:l,font:""})}withTextFontWeight(l){return this.extend({fontWeight:l,font:""})}withTextFontShape(l){return this.extend({fontShape:l,font:""})}sizingClasses(l){return l.size!==this.size?["sizing","reset-size"+l.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Pi.BASESIZE?["sizing","reset-size"+this.size,"size"+Pi.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=X6(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Pi.BASESIZE=6;var J6=Pi;const U0={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},ey={ex:!0,em:!0,mu:!0},Dm=function(o){return typeof o!="string"&&(o=o.unit),o in U0||o in ey||o==="ex"},it=function(o,l){let c;if(o.unit in U0)c=U0[o.unit]/l.fontMetrics().ptPerEm/l.sizeMultiplier;else if(o.unit==="mu")c=l.fontMetrics().cssEmPerMu;else{let h;if(l.style.isTight()?h=l.havingStyle(l.style.text()):h=l,o.unit==="ex")c=h.fontMetrics().xHeight;else if(o.unit==="em")c=h.fontMetrics().quad;else throw new s("Invalid unit: '"+o.unit+"'");h!==l&&(c*=h.sizeMultiplier/l.sizeMultiplier)}return Math.min(o.number*c,l.maxSize)},ee=function(o){return+o.toFixed(4)+"em"},mn=function(o){return o.filter(l=>l).join(" ")},Pm=function(o,l,c){if(this.classes=o||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=c||{},l){l.style.isTight()&&this.classes.push("mtight");const h=l.getColor();h&&(this.style.color=h)}},Om=function(o){const l=document.createElement(o);l.className=mn(this.classes);for(const c in this.style)this.style.hasOwnProperty(c)&&(l.style[c]=this.style[c]);for(const c in this.attributes)this.attributes.hasOwnProperty(c)&&l.setAttribute(c,this.attributes[c]);for(let c=0;c<this.children.length;c++)l.appendChild(this.children[c].toNode());return l},ty=/[\s"'>/=\x00-\x1f]/,qm=function(o){let l="<"+o;this.classes.length&&(l+=' class="'+R.escape(mn(this.classes))+'"');let c="";for(const h in this.style)this.style.hasOwnProperty(h)&&(c+=R.hyphenate(h)+":"+this.style[h]+";");c&&(l+=' style="'+R.escape(c)+'"');for(const h in this.attributes)if(this.attributes.hasOwnProperty(h)){if(ty.test(h))throw new s("Invalid attribute name '"+h+"'");l+=" "+h+'="'+R.escape(this.attributes[h])+'"'}l+=">";for(let h=0;h<this.children.length;h++)l+=this.children[h].toMarkup();return l+="</"+o+">",l};class _a{constructor(l,c,h,m){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Pm.call(this,l,h,m),this.children=c||[]}setAttribute(l,c){this.attributes[l]=c}hasClass(l){return this.classes.includes(l)}toNode(){return Om.call(this,"span")}toMarkup(){return qm.call(this,"span")}}class G0{constructor(l,c,h,m){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Pm.call(this,c,m),this.children=h||[],this.setAttribute("href",l)}setAttribute(l,c){this.attributes[l]=c}hasClass(l){return this.classes.includes(l)}toNode(){return Om.call(this,"a")}toMarkup(){return qm.call(this,"a")}}class ry{constructor(l,c,h){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=c,this.src=l,this.classes=["mord"],this.style=h}hasClass(l){return this.classes.includes(l)}toNode(){const l=document.createElement("img");l.src=this.src,l.alt=this.alt,l.className="mord";for(const c in this.style)this.style.hasOwnProperty(c)&&(l.style[c]=this.style[c]);return l}toMarkup(){let l='<img src="'+R.escape(this.src)+'"'+(' alt="'+R.escape(this.alt)+'"'),c="";for(const h in this.style)this.style.hasOwnProperty(h)&&(c+=R.hyphenate(h)+":"+this.style[h]+";");return c&&(l+=' style="'+R.escape(c)+'"'),l+="'/>",l}}const iy={:"",:"",:"",:""};class qr{constructor(l,c,h,m,y,w,k,_){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=l,this.height=c||0,this.depth=h||0,this.italic=m||0,this.skew=y||0,this.width=w||0,this.classes=k||[],this.style=_||{},this.maxFontSize=0;const C=kt(this.text.charCodeAt(0));C&&this.classes.push(C+"_fallback"),/[]/.test(this.text)&&(this.text=iy[this.text])}hasClass(l){return this.classes.includes(l)}toNode(){const l=document.createTextNode(this.text);let c=null;this.italic>0&&(c=document.createElement("span"),c.style.marginRight=ee(this.italic)),this.classes.length>0&&(c=c||document.createElement("span"),c.className=mn(this.classes));for(const h in this.style)this.style.hasOwnProperty(h)&&(c=c||document.createElement("span"),c.style[h]=this.style[h]);return c?(c.appendChild(l),c):l}toMarkup(){let l=!1,c="<span";this.classes.length&&(l=!0,c+=' class="',c+=R.escape(mn(this.classes)),c+='"');let h="";this.italic>0&&(h+="margin-right:"+this.italic+"em;");for(const y in this.style)this.style.hasOwnProperty(y)&&(h+=R.hyphenate(y)+":"+this.style[y]+";");h&&(l=!0,c+=' style="'+R.escape(h)+'"');const m=R.escape(this.text);return l?(c+=">",c+=m,c+="</span>",c):m}}class Oi{constructor(l,c){this.children=void 0,this.attributes=void 0,this.children=l||[],this.attributes=c||{}}toNode(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const h in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,h)&&c.setAttribute(h,this.attributes[h]);for(let h=0;h<this.children.length;h++)c.appendChild(this.children[h].toNode());return c}toMarkup(){let l='<svg xmlns="http://www.w3.org/2000/svg"';for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(l+=" "+c+'="'+R.escape(this.attributes[c])+'"');l+=">";for(let c=0;c<this.children.length;c++)l+=this.children[c].toMarkup();return l+="</svg>",l}}class dn{constructor(l,c){this.pathName=void 0,this.alternate=void 0,this.pathName=l,this.alternate=c}toNode(){const c=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?c.setAttribute("d",this.alternate):c.setAttribute("d",Im[this.pathName]),c}toMarkup(){return this.alternate?'<path d="'+R.escape(this.alternate)+'"/>':'<path d="'+R.escape(Im[this.pathName])+'"/>'}}class W0{constructor(l){this.attributes=void 0,this.attributes=l||{}}toNode(){const c=document.createElementNS("http://www.w3.org/2000/svg","line");for(const h in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,h)&&c.setAttribute(h,this.attributes[h]);return c}toMarkup(){let l="<line";for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(l+=" "+c+'="'+R.escape(this.attributes[c])+'"');return l+="/>",l}}function Lm(o){if(o instanceof qr)return o;throw new Error("Expected symbolNode but got "+String(o)+".")}function ny(o){if(o instanceof _a)return o;throw new Error("Expected span<HtmlDomNode> but got "+String(o)+".")}const sy={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ay={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},ro={math:{},text:{}};var nt=ro;function g(o,l,c,h,m,y){ro[o][m]={font:l,group:c,replace:h},y&&h&&(ro[o][h]=ro[o][m])}const v="math",U="text",N="main",E="ams",Ke="accent-token",ae="bin",rr="close",Ms="inner",me="mathord",St="op-token",Nr="open",io="punct",z="rel",qi="spacing",D="textord";g(v,N,z,"","\\equiv",!0),g(v,N,z,"","\\prec",!0),g(v,N,z,"","\\succ",!0),g(v,N,z,"","\\sim",!0),g(v,N,z,"","\\perp"),g(v,N,z,"","\\preceq",!0),g(v,N,z,"","\\succeq",!0),g(v,N,z,"","\\simeq",!0),g(v,N,z,"","\\mid",!0),g(v,N,z,"","\\ll",!0),g(v,N,z,"","\\gg",!0),g(v,N,z,"","\\asymp",!0),g(v,N,z,"","\\parallel"),g(v,N,z,"","\\bowtie",!0),g(v,N,z,"","\\smile",!0),g(v,N,z,"","\\sqsubseteq",!0),g(v,N,z,"","\\sqsupseteq",!0),g(v,N,z,"","\\doteq",!0),g(v,N,z,"","\\frown",!0),g(v,N,z,"","\\ni",!0),g(v,N,z,"","\\propto",!0),g(v,N,z,"","\\vdash",!0),g(v,N,z,"","\\dashv",!0),g(v,N,z,"","\\owns"),g(v,N,io,".","\\ldotp"),g(v,N,io,"","\\cdotp"),g(v,N,D,"#","\\#"),g(U,N,D,"#","\\#"),g(v,N,D,"&","\\&"),g(U,N,D,"&","\\&"),g(v,N,D,"","\\aleph",!0),g(v,N,D,"","\\forall",!0),g(v,N,D,"","\\hbar",!0),g(v,N,D,"","\\exists",!0),g(v,N,D,"","\\nabla",!0),g(v,N,D,"","\\flat",!0),g(v,N,D,"","\\ell",!0),g(v,N,D,"","\\natural",!0),g(v,N,D,"","\\clubsuit",!0),g(v,N,D,"","\\wp",!0),g(v,N,D,"","\\sharp",!0),g(v,N,D,"","\\diamondsuit",!0),g(v,N,D,"","\\Re",!0),g(v,N,D,"","\\heartsuit",!0),g(v,N,D,"","\\Im",!0),g(v,N,D,"","\\spadesuit",!0),g(v,N,D,"","\\S",!0),g(U,N,D,"","\\S"),g(v,N,D,"","\\P",!0),g(U,N,D,"","\\P"),g(v,N,D,"","\\dag"),g(U,N,D,"","\\dag"),g(U,N,D,"","\\textdagger"),g(v,N,D,"","\\ddag"),g(U,N,D,"","\\ddag"),g(U,N,D,"","\\textdaggerdbl"),g(v,N,rr,"","\\rmoustache",!0),g(v,N,Nr,"","\\lmoustache",!0),g(v,N,rr,"","\\rgroup",!0),g(v,N,Nr,"","\\lgroup",!0),g(v,N,ae,"","\\mp",!0),g(v,N,ae,"","\\ominus",!0),g(v,N,ae,"","\\uplus",!0),g(v,N,ae,"","\\sqcap",!0),g(v,N,ae,"","\\ast"),g(v,N,ae,"","\\sqcup",!0),g(v,N,ae,"","\\bigcirc",!0),g(v,N,ae,"","\\bullet",!0),g(v,N,ae,"","\\ddagger"),g(v,N,ae,"","\\wr",!0),g(v,N,ae,"","\\amalg"),g(v,N,ae,"&","\\And"),g(v,N,z,"","\\longleftarrow",!0),g(v,N,z,"","\\Leftarrow",!0),g(v,N,z,"","\\Longleftarrow",!0),g(v,N,z,"","\\longrightarrow",!0),g(v,N,z,"","\\Rightarrow",!0),g(v,N,z,"","\\Longrightarrow",!0),g(v,N,z,"","\\leftrightarrow",!0),g(v,N,z,"","\\longleftrightarrow",!0),g(v,N,z,"","\\Leftrightarrow",!0),g(v,N,z,"","\\Longleftrightarrow",!0),g(v,N,z,"","\\mapsto",!0),g(v,N,z,"","\\longmapsto",!0),g(v,N,z,"","\\nearrow",!0),g(v,N,z,"","\\hookleftarrow",!0),g(v,N,z,"","\\hookrightarrow",!0),g(v,N,z,"","\\searrow",!0),g(v,N,z,"","\\leftharpoonup",!0),g(v,N,z,"","\\rightharpoonup",!0),g(v,N,z,"","\\swarrow",!0),g(v,N,z,"","\\leftharpoondown",!0),g(v,N,z,"","\\rightharpoondown",!0),g(v,N,z,"","\\nwarrow",!0),g(v,N,z,"","\\rightleftharpoons",!0),g(v,E,z,"","\\nless",!0),g(v,E,z,"","\\@nleqslant"),g(v,E,z,"","\\@nleqq"),g(v,E,z,"","\\lneq",!0),g(v,E,z,"","\\lneqq",!0),g(v,E,z,"","\\@lvertneqq"),g(v,E,z,"","\\lnsim",!0),g(v,E,z,"","\\lnapprox",!0),g(v,E,z,"","\\nprec",!0),g(v,E,z,"","\\npreceq",!0),g(v,E,z,"","\\precnsim",!0),g(v,E,z,"","\\precnapprox",!0),g(v,E,z,"","\\nsim",!0),g(v,E,z,"","\\@nshortmid"),g(v,E,z,"","\\nmid",!0),g(v,E,z,"","\\nvdash",!0),g(v,E,z,"","\\nvDash",!0),g(v,E,z,"","\\ntriangleleft"),g(v,E,z,"","\\ntrianglelefteq",!0),g(v,E,z,"","\\subsetneq",!0),g(v,E,z,"","\\@varsubsetneq"),g(v,E,z,"","\\subsetneqq",!0),g(v,E,z,"","\\@varsubsetneqq"),g(v,E,z,"","\\ngtr",!0),g(v,E,z,"","\\@ngeqslant"),g(v,E,z,"","\\@ngeqq"),g(v,E,z,"","\\gneq",!0),g(v,E,z,"","\\gneqq",!0),g(v,E,z,"","\\@gvertneqq"),g(v,E,z,"","\\gnsim",!0),g(v,E,z,"","\\gnapprox",!0),g(v,E,z,"","\\nsucc",!0),g(v,E,z,"","\\nsucceq",!0),g(v,E,z,"","\\succnsim",!0),g(v,E,z,"","\\succnapprox",!0),g(v,E,z,"","\\ncong",!0),g(v,E,z,"","\\@nshortparallel"),g(v,E,z,"","\\nparallel",!0),g(v,E,z,"","\\nVDash",!0),g(v,E,z,"","\\ntriangleright"),g(v,E,z,"","\\ntrianglerighteq",!0),g(v,E,z,"","\\@nsupseteqq"),g(v,E,z,"","\\supsetneq",!0),g(v,E,z,"","\\@varsupsetneq"),g(v,E,z,"","\\supsetneqq",!0),g(v,E,z,"","\\@varsupsetneqq"),g(v,E,z,"","\\nVdash",!0),g(v,E,z,"","\\precneqq",!0),g(v,E,z,"","\\succneqq",!0),g(v,E,z,"","\\@nsubseteqq"),g(v,E,ae,"","\\unlhd"),g(v,E,ae,"","\\unrhd"),g(v,E,z,"","\\nleftarrow",!0),g(v,E,z,"","\\nrightarrow",!0),g(v,E,z,"","\\nLeftarrow",!0),g(v,E,z,"","\\nRightarrow",!0),g(v,E,z,"","\\nleftrightarrow",!0),g(v,E,z,"","\\nLeftrightarrow",!0),g(v,E,z,"","\\vartriangle"),g(v,E,D,"","\\hslash"),g(v,E,D,"","\\triangledown"),g(v,E,D,"","\\lozenge"),g(v,E,D,"","\\circledS"),g(v,E,D,"","\\circledR"),g(U,E,D,"","\\circledR"),g(v,E,D,"","\\measuredangle",!0),g(v,E,D,"","\\nexists"),g(v,E,D,"","\\mho"),g(v,E,D,"","\\Finv",!0),g(v,E,D,"","\\Game",!0),g(v,E,D,"","\\backprime"),g(v,E,D,"","\\blacktriangle"),g(v,E,D,"","\\blacktriangledown"),g(v,E,D,"","\\blacksquare"),g(v,E,D,"","\\blacklozenge"),g(v,E,D,"","\\bigstar"),g(v,E,D,"","\\sphericalangle",!0),g(v,E,D,"","\\complement",!0),g(v,E,D,"","\\eth",!0),g(U,N,D,"",""),g(v,E,D,"","\\diagup"),g(v,E,D,"","\\diagdown"),g(v,E,D,"","\\square"),g(v,E,D,"","\\Box"),g(v,E,D,"","\\Diamond"),g(v,E,D,"","\\yen",!0),g(U,E,D,"","\\yen",!0),g(v,E,D,"","\\checkmark",!0),g(U,E,D,"","\\checkmark"),g(v,E,D,"","\\beth",!0),g(v,E,D,"","\\daleth",!0),g(v,E,D,"","\\gimel",!0),g(v,E,D,"","\\digamma",!0),g(v,E,D,"","\\varkappa"),g(v,E,Nr,"","\\@ulcorner",!0),g(v,E,rr,"","\\@urcorner",!0),g(v,E,Nr,"","\\@llcorner",!0),g(v,E,rr,"","\\@lrcorner",!0),g(v,E,z,"","\\leqq",!0),g(v,E,z,"","\\leqslant",!0),g(v,E,z,"","\\eqslantless",!0),g(v,E,z,"","\\lesssim",!0),g(v,E,z,"","\\lessapprox",!0),g(v,E,z,"","\\approxeq",!0),g(v,E,ae,"","\\lessdot"),g(v,E,z,"","\\lll",!0),g(v,E,z,"","\\lessgtr",!0),g(v,E,z,"","\\lesseqgtr",!0),g(v,E,z,"","\\lesseqqgtr",!0),g(v,E,z,"","\\doteqdot"),g(v,E,z,"","\\risingdotseq",!0),g(v,E,z,"","\\fallingdotseq",!0),g(v,E,z,"","\\backsim",!0),g(v,E,z,"","\\backsimeq",!0),g(v,E,z,"","\\subseteqq",!0),g(v,E,z,"","\\Subset",!0),g(v,E,z,"","\\sqsubset",!0),g(v,E,z,"","\\preccurlyeq",!0),g(v,E,z,"","\\curlyeqprec",!0),g(v,E,z,"","\\precsim",!0),g(v,E,z,"","\\precapprox",!0),g(v,E,z,"","\\vartriangleleft"),g(v,E,z,"","\\trianglelefteq"),g(v,E,z,"","\\vDash",!0),g(v,E,z,"","\\Vvdash",!0),g(v,E,z,"","\\smallsmile"),g(v,E,z,"","\\smallfrown"),g(v,E,z,"","\\bumpeq",!0),g(v,E,z,"","\\Bumpeq",!0),g(v,E,z,"","\\geqq",!0),g(v,E,z,"","\\geqslant",!0),g(v,E,z,"","\\eqslantgtr",!0),g(v,E,z,"","\\gtrsim",!0),g(v,E,z,"","\\gtrapprox",!0),g(v,E,ae,"","\\gtrdot"),g(v,E,z,"","\\ggg",!0),g(v,E,z,"","\\gtrless",!0),g(v,E,z,"","\\gtreqless",!0),g(v,E,z,"","\\gtreqqless",!0),g(v,E,z,"","\\eqcirc",!0),g(v,E,z,"","\\circeq",!0),g(v,E,z,"","\\triangleq",!0),g(v,E,z,"","\\thicksim"),g(v,E,z,"","\\thickapprox"),g(v,E,z,"","\\supseteqq",!0),g(v,E,z,"","\\Supset",!0),g(v,E,z,"","\\sqsupset",!0),g(v,E,z,"","\\succcurlyeq",!0),g(v,E,z,"","\\curlyeqsucc",!0),g(v,E,z,"","\\succsim",!0),g(v,E,z,"","\\succapprox",!0),g(v,E,z,"","\\vartriangleright"),g(v,E,z,"","\\trianglerighteq"),g(v,E,z,"","\\Vdash",!0),g(v,E,z,"","\\shortmid"),g(v,E,z,"","\\shortparallel"),g(v,E,z,"","\\between",!0),g(v,E,z,"","\\pitchfork",!0),g(v,E,z,"","\\varpropto"),g(v,E,z,"","\\blacktriangleleft"),g(v,E,z,"","\\therefore",!0),g(v,E,z,"","\\backepsilon"),g(v,E,z,"","\\blacktriangleright"),g(v,E,z,"","\\because",!0),g(v,E,z,"","\\llless"),g(v,E,z,"","\\gggtr"),g(v,E,ae,"","\\lhd"),g(v,E,ae,"","\\rhd"),g(v,E,z,"","\\eqsim",!0),g(v,N,z,"","\\Join"),g(v,E,z,"","\\Doteq",!0),g(v,E,ae,"","\\dotplus",!0),g(v,E,ae,"","\\smallsetminus"),g(v,E,ae,"","\\Cap",!0),g(v,E,ae,"","\\Cup",!0),g(v,E,ae,"","\\doublebarwedge",!0),g(v,E,ae,"","\\boxminus",!0),g(v,E,ae,"","\\boxplus",!0),g(v,E,ae,"","\\divideontimes",!0),g(v,E,ae,"","\\ltimes",!0),g(v,E,ae,"","\\rtimes",!0),g(v,E,ae,"","\\leftthreetimes",!0),g(v,E,ae,"","\\rightthreetimes",!0),g(v,E,ae,"","\\curlywedge",!0),g(v,E,ae,"","\\curlyvee",!0),g(v,E,ae,"","\\circleddash",!0),g(v,E,ae,"","\\circledast",!0),g(v,E,ae,"","\\centerdot"),g(v,E,ae,"","\\intercal",!0),g(v,E,ae,"","\\doublecap"),g(v,E,ae,"","\\doublecup"),g(v,E,ae,"","\\boxtimes",!0),g(v,E,z,"","\\dashrightarrow",!0),g(v,E,z,"","\\dashleftarrow",!0),g(v,E,z,"","\\leftleftarrows",!0),g(v,E,z,"","\\leftrightarrows",!0),g(v,E,z,"","\\Lleftarrow",!0),g(v,E,z,"","\\twoheadleftarrow",!0),g(v,E,z,"","\\leftarrowtail",!0),g(v,E,z,"","\\looparrowleft",!0),g(v,E,z,"","\\leftrightharpoons",!0),g(v,E,z,"","\\curvearrowleft",!0),g(v,E,z,"","\\circlearrowleft",!0),g(v,E,z,"","\\Lsh",!0),g(v,E,z,"","\\upuparrows",!0),g(v,E,z,"","\\upharpoonleft",!0),g(v,E,z,"","\\downharpoonleft",!0),g(v,N,z,"","\\origof",!0),g(v,N,z,"","\\imageof",!0),g(v,E,z,"","\\multimap",!0),g(v,E,z,"","\\leftrightsquigarrow",!0),g(v,E,z,"","\\rightrightarrows",!0),g(v,E,z,"","\\rightleftarrows",!0),g(v,E,z,"","\\twoheadrightarrow",!0),g(v,E,z,"","\\rightarrowtail",!0),g(v,E,z,"","\\looparrowright",!0),g(v,E,z,"","\\curvearrowright",!0),g(v,E,z,"","\\circlearrowright",!0),g(v,E,z,"","\\Rsh",!0),g(v,E,z,"","\\downdownarrows",!0),g(v,E,z,"","\\upharpoonright",!0),g(v,E,z,"","\\downharpoonright",!0),g(v,E,z,"","\\rightsquigarrow",!0),g(v,E,z,"","\\leadsto"),g(v,E,z,"","\\Rrightarrow",!0),g(v,E,z,"","\\restriction"),g(v,N,D,"","`"),g(v,N,D,"$","\\$"),g(U,N,D,"$","\\$"),g(U,N,D,"$","\\textdollar"),g(v,N,D,"%","\\%"),g(U,N,D,"%","\\%"),g(v,N,D,"_","\\_"),g(U,N,D,"_","\\_"),g(U,N,D,"_","\\textunderscore"),g(v,N,D,"","\\angle",!0),g(v,N,D,"","\\infty",!0),g(v,N,D,"","\\prime"),g(v,N,D,"","\\triangle"),g(v,N,D,"","\\Gamma",!0),g(v,N,D,"","\\Delta",!0),g(v,N,D,"","\\Theta",!0),g(v,N,D,"","\\Lambda",!0),g(v,N,D,"","\\Xi",!0),g(v,N,D,"","\\Pi",!0),g(v,N,D,"","\\Sigma",!0),g(v,N,D,"","\\Upsilon",!0),g(v,N,D,"","\\Phi",!0),g(v,N,D,"","\\Psi",!0),g(v,N,D,"","\\Omega",!0),g(v,N,D,"A",""),g(v,N,D,"B",""),g(v,N,D,"E",""),g(v,N,D,"Z",""),g(v,N,D,"H",""),g(v,N,D,"I",""),g(v,N,D,"K",""),g(v,N,D,"M",""),g(v,N,D,"N",""),g(v,N,D,"O",""),g(v,N,D,"P",""),g(v,N,D,"T",""),g(v,N,D,"X",""),g(v,N,D,"","\\neg",!0),g(v,N,D,"","\\lnot"),g(v,N,D,"","\\top"),g(v,N,D,"","\\bot"),g(v,N,D,"","\\emptyset"),g(v,E,D,"","\\varnothing"),g(v,N,me,"","\\alpha",!0),g(v,N,me,"","\\beta",!0),g(v,N,me,"","\\gamma",!0),g(v,N,me,"","\\delta",!0),g(v,N,me,"","\\epsilon",!0),g(v,N,me,"","\\zeta",!0),g(v,N,me,"","\\eta",!0),g(v,N,me,"","\\theta",!0),g(v,N,me,"","\\iota",!0),g(v,N,me,"","\\kappa",!0),g(v,N,me,"","\\lambda",!0),g(v,N,me,"","\\mu",!0),g(v,N,me,"","\\nu",!0),g(v,N,me,"","\\xi",!0),g(v,N,me,"","\\omicron",!0),g(v,N,me,"","\\pi",!0),g(v,N,me,"","\\rho",!0),g(v,N,me,"","\\sigma",!0),g(v,N,me,"","\\tau",!0),g(v,N,me,"","\\upsilon",!0),g(v,N,me,"","\\phi",!0),g(v,N,me,"","\\chi",!0),g(v,N,me,"","\\psi",!0),g(v,N,me,"","\\omega",!0),g(v,N,me,"","\\varepsilon",!0),g(v,N,me,"","\\vartheta",!0),g(v,N,me,"","\\varpi",!0),g(v,N,me,"","\\varrho",!0),g(v,N,me,"","\\varsigma",!0),g(v,N,me,"","\\varphi",!0),g(v,N,ae,"","*",!0),g(v,N,ae,"+","+"),g(v,N,ae,"","-",!0),g(v,N,ae,"","\\cdot",!0),g(v,N,ae,"","\\circ",!0),g(v,N,ae,"","\\div",!0),g(v,N,ae,"","\\pm",!0),g(v,N,ae,"","\\times",!0),g(v,N,ae,"","\\cap",!0),g(v,N,ae,"","\\cup",!0),g(v,N,ae,"","\\setminus",!0),g(v,N,ae,"","\\land"),g(v,N,ae,"","\\lor"),g(v,N,ae,"","\\wedge",!0),g(v,N,ae,"","\\vee",!0),g(v,N,D,"","\\surd"),g(v,N,Nr,"","\\langle",!0),g(v,N,Nr,"","\\lvert"),g(v,N,Nr,"","\\lVert"),g(v,N,rr,"?","?"),g(v,N,rr,"!","!"),g(v,N,rr,"","\\rangle",!0),g(v,N,rr,"","\\rvert"),g(v,N,rr,"","\\rVert"),g(v,N,z,"=","="),g(v,N,z,":",":"),g(v,N,z,"","\\approx",!0),g(v,N,z,"","\\cong",!0),g(v,N,z,"","\\ge"),g(v,N,z,"","\\geq",!0),g(v,N,z,"","\\gets"),g(v,N,z,">","\\gt",!0),g(v,N,z,"","\\in",!0),g(v,N,z,"","\\@not"),g(v,N,z,"","\\subset",!0),g(v,N,z,"","\\supset",!0),g(v,N,z,"","\\subseteq",!0),g(v,N,z,"","\\supseteq",!0),g(v,E,z,"","\\nsubseteq",!0),g(v,E,z,"","\\nsupseteq",!0),g(v,N,z,"","\\models"),g(v,N,z,"","\\leftarrow",!0),g(v,N,z,"","\\le"),g(v,N,z,"","\\leq",!0),g(v,N,z,"<","\\lt",!0),g(v,N,z,"","\\rightarrow",!0),g(v,N,z,"","\\to"),g(v,E,z,"","\\ngeq",!0),g(v,E,z,"","\\nleq",!0),g(v,N,qi,"","\\ "),g(v,N,qi,"","\\space"),g(v,N,qi,"","\\nobreakspace"),g(U,N,qi,"","\\ "),g(U,N,qi,""," "),g(U,N,qi,"","\\space"),g(U,N,qi,"","\\nobreakspace"),g(v,N,qi,null,"\\nobreak"),g(v,N,qi,null,"\\allowbreak"),g(v,N,io,",",","),g(v,N,io,";",";"),g(v,E,ae,"","\\barwedge",!0),g(v,E,ae,"","\\veebar",!0),g(v,N,ae,"","\\odot",!0),g(v,N,ae,"","\\oplus",!0),g(v,N,ae,"","\\otimes",!0),g(v,N,D,"","\\partial",!0),g(v,N,ae,"","\\oslash",!0),g(v,E,ae,"","\\circledcirc",!0),g(v,E,ae,"","\\boxdot",!0),g(v,N,ae,"","\\bigtriangleup"),g(v,N,ae,"","\\bigtriangledown"),g(v,N,ae,"","\\dagger"),g(v,N,ae,"","\\diamond"),g(v,N,ae,"","\\star"),g(v,N,ae,"","\\triangleleft"),g(v,N,ae,"","\\triangleright"),g(v,N,Nr,"{","\\{"),g(U,N,D,"{","\\{"),g(U,N,D,"{","\\textbraceleft"),g(v,N,rr,"}","\\}"),g(U,N,D,"}","\\}"),g(U,N,D,"}","\\textbraceright"),g(v,N,Nr,"{","\\lbrace"),g(v,N,rr,"}","\\rbrace"),g(v,N,Nr,"[","\\lbrack",!0),g(U,N,D,"[","\\lbrack",!0),g(v,N,rr,"]","\\rbrack",!0),g(U,N,D,"]","\\rbrack",!0),g(v,N,Nr,"(","\\lparen",!0),g(v,N,rr,")","\\rparen",!0),g(U,N,D,"<","\\textless",!0),g(U,N,D,">","\\textgreater",!0),g(v,N,Nr,"","\\lfloor",!0),g(v,N,rr,"","\\rfloor",!0),g(v,N,Nr,"","\\lceil",!0),g(v,N,rr,"","\\rceil",!0),g(v,N,D,"\\","\\backslash"),g(v,N,D,"","|"),g(v,N,D,"","\\vert"),g(U,N,D,"|","\\textbar",!0),g(v,N,D,"","\\|"),g(v,N,D,"","\\Vert"),g(U,N,D,"","\\textbardbl"),g(U,N,D,"~","\\textasciitilde"),g(U,N,D,"\\","\\textbackslash"),g(U,N,D,"^","\\textasciicircum"),g(v,N,z,"","\\uparrow",!0),g(v,N,z,"","\\Uparrow",!0),g(v,N,z,"","\\downarrow",!0),g(v,N,z,"","\\Downarrow",!0),g(v,N,z,"","\\updownarrow",!0),g(v,N,z,"","\\Updownarrow",!0),g(v,N,St,"","\\coprod"),g(v,N,St,"","\\bigvee"),g(v,N,St,"","\\bigwedge"),g(v,N,St,"","\\biguplus"),g(v,N,St,"","\\bigcap"),g(v,N,St,"","\\bigcup"),g(v,N,St,"","\\int"),g(v,N,St,"","\\intop"),g(v,N,St,"","\\iint"),g(v,N,St,"","\\iiint"),g(v,N,St,"","\\prod"),g(v,N,St,"","\\sum"),g(v,N,St,"","\\bigotimes"),g(v,N,St,"","\\bigoplus"),g(v,N,St,"","\\bigodot"),g(v,N,St,"","\\oint"),g(v,N,St,"","\\oiint"),g(v,N,St,"","\\oiiint"),g(v,N,St,"","\\bigsqcup"),g(v,N,St,"","\\smallint"),g(U,N,Ms,"","\\textellipsis"),g(v,N,Ms,"","\\mathellipsis"),g(U,N,Ms,"","\\ldots",!0),g(v,N,Ms,"","\\ldots",!0),g(v,N,Ms,"","\\@cdots",!0),g(v,N,Ms,"","\\ddots",!0),g(v,N,D,"","\\varvdots"),g(U,N,D,"","\\varvdots"),g(v,N,Ke,"","\\acute"),g(v,N,Ke,"","\\grave"),g(v,N,Ke,"","\\ddot"),g(v,N,Ke,"~","\\tilde"),g(v,N,Ke,"","\\bar"),g(v,N,Ke,"","\\breve"),g(v,N,Ke,"","\\check"),g(v,N,Ke,"^","\\hat"),g(v,N,Ke,"","\\vec"),g(v,N,Ke,"","\\dot"),g(v,N,Ke,"","\\mathring"),g(v,N,me,"","\\@imath"),g(v,N,me,"","\\@jmath"),g(v,N,D,"",""),g(v,N,D,"",""),g(U,N,D,"","\\i",!0),g(U,N,D,"","\\j",!0),g(U,N,D,"","\\ss",!0),g(U,N,D,"","\\ae",!0),g(U,N,D,"","\\oe",!0),g(U,N,D,"","\\o",!0),g(U,N,D,"","\\AE",!0),g(U,N,D,"","\\OE",!0),g(U,N,D,"","\\O",!0),g(U,N,Ke,"","\\'"),g(U,N,Ke,"","\\`"),g(U,N,Ke,"","\\^"),g(U,N,Ke,"","\\~"),g(U,N,Ke,"","\\="),g(U,N,Ke,"","\\u"),g(U,N,Ke,"","\\."),g(U,N,Ke,"","\\c"),g(U,N,Ke,"","\\r"),g(U,N,Ke,"","\\v"),g(U,N,Ke,"",'\\"'),g(U,N,Ke,"","\\H"),g(U,N,Ke,"","\\textcircled");const Rm={"--":!0,"---":!0,"``":!0,"''":!0};g(U,N,D,"","--",!0),g(U,N,D,"","\\textendash"),g(U,N,D,"","---",!0),g(U,N,D,"","\\textemdash"),g(U,N,D,"","`",!0),g(U,N,D,"","\\textquoteleft"),g(U,N,D,"","'",!0),g(U,N,D,"","\\textquoteright"),g(U,N,D,"","``",!0),g(U,N,D,"","\\textquotedblleft"),g(U,N,D,"","''",!0),g(U,N,D,"","\\textquotedblright"),g(v,N,D,"","\\degree",!0),g(U,N,D,"","\\degree"),g(U,N,D,"","\\textdegree",!0),g(v,N,D,"","\\pounds"),g(v,N,D,"","\\mathsterling",!0),g(U,N,D,"","\\pounds"),g(U,N,D,"","\\textsterling",!0),g(v,E,D,"","\\maltese"),g(U,E,D,"","\\maltese");const Fm='0123456789/@."';for(let o=0;o<Fm.length;o++){const l=Fm.charAt(o);g(v,N,D,l,l)}const Bm='0123456789!@*()-=+";:?/.,';for(let o=0;o<Bm.length;o++){const l=Bm.charAt(o);g(U,N,D,l,l)}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let o=0;o<no.length;o++){const l=no.charAt(o);g(v,N,me,l,l),g(U,N,D,l,l)}g(v,E,D,"C",""),g(U,E,D,"C",""),g(v,E,D,"H",""),g(U,E,D,"H",""),g(v,E,D,"N",""),g(U,E,D,"N",""),g(v,E,D,"P",""),g(U,E,D,"P",""),g(v,E,D,"Q",""),g(U,E,D,"Q",""),g(v,E,D,"R",""),g(U,E,D,"R",""),g(v,E,D,"Z",""),g(U,E,D,"Z",""),g(v,N,me,"h",""),g(U,N,me,"h","");let ge="";for(let o=0;o<no.length;o++){const l=no.charAt(o);ge=String.fromCharCode(55349,56320+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56372+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56424+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56580+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56684+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56736+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56788+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56840+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56944+o),g(v,N,me,l,ge),g(U,N,D,l,ge),o<26&&(ge=String.fromCharCode(55349,56632+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,56476+o),g(v,N,me,l,ge),g(U,N,D,l,ge))}ge="",g(v,N,me,"k",ge),g(U,N,D,"k",ge);for(let o=0;o<10;o++){const l=o.toString();ge=String.fromCharCode(55349,57294+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,57314+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,57324+o),g(v,N,me,l,ge),g(U,N,D,l,ge),ge=String.fromCharCode(55349,57334+o),g(v,N,me,l,ge),g(U,N,D,l,ge)}const Z0="";for(let o=0;o<Z0.length;o++){const l=Z0.charAt(o);g(v,N,me,l,l),g(U,N,D,l,l)}const so=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Vm=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],ly=function(o,l){const c=o.charCodeAt(0),h=o.charCodeAt(1),m=(c-55296)*1024+(h-56320)+65536,y=l==="math"?0:1;if(119808<=m&&m<120484){const w=Math.floor((m-119808)/26);return[so[w][2],so[w][y]]}else if(120782<=m&&m<=120831){const w=Math.floor((m-120782)/10);return[Vm[w][2],Vm[w][y]]}else{if(m===120485||m===120486)return[so[0][2],so[0][y]];if(120486<m&&m<120782)return["",""];throw new s("Unsupported character: "+o)}};class Ta{constructor(l){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=l,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(l){return this.classes.includes(l)}toNode(){const l=document.createDocumentFragment();for(let c=0;c<this.children.length;c++)l.appendChild(this.children[c].toNode());return l}toMarkup(){let l="";for(let c=0;c<this.children.length;c++)l+=this.children[c].toMarkup();return l}toText(){const l=c=>c.toText();return this.children.map(l).join("")}}const ao=function(o,l,c){return nt[c][o]&&nt[c][o].replace&&(o=nt[c][o].replace),{value:o,metrics:j0(o,l,c)}},ei=function(o,l,c,h,m){const y=ao(o,l,c),w=y.metrics;o=y.value;let k;if(w){let _=w.italic;(c==="text"||h&&h.font==="mathit")&&(_=0),k=new qr(o,w.height,w.depth,_,w.skew,w.width,m)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+o+"' in style '"+l+"' and mode '"+c+"'")),k=new qr(o,0,0,0,0,0,m);if(h){k.maxFontSize=h.sizeMultiplier,h.style.isTight()&&k.classes.push("mtight");const _=h.getColor();_&&(k.style.color=_)}return k},oy=function(o,l,c,h){return h===void 0&&(h=[]),c.font==="boldsymbol"&&ao(o,"Main-Bold",l).metrics?ei(o,"Main-Bold",l,c,h.concat(["mathbf"])):o==="\\"||nt[l][o].font==="main"?ei(o,"Main-Regular",l,c,h):ei(o,"AMS-Regular",l,c,h.concat(["amsrm"]))},uy=function(o,l,c,h,m){return m!=="textord"&&ao(o,"Math-BoldItalic",l).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},cy=function(o,l,c){const h=o.mode,m=o.text,y=["mord"],w=h==="math"||h==="text"&&l.font,k=w?l.font:l.fontFamily;let _="",C="";if(m.charCodeAt(0)===55349&&([_,C]=ly(m,h)),_.length>0)return ei(m,_,h,l,y.concat(C));if(k){let P,F;if(k==="boldsymbol"){const V=uy(m,h,l,y,c);P=V.fontName,F=[V.fontClass]}else w?(P=Um[k].fontName,F=[k]):(P=lo(k,l.fontWeight,l.fontShape),F=[k,l.fontWeight,l.fontShape]);if(ao(m,P,h).metrics)return ei(m,P,h,l,y.concat(F));if(Rm.hasOwnProperty(m)&&P.slice(0,10)==="Typewriter"){const V=[];for(let j=0;j<m.length;j++)V.push(ei(m[j],P,h,l,y.concat(F)));return Hm(V)}}if(c==="mathord")return ei(m,"Math-Italic",h,l,y.concat(["mathnormal"]));if(c==="textord"){const P=nt[h][m]&&nt[h][m].font;if(P==="ams"){const F=lo("amsrm",l.fontWeight,l.fontShape);return ei(m,F,h,l,y.concat("amsrm",l.fontWeight,l.fontShape))}else if(P==="main"||!P){const F=lo("textrm",l.fontWeight,l.fontShape);return ei(m,F,h,l,y.concat(l.fontWeight,l.fontShape))}else{const F=lo(P,l.fontWeight,l.fontShape);return ei(m,F,h,l,y.concat(F,l.fontWeight,l.fontShape))}}else throw new Error("unexpected type: "+c+" in makeOrd")},fy=(o,l)=>{if(mn(o.classes)!==mn(l.classes)||o.skew!==l.skew||o.maxFontSize!==l.maxFontSize)return!1;if(o.classes.length===1){const c=o.classes[0];if(c==="mbin"||c==="mord")return!1}for(const c in o.style)if(o.style.hasOwnProperty(c)&&o.style[c]!==l.style[c])return!1;for(const c in l.style)if(l.style.hasOwnProperty(c)&&o.style[c]!==l.style[c])return!1;return!0},hy=o=>{for(let l=0;l<o.length-1;l++){const c=o[l],h=o[l+1];c instanceof qr&&h instanceof qr&&fy(c,h)&&(c.text+=h.text,c.height=Math.max(c.height,h.height),c.depth=Math.max(c.depth,h.depth),c.italic=h.italic,o.splice(l+1,1),l--)}return o},Q0=function(o){let l=0,c=0,h=0;for(let m=0;m<o.children.length;m++){const y=o.children[m];y.height>l&&(l=y.height),y.depth>c&&(c=y.depth),y.maxFontSize>h&&(h=y.maxFontSize)}o.height=l,o.depth=c,o.maxFontSize=h},cr=function(o,l,c,h){const m=new _a(o,l,c,h);return Q0(m),m},jm=(o,l,c,h)=>new _a(o,l,c,h),py=function(o,l,c){const h=cr([o],[],l);return h.height=Math.max(c||l.fontMetrics().defaultRuleThickness,l.minRuleThickness),h.style.borderBottomWidth=ee(h.height),h.maxFontSize=1,h},my=function(o,l,c,h){const m=new G0(o,l,c,h);return Q0(m),m},Hm=function(o){const l=new Ta(o);return Q0(l),l},dy=function(o,l){return o instanceof Ta?cr([],[o],l):o},gy=function(o){if(o.positionType==="individualShift"){const c=o.children,h=[c[0]],m=-c[0].shift-c[0].elem.depth;let y=m;for(let w=1;w<c.length;w++){const k=-c[w].shift-y-c[w].elem.depth,_=k-(c[w-1].elem.height+c[w-1].elem.depth);y=y+k,h.push({type:"kern",size:_}),h.push(c[w])}return{children:h,depth:m}}let l;if(o.positionType==="top"){let c=o.positionData;for(let h=0;h<o.children.length;h++){const m=o.children[h];c-=m.type==="kern"?m.size:m.elem.height+m.elem.depth}l=c}else if(o.positionType==="bottom")l=-o.positionData;else{const c=o.children[0];if(c.type!=="elem")throw new Error('First child must have type "elem".');if(o.positionType==="shift")l=-c.elem.depth-o.positionData;else if(o.positionType==="firstBaseline")l=-c.elem.depth;else throw new Error("Invalid positionType "+o.positionType+".")}return{children:o.children,depth:l}},yy=function(o,l){const{children:c,depth:h}=gy(o);let m=0;for(let j=0;j<c.length;j++){const se=c[j];if(se.type==="elem"){const fe=se.elem;m=Math.max(m,fe.maxFontSize,fe.height)}}m+=2;const y=cr(["pstrut"],[]);y.style.height=ee(m);const w=[];let k=h,_=h,C=h;for(let j=0;j<c.length;j++){const se=c[j];if(se.type==="kern")C+=se.size;else{const fe=se.elem,Te=se.wrapperClasses||[],Ne=se.wrapperStyle||{},Me=cr(Te,[y,fe],void 0,Ne);Me.style.top=ee(-m-C-fe.depth),se.marginLeft&&(Me.style.marginLeft=se.marginLeft),se.marginRight&&(Me.style.marginRight=se.marginRight),w.push(Me),C+=fe.height+fe.depth}k=Math.min(k,C),_=Math.max(_,C)}const P=cr(["vlist"],w);P.style.height=ee(_);let F;if(k<0){const j=cr([],[]),se=cr(["vlist"],[j]);se.style.height=ee(-k);const fe=cr(["vlist-s"],[new qr("")]);F=[cr(["vlist-r"],[P,fe]),cr(["vlist-r"],[se])]}else F=[cr(["vlist-r"],[P])];const V=cr(["vlist-t"],F);return F.length===2&&V.classes.push("vlist-t2"),V.height=_,V.depth=-k,V},vy=(o,l)=>{const c=cr(["mspace"],[],l),h=it(o,l);return c.style.marginRight=ee(h),c},lo=function(o,l,c){let h="";switch(o){case"amsrm":h="AMS";break;case"textrm":h="Main";break;case"textsf":h="SansSerif";break;case"texttt":h="Typewriter";break;default:h=o}let m;return l==="textbf"&&c==="textit"?m="BoldItalic":l==="textbf"?m="Bold":l==="textit"?m="Italic":m="Regular",h+"-"+m},Um={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Gm={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var B={fontMap:Um,makeSymbol:ei,mathsym:oy,makeSpan:cr,makeSvgSpan:jm,makeLineSpan:py,makeAnchor:my,makeFragment:Hm,wrapFragment:dy,makeVList:yy,makeOrd:cy,makeGlue:vy,staticSvg:function(o,l){const[c,h,m]=Gm[o],y=new dn(c),w=new Oi([y],{width:ee(h),height:ee(m),style:"width:"+ee(h),viewBox:"0 0 "+1e3*h+" "+1e3*m,preserveAspectRatio:"xMinYMin"}),k=jm(["overlay"],[w],l);return k.height=m,k.style.height=ee(m),k.style.width=ee(h),k},svgData:Gm,tryCombineChars:hy};const st={number:3,unit:"mu"},rs={number:4,unit:"mu"},Li={number:5,unit:"mu"},by={mord:{mop:st,mbin:rs,mrel:Li,minner:st},mop:{mord:st,mop:st,mrel:Li,minner:st},mbin:{mord:rs,mop:rs,mopen:rs,minner:rs},mrel:{mord:Li,mop:Li,mopen:Li,minner:Li},mopen:{},mclose:{mop:st,mbin:rs,mrel:Li,minner:st},mpunct:{mord:st,mop:st,mrel:Li,mopen:st,mclose:st,mpunct:st,minner:st},minner:{mord:st,mop:st,mbin:rs,mrel:Li,mopen:st,mpunct:st,minner:st}},xy={mord:{mop:st},mop:{mord:st,mop:st},mbin:{},mrel:{},mopen:{},mclose:{mop:st},mpunct:{},minner:{mop:st}},Wm={},oo={},uo={};function ie(o){let{type:l,names:c,props:h,handler:m,htmlBuilder:y,mathmlBuilder:w}=o;const k={type:l,numArgs:h.numArgs,argTypes:h.argTypes,allowedInArgument:!!h.allowedInArgument,allowedInText:!!h.allowedInText,allowedInMath:h.allowedInMath===void 0?!0:h.allowedInMath,numOptionalArgs:h.numOptionalArgs||0,infix:!!h.infix,primitive:!!h.primitive,handler:m};for(let _=0;_<c.length;++_)Wm[c[_]]=k;l&&(y&&(oo[l]=y),w&&(uo[l]=w))}function is(o){let{type:l,htmlBuilder:c,mathmlBuilder:h}=o;ie({type:l,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:c,mathmlBuilder:h})}const co=function(o){return o.type==="ordgroup"&&o.body.length===1?o.body[0]:o},yt=function(o){return o.type==="ordgroup"?o.body:[o]},Ri=B.makeSpan,wy=["leftmost","mbin","mopen","mrel","mop","mpunct"],Ny=["rightmost","mrel","mclose","mpunct"],ky={display:K.DISPLAY,text:K.TEXT,script:K.SCRIPT,scriptscript:K.SCRIPTSCRIPT},Sy={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Mt=function(o,l,c,h){h===void 0&&(h=[null,null]);const m=[];for(let C=0;C<o.length;C++){const P=Ae(o[C],l);if(P instanceof Ta){const F=P.children;m.push(...F)}else m.push(P)}if(B.tryCombineChars(m),!c)return m;let y=l;if(o.length===1){const C=o[0];C.type==="sizing"?y=l.havingSize(C.size):C.type==="styling"&&(y=l.havingStyle(ky[C.style]))}const w=Ri([h[0]||"leftmost"],[],l),k=Ri([h[1]||"rightmost"],[],l),_=c==="root";return Y0(m,(C,P)=>{const F=P.classes[0],V=C.classes[0];F==="mbin"&&Ny.includes(V)?P.classes[0]="mord":V==="mbin"&&wy.includes(F)&&(C.classes[0]="mord")},{node:w},k,_),Y0(m,(C,P)=>{const F=K0(P),V=K0(C),j=F&&V?C.hasClass("mtight")?xy[F][V]:by[F][V]:null;if(j)return B.makeGlue(j,y)},{node:w},k,_),m},Y0=function(o,l,c,h,m){h&&o.push(h);let y=0;for(;y<o.length;y++){const w=o[y],k=Zm(w);if(k){Y0(k.children,l,c,null,m);continue}const _=!w.hasClass("mspace");if(_){const C=l(w,c.node);C&&(c.insertAfter?c.insertAfter(C):(o.unshift(C),y++))}_?c.node=w:m&&w.hasClass("newline")&&(c.node=Ri(["leftmost"])),c.insertAfter=(C=>P=>{o.splice(C+1,0,P),y++})(y)}h&&o.pop()},Zm=function(o){return o instanceof Ta||o instanceof G0||o instanceof _a&&o.hasClass("enclosing")?o:null},X0=function(o,l){const c=Zm(o);if(c){const h=c.children;if(h.length){if(l==="right")return X0(h[h.length-1],"right");if(l==="left")return X0(h[0],"left")}}return o},K0=function(o,l){return o?(l&&(o=X0(o,l)),Sy[o.classes[0]]||null):null},Ma=function(o,l){const c=["nulldelimiter"].concat(o.baseSizingClasses());return Ri(l.concat(c))},Ae=function(o,l,c){if(!o)return Ri();if(oo[o.type]){let h=oo[o.type](o,l);if(c&&l.size!==c.size){h=Ri(l.sizingClasses(c),[h],l);const m=l.sizeMultiplier/c.sizeMultiplier;h.height*=m,h.depth*=m}return h}else throw new s("Got group of unknown type: '"+o.type+"'")};function fo(o,l){const c=Ri(["base"],o,l),h=Ri(["strut"]);return h.style.height=ee(c.height+c.depth),c.depth&&(h.style.verticalAlign=ee(-c.depth)),c.children.unshift(h),c}function J0(o,l){let c=null;o.length===1&&o[0].type==="tag"&&(c=o[0].tag,o=o[0].body);const h=Mt(o,l,"root");let m;h.length===2&&h[1].hasClass("tag")&&(m=h.pop());const y=[];let w=[];for(let C=0;C<h.length;C++)if(w.push(h[C]),h[C].hasClass("mbin")||h[C].hasClass("mrel")||h[C].hasClass("allowbreak")){let P=!1;for(;C<h.length-1&&h[C+1].hasClass("mspace")&&!h[C+1].hasClass("newline");)C++,w.push(h[C]),h[C].hasClass("nobreak")&&(P=!0);P||(y.push(fo(w,l)),w=[])}else h[C].hasClass("newline")&&(w.pop(),w.length>0&&(y.push(fo(w,l)),w=[]),y.push(h[C]));w.length>0&&y.push(fo(w,l));let k;c?(k=fo(Mt(c,l,!0)),k.classes=["tag"],y.push(k)):m&&y.push(m);const _=Ri(["katex-html"],y);if(_.setAttribute("aria-hidden","true"),k){const C=k.children[0];C.style.height=ee(_.height+_.depth),_.depth&&(C.style.verticalAlign=ee(-_.depth))}return _}function Qm(o){return new Ta(o)}class kr{constructor(l,c,h){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=l,this.attributes={},this.children=c||[],this.classes=h||[]}setAttribute(l,c){this.attributes[l]=c}getAttribute(l){return this.attributes[l]}toNode(){const l=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&l.setAttribute(c,this.attributes[c]);this.classes.length>0&&(l.className=mn(this.classes));for(let c=0;c<this.children.length;c++)if(this.children[c]instanceof gi&&this.children[c+1]instanceof gi){let h=this.children[c].toText()+this.children[++c].toText();for(;this.children[c+1]instanceof gi;)h+=this.children[++c].toText();l.appendChild(new gi(h).toNode())}else l.appendChild(this.children[c].toNode());return l}toMarkup(){let l="<"+this.type;for(const c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(l+=" "+c+'="',l+=R.escape(this.attributes[c]),l+='"');this.classes.length>0&&(l+=' class ="'+R.escape(mn(this.classes))+'"'),l+=">";for(let c=0;c<this.children.length;c++)l+=this.children[c].toMarkup();return l+="</"+this.type+">",l}toText(){return this.children.map(l=>l.toText()).join("")}}class gi{constructor(l){this.text=void 0,this.text=l}toNode(){return document.createTextNode(this.text)}toMarkup(){return R.escape(this.toText())}toText(){return this.text}}class _y{constructor(l){this.width=void 0,this.character=void 0,this.width=l,l>=.05555&&l<=.05556?this.character="":l>=.1666&&l<=.1667?this.character="":l>=.2222&&l<=.2223?this.character="":l>=.2777&&l<=.2778?this.character="":l>=-.05556&&l<=-.05555?this.character="":l>=-.1667&&l<=-.1666?this.character="":l>=-.2223&&l<=-.2222?this.character="":l>=-.2778&&l<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);{const l=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return l.setAttribute("width",ee(this.width)),l}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+ee(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Z={MathNode:kr,TextNode:gi,SpaceNode:_y,newDocumentFragment:Qm};const Lr=function(o,l,c){return nt[l][o]&&nt[l][o].replace&&o.charCodeAt(0)!==55349&&!(Rm.hasOwnProperty(o)&&c&&(c.fontFamily&&c.fontFamily.slice(4,6)==="tt"||c.font&&c.font.slice(4,6)==="tt"))&&(o=nt[l][o].replace),new Z.TextNode(o)},ec=function(o){return o.length===1?o[0]:new Z.MathNode("mrow",o)},tc=function(o,l){if(l.fontFamily==="texttt")return"monospace";if(l.fontFamily==="textsf")return l.fontShape==="textit"&&l.fontWeight==="textbf"?"sans-serif-bold-italic":l.fontShape==="textit"?"sans-serif-italic":l.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(l.fontShape==="textit"&&l.fontWeight==="textbf")return"bold-italic";if(l.fontShape==="textit")return"italic";if(l.fontWeight==="textbf")return"bold";const c=l.font;if(!c||c==="mathnormal")return null;const h=o.mode;if(c==="mathit")return"italic";if(c==="boldsymbol")return o.type==="textord"?"bold":"bold-italic";if(c==="mathbf")return"bold";if(c==="mathbb")return"double-struck";if(c==="mathsfit")return"sans-serif-italic";if(c==="mathfrak")return"fraktur";if(c==="mathscr"||c==="mathcal")return"script";if(c==="mathsf")return"sans-serif";if(c==="mathtt")return"monospace";let m=o.text;if(["\\imath","\\jmath"].includes(m))return null;nt[h][m]&&nt[h][m].replace&&(m=nt[h][m].replace);const y=B.fontMap[c].fontName;return j0(m,y,h)?B.fontMap[c].variant:null};function rc(o){if(!o)return!1;if(o.type==="mi"&&o.children.length===1){const l=o.children[0];return l instanceof gi&&l.text==="."}else if(o.type==="mo"&&o.children.length===1&&o.getAttribute("separator")==="true"&&o.getAttribute("lspace")==="0em"&&o.getAttribute("rspace")==="0em"){const l=o.children[0];return l instanceof gi&&l.text===","}else return!1}const fr=function(o,l,c){if(o.length===1){const y=Be(o[0],l);return c&&y instanceof kr&&y.type==="mo"&&(y.setAttribute("lspace","0em"),y.setAttribute("rspace","0em")),[y]}const h=[];let m;for(let y=0;y<o.length;y++){const w=Be(o[y],l);if(w instanceof kr&&m instanceof kr){if(w.type==="mtext"&&m.type==="mtext"&&w.getAttribute("mathvariant")===m.getAttribute("mathvariant")){m.children.push(...w.children);continue}else if(w.type==="mn"&&m.type==="mn"){m.children.push(...w.children);continue}else if(rc(w)&&m.type==="mn"){m.children.push(...w.children);continue}else if(w.type==="mn"&&rc(m))w.children=[...m.children,...w.children],h.pop();else if((w.type==="msup"||w.type==="msub")&&w.children.length>=1&&(m.type==="mn"||rc(m))){const k=w.children[0];k instanceof kr&&k.type==="mn"&&(k.children=[...m.children,...k.children],h.pop())}else if(m.type==="mi"&&m.children.length===1){const k=m.children[0];if(k instanceof gi&&k.text===""&&(w.type==="mo"||w.type==="mi"||w.type==="mn")){const _=w.children[0];_ instanceof gi&&_.text.length>0&&(_.text=_.text.slice(0,1)+""+_.text.slice(1),h.pop())}}}h.push(w),m=w}return h},gn=function(o,l,c){return ec(fr(o,l,c))},Be=function(o,l){if(!o)return new Z.MathNode("mrow");if(uo[o.type])return uo[o.type](o,l);throw new s("Got group of unknown type: '"+o.type+"'")};function Ym(o,l,c,h,m){const y=fr(o,c);let w;y.length===1&&y[0]instanceof kr&&["mrow","mtable"].includes(y[0].type)?w=y[0]:w=new Z.MathNode("mrow",y);const k=new Z.MathNode("annotation",[new Z.TextNode(l)]);k.setAttribute("encoding","application/x-tex");const _=new Z.MathNode("semantics",[w,k]),C=new Z.MathNode("math",[_]);C.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),h&&C.setAttribute("display","block");const P=m?"katex":"katex-mathml";return B.makeSpan([P],[C])}const Xm=function(o){return new J6({style:o.displayMode?K.DISPLAY:K.TEXT,maxSize:o.maxSize,minRuleThickness:o.minRuleThickness})},Km=function(o,l){if(l.displayMode){const c=["katex-display"];l.leqno&&c.push("leqno"),l.fleqn&&c.push("fleqn"),o=B.makeSpan(c,[o])}return o},Ty=function(o,l,c){const h=Xm(c);let m;if(c.output==="mathml")return Ym(o,l,h,c.displayMode,!0);if(c.output==="html"){const y=J0(o,h);m=B.makeSpan(["katex"],[y])}else{const y=Ym(o,l,h,c.displayMode,!1),w=J0(o,h);m=B.makeSpan(["katex"],[y,w])}return Km(m,c)},My=function(o,l,c){const h=Xm(c),m=J0(o,h),y=B.makeSpan(["katex"],[m]);return Km(y,c)},Ey={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Ay=function(o){const l=new Z.MathNode("mo",[new Z.TextNode(Ey[o.replace(/^\\/,"")])]);return l.setAttribute("stretchy","true"),l},Iy={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},zy=function(o){return o.type==="ordgroup"?o.body.length:1};var Fi={encloseSpan:function(o,l,c,h,m){let y;const w=o.height+o.depth+c+h;if(/fbox|color|angl/.test(l)){if(y=B.makeSpan(["stretchy",l],[],m),l==="fbox"){const k=m.color&&m.getColor();k&&(y.style.borderColor=k)}}else{const k=[];/^[bx]cancel$/.test(l)&&k.push(new W0({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(l)&&k.push(new W0({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const _=new Oi(k,{width:"100%",height:ee(w)});y=B.makeSvgSpan([],[_],m)}return y.height=w,y.style.height=ee(w),y},mathMLnode:Ay,svgSpan:function(o,l){function c(){let w=4e5;const k=o.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(k)){const C=zy(o.base);let P,F,V;if(C>5)k==="widehat"||k==="widecheck"?(P=420,w=2364,V=.42,F=k+"4"):(P=312,w=2340,V=.34,F="tilde4");else{const fe=[1,1,2,2,3,3][C];k==="widehat"||k==="widecheck"?(w=[0,1062,2364,2364,2364][fe],P=[0,239,300,360,420][fe],V=[0,.24,.3,.3,.36,.42][fe],F=k+fe):(w=[0,600,1033,2339,2340][fe],P=[0,260,286,306,312][fe],V=[0,.26,.286,.3,.306,.34][fe],F="tilde"+fe)}const j=new dn(F),se=new Oi([j],{width:"100%",height:ee(V),viewBox:"0 0 "+w+" "+P,preserveAspectRatio:"none"});return{span:B.makeSvgSpan([],[se],l),minWidth:0,height:V}}else{const _=[],C=Iy[k],[P,F,V]=C,j=V/1e3,se=P.length;let fe,Te;if(se===1){const Ne=C[3];fe=["hide-tail"],Te=[Ne]}else if(se===2)fe=["halfarrow-left","halfarrow-right"],Te=["xMinYMin","xMaxYMin"];else if(se===3)fe=["brace-left","brace-center","brace-right"],Te=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+se+" children.");for(let Ne=0;Ne<se;Ne++){const Me=new dn(P[Ne]),De=new Oi([Me],{width:"400em",height:ee(j),viewBox:"0 0 "+w+" "+V,preserveAspectRatio:Te[Ne]+" slice"}),Ue=B.makeSvgSpan([fe[Ne]],[De],l);if(se===1)return{span:Ue,minWidth:F,height:j};Ue.style.height=ee(j),_.push(Ue)}return{span:B.makeSpan(["stretchy"],_,l),minWidth:F,height:j}}}const{span:h,minWidth:m,height:y}=c();return h.height=y,h.style.height=ee(y),m>0&&(h.style.minWidth=ee(m)),h}};function be(o,l){if(!o||o.type!==l)throw new Error("Expected node of type "+l+", but got "+(o?"node of type "+o.type:String(o)));return o}function ic(o){const l=ho(o);if(!l)throw new Error("Expected node of symbol group type, but got "+(o?"node of type "+o.type:String(o)));return l}function ho(o){return o&&(o.type==="atom"||ay.hasOwnProperty(o.type))?o:null}const nc=(o,l)=>{let c,h,m;o&&o.type==="supsub"?(h=be(o.base,"accent"),c=h.base,o.base=c,m=ny(Ae(o,l)),o.base=h):(h=be(o,"accent"),c=h.base);const y=Ae(c,l.havingCrampedStyle()),w=h.isShifty&&R.isCharacterBox(c);let k=0;if(w){const V=R.getBaseElem(c),j=Ae(V,l.havingCrampedStyle());k=Lm(j).skew}const _=h.label==="\\c";let C=_?y.height+y.depth:Math.min(y.height,l.fontMetrics().xHeight),P;if(h.isStretchy)P=Fi.svgSpan(h,l),P=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:y},{type:"elem",elem:P,wrapperClasses:["svg-align"],wrapperStyle:k>0?{width:"calc(100% - "+ee(2*k)+")",marginLeft:ee(2*k)}:void 0}]},l);else{let V,j;h.label==="\\vec"?(V=B.staticSvg("vec",l),j=B.svgData.vec[1]):(V=B.makeOrd({mode:h.mode,text:h.label},l,"textord"),V=Lm(V),V.italic=0,j=V.width,_&&(C+=V.depth)),P=B.makeSpan(["accent-body"],[V]);const se=h.label==="\\textcircled";se&&(P.classes.push("accent-full"),C=y.height);let fe=k;se||(fe-=j/2),P.style.left=ee(fe),h.label==="\\textcircled"&&(P.style.top=".2em"),P=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:y},{type:"kern",size:-C},{type:"elem",elem:P}]},l)}const F=B.makeSpan(["mord","accent"],[P],l);return m?(m.children[0]=F,m.height=Math.max(F.height,m.height),m.classes[0]="mord",m):F},Jm=(o,l)=>{const c=o.isStretchy?Fi.mathMLnode(o.label):new Z.MathNode("mo",[Lr(o.label,o.mode)]),h=new Z.MathNode("mover",[Be(o.base,l),c]);return h.setAttribute("accent","true"),h},Cy=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(o=>"\\"+o).join("|"));ie({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(o,l)=>{const c=co(l[0]),h=!Cy.test(o.funcName),m=!h||o.funcName==="\\widehat"||o.funcName==="\\widetilde"||o.funcName==="\\widecheck";return{type:"accent",mode:o.parser.mode,label:o.funcName,isStretchy:h,isShifty:m,base:c}},htmlBuilder:nc,mathmlBuilder:Jm}),ie({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(o,l)=>{const c=l[0];let h=o.parser.mode;return h==="math"&&(o.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+o.funcName+" works only in text mode"),h="text"),{type:"accent",mode:h,label:o.funcName,isStretchy:!1,isShifty:!0,base:c}},htmlBuilder:nc,mathmlBuilder:Jm}),ie({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=l[0];return{type:"accentUnder",mode:c.mode,label:h,base:m}},htmlBuilder:(o,l)=>{const c=Ae(o.base,l),h=Fi.svgSpan(o,l),m=o.label==="\\utilde"?.12:0,y=B.makeVList({positionType:"top",positionData:c.height,children:[{type:"elem",elem:h,wrapperClasses:["svg-align"]},{type:"kern",size:m},{type:"elem",elem:c}]},l);return B.makeSpan(["mord","accentunder"],[y],l)},mathmlBuilder:(o,l)=>{const c=Fi.mathMLnode(o.label),h=new Z.MathNode("munder",[Be(o.base,l),c]);return h.setAttribute("accentunder","true"),h}});const po=o=>{const l=new Z.MathNode("mpadded",o?[o]:[]);return l.setAttribute("width","+0.6em"),l.setAttribute("lspace","0.3em"),l};ie({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(o,l,c){let{parser:h,funcName:m}=o;return{type:"xArrow",mode:h.mode,label:m,body:l[0],below:c[0]}},htmlBuilder(o,l){const c=l.style;let h=l.havingStyle(c.sup());const m=B.wrapFragment(Ae(o.body,h,l),l),y=o.label.slice(0,2)==="\\x"?"x":"cd";m.classes.push(y+"-arrow-pad");let w;o.below&&(h=l.havingStyle(c.sub()),w=B.wrapFragment(Ae(o.below,h,l),l),w.classes.push(y+"-arrow-pad"));const k=Fi.svgSpan(o,l),_=-l.fontMetrics().axisHeight+.5*k.height;let C=-l.fontMetrics().axisHeight-.5*k.height-.111;(m.depth>.25||o.label==="\\xleftequilibrium")&&(C-=m.depth);let P;if(w){const F=-l.fontMetrics().axisHeight+w.height+.5*k.height+.111;P=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:m,shift:C},{type:"elem",elem:k,shift:_},{type:"elem",elem:w,shift:F}]},l)}else P=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:m,shift:C},{type:"elem",elem:k,shift:_}]},l);return P.children[0].children[0].children[1].classes.push("svg-align"),B.makeSpan(["mrel","x-arrow"],[P],l)},mathmlBuilder(o,l){const c=Fi.mathMLnode(o.label);c.setAttribute("minsize",o.label.charAt(0)==="x"?"1.75em":"3.0em");let h;if(o.body){const m=po(Be(o.body,l));if(o.below){const y=po(Be(o.below,l));h=new Z.MathNode("munderover",[c,y,m])}else h=new Z.MathNode("mover",[c,m])}else if(o.below){const m=po(Be(o.below,l));h=new Z.MathNode("munder",[c,m])}else h=po(),h=new Z.MathNode("mover",[c,h]);return h}});const $y=B.makeSpan;function ed(o,l){const c=Mt(o.body,l,!0);return $y([o.mclass],c,l)}function td(o,l){let c;const h=fr(o.body,l);return o.mclass==="minner"?c=new Z.MathNode("mpadded",h):o.mclass==="mord"?o.isCharacterBox?(c=h[0],c.type="mi"):c=new Z.MathNode("mi",h):(o.isCharacterBox?(c=h[0],c.type="mo"):c=new Z.MathNode("mo",h),o.mclass==="mbin"?(c.attributes.lspace="0.22em",c.attributes.rspace="0.22em"):o.mclass==="mpunct"?(c.attributes.lspace="0em",c.attributes.rspace="0.17em"):o.mclass==="mopen"||o.mclass==="mclose"?(c.attributes.lspace="0em",c.attributes.rspace="0em"):o.mclass==="minner"&&(c.attributes.lspace="0.0556em",c.attributes.width="+0.1111em")),c}ie({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(o,l){let{parser:c,funcName:h}=o;const m=l[0];return{type:"mclass",mode:c.mode,mclass:"m"+h.slice(5),body:yt(m),isCharacterBox:R.isCharacterBox(m)}},htmlBuilder:ed,mathmlBuilder:td});const mo=o=>{const l=o.type==="ordgroup"&&o.body.length?o.body[0]:o;return l.type==="atom"&&(l.family==="bin"||l.family==="rel")?"m"+l.family:"mord"};ie({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(o,l){let{parser:c}=o;return{type:"mclass",mode:c.mode,mclass:mo(l[0]),body:yt(l[1]),isCharacterBox:R.isCharacterBox(l[1])}}}),ie({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(o,l){let{parser:c,funcName:h}=o;const m=l[1],y=l[0];let w;h!=="\\stackrel"?w=mo(m):w="mrel";const k={type:"op",mode:m.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:h!=="\\stackrel",body:yt(m)},_={type:"supsub",mode:y.mode,base:k,sup:h==="\\underset"?null:y,sub:h==="\\underset"?y:null};return{type:"mclass",mode:c.mode,mclass:w,body:[_],isCharacterBox:R.isCharacterBox(_)}},htmlBuilder:ed,mathmlBuilder:td}),ie({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(o,l){let{parser:c}=o;return{type:"pmb",mode:c.mode,mclass:mo(l[0]),body:yt(l[0])}},htmlBuilder(o,l){const c=Mt(o.body,l,!0),h=B.makeSpan([o.mclass],c,l);return h.style.textShadow="0.02em 0.01em 0.04px",h},mathmlBuilder(o,l){const c=fr(o.body,l),h=new Z.MathNode("mstyle",c);return h.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),h}});const Dy={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},rd=()=>({type:"styling",body:[],mode:"math",style:"display"}),id=o=>o.type==="textord"&&o.text==="@",Py=(o,l)=>(o.type==="mathord"||o.type==="atom")&&o.text===l;function Oy(o,l,c){const h=Dy[o];switch(h){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return c.callFunction(h,[l[0]],[l[1]]);case"\\uparrow":case"\\downarrow":{const m=c.callFunction("\\\\cdleft",[l[0]],[]),y={type:"atom",text:h,mode:"math",family:"rel"},w=c.callFunction("\\Big",[y],[]),k=c.callFunction("\\\\cdright",[l[1]],[]),_={type:"ordgroup",mode:"math",body:[m,w,k]};return c.callFunction("\\\\cdparent",[_],[])}case"\\\\cdlongequal":return c.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const m={type:"textord",text:"\\Vert",mode:"math"};return c.callFunction("\\Big",[m],[])}default:return{type:"textord",text:" ",mode:"math"}}}function qy(o){const l=[];for(o.gullet.beginGroup(),o.gullet.macros.set("\\cr","\\\\\\relax"),o.gullet.beginGroup();;){l.push(o.parseExpression(!1,"\\\\")),o.gullet.endGroup(),o.gullet.beginGroup();const y=o.fetch().text;if(y==="&"||y==="\\\\")o.consume();else if(y==="\\end"){l[l.length-1].length===0&&l.pop();break}else throw new s("Expected \\\\ or \\cr or \\end",o.nextToken)}let c=[];const h=[c];for(let y=0;y<l.length;y++){const w=l[y];let k=rd();for(let _=0;_<w.length;_++)if(!id(w[_]))k.body.push(w[_]);else{c.push(k),_+=1;const C=ic(w[_]).text,P=new Array(2);if(P[0]={type:"ordgroup",mode:"math",body:[]},P[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(C)>-1))if("<>AV".indexOf(C)>-1)for(let j=0;j<2;j++){let se=!0;for(let fe=_+1;fe<w.length;fe++){if(Py(w[fe],C)){se=!1,_=fe;break}if(id(w[fe]))throw new s("Missing a "+C+" character to complete a CD arrow.",w[fe]);P[j].body.push(w[fe])}if(se)throw new s("Missing a "+C+" character to complete a CD arrow.",w[_])}else throw new s('Expected one of "<>AV=|." after @',w[_]);const V={type:"styling",body:[Oy(C,P,o)],mode:"math",style:"display"};c.push(V),k=rd()}y%2===0?c.push(k):c.shift(),c=[],h.push(c)}o.gullet.endGroup(),o.gullet.endGroup();const m=new Array(h[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:h,arraystretch:1,addJot:!0,rowGaps:[null],cols:m,colSeparationType:"CD",hLinesBeforeRow:new Array(h.length+1).fill([])}}ie({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(o,l){let{parser:c,funcName:h}=o;return{type:"cdlabel",mode:c.mode,side:h.slice(4),label:l[0]}},htmlBuilder(o,l){const c=l.havingStyle(l.style.sup()),h=B.wrapFragment(Ae(o.label,c,l),l);return h.classes.push("cd-label-"+o.side),h.style.bottom=ee(.8-h.depth),h.height=0,h.depth=0,h},mathmlBuilder(o,l){let c=new Z.MathNode("mrow",[Be(o.label,l)]);return c=new Z.MathNode("mpadded",[c]),c.setAttribute("width","0"),o.side==="left"&&c.setAttribute("lspace","-1width"),c.setAttribute("voffset","0.7em"),c=new Z.MathNode("mstyle",[c]),c.setAttribute("displaystyle","false"),c.setAttribute("scriptlevel","1"),c}}),ie({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(o,l){let{parser:c}=o;return{type:"cdlabelparent",mode:c.mode,fragment:l[0]}},htmlBuilder(o,l){const c=B.wrapFragment(Ae(o.fragment,l),l);return c.classes.push("cd-vert-arrow"),c},mathmlBuilder(o,l){return new Z.MathNode("mrow",[Be(o.fragment,l)])}}),ie({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(o,l){let{parser:c}=o;const m=be(l[0],"ordgroup").body;let y="";for(let _=0;_<m.length;_++){const C=be(m[_],"textord");y+=C.text}let w=parseInt(y),k;if(isNaN(w))throw new s("\\@char has non-numeric argument "+y);if(w<0||w>=1114111)throw new s("\\@char with invalid code point "+y);return w<=65535?k=String.fromCharCode(w):(w-=65536,k=String.fromCharCode((w>>10)+55296,(w&1023)+56320)),{type:"textord",mode:c.mode,text:k}}});const nd=(o,l)=>{const c=Mt(o.body,l.withColor(o.color),!1);return B.makeFragment(c)},sd=(o,l)=>{const c=fr(o.body,l.withColor(o.color)),h=new Z.MathNode("mstyle",c);return h.setAttribute("mathcolor",o.color),h};ie({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(o,l){let{parser:c}=o;const h=be(l[0],"color-token").color,m=l[1];return{type:"color",mode:c.mode,color:h,body:yt(m)}},htmlBuilder:nd,mathmlBuilder:sd}),ie({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(o,l){let{parser:c,breakOnTokenText:h}=o;const m=be(l[0],"color-token").color;c.gullet.macros.set("\\current@color",m);const y=c.parseExpression(!0,h);return{type:"color",mode:c.mode,color:m,body:y}},htmlBuilder:nd,mathmlBuilder:sd}),ie({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(o,l,c){let{parser:h}=o;const m=h.gullet.future().text==="["?h.parseSizeGroup(!0):null,y=!h.settings.displayMode||!h.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:h.mode,newLine:y,size:m&&be(m,"size").value}},htmlBuilder(o,l){const c=B.makeSpan(["mspace"],[],l);return o.newLine&&(c.classes.push("newline"),o.size&&(c.style.marginTop=ee(it(o.size,l)))),c},mathmlBuilder(o,l){const c=new Z.MathNode("mspace");return o.newLine&&(c.setAttribute("linebreak","newline"),o.size&&c.setAttribute("height",ee(it(o.size,l)))),c}});const sc={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},ad=o=>{const l=o.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(l))throw new s("Expected a control sequence",o);return l},Ly=o=>{let l=o.gullet.popToken();return l.text==="="&&(l=o.gullet.popToken(),l.text===" "&&(l=o.gullet.popToken())),l},ld=(o,l,c,h)=>{let m=o.gullet.macros.get(c.text);m==null&&(c.noexpand=!0,m={tokens:[c],numArgs:0,unexpandable:!o.gullet.isExpandable(c.text)}),o.gullet.macros.set(l,m,h)};ie({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(o){let{parser:l,funcName:c}=o;l.consumeSpaces();const h=l.fetch();if(sc[h.text])return(c==="\\global"||c==="\\\\globallong")&&(h.text=sc[h.text]),be(l.parseFunction(),"internal");throw new s("Invalid token after macro prefix",h)}}),ie({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){let{parser:l,funcName:c}=o,h=l.gullet.popToken();const m=h.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(m))throw new s("Expected a control sequence",h);let y=0,w;const k=[[]];for(;l.gullet.future().text!=="{";)if(h=l.gullet.popToken(),h.text==="#"){if(l.gullet.future().text==="{"){w=l.gullet.future(),k[y].push("{");break}if(h=l.gullet.popToken(),!/^[1-9]$/.test(h.text))throw new s('Invalid argument number "'+h.text+'"');if(parseInt(h.text)!==y+1)throw new s('Argument number "'+h.text+'" out of order');y++,k.push([])}else{if(h.text==="EOF")throw new s("Expected a macro definition");k[y].push(h.text)}let{tokens:_}=l.gullet.consumeArg();return w&&_.unshift(w),(c==="\\edef"||c==="\\xdef")&&(_=l.gullet.expandTokens(_),_.reverse()),l.gullet.macros.set(m,{tokens:_,numArgs:y,delimiters:k},c===sc[c]),{type:"internal",mode:l.mode}}}),ie({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){let{parser:l,funcName:c}=o;const h=ad(l.gullet.popToken());l.gullet.consumeSpaces();const m=Ly(l);return ld(l,h,m,c==="\\\\globallet"),{type:"internal",mode:l.mode}}}),ie({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o){let{parser:l,funcName:c}=o;const h=ad(l.gullet.popToken()),m=l.gullet.popToken(),y=l.gullet.popToken();return ld(l,h,y,c==="\\\\globalfuture"),l.gullet.pushToken(y),l.gullet.pushToken(m),{type:"internal",mode:l.mode}}});const Ea=function(o,l,c){const h=nt.math[o]&&nt.math[o].replace,m=j0(h||o,l,c);if(!m)throw new Error("Unsupported symbol "+o+" and font size "+l+".");return m},ac=function(o,l,c,h){const m=c.havingBaseStyle(l),y=B.makeSpan(h.concat(m.sizingClasses(c)),[o],c),w=m.sizeMultiplier/c.sizeMultiplier;return y.height*=w,y.depth*=w,y.maxFontSize=m.sizeMultiplier,y},od=function(o,l,c){const h=l.havingBaseStyle(c),m=(1-l.sizeMultiplier/h.sizeMultiplier)*l.fontMetrics().axisHeight;o.classes.push("delimcenter"),o.style.top=ee(m),o.height-=m,o.depth+=m},Ry=function(o,l,c,h,m,y){const w=B.makeSymbol(o,"Main-Regular",m,h),k=ac(w,l,h,y);return c&&od(k,h,l),k},Fy=function(o,l,c,h){return B.makeSymbol(o,"Size"+l+"-Regular",c,h)},ud=function(o,l,c,h,m,y){const w=Fy(o,l,m,h),k=ac(B.makeSpan(["delimsizing","size"+l],[w],h),K.TEXT,h,y);return c&&od(k,h,K.TEXT),k},lc=function(o,l,c){let h;return l==="Size1-Regular"?h="delim-size1":h="delim-size4",{type:"elem",elem:B.makeSpan(["delimsizinginner",h],[B.makeSpan([],[B.makeSymbol(o,l,c)])])}},oc=function(o,l,c){const h=di["Size4-Regular"][o.charCodeAt(0)]?di["Size4-Regular"][o.charCodeAt(0)][4]:di["Size1-Regular"][o.charCodeAt(0)][4],m=new dn("inner",Z6(o,Math.round(1e3*l))),y=new Oi([m],{width:ee(h),height:ee(l),style:"width:"+ee(h),viewBox:"0 0 "+1e3*h+" "+Math.round(1e3*l),preserveAspectRatio:"xMinYMin"}),w=B.makeSvgSpan([],[y],c);return w.height=l,w.style.height=ee(l),w.style.width=ee(h),{type:"elem",elem:w}},uc=.008,go={type:"kern",size:-1*uc},By=["|","\\lvert","\\rvert","\\vert"],Vy=["\\|","\\lVert","\\rVert","\\Vert"],cd=function(o,l,c,h,m,y){let w,k,_,C,P="",F=0;w=_=C=o,k=null;let V="Size1-Regular";o==="\\uparrow"?_=C="":o==="\\Uparrow"?_=C="":o==="\\downarrow"?w=_="":o==="\\Downarrow"?w=_="":o==="\\updownarrow"?(w="\\uparrow",_="",C="\\downarrow"):o==="\\Updownarrow"?(w="\\Uparrow",_="",C="\\Downarrow"):By.includes(o)?(_="",P="vert",F=333):Vy.includes(o)?(_="",P="doublevert",F=556):o==="["||o==="\\lbrack"?(w="",_="",C="",V="Size4-Regular",P="lbrack",F=667):o==="]"||o==="\\rbrack"?(w="",_="",C="",V="Size4-Regular",P="rbrack",F=667):o==="\\lfloor"||o===""?(_=w="",C="",V="Size4-Regular",P="lfloor",F=667):o==="\\lceil"||o===""?(w="",_=C="",V="Size4-Regular",P="lceil",F=667):o==="\\rfloor"||o===""?(_=w="",C="",V="Size4-Regular",P="rfloor",F=667):o==="\\rceil"||o===""?(w="",_=C="",V="Size4-Regular",P="rceil",F=667):o==="("||o==="\\lparen"?(w="",_="",C="",V="Size4-Regular",P="lparen",F=875):o===")"||o==="\\rparen"?(w="",_="",C="",V="Size4-Regular",P="rparen",F=875):o==="\\{"||o==="\\lbrace"?(w="",k="",C="",_="",V="Size4-Regular"):o==="\\}"||o==="\\rbrace"?(w="",k="",C="",_="",V="Size4-Regular"):o==="\\lgroup"||o===""?(w="",C="",_="",V="Size4-Regular"):o==="\\rgroup"||o===""?(w="",C="",_="",V="Size4-Regular"):o==="\\lmoustache"||o===""?(w="",C="",_="",V="Size4-Regular"):(o==="\\rmoustache"||o==="")&&(w="",C="",_="",V="Size4-Regular");const j=Ea(w,V,m),se=j.height+j.depth,fe=Ea(_,V,m),Te=fe.height+fe.depth,Ne=Ea(C,V,m),Me=Ne.height+Ne.depth;let De=0,Ue=1;if(k!==null){const pt=Ea(k,V,m);De=pt.height+pt.depth,Ue=2}const ir=se+Me+De,Et=Math.max(0,Math.ceil((l-ir)/(Ue*Te))),Rr=ir+Et*Ue*Te;let As=h.fontMetrics().axisHeight;c&&(As*=h.sizeMultiplier);const Ie=Rr/2-As,qe=[];if(P.length>0){const pt=Rr-se-Me,at=Math.round(Rr*1e3),Fr=Q6(P,Math.round(pt*1e3)),m8=new dn(P,Fr),eg=(F/1e3).toFixed(3)+"em",tg=(at/1e3).toFixed(3)+"em",d8=new Oi([m8],{width:eg,height:tg,viewBox:"0 0 "+F+" "+at}),wo=B.makeSvgSpan([],[d8],h);wo.height=at/1e3,wo.style.width=eg,wo.style.height=tg,qe.push({type:"elem",elem:wo})}else{if(qe.push(lc(C,V,m)),qe.push(go),k===null){const pt=Rr-se-Me+2*uc;qe.push(oc(_,pt,h))}else{const pt=(Rr-se-Me-De)/2+2*uc;qe.push(oc(_,pt,h)),qe.push(go),qe.push(lc(k,V,m)),qe.push(go),qe.push(oc(_,pt,h))}qe.push(go),qe.push(lc(w,V,m))}const Ze=h.havingBaseStyle(K.TEXT),Je=B.makeVList({positionType:"bottom",positionData:Ie,children:qe},Ze);return ac(B.makeSpan(["delimsizing","mult"],[Je],Ze),K.TEXT,h,y)},cc=80,fc=.08,hc=function(o,l,c,h,m){const y=W6(o,h,c),w=new dn(o,y),k=new Oi([w],{width:"400em",height:ee(l),viewBox:"0 0 400000 "+c,preserveAspectRatio:"xMinYMin slice"});return B.makeSvgSpan(["hide-tail"],[k],m)},jy=function(o,l){const c=l.havingBaseSizing(),h=md("\\surd",o*c.sizeMultiplier,pd,c);let m=c.sizeMultiplier;const y=Math.max(0,l.minRuleThickness-l.fontMetrics().sqrtRuleThickness);let w,k=0,_=0,C=0,P;return h.type==="small"?(C=1e3+1e3*y+cc,o<1?m=1:o<1.4&&(m=.7),k=(1+y+fc)/m,_=(1+y)/m,w=hc("sqrtMain",k,C,y,l),w.style.minWidth="0.853em",P=.833/m):h.type==="large"?(C=(1e3+cc)*Aa[h.size],_=(Aa[h.size]+y)/m,k=(Aa[h.size]+y+fc)/m,w=hc("sqrtSize"+h.size,k,C,y,l),w.style.minWidth="1.02em",P=1/m):(k=o+y+fc,_=o+y,C=Math.floor(1e3*o+y)+cc,w=hc("sqrtTall",k,C,y,l),w.style.minWidth="0.742em",P=1.056),w.height=_,w.style.height=ee(k),{span:w,advanceWidth:P,ruleWidth:(l.fontMetrics().sqrtRuleThickness+y)*m}},fd=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Hy=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],hd=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Aa=[0,1.2,1.8,2.4,3],Uy=function(o,l,c,h,m){if(o==="<"||o==="\\lt"||o===""?o="\\langle":(o===">"||o==="\\gt"||o==="")&&(o="\\rangle"),fd.includes(o)||hd.includes(o))return ud(o,l,!1,c,h,m);if(Hy.includes(o))return cd(o,Aa[l],!1,c,h,m);throw new s("Illegal delimiter: '"+o+"'")},Gy=[{type:"small",style:K.SCRIPTSCRIPT},{type:"small",style:K.SCRIPT},{type:"small",style:K.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Wy=[{type:"small",style:K.SCRIPTSCRIPT},{type:"small",style:K.SCRIPT},{type:"small",style:K.TEXT},{type:"stack"}],pd=[{type:"small",style:K.SCRIPTSCRIPT},{type:"small",style:K.SCRIPT},{type:"small",style:K.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Zy=function(o){if(o.type==="small")return"Main-Regular";if(o.type==="large")return"Size"+o.size+"-Regular";if(o.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+o.type+"' here.")},md=function(o,l,c,h){const m=Math.min(2,3-h.style.size);for(let y=m;y<c.length&&c[y].type!=="stack";y++){const w=Ea(o,Zy(c[y]),"math");let k=w.height+w.depth;if(c[y].type==="small"){const _=h.havingBaseStyle(c[y].style);k*=_.sizeMultiplier}if(k>l)return c[y]}return c[c.length-1]},dd=function(o,l,c,h,m,y){o==="<"||o==="\\lt"||o===""?o="\\langle":(o===">"||o==="\\gt"||o==="")&&(o="\\rangle");let w;hd.includes(o)?w=Gy:fd.includes(o)?w=pd:w=Wy;const k=md(o,l,w,h);return k.type==="small"?Ry(o,k.style,c,h,m,y):k.type==="large"?ud(o,k.size,c,h,m,y):cd(o,l,c,h,m,y)};var Bi={sqrtImage:jy,sizedDelim:Uy,sizeToMaxHeight:Aa,customSizedDelim:dd,leftRightDelim:function(o,l,c,h,m,y){const w=h.fontMetrics().axisHeight*h.sizeMultiplier,k=901,_=5/h.fontMetrics().ptPerEm,C=Math.max(l-w,c+w),P=Math.max(C/500*k,2*C-_);return dd(o,P,!0,h,m,y)}};const gd={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Qy=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function yo(o,l){const c=ho(o);if(c&&Qy.includes(c.text))return c;throw c?new s("Invalid delimiter '"+c.text+"' after '"+l.funcName+"'",o):new s("Invalid delimiter type '"+o.type+"'",o)}ie({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(o,l)=>{const c=yo(l[0],o);return{type:"delimsizing",mode:o.parser.mode,size:gd[o.funcName].size,mclass:gd[o.funcName].mclass,delim:c.text}},htmlBuilder:(o,l)=>o.delim==="."?B.makeSpan([o.mclass]):Bi.sizedDelim(o.delim,o.size,l,o.mode,[o.mclass]),mathmlBuilder:o=>{const l=[];o.delim!=="."&&l.push(Lr(o.delim,o.mode));const c=new Z.MathNode("mo",l);o.mclass==="mopen"||o.mclass==="mclose"?c.setAttribute("fence","true"):c.setAttribute("fence","false"),c.setAttribute("stretchy","true");const h=ee(Bi.sizeToMaxHeight[o.size]);return c.setAttribute("minsize",h),c.setAttribute("maxsize",h),c}});function yd(o){if(!o.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ie({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(o,l)=>{const c=o.parser.gullet.macros.get("\\current@color");if(c&&typeof c!="string")throw new s("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:o.parser.mode,delim:yo(l[0],o).text,color:c}}}),ie({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(o,l)=>{const c=yo(l[0],o),h=o.parser;++h.leftrightDepth;const m=h.parseExpression(!1);--h.leftrightDepth,h.expect("\\right",!1);const y=be(h.parseFunction(),"leftright-right");return{type:"leftright",mode:h.mode,body:m,left:c.text,right:y.delim,rightColor:y.color}},htmlBuilder:(o,l)=>{yd(o);const c=Mt(o.body,l,!0,["mopen","mclose"]);let h=0,m=0,y=!1;for(let _=0;_<c.length;_++)c[_].isMiddle?y=!0:(h=Math.max(c[_].height,h),m=Math.max(c[_].depth,m));h*=l.sizeMultiplier,m*=l.sizeMultiplier;let w;if(o.left==="."?w=Ma(l,["mopen"]):w=Bi.leftRightDelim(o.left,h,m,l,o.mode,["mopen"]),c.unshift(w),y)for(let _=1;_<c.length;_++){const P=c[_].isMiddle;P&&(c[_]=Bi.leftRightDelim(P.delim,h,m,P.options,o.mode,[]))}let k;if(o.right===".")k=Ma(l,["mclose"]);else{const _=o.rightColor?l.withColor(o.rightColor):l;k=Bi.leftRightDelim(o.right,h,m,_,o.mode,["mclose"])}return c.push(k),B.makeSpan(["minner"],c,l)},mathmlBuilder:(o,l)=>{yd(o);const c=fr(o.body,l);if(o.left!=="."){const h=new Z.MathNode("mo",[Lr(o.left,o.mode)]);h.setAttribute("fence","true"),c.unshift(h)}if(o.right!=="."){const h=new Z.MathNode("mo",[Lr(o.right,o.mode)]);h.setAttribute("fence","true"),o.rightColor&&h.setAttribute("mathcolor",o.rightColor),c.push(h)}return ec(c)}}),ie({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(o,l)=>{const c=yo(l[0],o);if(!o.parser.leftrightDepth)throw new s("\\middle without preceding \\left",c);return{type:"middle",mode:o.parser.mode,delim:c.text}},htmlBuilder:(o,l)=>{let c;if(o.delim===".")c=Ma(l,[]);else{c=Bi.sizedDelim(o.delim,1,l,o.mode,[]);const h={delim:o.delim,options:l};c.isMiddle=h}return c},mathmlBuilder:(o,l)=>{const c=o.delim==="\\vert"||o.delim==="|"?Lr("|","text"):Lr(o.delim,o.mode),h=new Z.MathNode("mo",[c]);return h.setAttribute("fence","true"),h.setAttribute("lspace","0.05em"),h.setAttribute("rspace","0.05em"),h}});const pc=(o,l)=>{const c=B.wrapFragment(Ae(o.body,l),l),h=o.label.slice(1);let m=l.sizeMultiplier,y,w=0;const k=R.isCharacterBox(o.body);if(h==="sout")y=B.makeSpan(["stretchy","sout"]),y.height=l.fontMetrics().defaultRuleThickness/m,w=-.5*l.fontMetrics().xHeight;else if(h==="phase"){const C=it({number:.6,unit:"pt"},l),P=it({number:.35,unit:"ex"},l),F=l.havingBaseSizing();m=m/F.sizeMultiplier;const V=c.height+c.depth+C+P;c.style.paddingLeft=ee(V/2+C);const j=Math.floor(1e3*V*m),se=U6(j),fe=new Oi([new dn("phase",se)],{width:"400em",height:ee(j/1e3),viewBox:"0 0 400000 "+j,preserveAspectRatio:"xMinYMin slice"});y=B.makeSvgSpan(["hide-tail"],[fe],l),y.style.height=ee(V),w=c.depth+C+P}else{/cancel/.test(h)?k||c.classes.push("cancel-pad"):h==="angl"?c.classes.push("anglpad"):c.classes.push("boxpad");let C=0,P=0,F=0;/box/.test(h)?(F=Math.max(l.fontMetrics().fboxrule,l.minRuleThickness),C=l.fontMetrics().fboxsep+(h==="colorbox"?0:F),P=C):h==="angl"?(F=Math.max(l.fontMetrics().defaultRuleThickness,l.minRuleThickness),C=4*F,P=Math.max(0,.25-c.depth)):(C=k?.2:0,P=C),y=Fi.encloseSpan(c,h,C,P,l),/fbox|boxed|fcolorbox/.test(h)?(y.style.borderStyle="solid",y.style.borderWidth=ee(F)):h==="angl"&&F!==.049&&(y.style.borderTopWidth=ee(F),y.style.borderRightWidth=ee(F)),w=c.depth+P,o.backgroundColor&&(y.style.backgroundColor=o.backgroundColor,o.borderColor&&(y.style.borderColor=o.borderColor))}let _;if(o.backgroundColor)_=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:w},{type:"elem",elem:c,shift:0}]},l);else{const C=/cancel|phase/.test(h)?["svg-align"]:[];_=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:y,shift:w,wrapperClasses:C}]},l)}return/cancel/.test(h)&&(_.height=c.height,_.depth=c.depth),/cancel/.test(h)&&!k?B.makeSpan(["mord","cancel-lap"],[_],l):B.makeSpan(["mord"],[_],l)},mc=(o,l)=>{let c=0;const h=new Z.MathNode(o.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Be(o.body,l)]);switch(o.label){case"\\cancel":h.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":h.setAttribute("notation","downdiagonalstrike");break;case"\\phase":h.setAttribute("notation","phasorangle");break;case"\\sout":h.setAttribute("notation","horizontalstrike");break;case"\\fbox":h.setAttribute("notation","box");break;case"\\angl":h.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(c=l.fontMetrics().fboxsep*l.fontMetrics().ptPerEm,h.setAttribute("width","+"+2*c+"pt"),h.setAttribute("height","+"+2*c+"pt"),h.setAttribute("lspace",c+"pt"),h.setAttribute("voffset",c+"pt"),o.label==="\\fcolorbox"){const m=Math.max(l.fontMetrics().fboxrule,l.minRuleThickness);h.setAttribute("style","border: "+m+"em solid "+String(o.borderColor))}break;case"\\xcancel":h.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return o.backgroundColor&&h.setAttribute("mathbackground",o.backgroundColor),h};ie({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(o,l,c){let{parser:h,funcName:m}=o;const y=be(l[0],"color-token").color,w=l[1];return{type:"enclose",mode:h.mode,label:m,backgroundColor:y,body:w}},htmlBuilder:pc,mathmlBuilder:mc}),ie({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(o,l,c){let{parser:h,funcName:m}=o;const y=be(l[0],"color-token").color,w=be(l[1],"color-token").color,k=l[2];return{type:"enclose",mode:h.mode,label:m,backgroundColor:w,borderColor:y,body:k}},htmlBuilder:pc,mathmlBuilder:mc}),ie({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(o,l){let{parser:c}=o;return{type:"enclose",mode:c.mode,label:"\\fbox",body:l[0]}}}),ie({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(o,l){let{parser:c,funcName:h}=o;const m=l[0];return{type:"enclose",mode:c.mode,label:h,body:m}},htmlBuilder:pc,mathmlBuilder:mc}),ie({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(o,l){let{parser:c}=o;return{type:"enclose",mode:c.mode,label:"\\angl",body:l[0]}}});const vd={};function yi(o){let{type:l,names:c,props:h,handler:m,htmlBuilder:y,mathmlBuilder:w}=o;const k={type:l,numArgs:h.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:m};for(let _=0;_<c.length;++_)vd[c[_]]=k;y&&(oo[l]=y),w&&(uo[l]=w)}const bd={};function S(o,l){bd[o]=l}class hr{constructor(l,c,h){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=l,this.start=c,this.end=h}static range(l,c){return c?!l||!l.loc||!c.loc||l.loc.lexer!==c.loc.lexer?null:new hr(l.loc.lexer,l.loc.start,c.loc.end):l&&l.loc}}class Sr{constructor(l,c){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=l,this.loc=c}range(l,c){return new Sr(c,hr.range(this,l))}}function xd(o){const l=[];o.consumeSpaces();let c=o.fetch().text;for(c==="\\relax"&&(o.consume(),o.consumeSpaces(),c=o.fetch().text);c==="\\hline"||c==="\\hdashline";)o.consume(),l.push(c==="\\hdashline"),o.consumeSpaces(),c=o.fetch().text;return l}const vo=o=>{if(!o.parser.settings.displayMode)throw new s("{"+o.envName+"} can be used only in display mode.")};function dc(o){if(o.indexOf("ed")===-1)return o.indexOf("*")===-1}function yn(o,l,c){let{hskipBeforeAndAfter:h,addJot:m,cols:y,arraystretch:w,colSeparationType:k,autoTag:_,singleRow:C,emptySingleRow:P,maxNumCols:F,leqno:V}=l;if(o.gullet.beginGroup(),C||o.gullet.macros.set("\\cr","\\\\\\relax"),!w){const Ue=o.gullet.expandMacroAsText("\\arraystretch");if(Ue==null)w=1;else if(w=parseFloat(Ue),!w||w<0)throw new s("Invalid \\arraystretch: "+Ue)}o.gullet.beginGroup();let j=[];const se=[j],fe=[],Te=[],Ne=_!=null?[]:void 0;function Me(){_&&o.gullet.macros.set("\\@eqnsw","1",!0)}function De(){Ne&&(o.gullet.macros.get("\\df@tag")?(Ne.push(o.subparse([new Sr("\\df@tag")])),o.gullet.macros.set("\\df@tag",void 0,!0)):Ne.push(!!_&&o.gullet.macros.get("\\@eqnsw")==="1"))}for(Me(),Te.push(xd(o));;){let Ue=o.parseExpression(!1,C?"\\end":"\\\\");o.gullet.endGroup(),o.gullet.beginGroup(),Ue={type:"ordgroup",mode:o.mode,body:Ue},c&&(Ue={type:"styling",mode:o.mode,style:c,body:[Ue]}),j.push(Ue);const ir=o.fetch().text;if(ir==="&"){if(F&&j.length===F){if(C||k)throw new s("Too many tab characters: &",o.nextToken);o.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}o.consume()}else if(ir==="\\end"){De(),j.length===1&&Ue.type==="styling"&&Ue.body[0].body.length===0&&(se.length>1||!P)&&se.pop(),Te.length<se.length+1&&Te.push([]);break}else if(ir==="\\\\"){o.consume();let Et;o.gullet.future().text!==" "&&(Et=o.parseSizeGroup(!0)),fe.push(Et?Et.value:null),De(),Te.push(xd(o)),j=[],se.push(j),Me()}else throw new s("Expected & or \\\\ or \\cr or \\end",o.nextToken)}return o.gullet.endGroup(),o.gullet.endGroup(),{type:"array",mode:o.mode,addJot:m,arraystretch:w,body:se,cols:y,rowGaps:fe,hskipBeforeAndAfter:h,hLinesBeforeRow:Te,colSeparationType:k,tags:Ne,leqno:V}}function gc(o){return o.slice(0,1)==="d"?"display":"text"}const vi=function(o,l){let c,h;const m=o.body.length,y=o.hLinesBeforeRow;let w=0,k=new Array(m);const _=[],C=Math.max(l.fontMetrics().arrayRuleWidth,l.minRuleThickness),P=1/l.fontMetrics().ptPerEm;let F=5*P;o.colSeparationType&&o.colSeparationType==="small"&&(F=.2778*(l.havingStyle(K.SCRIPT).sizeMultiplier/l.sizeMultiplier));const V=o.colSeparationType==="CD"?it({number:3,unit:"ex"},l):12*P,j=3*P,se=o.arraystretch*V,fe=.7*se,Te=.3*se;let Ne=0;function Me(Ie){for(let qe=0;qe<Ie.length;++qe)qe>0&&(Ne+=.25),_.push({pos:Ne,isDashed:Ie[qe]})}for(Me(y[0]),c=0;c<o.body.length;++c){const Ie=o.body[c];let qe=fe,Ze=Te;w<Ie.length&&(w=Ie.length);const Je=new Array(Ie.length);for(h=0;h<Ie.length;++h){const Fr=Ae(Ie[h],l);Ze<Fr.depth&&(Ze=Fr.depth),qe<Fr.height&&(qe=Fr.height),Je[h]=Fr}const pt=o.rowGaps[c];let at=0;pt&&(at=it(pt,l),at>0&&(at+=Te,Ze<at&&(Ze=at),at=0)),o.addJot&&(Ze+=j),Je.height=qe,Je.depth=Ze,Ne+=qe,Je.pos=Ne,Ne+=Ze+at,k[c]=Je,Me(y[c+1])}const De=Ne/2+l.fontMetrics().axisHeight,Ue=o.cols||[],ir=[];let Et,Rr;const As=[];if(o.tags&&o.tags.some(Ie=>Ie))for(c=0;c<m;++c){const Ie=k[c],qe=Ie.pos-De,Ze=o.tags[c];let Je;Ze===!0?Je=B.makeSpan(["eqn-num"],[],l):Ze===!1?Je=B.makeSpan([],[],l):Je=B.makeSpan([],Mt(Ze,l,!0),l),Je.depth=Ie.depth,Je.height=Ie.height,As.push({type:"elem",elem:Je,shift:qe})}for(h=0,Rr=0;h<w||Rr<Ue.length;++h,++Rr){let Ie=Ue[Rr]||{},qe=!0;for(;Ie.type==="separator";){if(qe||(Et=B.makeSpan(["arraycolsep"],[]),Et.style.width=ee(l.fontMetrics().doubleRuleSep),ir.push(Et)),Ie.separator==="|"||Ie.separator===":"){const pt=Ie.separator==="|"?"solid":"dashed",at=B.makeSpan(["vertical-separator"],[],l);at.style.height=ee(Ne),at.style.borderRightWidth=ee(C),at.style.borderRightStyle=pt,at.style.margin="0 "+ee(-C/2);const Fr=Ne-De;Fr&&(at.style.verticalAlign=ee(-Fr)),ir.push(at)}else throw new s("Invalid separator type: "+Ie.separator);Rr++,Ie=Ue[Rr]||{},qe=!1}if(h>=w)continue;let Ze;(h>0||o.hskipBeforeAndAfter)&&(Ze=R.deflt(Ie.pregap,F),Ze!==0&&(Et=B.makeSpan(["arraycolsep"],[]),Et.style.width=ee(Ze),ir.push(Et)));let Je=[];for(c=0;c<m;++c){const pt=k[c],at=pt[h];if(!at)continue;const Fr=pt.pos-De;at.depth=pt.depth,at.height=pt.height,Je.push({type:"elem",elem:at,shift:Fr})}Je=B.makeVList({positionType:"individualShift",children:Je},l),Je=B.makeSpan(["col-align-"+(Ie.align||"c")],[Je]),ir.push(Je),(h<w-1||o.hskipBeforeAndAfter)&&(Ze=R.deflt(Ie.postgap,F),Ze!==0&&(Et=B.makeSpan(["arraycolsep"],[]),Et.style.width=ee(Ze),ir.push(Et)))}if(k=B.makeSpan(["mtable"],ir),_.length>0){const Ie=B.makeLineSpan("hline",l,C),qe=B.makeLineSpan("hdashline",l,C),Ze=[{type:"elem",elem:k,shift:0}];for(;_.length>0;){const Je=_.pop(),pt=Je.pos-De;Je.isDashed?Ze.push({type:"elem",elem:qe,shift:pt}):Ze.push({type:"elem",elem:Ie,shift:pt})}k=B.makeVList({positionType:"individualShift",children:Ze},l)}if(As.length===0)return B.makeSpan(["mord"],[k],l);{let Ie=B.makeVList({positionType:"individualShift",children:As},l);return Ie=B.makeSpan(["tag"],[Ie],l),B.makeFragment([k,Ie])}},Yy={c:"center ",l:"left ",r:"right "},bi=function(o,l){const c=[],h=new Z.MathNode("mtd",[],["mtr-glue"]),m=new Z.MathNode("mtd",[],["mml-eqn-num"]);for(let F=0;F<o.body.length;F++){const V=o.body[F],j=[];for(let se=0;se<V.length;se++)j.push(new Z.MathNode("mtd",[Be(V[se],l)]));o.tags&&o.tags[F]&&(j.unshift(h),j.push(h),o.leqno?j.unshift(m):j.push(m)),c.push(new Z.MathNode("mtr",j))}let y=new Z.MathNode("mtable",c);const w=o.arraystretch===.5?.1:.16+o.arraystretch-1+(o.addJot?.09:0);y.setAttribute("rowspacing",ee(w));let k="",_="";if(o.cols&&o.cols.length>0){const F=o.cols;let V="",j=!1,se=0,fe=F.length;F[0].type==="separator"&&(k+="top ",se=1),F[F.length-1].type==="separator"&&(k+="bottom ",fe-=1);for(let Te=se;Te<fe;Te++)F[Te].type==="align"?(_+=Yy[F[Te].align],j&&(V+="none "),j=!0):F[Te].type==="separator"&&j&&(V+=F[Te].separator==="|"?"solid ":"dashed ",j=!1);y.setAttribute("columnalign",_.trim()),/[sd]/.test(V)&&y.setAttribute("columnlines",V.trim())}if(o.colSeparationType==="align"){const F=o.cols||[];let V="";for(let j=1;j<F.length;j++)V+=j%2?"0em ":"1em ";y.setAttribute("columnspacing",V.trim())}else o.colSeparationType==="alignat"||o.colSeparationType==="gather"?y.setAttribute("columnspacing","0em"):o.colSeparationType==="small"?y.setAttribute("columnspacing","0.2778em"):o.colSeparationType==="CD"?y.setAttribute("columnspacing","0.5em"):y.setAttribute("columnspacing","1em");let C="";const P=o.hLinesBeforeRow;k+=P[0].length>0?"left ":"",k+=P[P.length-1].length>0?"right ":"";for(let F=1;F<P.length-1;F++)C+=P[F].length===0?"none ":P[F][0]?"dashed ":"solid ";return/[sd]/.test(C)&&y.setAttribute("rowlines",C.trim()),k!==""&&(y=new Z.MathNode("menclose",[y]),y.setAttribute("notation",k.trim())),o.arraystretch&&o.arraystretch<1&&(y=new Z.MathNode("mstyle",[y]),y.setAttribute("scriptlevel","1")),y},wd=function(o,l){o.envName.indexOf("ed")===-1&&vo(o);const c=[],h=o.envName.indexOf("at")>-1?"alignat":"align",m=o.envName==="split",y=yn(o.parser,{cols:c,addJot:!0,autoTag:m?void 0:dc(o.envName),emptySingleRow:!0,colSeparationType:h,maxNumCols:m?2:void 0,leqno:o.parser.settings.leqno},"display");let w,k=0;const _={type:"ordgroup",mode:o.mode,body:[]};if(l[0]&&l[0].type==="ordgroup"){let P="";for(let F=0;F<l[0].body.length;F++){const V=be(l[0].body[F],"textord");P+=V.text}w=Number(P),k=w*2}const C=!k;y.body.forEach(function(P){for(let F=1;F<P.length;F+=2){const V=be(P[F],"styling");be(V.body[0],"ordgroup").body.unshift(_)}if(C)k<P.length&&(k=P.length);else{const F=P.length/2;if(w<F)throw new s("Too many math in a row: "+("expected "+w+", but got "+F),P[0])}});for(let P=0;P<k;++P){let F="r",V=0;P%2===1?F="l":P>0&&C&&(V=1),c[P]={type:"align",align:F,pregap:V,postgap:0}}return y.colSeparationType=C?"align":"alignat",y};yi({type:"array",names:["array","darray"],props:{numArgs:1},handler(o,l){const m=(ho(l[0])?[l[0]]:be(l[0],"ordgroup").body).map(function(w){const _=ic(w).text;if("lcr".indexOf(_)!==-1)return{type:"align",align:_};if(_==="|")return{type:"separator",separator:"|"};if(_===":")return{type:"separator",separator:":"};throw new s("Unknown column alignment: "+_,w)}),y={cols:m,hskipBeforeAndAfter:!0,maxNumCols:m.length};return yn(o.parser,y,gc(o.envName))},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(o){const l={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[o.envName.replace("*","")];let c="c";const h={hskipBeforeAndAfter:!1,cols:[{type:"align",align:c}]};if(o.envName.charAt(o.envName.length-1)==="*"){const w=o.parser;if(w.consumeSpaces(),w.fetch().text==="["){if(w.consume(),w.consumeSpaces(),c=w.fetch().text,"lcr".indexOf(c)===-1)throw new s("Expected l or c or r",w.nextToken);w.consume(),w.consumeSpaces(),w.expect("]"),w.consume(),h.cols=[{type:"align",align:c}]}}const m=yn(o.parser,h,gc(o.envName)),y=Math.max(0,...m.body.map(w=>w.length));return m.cols=new Array(y).fill({type:"align",align:c}),l?{type:"leftright",mode:o.mode,body:[m],left:l[0],right:l[1],rightColor:void 0}:m},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(o){const l={arraystretch:.5},c=yn(o.parser,l,"script");return c.colSeparationType="small",c},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["subarray"],props:{numArgs:1},handler(o,l){const m=(ho(l[0])?[l[0]]:be(l[0],"ordgroup").body).map(function(w){const _=ic(w).text;if("lc".indexOf(_)!==-1)return{type:"align",align:_};throw new s("Unknown column alignment: "+_,w)});if(m.length>1)throw new s("{subarray} can contain only one column");let y={cols:m,hskipBeforeAndAfter:!1,arraystretch:.5};if(y=yn(o.parser,y,"script"),y.body.length>0&&y.body[0].length>1)throw new s("{subarray} can contain only one column");return y},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(o){const l={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},c=yn(o.parser,l,gc(o.envName));return{type:"leftright",mode:o.mode,body:[c],left:o.envName.indexOf("r")>-1?".":"\\{",right:o.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:wd,htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(o){["gather","gather*"].includes(o.envName)&&vo(o);const l={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:dc(o.envName),emptySingleRow:!0,leqno:o.parser.settings.leqno};return yn(o.parser,l,"display")},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:wd,htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(o){vo(o);const l={autoTag:dc(o.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:o.parser.settings.leqno};return yn(o.parser,l,"display")},htmlBuilder:vi,mathmlBuilder:bi}),yi({type:"array",names:["CD"],props:{numArgs:0},handler(o){return vo(o),qy(o.parser)},htmlBuilder:vi,mathmlBuilder:bi}),S("\\nonumber","\\gdef\\@eqnsw{0}"),S("\\notag","\\nonumber"),ie({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(o,l){throw new s(o.funcName+" valid only within array environment")}});var Nd=vd;ie({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(o,l){let{parser:c,funcName:h}=o;const m=l[0];if(m.type!=="ordgroup")throw new s("Invalid environment name",m);let y="";for(let w=0;w<m.body.length;++w)y+=be(m.body[w],"textord").text;if(h==="\\begin"){if(!Nd.hasOwnProperty(y))throw new s("No such environment: "+y,m);const w=Nd[y],{args:k,optArgs:_}=c.parseArguments("\\begin{"+y+"}",w),C={mode:c.mode,envName:y,parser:c},P=w.handler(C,k,_);c.expect("\\end",!1);const F=c.nextToken,V=be(c.parseFunction(),"environment");if(V.name!==y)throw new s("Mismatch: \\begin{"+y+"} matched by \\end{"+V.name+"}",F);return P}return{type:"environment",mode:c.mode,name:y,nameGroup:m}}});const kd=(o,l)=>{const c=o.font,h=l.withFont(c);return Ae(o.body,h)},Sd=(o,l)=>{const c=o.font,h=l.withFont(c);return Be(o.body,h)},_d={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ie({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=co(l[0]);let y=h;return y in _d&&(y=_d[y]),{type:"font",mode:c.mode,font:y.slice(1),body:m}},htmlBuilder:kd,mathmlBuilder:Sd}),ie({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(o,l)=>{let{parser:c}=o;const h=l[0],m=R.isCharacterBox(h);return{type:"mclass",mode:c.mode,mclass:mo(h),body:[{type:"font",mode:c.mode,font:"boldsymbol",body:h}],isCharacterBox:m}}}),ie({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(o,l)=>{let{parser:c,funcName:h,breakOnTokenText:m}=o;const{mode:y}=c,w=c.parseExpression(!0,m),k="math"+h.slice(1);return{type:"font",mode:y,font:k,body:{type:"ordgroup",mode:c.mode,body:w}}},htmlBuilder:kd,mathmlBuilder:Sd});const Td=(o,l)=>{let c=l;return o==="display"?c=c.id>=K.SCRIPT.id?c.text():K.DISPLAY:o==="text"&&c.size===K.DISPLAY.size?c=K.TEXT:o==="script"?c=K.SCRIPT:o==="scriptscript"&&(c=K.SCRIPTSCRIPT),c},yc=(o,l)=>{const c=Td(o.size,l.style),h=c.fracNum(),m=c.fracDen();let y;y=l.havingStyle(h);const w=Ae(o.numer,y,l);if(o.continued){const Me=8.5/l.fontMetrics().ptPerEm,De=3.5/l.fontMetrics().ptPerEm;w.height=w.height<Me?Me:w.height,w.depth=w.depth<De?De:w.depth}y=l.havingStyle(m);const k=Ae(o.denom,y,l);let _,C,P;o.hasBarLine?(o.barSize?(C=it(o.barSize,l),_=B.makeLineSpan("frac-line",l,C)):_=B.makeLineSpan("frac-line",l),C=_.height,P=_.height):(_=null,C=0,P=l.fontMetrics().defaultRuleThickness);let F,V,j;c.size===K.DISPLAY.size||o.size==="display"?(F=l.fontMetrics().num1,C>0?V=3*P:V=7*P,j=l.fontMetrics().denom1):(C>0?(F=l.fontMetrics().num2,V=P):(F=l.fontMetrics().num3,V=3*P),j=l.fontMetrics().denom2);let se;if(_){const Me=l.fontMetrics().axisHeight;F-w.depth-(Me+.5*C)<V&&(F+=V-(F-w.depth-(Me+.5*C))),Me-.5*C-(k.height-j)<V&&(j+=V-(Me-.5*C-(k.height-j)));const De=-(Me-.5*C);se=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:k,shift:j},{type:"elem",elem:_,shift:De},{type:"elem",elem:w,shift:-F}]},l)}else{const Me=F-w.depth-(k.height-j);Me<V&&(F+=.5*(V-Me),j+=.5*(V-Me)),se=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:k,shift:j},{type:"elem",elem:w,shift:-F}]},l)}y=l.havingStyle(c),se.height*=y.sizeMultiplier/l.sizeMultiplier,se.depth*=y.sizeMultiplier/l.sizeMultiplier;let fe;c.size===K.DISPLAY.size?fe=l.fontMetrics().delim1:c.size===K.SCRIPTSCRIPT.size?fe=l.havingStyle(K.SCRIPT).fontMetrics().delim2:fe=l.fontMetrics().delim2;let Te,Ne;return o.leftDelim==null?Te=Ma(l,["mopen"]):Te=Bi.customSizedDelim(o.leftDelim,fe,!0,l.havingStyle(c),o.mode,["mopen"]),o.continued?Ne=B.makeSpan([]):o.rightDelim==null?Ne=Ma(l,["mclose"]):Ne=Bi.customSizedDelim(o.rightDelim,fe,!0,l.havingStyle(c),o.mode,["mclose"]),B.makeSpan(["mord"].concat(y.sizingClasses(l)),[Te,B.makeSpan(["mfrac"],[se]),Ne],l)},vc=(o,l)=>{let c=new Z.MathNode("mfrac",[Be(o.numer,l),Be(o.denom,l)]);if(!o.hasBarLine)c.setAttribute("linethickness","0px");else if(o.barSize){const m=it(o.barSize,l);c.setAttribute("linethickness",ee(m))}const h=Td(o.size,l.style);if(h.size!==l.style.size){c=new Z.MathNode("mstyle",[c]);const m=h.size===K.DISPLAY.size?"true":"false";c.setAttribute("displaystyle",m),c.setAttribute("scriptlevel","0")}if(o.leftDelim!=null||o.rightDelim!=null){const m=[];if(o.leftDelim!=null){const y=new Z.MathNode("mo",[new Z.TextNode(o.leftDelim.replace("\\",""))]);y.setAttribute("fence","true"),m.push(y)}if(m.push(c),o.rightDelim!=null){const y=new Z.MathNode("mo",[new Z.TextNode(o.rightDelim.replace("\\",""))]);y.setAttribute("fence","true"),m.push(y)}return ec(m)}return c};ie({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=l[0],y=l[1];let w,k=null,_=null,C="auto";switch(h){case"\\dfrac":case"\\frac":case"\\tfrac":w=!0;break;case"\\\\atopfrac":w=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":w=!1,k="(",_=")";break;case"\\\\bracefrac":w=!1,k="\\{",_="\\}";break;case"\\\\brackfrac":w=!1,k="[",_="]";break;default:throw new Error("Unrecognized genfrac command")}switch(h){case"\\dfrac":case"\\dbinom":C="display";break;case"\\tfrac":case"\\tbinom":C="text";break}return{type:"genfrac",mode:c.mode,continued:!1,numer:m,denom:y,hasBarLine:w,leftDelim:k,rightDelim:_,size:C,barSize:null}},htmlBuilder:yc,mathmlBuilder:vc}),ie({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=l[0],y=l[1];return{type:"genfrac",mode:c.mode,continued:!0,numer:m,denom:y,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),ie({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(o){let{parser:l,funcName:c,token:h}=o,m;switch(c){case"\\over":m="\\frac";break;case"\\choose":m="\\binom";break;case"\\atop":m="\\\\atopfrac";break;case"\\brace":m="\\\\bracefrac";break;case"\\brack":m="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:l.mode,replaceWith:m,token:h}}});const Md=["display","text","script","scriptscript"],Ed=function(o){let l=null;return o.length>0&&(l=o,l=l==="."?null:l),l};ie({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(o,l){let{parser:c}=o;const h=l[4],m=l[5],y=co(l[0]),w=y.type==="atom"&&y.family==="open"?Ed(y.text):null,k=co(l[1]),_=k.type==="atom"&&k.family==="close"?Ed(k.text):null,C=be(l[2],"size");let P,F=null;C.isBlank?P=!0:(F=C.value,P=F.number>0);let V="auto",j=l[3];if(j.type==="ordgroup"){if(j.body.length>0){const se=be(j.body[0],"textord");V=Md[Number(se.text)]}}else j=be(j,"textord"),V=Md[Number(j.text)];return{type:"genfrac",mode:c.mode,numer:h,denom:m,continued:!1,hasBarLine:P,barSize:F,leftDelim:w,rightDelim:_,size:V}},htmlBuilder:yc,mathmlBuilder:vc}),ie({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(o,l){let{parser:c,funcName:h,token:m}=o;return{type:"infix",mode:c.mode,replaceWith:"\\\\abovefrac",size:be(l[0],"size").value,token:m}}}),ie({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=l[0],y=L(be(l[1],"infix").size),w=l[2],k=y.number>0;return{type:"genfrac",mode:c.mode,numer:m,denom:w,continued:!1,hasBarLine:k,barSize:y,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:yc,mathmlBuilder:vc});const Ad=(o,l)=>{const c=l.style;let h,m;o.type==="supsub"?(h=o.sup?Ae(o.sup,l.havingStyle(c.sup()),l):Ae(o.sub,l.havingStyle(c.sub()),l),m=be(o.base,"horizBrace")):m=be(o,"horizBrace");const y=Ae(m.base,l.havingBaseStyle(K.DISPLAY)),w=Fi.svgSpan(m,l);let k;if(m.isOver?(k=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:y},{type:"kern",size:.1},{type:"elem",elem:w}]},l),k.children[0].children[0].children[1].classes.push("svg-align")):(k=B.makeVList({positionType:"bottom",positionData:y.depth+.1+w.height,children:[{type:"elem",elem:w},{type:"kern",size:.1},{type:"elem",elem:y}]},l),k.children[0].children[0].children[0].classes.push("svg-align")),h){const _=B.makeSpan(["mord",m.isOver?"mover":"munder"],[k],l);m.isOver?k=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:_},{type:"kern",size:.2},{type:"elem",elem:h}]},l):k=B.makeVList({positionType:"bottom",positionData:_.depth+.2+h.height+h.depth,children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:_}]},l)}return B.makeSpan(["mord",m.isOver?"mover":"munder"],[k],l)};ie({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(o,l){let{parser:c,funcName:h}=o;return{type:"horizBrace",mode:c.mode,label:h,isOver:/^\\over/.test(h),base:l[0]}},htmlBuilder:Ad,mathmlBuilder:(o,l)=>{const c=Fi.mathMLnode(o.label);return new Z.MathNode(o.isOver?"mover":"munder",[Be(o.base,l),c])}}),ie({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(o,l)=>{let{parser:c}=o;const h=l[1],m=be(l[0],"url").url;return c.settings.isTrusted({command:"\\href",url:m})?{type:"href",mode:c.mode,href:m,body:yt(h)}:c.formatUnsupportedCmd("\\href")},htmlBuilder:(o,l)=>{const c=Mt(o.body,l,!1);return B.makeAnchor(o.href,[],c,l)},mathmlBuilder:(o,l)=>{let c=gn(o.body,l);return c instanceof kr||(c=new kr("mrow",[c])),c.setAttribute("href",o.href),c}}),ie({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(o,l)=>{let{parser:c}=o;const h=be(l[0],"url").url;if(!c.settings.isTrusted({command:"\\url",url:h}))return c.formatUnsupportedCmd("\\url");const m=[];for(let w=0;w<h.length;w++){let k=h[w];k==="~"&&(k="\\textasciitilde"),m.push({type:"textord",mode:"text",text:k})}const y={type:"text",mode:c.mode,font:"\\texttt",body:m};return{type:"href",mode:c.mode,href:h,body:yt(y)}}}),ie({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(o,l){let{parser:c}=o;return{type:"hbox",mode:c.mode,body:yt(l[0])}},htmlBuilder(o,l){const c=Mt(o.body,l,!1);return B.makeFragment(c)},mathmlBuilder(o,l){return new Z.MathNode("mrow",fr(o.body,l))}}),ie({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(o,l)=>{let{parser:c,funcName:h,token:m}=o;const y=be(l[0],"raw").string,w=l[1];c.settings.strict&&c.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");let k;const _={};switch(h){case"\\htmlClass":_.class=y,k={command:"\\htmlClass",class:y};break;case"\\htmlId":_.id=y,k={command:"\\htmlId",id:y};break;case"\\htmlStyle":_.style=y,k={command:"\\htmlStyle",style:y};break;case"\\htmlData":{const C=y.split(",");for(let P=0;P<C.length;P++){const F=C[P],V=F.indexOf("=");if(V<0)throw new s("\\htmlData key/value '"+F+"' missing equals sign");const j=F.slice(0,V),se=F.slice(V+1);_["data-"+j.trim()]=se}k={command:"\\htmlData",attributes:_};break}default:throw new Error("Unrecognized html command")}return c.settings.isTrusted(k)?{type:"html",mode:c.mode,attributes:_,body:yt(w)}:c.formatUnsupportedCmd(h)},htmlBuilder:(o,l)=>{const c=Mt(o.body,l,!1),h=["enclosing"];o.attributes.class&&h.push(...o.attributes.class.trim().split(/\s+/));const m=B.makeSpan(h,c,l);for(const y in o.attributes)y!=="class"&&o.attributes.hasOwnProperty(y)&&m.setAttribute(y,o.attributes[y]);return m},mathmlBuilder:(o,l)=>gn(o.body,l)}),ie({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(o,l)=>{let{parser:c}=o;return{type:"htmlmathml",mode:c.mode,html:yt(l[0]),mathml:yt(l[1])}},htmlBuilder:(o,l)=>{const c=Mt(o.html,l,!1);return B.makeFragment(c)},mathmlBuilder:(o,l)=>gn(o.mathml,l)});const bc=function(o){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(o))return{number:+o,unit:"bp"};{const l=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(o);if(!l)throw new s("Invalid size: '"+o+"' in \\includegraphics");const c={number:+(l[1]+l[2]),unit:l[3]};if(!Dm(c))throw new s("Invalid unit: '"+c.unit+"' in \\includegraphics.");return c}};ie({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(o,l,c)=>{let{parser:h}=o,m={number:0,unit:"em"},y={number:.9,unit:"em"},w={number:0,unit:"em"},k="";if(c[0]){const P=be(c[0],"raw").string.split(",");for(let F=0;F<P.length;F++){const V=P[F].split("=");if(V.length===2){const j=V[1].trim();switch(V[0].trim()){case"alt":k=j;break;case"width":m=bc(j);break;case"height":y=bc(j);break;case"totalheight":w=bc(j);break;default:throw new s("Invalid key: '"+V[0]+"' in \\includegraphics.")}}}}const _=be(l[0],"url").url;return k===""&&(k=_,k=k.replace(/^.*[\\/]/,""),k=k.substring(0,k.lastIndexOf("."))),h.settings.isTrusted({command:"\\includegraphics",url:_})?{type:"includegraphics",mode:h.mode,alt:k,width:m,height:y,totalheight:w,src:_}:h.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(o,l)=>{const c=it(o.height,l);let h=0;o.totalheight.number>0&&(h=it(o.totalheight,l)-c);let m=0;o.width.number>0&&(m=it(o.width,l));const y={height:ee(c+h)};m>0&&(y.width=ee(m)),h>0&&(y.verticalAlign=ee(-h));const w=new ry(o.src,o.alt,y);return w.height=c,w.depth=h,w},mathmlBuilder:(o,l)=>{const c=new Z.MathNode("mglyph",[]);c.setAttribute("alt",o.alt);const h=it(o.height,l);let m=0;if(o.totalheight.number>0&&(m=it(o.totalheight,l)-h,c.setAttribute("valign",ee(-m))),c.setAttribute("height",ee(h+m)),o.width.number>0){const y=it(o.width,l);c.setAttribute("width",ee(y))}return c.setAttribute("src",o.src),c}}),ie({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(o,l){let{parser:c,funcName:h}=o;const m=be(l[0],"size");if(c.settings.strict){const y=h[1]==="m",w=m.value.unit==="mu";y?(w||c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+h+" supports only mu units, "+("not "+m.value.unit+" units")),c.mode!=="math"&&c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+h+" works only in math mode")):w&&c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+h+" doesn't support mu units")}return{type:"kern",mode:c.mode,dimension:m.value}},htmlBuilder(o,l){return B.makeGlue(o.dimension,l)},mathmlBuilder(o,l){const c=it(o.dimension,l);return new Z.SpaceNode(c)}}),ie({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=l[0];return{type:"lap",mode:c.mode,alignment:h.slice(5),body:m}},htmlBuilder:(o,l)=>{let c;o.alignment==="clap"?(c=B.makeSpan([],[Ae(o.body,l)]),c=B.makeSpan(["inner"],[c],l)):c=B.makeSpan(["inner"],[Ae(o.body,l)]);const h=B.makeSpan(["fix"],[]);let m=B.makeSpan([o.alignment],[c,h],l);const y=B.makeSpan(["strut"]);return y.style.height=ee(m.height+m.depth),m.depth&&(y.style.verticalAlign=ee(-m.depth)),m.children.unshift(y),m=B.makeSpan(["thinbox"],[m],l),B.makeSpan(["mord","vbox"],[m],l)},mathmlBuilder:(o,l)=>{const c=new Z.MathNode("mpadded",[Be(o.body,l)]);if(o.alignment!=="rlap"){const h=o.alignment==="llap"?"-1":"-0.5";c.setAttribute("lspace",h+"width")}return c.setAttribute("width","0px"),c}}),ie({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,l){let{funcName:c,parser:h}=o;const m=h.mode;h.switchMode("math");const y=c==="\\("?"\\)":"$",w=h.parseExpression(!1,y);return h.expect(y),h.switchMode(m),{type:"styling",mode:h.mode,style:"text",body:w}}}),ie({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(o,l){throw new s("Mismatched "+o.funcName)}});const Id=(o,l)=>{switch(l.style.size){case K.DISPLAY.size:return o.display;case K.TEXT.size:return o.text;case K.SCRIPT.size:return o.script;case K.SCRIPTSCRIPT.size:return o.scriptscript;default:return o.text}};ie({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(o,l)=>{let{parser:c}=o;return{type:"mathchoice",mode:c.mode,display:yt(l[0]),text:yt(l[1]),script:yt(l[2]),scriptscript:yt(l[3])}},htmlBuilder:(o,l)=>{const c=Id(o,l),h=Mt(c,l,!1);return B.makeFragment(h)},mathmlBuilder:(o,l)=>{const c=Id(o,l);return gn(c,l)}});const zd=(o,l,c,h,m,y,w)=>{o=B.makeSpan([],[o]);const k=c&&R.isCharacterBox(c);let _,C;if(l){const V=Ae(l,h.havingStyle(m.sup()),h);C={elem:V,kern:Math.max(h.fontMetrics().bigOpSpacing1,h.fontMetrics().bigOpSpacing3-V.depth)}}if(c){const V=Ae(c,h.havingStyle(m.sub()),h);_={elem:V,kern:Math.max(h.fontMetrics().bigOpSpacing2,h.fontMetrics().bigOpSpacing4-V.height)}}let P;if(C&&_){const V=h.fontMetrics().bigOpSpacing5+_.elem.height+_.elem.depth+_.kern+o.depth+w;P=B.makeVList({positionType:"bottom",positionData:V,children:[{type:"kern",size:h.fontMetrics().bigOpSpacing5},{type:"elem",elem:_.elem,marginLeft:ee(-y)},{type:"kern",size:_.kern},{type:"elem",elem:o},{type:"kern",size:C.kern},{type:"elem",elem:C.elem,marginLeft:ee(y)},{type:"kern",size:h.fontMetrics().bigOpSpacing5}]},h)}else if(_){const V=o.height-w;P=B.makeVList({positionType:"top",positionData:V,children:[{type:"kern",size:h.fontMetrics().bigOpSpacing5},{type:"elem",elem:_.elem,marginLeft:ee(-y)},{type:"kern",size:_.kern},{type:"elem",elem:o}]},h)}else if(C){const V=o.depth+w;P=B.makeVList({positionType:"bottom",positionData:V,children:[{type:"elem",elem:o},{type:"kern",size:C.kern},{type:"elem",elem:C.elem,marginLeft:ee(y)},{type:"kern",size:h.fontMetrics().bigOpSpacing5}]},h)}else return o;const F=[P];if(_&&y!==0&&!k){const V=B.makeSpan(["mspace"],[],h);V.style.marginRight=ee(y),F.unshift(V)}return B.makeSpan(["mop","op-limits"],F,h)},Cd=["\\smallint"],Es=(o,l)=>{let c,h,m=!1,y;o.type==="supsub"?(c=o.sup,h=o.sub,y=be(o.base,"op"),m=!0):y=be(o,"op");const w=l.style;let k=!1;w.size===K.DISPLAY.size&&y.symbol&&!Cd.includes(y.name)&&(k=!0);let _;if(y.symbol){const F=k?"Size2-Regular":"Size1-Regular";let V="";if((y.name==="\\oiint"||y.name==="\\oiiint")&&(V=y.name.slice(1),y.name=V==="oiint"?"\\iint":"\\iiint"),_=B.makeSymbol(y.name,F,"math",l,["mop","op-symbol",k?"large-op":"small-op"]),V.length>0){const j=_.italic,se=B.staticSvg(V+"Size"+(k?"2":"1"),l);_=B.makeVList({positionType:"individualShift",children:[{type:"elem",elem:_,shift:0},{type:"elem",elem:se,shift:k?.08:0}]},l),y.name="\\"+V,_.classes.unshift("mop"),_.italic=j}}else if(y.body){const F=Mt(y.body,l,!0);F.length===1&&F[0]instanceof qr?(_=F[0],_.classes[0]="mop"):_=B.makeSpan(["mop"],F,l)}else{const F=[];for(let V=1;V<y.name.length;V++)F.push(B.mathsym(y.name[V],y.mode,l));_=B.makeSpan(["mop"],F,l)}let C=0,P=0;return(_ instanceof qr||y.name==="\\oiint"||y.name==="\\oiiint")&&!y.suppressBaseShift&&(C=(_.height-_.depth)/2-l.fontMetrics().axisHeight,P=_.italic),m?zd(_,c,h,l,w,P,C):(C&&(_.style.position="relative",_.style.top=ee(C)),_)},Ia=(o,l)=>{let c;if(o.symbol)c=new kr("mo",[Lr(o.name,o.mode)]),Cd.includes(o.name)&&c.setAttribute("largeop","false");else if(o.body)c=new kr("mo",fr(o.body,l));else{c=new kr("mi",[new gi(o.name.slice(1))]);const h=new kr("mo",[Lr("","text")]);o.parentIsSupSub?c=new kr("mrow",[c,h]):c=Qm([c,h])}return c},Xy={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};ie({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(o,l)=>{let{parser:c,funcName:h}=o,m=h;return m.length===1&&(m=Xy[m]),{type:"op",mode:c.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:m}},htmlBuilder:Es,mathmlBuilder:Ia}),ie({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(o,l)=>{let{parser:c}=o;const h=l[0];return{type:"op",mode:c.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:yt(h)}},htmlBuilder:Es,mathmlBuilder:Ia});const Ky={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};ie({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(o){let{parser:l,funcName:c}=o;return{type:"op",mode:l.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:c}},htmlBuilder:Es,mathmlBuilder:Ia}),ie({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(o){let{parser:l,funcName:c}=o;return{type:"op",mode:l.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:c}},htmlBuilder:Es,mathmlBuilder:Ia}),ie({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(o){let{parser:l,funcName:c}=o,h=c;return h.length===1&&(h=Ky[h]),{type:"op",mode:l.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:h}},htmlBuilder:Es,mathmlBuilder:Ia});const $d=(o,l)=>{let c,h,m=!1,y;o.type==="supsub"?(c=o.sup,h=o.sub,y=be(o.base,"operatorname"),m=!0):y=be(o,"operatorname");let w;if(y.body.length>0){const k=y.body.map(C=>{const P=C.text;return typeof P=="string"?{type:"textord",mode:C.mode,text:P}:C}),_=Mt(k,l.withFont("mathrm"),!0);for(let C=0;C<_.length;C++){const P=_[C];P instanceof qr&&(P.text=P.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}w=B.makeSpan(["mop"],_,l)}else w=B.makeSpan(["mop"],[],l);return m?zd(w,c,h,l,l.style,0,0):w};ie({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(o,l)=>{let{parser:c,funcName:h}=o;const m=l[0];return{type:"operatorname",mode:c.mode,body:yt(m),alwaysHandleSupSub:h==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:$d,mathmlBuilder:(o,l)=>{let c=fr(o.body,l.withFont("mathrm")),h=!0;for(let w=0;w<c.length;w++){const k=c[w];if(!(k instanceof Z.SpaceNode))if(k instanceof Z.MathNode)switch(k.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const _=k.children[0];k.children.length===1&&_ instanceof Z.TextNode?_.text=_.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):h=!1;break}default:h=!1}else h=!1}if(h){const w=c.map(k=>k.toText()).join("");c=[new Z.TextNode(w)]}const m=new Z.MathNode("mi",c);m.setAttribute("mathvariant","normal");const y=new Z.MathNode("mo",[Lr("","text")]);return o.parentIsSupSub?new Z.MathNode("mrow",[m,y]):Z.newDocumentFragment([m,y])}}),S("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),is({type:"ordgroup",htmlBuilder(o,l){return o.semisimple?B.makeFragment(Mt(o.body,l,!1)):B.makeSpan(["mord"],Mt(o.body,l,!0),l)},mathmlBuilder(o,l){return gn(o.body,l,!0)}}),ie({type:"overline",names:["\\overline"],props:{numArgs:1},handler(o,l){let{parser:c}=o;const h=l[0];return{type:"overline",mode:c.mode,body:h}},htmlBuilder(o,l){const c=Ae(o.body,l.havingCrampedStyle()),h=B.makeLineSpan("overline-line",l),m=l.fontMetrics().defaultRuleThickness,y=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:3*m},{type:"elem",elem:h},{type:"kern",size:m}]},l);return B.makeSpan(["mord","overline"],[y],l)},mathmlBuilder(o,l){const c=new Z.MathNode("mo",[new Z.TextNode("")]);c.setAttribute("stretchy","true");const h=new Z.MathNode("mover",[Be(o.body,l),c]);return h.setAttribute("accent","true"),h}}),ie({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(o,l)=>{let{parser:c}=o;const h=l[0];return{type:"phantom",mode:c.mode,body:yt(h)}},htmlBuilder:(o,l)=>{const c=Mt(o.body,l.withPhantom(),!1);return B.makeFragment(c)},mathmlBuilder:(o,l)=>{const c=fr(o.body,l);return new Z.MathNode("mphantom",c)}}),ie({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,l)=>{let{parser:c}=o;const h=l[0];return{type:"hphantom",mode:c.mode,body:h}},htmlBuilder:(o,l)=>{let c=B.makeSpan([],[Ae(o.body,l.withPhantom())]);if(c.height=0,c.depth=0,c.children)for(let h=0;h<c.children.length;h++)c.children[h].height=0,c.children[h].depth=0;return c=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c}]},l),B.makeSpan(["mord"],[c],l)},mathmlBuilder:(o,l)=>{const c=fr(yt(o.body),l),h=new Z.MathNode("mphantom",c),m=new Z.MathNode("mpadded",[h]);return m.setAttribute("height","0px"),m.setAttribute("depth","0px"),m}}),ie({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(o,l)=>{let{parser:c}=o;const h=l[0];return{type:"vphantom",mode:c.mode,body:h}},htmlBuilder:(o,l)=>{const c=B.makeSpan(["inner"],[Ae(o.body,l.withPhantom())]),h=B.makeSpan(["fix"],[]);return B.makeSpan(["mord","rlap"],[c,h],l)},mathmlBuilder:(o,l)=>{const c=fr(yt(o.body),l),h=new Z.MathNode("mphantom",c),m=new Z.MathNode("mpadded",[h]);return m.setAttribute("width","0px"),m}}),ie({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(o,l){let{parser:c}=o;const h=be(l[0],"size").value,m=l[1];return{type:"raisebox",mode:c.mode,dy:h,body:m}},htmlBuilder(o,l){const c=Ae(o.body,l),h=it(o.dy,l);return B.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:c}]},l)},mathmlBuilder(o,l){const c=new Z.MathNode("mpadded",[Be(o.body,l)]),h=o.dy.number+o.dy.unit;return c.setAttribute("voffset",h),c}}),ie({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(o){let{parser:l}=o;return{type:"internal",mode:l.mode}}}),ie({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(o,l,c){let{parser:h}=o;const m=c[0],y=be(l[0],"size"),w=be(l[1],"size");return{type:"rule",mode:h.mode,shift:m&&be(m,"size").value,width:y.value,height:w.value}},htmlBuilder(o,l){const c=B.makeSpan(["mord","rule"],[],l),h=it(o.width,l),m=it(o.height,l),y=o.shift?it(o.shift,l):0;return c.style.borderRightWidth=ee(h),c.style.borderTopWidth=ee(m),c.style.bottom=ee(y),c.width=h,c.height=m+y,c.depth=-y,c.maxFontSize=m*1.125*l.sizeMultiplier,c},mathmlBuilder(o,l){const c=it(o.width,l),h=it(o.height,l),m=o.shift?it(o.shift,l):0,y=l.color&&l.getColor()||"black",w=new Z.MathNode("mspace");w.setAttribute("mathbackground",y),w.setAttribute("width",ee(c)),w.setAttribute("height",ee(h));const k=new Z.MathNode("mpadded",[w]);return m>=0?k.setAttribute("height",ee(m)):(k.setAttribute("height",ee(m)),k.setAttribute("depth",ee(-m))),k.setAttribute("voffset",ee(m)),k}});function Dd(o,l,c){const h=Mt(o,l,!1),m=l.sizeMultiplier/c.sizeMultiplier;for(let y=0;y<h.length;y++){const w=h[y].classes.indexOf("sizing");w<0?Array.prototype.push.apply(h[y].classes,l.sizingClasses(c)):h[y].classes[w+1]==="reset-size"+l.size&&(h[y].classes[w+1]="reset-size"+c.size),h[y].height*=m,h[y].depth*=m}return B.makeFragment(h)}const Pd=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];ie({type:"sizing",names:Pd,props:{numArgs:0,allowedInText:!0},handler:(o,l)=>{let{breakOnTokenText:c,funcName:h,parser:m}=o;const y=m.parseExpression(!1,c);return{type:"sizing",mode:m.mode,size:Pd.indexOf(h)+1,body:y}},htmlBuilder:(o,l)=>{const c=l.havingSize(o.size);return Dd(o.body,c,l)},mathmlBuilder:(o,l)=>{const c=l.havingSize(o.size),h=fr(o.body,c),m=new Z.MathNode("mstyle",h);return m.setAttribute("mathsize",ee(c.sizeMultiplier)),m}}),ie({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(o,l,c)=>{let{parser:h}=o,m=!1,y=!1;const w=c[0]&&be(c[0],"ordgroup");if(w){let _="";for(let C=0;C<w.body.length;++C)if(_=w.body[C].text,_==="t")m=!0;else if(_==="b")y=!0;else{m=!1,y=!1;break}}else m=!0,y=!0;const k=l[0];return{type:"smash",mode:h.mode,body:k,smashHeight:m,smashDepth:y}},htmlBuilder:(o,l)=>{const c=B.makeSpan([],[Ae(o.body,l)]);if(!o.smashHeight&&!o.smashDepth)return c;if(o.smashHeight&&(c.height=0,c.children))for(let m=0;m<c.children.length;m++)c.children[m].height=0;if(o.smashDepth&&(c.depth=0,c.children))for(let m=0;m<c.children.length;m++)c.children[m].depth=0;const h=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c}]},l);return B.makeSpan(["mord"],[h],l)},mathmlBuilder:(o,l)=>{const c=new Z.MathNode("mpadded",[Be(o.body,l)]);return o.smashHeight&&c.setAttribute("height","0px"),o.smashDepth&&c.setAttribute("depth","0px"),c}}),ie({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(o,l,c){let{parser:h}=o;const m=c[0],y=l[0];return{type:"sqrt",mode:h.mode,body:y,index:m}},htmlBuilder(o,l){let c=Ae(o.body,l.havingCrampedStyle());c.height===0&&(c.height=l.fontMetrics().xHeight),c=B.wrapFragment(c,l);const m=l.fontMetrics().defaultRuleThickness;let y=m;l.style.id<K.TEXT.id&&(y=l.fontMetrics().xHeight);let w=m+y/4;const k=c.height+c.depth+w+m,{span:_,ruleWidth:C,advanceWidth:P}=Bi.sqrtImage(k,l),F=_.height-C;F>c.height+c.depth+w&&(w=(w+F-c.height-c.depth)/2);const V=_.height-c.height-w-C;c.style.paddingLeft=ee(P);const j=B.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c,wrapperClasses:["svg-align"]},{type:"kern",size:-(c.height+V)},{type:"elem",elem:_},{type:"kern",size:C}]},l);if(o.index){const se=l.havingStyle(K.SCRIPTSCRIPT),fe=Ae(o.index,se,l),Te=.6*(j.height-j.depth),Ne=B.makeVList({positionType:"shift",positionData:-Te,children:[{type:"elem",elem:fe}]},l),Me=B.makeSpan(["root"],[Ne]);return B.makeSpan(["mord","sqrt"],[Me,j],l)}else return B.makeSpan(["mord","sqrt"],[j],l)},mathmlBuilder(o,l){const{body:c,index:h}=o;return h?new Z.MathNode("mroot",[Be(c,l),Be(h,l)]):new Z.MathNode("msqrt",[Be(c,l)])}});const Od={display:K.DISPLAY,text:K.TEXT,script:K.SCRIPT,scriptscript:K.SCRIPTSCRIPT};ie({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(o,l){let{breakOnTokenText:c,funcName:h,parser:m}=o;const y=m.parseExpression(!0,c),w=h.slice(1,h.length-5);return{type:"styling",mode:m.mode,style:w,body:y}},htmlBuilder(o,l){const c=Od[o.style],h=l.havingStyle(c).withFont("");return Dd(o.body,h,l)},mathmlBuilder(o,l){const c=Od[o.style],h=l.havingStyle(c),m=fr(o.body,h),y=new Z.MathNode("mstyle",m),k={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[o.style];return y.setAttribute("scriptlevel",k[0]),y.setAttribute("displaystyle",k[1]),y}});const Jy=function(o,l){const c=o.base;return c?c.type==="op"?c.limits&&(l.style.size===K.DISPLAY.size||c.alwaysHandleSupSub)?Es:null:c.type==="operatorname"?c.alwaysHandleSupSub&&(l.style.size===K.DISPLAY.size||c.limits)?$d:null:c.type==="accent"?R.isCharacterBox(c.base)?nc:null:c.type==="horizBrace"&&!o.sub===c.isOver?Ad:null:null};is({type:"supsub",htmlBuilder(o,l){const c=Jy(o,l);if(c)return c(o,l);const{base:h,sup:m,sub:y}=o,w=Ae(h,l);let k,_;const C=l.fontMetrics();let P=0,F=0;const V=h&&R.isCharacterBox(h);if(m){const De=l.havingStyle(l.style.sup());k=Ae(m,De,l),V||(P=w.height-De.fontMetrics().supDrop*De.sizeMultiplier/l.sizeMultiplier)}if(y){const De=l.havingStyle(l.style.sub());_=Ae(y,De,l),V||(F=w.depth+De.fontMetrics().subDrop*De.sizeMultiplier/l.sizeMultiplier)}let j;l.style===K.DISPLAY?j=C.sup1:l.style.cramped?j=C.sup3:j=C.sup2;const se=l.sizeMultiplier,fe=ee(.5/C.ptPerEm/se);let Te=null;if(_){const De=o.base&&o.base.type==="op"&&o.base.name&&(o.base.name==="\\oiint"||o.base.name==="\\oiiint");(w instanceof qr||De)&&(Te=ee(-w.italic))}let Ne;if(k&&_){P=Math.max(P,j,k.depth+.25*C.xHeight),F=Math.max(F,C.sub2);const Ue=4*C.defaultRuleThickness;if(P-k.depth-(_.height-F)<Ue){F=Ue-(P-k.depth)+_.height;const Et=.8*C.xHeight-(P-k.depth);Et>0&&(P+=Et,F-=Et)}const ir=[{type:"elem",elem:_,shift:F,marginRight:fe,marginLeft:Te},{type:"elem",elem:k,shift:-P,marginRight:fe}];Ne=B.makeVList({positionType:"individualShift",children:ir},l)}else if(_){F=Math.max(F,C.sub1,_.height-.8*C.xHeight);const De=[{type:"elem",elem:_,marginLeft:Te,marginRight:fe}];Ne=B.makeVList({positionType:"shift",positionData:F,children:De},l)}else if(k)P=Math.max(P,j,k.depth+.25*C.xHeight),Ne=B.makeVList({positionType:"shift",positionData:-P,children:[{type:"elem",elem:k,marginRight:fe}]},l);else throw new Error("supsub must have either sup or sub.");const Me=K0(w,"right")||"mord";return B.makeSpan([Me],[w,B.makeSpan(["msupsub"],[Ne])],l)},mathmlBuilder(o,l){let c=!1,h,m;o.base&&o.base.type==="horizBrace"&&(m=!!o.sup,m===o.base.isOver&&(c=!0,h=o.base.isOver)),o.base&&(o.base.type==="op"||o.base.type==="operatorname")&&(o.base.parentIsSupSub=!0);const y=[Be(o.base,l)];o.sub&&y.push(Be(o.sub,l)),o.sup&&y.push(Be(o.sup,l));let w;if(c)w=h?"mover":"munder";else if(o.sub)if(o.sup){const k=o.base;k&&k.type==="op"&&k.limits&&l.style===K.DISPLAY||k&&k.type==="operatorname"&&k.alwaysHandleSupSub&&(l.style===K.DISPLAY||k.limits)?w="munderover":w="msubsup"}else{const k=o.base;k&&k.type==="op"&&k.limits&&(l.style===K.DISPLAY||k.alwaysHandleSupSub)||k&&k.type==="operatorname"&&k.alwaysHandleSupSub&&(k.limits||l.style===K.DISPLAY)?w="munder":w="msub"}else{const k=o.base;k&&k.type==="op"&&k.limits&&(l.style===K.DISPLAY||k.alwaysHandleSupSub)||k&&k.type==="operatorname"&&k.alwaysHandleSupSub&&(k.limits||l.style===K.DISPLAY)?w="mover":w="msup"}return new Z.MathNode(w,y)}}),is({type:"atom",htmlBuilder(o,l){return B.mathsym(o.text,o.mode,l,["m"+o.family])},mathmlBuilder(o,l){const c=new Z.MathNode("mo",[Lr(o.text,o.mode)]);if(o.family==="bin"){const h=tc(o,l);h==="bold-italic"&&c.setAttribute("mathvariant",h)}else o.family==="punct"?c.setAttribute("separator","true"):(o.family==="open"||o.family==="close")&&c.setAttribute("stretchy","false");return c}});const qd={mi:"italic",mn:"normal",mtext:"normal"};is({type:"mathord",htmlBuilder(o,l){return B.makeOrd(o,l,"mathord")},mathmlBuilder(o,l){const c=new Z.MathNode("mi",[Lr(o.text,o.mode,l)]),h=tc(o,l)||"italic";return h!==qd[c.type]&&c.setAttribute("mathvariant",h),c}}),is({type:"textord",htmlBuilder(o,l){return B.makeOrd(o,l,"textord")},mathmlBuilder(o,l){const c=Lr(o.text,o.mode,l),h=tc(o,l)||"normal";let m;return o.mode==="text"?m=new Z.MathNode("mtext",[c]):/[0-9]/.test(o.text)?m=new Z.MathNode("mn",[c]):o.text==="\\prime"?m=new Z.MathNode("mo",[c]):m=new Z.MathNode("mi",[c]),h!==qd[m.type]&&m.setAttribute("mathvariant",h),m}});const xc={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},wc={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};is({type:"spacing",htmlBuilder(o,l){if(wc.hasOwnProperty(o.text)){const c=wc[o.text].className||"";if(o.mode==="text"){const h=B.makeOrd(o,l,"textord");return h.classes.push(c),h}else return B.makeSpan(["mspace",c],[B.mathsym(o.text,o.mode,l)],l)}else{if(xc.hasOwnProperty(o.text))return B.makeSpan(["mspace",xc[o.text]],[],l);throw new s('Unknown type of space "'+o.text+'"')}},mathmlBuilder(o,l){let c;if(wc.hasOwnProperty(o.text))c=new Z.MathNode("mtext",[new Z.TextNode("")]);else{if(xc.hasOwnProperty(o.text))return new Z.MathNode("mspace");throw new s('Unknown type of space "'+o.text+'"')}return c}});const Ld=()=>{const o=new Z.MathNode("mtd",[]);return o.setAttribute("width","50%"),o};is({type:"tag",mathmlBuilder(o,l){const c=new Z.MathNode("mtable",[new Z.MathNode("mtr",[Ld(),new Z.MathNode("mtd",[gn(o.body,l)]),Ld(),new Z.MathNode("mtd",[gn(o.tag,l)])])]);return c.setAttribute("width","100%"),c}});const Rd={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Fd={"\\textbf":"textbf","\\textmd":"textmd"},e8={"\\textit":"textit","\\textup":"textup"},Bd=(o,l)=>{const c=o.font;if(c){if(Rd[c])return l.withTextFontFamily(Rd[c]);if(Fd[c])return l.withTextFontWeight(Fd[c]);if(c==="\\emph")return l.fontShape==="textit"?l.withTextFontShape("textup"):l.withTextFontShape("textit")}else return l;return l.withTextFontShape(e8[c])};ie({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(o,l){let{parser:c,funcName:h}=o;const m=l[0];return{type:"text",mode:c.mode,body:yt(m),font:h}},htmlBuilder(o,l){const c=Bd(o,l),h=Mt(o.body,c,!0);return B.makeSpan(["mord","text"],h,c)},mathmlBuilder(o,l){const c=Bd(o,l);return gn(o.body,c)}}),ie({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(o,l){let{parser:c}=o;return{type:"underline",mode:c.mode,body:l[0]}},htmlBuilder(o,l){const c=Ae(o.body,l),h=B.makeLineSpan("underline-line",l),m=l.fontMetrics().defaultRuleThickness,y=B.makeVList({positionType:"top",positionData:c.height,children:[{type:"kern",size:m},{type:"elem",elem:h},{type:"kern",size:3*m},{type:"elem",elem:c}]},l);return B.makeSpan(["mord","underline"],[y],l)},mathmlBuilder(o,l){const c=new Z.MathNode("mo",[new Z.TextNode("")]);c.setAttribute("stretchy","true");const h=new Z.MathNode("munder",[Be(o.body,l),c]);return h.setAttribute("accentunder","true"),h}}),ie({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(o,l){let{parser:c}=o;return{type:"vcenter",mode:c.mode,body:l[0]}},htmlBuilder(o,l){const c=Ae(o.body,l),h=l.fontMetrics().axisHeight,m=.5*(c.height-h-(c.depth+h));return B.makeVList({positionType:"shift",positionData:m,children:[{type:"elem",elem:c}]},l)},mathmlBuilder(o,l){return new Z.MathNode("mpadded",[Be(o.body,l)],["vcenter"])}}),ie({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(o,l,c){throw new s("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(o,l){const c=Vd(o),h=[],m=l.havingStyle(l.style.text());for(let y=0;y<c.length;y++){let w=c[y];w==="~"&&(w="\\textasciitilde"),h.push(B.makeSymbol(w,"Typewriter-Regular",o.mode,m,["mord","texttt"]))}return B.makeSpan(["mord","text"].concat(m.sizingClasses(l)),B.tryCombineChars(h),m)},mathmlBuilder(o,l){const c=new Z.TextNode(Vd(o)),h=new Z.MathNode("mtext",[c]);return h.setAttribute("mathvariant","monospace"),h}});const Vd=o=>o.body.replace(/ /g,o.star?"":"");var vn=Wm;const jd=`[ \r
	]`,t8="\\\\[a-zA-Z@]+",r8="\\\\[^\uD800-\uDFFF]",i8="("+t8+")"+jd+"*",n8=`\\\\(
|[ \r	]+
?)[ \r	]*`,Nc="[-]",s8=new RegExp(Nc+"+$"),a8="("+jd+"+)|"+(n8+"|")+"([!-\\[\\]---]"+(Nc+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Nc+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+i8)+("|"+r8+")");class Hd{constructor(l,c){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=l,this.settings=c,this.tokenRegex=new RegExp(a8,"g"),this.catcodes={"%":14,"~":13}}setCatcode(l,c){this.catcodes[l]=c}lex(){const l=this.input,c=this.tokenRegex.lastIndex;if(c===l.length)return new Sr("EOF",new hr(this,c,c));const h=this.tokenRegex.exec(l);if(h===null||h.index!==c)throw new s("Unexpected character: '"+l[c]+"'",new Sr(l[c],new hr(this,c,c+1)));const m=h[6]||h[3]||(h[2]?"\\ ":" ");if(this.catcodes[m]===14){const y=l.indexOf(`
`,this.tokenRegex.lastIndex);return y===-1?(this.tokenRegex.lastIndex=l.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=y+1,this.lex()}return new Sr(m,new hr(this,c,this.tokenRegex.lastIndex))}}class l8{constructor(l,c){l===void 0&&(l={}),c===void 0&&(c={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=c,this.builtins=l,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new s("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const l=this.undefStack.pop();for(const c in l)l.hasOwnProperty(c)&&(l[c]==null?delete this.current[c]:this.current[c]=l[c])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(l){return this.current.hasOwnProperty(l)||this.builtins.hasOwnProperty(l)}get(l){return this.current.hasOwnProperty(l)?this.current[l]:this.builtins[l]}set(l,c,h){if(h===void 0&&(h=!1),h){for(let m=0;m<this.undefStack.length;m++)delete this.undefStack[m][l];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][l]=c)}else{const m=this.undefStack[this.undefStack.length-1];m&&!m.hasOwnProperty(l)&&(m[l]=this.current[l])}c==null?delete this.current[l]:this.current[l]=c}}var o8=bd;S("\\noexpand",function(o){const l=o.popToken();return o.isExpandable(l.text)&&(l.noexpand=!0,l.treatAsRelax=!0),{tokens:[l],numArgs:0}}),S("\\expandafter",function(o){const l=o.popToken();return o.expandOnce(!0),{tokens:[l],numArgs:0}}),S("\\@firstoftwo",function(o){return{tokens:o.consumeArgs(2)[0],numArgs:0}}),S("\\@secondoftwo",function(o){return{tokens:o.consumeArgs(2)[1],numArgs:0}}),S("\\@ifnextchar",function(o){const l=o.consumeArgs(3);o.consumeSpaces();const c=o.future();return l[0].length===1&&l[0][0].text===c.text?{tokens:l[1],numArgs:0}:{tokens:l[2],numArgs:0}}),S("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),S("\\TextOrMath",function(o){const l=o.consumeArgs(2);return o.mode==="text"?{tokens:l[0],numArgs:0}:{tokens:l[1],numArgs:0}});const Ud={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};S("\\char",function(o){let l=o.popToken(),c,h="";if(l.text==="'")c=8,l=o.popToken();else if(l.text==='"')c=16,l=o.popToken();else if(l.text==="`")if(l=o.popToken(),l.text[0]==="\\")h=l.text.charCodeAt(1);else{if(l.text==="EOF")throw new s("\\char` missing argument");h=l.text.charCodeAt(0)}else c=10;if(c){if(h=Ud[l.text],h==null||h>=c)throw new s("Invalid base-"+c+" digit "+l.text);let m;for(;(m=Ud[o.future().text])!=null&&m<c;)h*=c,h+=m,o.popToken()}return"\\@char{"+h+"}"});const kc=(o,l,c,h)=>{let m=o.consumeArg().tokens;if(m.length!==1)throw new s("\\newcommand's first argument must be a macro name");const y=m[0].text,w=o.isDefined(y);if(w&&!l)throw new s("\\newcommand{"+y+"} attempting to redefine "+(y+"; use \\renewcommand"));if(!w&&!c)throw new s("\\renewcommand{"+y+"} when command "+y+" does not yet exist; use \\newcommand");let k=0;if(m=o.consumeArg().tokens,m.length===1&&m[0].text==="["){let _="",C=o.expandNextToken();for(;C.text!=="]"&&C.text!=="EOF";)_+=C.text,C=o.expandNextToken();if(!_.match(/^\s*[0-9]+\s*$/))throw new s("Invalid number of arguments: "+_);k=parseInt(_),m=o.consumeArg().tokens}return w&&h||o.macros.set(y,{tokens:m,numArgs:k}),""};S("\\newcommand",o=>kc(o,!1,!0,!1)),S("\\renewcommand",o=>kc(o,!0,!1,!1)),S("\\providecommand",o=>kc(o,!0,!0,!0)),S("\\message",o=>{const l=o.consumeArgs(1)[0];return console.log(l.reverse().map(c=>c.text).join("")),""}),S("\\errmessage",o=>{const l=o.consumeArgs(1)[0];return console.error(l.reverse().map(c=>c.text).join("")),""}),S("\\show",o=>{const l=o.popToken(),c=l.text;return console.log(l,o.macros.get(c),vn[c],nt.math[c],nt.text[c]),""}),S("\\bgroup","{"),S("\\egroup","}"),S("~","\\nobreakspace"),S("\\lq","`"),S("\\rq","'"),S("\\aa","\\r a"),S("\\AA","\\r A"),S("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),S("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),S("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),S("","\\mathscr{B}"),S("","\\mathscr{E}"),S("","\\mathscr{F}"),S("","\\mathscr{H}"),S("","\\mathscr{I}"),S("","\\mathscr{L}"),S("","\\mathscr{M}"),S("","\\mathscr{R}"),S("","\\mathfrak{C}"),S("","\\mathfrak{H}"),S("","\\mathfrak{Z}"),S("\\Bbbk","\\Bbb{k}"),S("","\\cdotp"),S("\\llap","\\mathllap{\\textrm{#1}}"),S("\\rlap","\\mathrlap{\\textrm{#1}}"),S("\\clap","\\mathclap{\\textrm{#1}}"),S("\\mathstrut","\\vphantom{(}"),S("\\underbar","\\underline{\\text{#1}}"),S("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),S("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),S("\\ne","\\neq"),S("","\\neq"),S("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),S("","\\notin"),S("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),S("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),S("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),S("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),S("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),S("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),S("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),S("","\\perp"),S("","\\mathclose{!\\mkern-0.8mu!}"),S("","\\notni"),S("","\\ulcorner"),S("","\\urcorner"),S("","\\llcorner"),S("","\\lrcorner"),S("","\\copyright"),S("","\\textregistered"),S("","\\textregistered"),S("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),S("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),S("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),S("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),S("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),S("","\\vdots"),S("\\varGamma","\\mathit{\\Gamma}"),S("\\varDelta","\\mathit{\\Delta}"),S("\\varTheta","\\mathit{\\Theta}"),S("\\varLambda","\\mathit{\\Lambda}"),S("\\varXi","\\mathit{\\Xi}"),S("\\varPi","\\mathit{\\Pi}"),S("\\varSigma","\\mathit{\\Sigma}"),S("\\varUpsilon","\\mathit{\\Upsilon}"),S("\\varPhi","\\mathit{\\Phi}"),S("\\varPsi","\\mathit{\\Psi}"),S("\\varOmega","\\mathit{\\Omega}"),S("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),S("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),S("\\boxed","\\fbox{$\\displaystyle{#1}$}"),S("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),S("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),S("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),S("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),S("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");const Gd={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};S("\\dots",function(o){let l="\\dotso";const c=o.expandAfterFuture().text;return c in Gd?l=Gd[c]:(c.slice(0,4)==="\\not"||c in nt.math&&["bin","rel"].includes(nt.math[c].group))&&(l="\\dotsb"),l});const Sc={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};S("\\dotso",function(o){return o.future().text in Sc?"\\ldots\\,":"\\ldots"}),S("\\dotsc",function(o){const l=o.future().text;return l in Sc&&l!==","?"\\ldots\\,":"\\ldots"}),S("\\cdots",function(o){return o.future().text in Sc?"\\@cdots\\,":"\\@cdots"}),S("\\dotsb","\\cdots"),S("\\dotsm","\\cdots"),S("\\dotsi","\\!\\cdots"),S("\\dotsx","\\ldots\\,"),S("\\DOTSI","\\relax"),S("\\DOTSB","\\relax"),S("\\DOTSX","\\relax"),S("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),S("\\,","\\tmspace+{3mu}{.1667em}"),S("\\thinspace","\\,"),S("\\>","\\mskip{4mu}"),S("\\:","\\tmspace+{4mu}{.2222em}"),S("\\medspace","\\:"),S("\\;","\\tmspace+{5mu}{.2777em}"),S("\\thickspace","\\;"),S("\\!","\\tmspace-{3mu}{.1667em}"),S("\\negthinspace","\\!"),S("\\negmedspace","\\tmspace-{4mu}{.2222em}"),S("\\negthickspace","\\tmspace-{5mu}{.277em}"),S("\\enspace","\\kern.5em "),S("\\enskip","\\hskip.5em\\relax"),S("\\quad","\\hskip1em\\relax"),S("\\qquad","\\hskip2em\\relax"),S("\\tag","\\@ifstar\\tag@literal\\tag@paren"),S("\\tag@paren","\\tag@literal{({#1})}"),S("\\tag@literal",o=>{if(o.macros.get("\\df@tag"))throw new s("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),S("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),S("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),S("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),S("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),S("\\newline","\\\\\\relax"),S("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const Wd=ee(di["Main-Regular"][84][1]-.7*di["Main-Regular"][65][1]);S("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Wd+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),S("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Wd+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),S("\\hspace","\\@ifstar\\@hspacer\\@hspace"),S("\\@hspace","\\hskip #1\\relax"),S("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),S("\\ordinarycolon",":"),S("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),S("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),S("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),S("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),S("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),S("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),S("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),S("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),S("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),S("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),S("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),S("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),S("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),S("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),S("","\\dblcolon"),S("","\\eqcolon"),S("","\\coloneqq"),S("","\\eqqcolon"),S("","\\Coloneqq"),S("\\ratio","\\vcentcolon"),S("\\coloncolon","\\dblcolon"),S("\\colonequals","\\coloneqq"),S("\\coloncolonequals","\\Coloneqq"),S("\\equalscolon","\\eqqcolon"),S("\\equalscoloncolon","\\Eqqcolon"),S("\\colonminus","\\coloneq"),S("\\coloncolonminus","\\Coloneq"),S("\\minuscolon","\\eqcolon"),S("\\minuscoloncolon","\\Eqcolon"),S("\\coloncolonapprox","\\Colonapprox"),S("\\coloncolonsim","\\Colonsim"),S("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),S("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),S("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),S("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),S("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),S("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),S("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),S("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),S("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),S("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),S("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),S("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),S("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),S("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),S("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),S("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),S("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),S("\\nleqq","\\html@mathml{\\@nleqq}{}"),S("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),S("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),S("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),S("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),S("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),S("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),S("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),S("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),S("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),S("\\imath","\\html@mathml{\\@imath}{}"),S("\\jmath","\\html@mathml{\\@jmath}{}"),S("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),S("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),S("","\\llbracket"),S("","\\rrbracket"),S("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),S("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),S("","\\lBrace"),S("","\\rBrace"),S("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),S("","\\minuso"),S("\\darr","\\downarrow"),S("\\dArr","\\Downarrow"),S("\\Darr","\\Downarrow"),S("\\lang","\\langle"),S("\\rang","\\rangle"),S("\\uarr","\\uparrow"),S("\\uArr","\\Uparrow"),S("\\Uarr","\\Uparrow"),S("\\N","\\mathbb{N}"),S("\\R","\\mathbb{R}"),S("\\Z","\\mathbb{Z}"),S("\\alef","\\aleph"),S("\\alefsym","\\aleph"),S("\\Alpha","\\mathrm{A}"),S("\\Beta","\\mathrm{B}"),S("\\bull","\\bullet"),S("\\Chi","\\mathrm{X}"),S("\\clubs","\\clubsuit"),S("\\cnums","\\mathbb{C}"),S("\\Complex","\\mathbb{C}"),S("\\Dagger","\\ddagger"),S("\\diamonds","\\diamondsuit"),S("\\empty","\\emptyset"),S("\\Epsilon","\\mathrm{E}"),S("\\Eta","\\mathrm{H}"),S("\\exist","\\exists"),S("\\harr","\\leftrightarrow"),S("\\hArr","\\Leftrightarrow"),S("\\Harr","\\Leftrightarrow"),S("\\hearts","\\heartsuit"),S("\\image","\\Im"),S("\\infin","\\infty"),S("\\Iota","\\mathrm{I}"),S("\\isin","\\in"),S("\\Kappa","\\mathrm{K}"),S("\\larr","\\leftarrow"),S("\\lArr","\\Leftarrow"),S("\\Larr","\\Leftarrow"),S("\\lrarr","\\leftrightarrow"),S("\\lrArr","\\Leftrightarrow"),S("\\Lrarr","\\Leftrightarrow"),S("\\Mu","\\mathrm{M}"),S("\\natnums","\\mathbb{N}"),S("\\Nu","\\mathrm{N}"),S("\\Omicron","\\mathrm{O}"),S("\\plusmn","\\pm"),S("\\rarr","\\rightarrow"),S("\\rArr","\\Rightarrow"),S("\\Rarr","\\Rightarrow"),S("\\real","\\Re"),S("\\reals","\\mathbb{R}"),S("\\Reals","\\mathbb{R}"),S("\\Rho","\\mathrm{P}"),S("\\sdot","\\cdot"),S("\\sect","\\S"),S("\\spades","\\spadesuit"),S("\\sub","\\subset"),S("\\sube","\\subseteq"),S("\\supe","\\supseteq"),S("\\Tau","\\mathrm{T}"),S("\\thetasym","\\vartheta"),S("\\weierp","\\wp"),S("\\Zeta","\\mathrm{Z}"),S("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),S("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),S("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),S("\\bra","\\mathinner{\\langle{#1}|}"),S("\\ket","\\mathinner{|{#1}\\rangle}"),S("\\braket","\\mathinner{\\langle{#1}\\rangle}"),S("\\Bra","\\left\\langle#1\\right|"),S("\\Ket","\\left|#1\\right\\rangle");const Zd=o=>l=>{const c=l.consumeArg().tokens,h=l.consumeArg().tokens,m=l.consumeArg().tokens,y=l.consumeArg().tokens,w=l.macros.get("|"),k=l.macros.get("\\|");l.macros.beginGroup();const _=F=>V=>{o&&(V.macros.set("|",w),m.length&&V.macros.set("\\|",k));let j=F;return!F&&m.length&&V.future().text==="|"&&(V.popToken(),j=!0),{tokens:j?m:h,numArgs:0}};l.macros.set("|",_(!1)),m.length&&l.macros.set("\\|",_(!0));const C=l.consumeArg().tokens,P=l.expandTokens([...y,...C,...c]);return l.macros.endGroup(),{tokens:P.reverse(),numArgs:0}};S("\\bra@ket",Zd(!1)),S("\\bra@set",Zd(!0)),S("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),S("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),S("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),S("\\angln","{\\angl n}"),S("\\blue","\\textcolor{##6495ed}{#1}"),S("\\orange","\\textcolor{##ffa500}{#1}"),S("\\pink","\\textcolor{##ff00af}{#1}"),S("\\red","\\textcolor{##df0030}{#1}"),S("\\green","\\textcolor{##28ae7b}{#1}"),S("\\gray","\\textcolor{gray}{#1}"),S("\\purple","\\textcolor{##9d38bd}{#1}"),S("\\blueA","\\textcolor{##ccfaff}{#1}"),S("\\blueB","\\textcolor{##80f6ff}{#1}"),S("\\blueC","\\textcolor{##63d9ea}{#1}"),S("\\blueD","\\textcolor{##11accd}{#1}"),S("\\blueE","\\textcolor{##0c7f99}{#1}"),S("\\tealA","\\textcolor{##94fff5}{#1}"),S("\\tealB","\\textcolor{##26edd5}{#1}"),S("\\tealC","\\textcolor{##01d1c1}{#1}"),S("\\tealD","\\textcolor{##01a995}{#1}"),S("\\tealE","\\textcolor{##208170}{#1}"),S("\\greenA","\\textcolor{##b6ffb0}{#1}"),S("\\greenB","\\textcolor{##8af281}{#1}"),S("\\greenC","\\textcolor{##74cf70}{#1}"),S("\\greenD","\\textcolor{##1fab54}{#1}"),S("\\greenE","\\textcolor{##0d923f}{#1}"),S("\\goldA","\\textcolor{##ffd0a9}{#1}"),S("\\goldB","\\textcolor{##ffbb71}{#1}"),S("\\goldC","\\textcolor{##ff9c39}{#1}"),S("\\goldD","\\textcolor{##e07d10}{#1}"),S("\\goldE","\\textcolor{##a75a05}{#1}"),S("\\redA","\\textcolor{##fca9a9}{#1}"),S("\\redB","\\textcolor{##ff8482}{#1}"),S("\\redC","\\textcolor{##f9685d}{#1}"),S("\\redD","\\textcolor{##e84d39}{#1}"),S("\\redE","\\textcolor{##bc2612}{#1}"),S("\\maroonA","\\textcolor{##ffbde0}{#1}"),S("\\maroonB","\\textcolor{##ff92c6}{#1}"),S("\\maroonC","\\textcolor{##ed5fa6}{#1}"),S("\\maroonD","\\textcolor{##ca337c}{#1}"),S("\\maroonE","\\textcolor{##9e034e}{#1}"),S("\\purpleA","\\textcolor{##ddd7ff}{#1}"),S("\\purpleB","\\textcolor{##c6b9fc}{#1}"),S("\\purpleC","\\textcolor{##aa87ff}{#1}"),S("\\purpleD","\\textcolor{##7854ab}{#1}"),S("\\purpleE","\\textcolor{##543b78}{#1}"),S("\\mintA","\\textcolor{##f5f9e8}{#1}"),S("\\mintB","\\textcolor{##edf2df}{#1}"),S("\\mintC","\\textcolor{##e0e5cc}{#1}"),S("\\grayA","\\textcolor{##f6f7f7}{#1}"),S("\\grayB","\\textcolor{##f0f1f2}{#1}"),S("\\grayC","\\textcolor{##e3e5e6}{#1}"),S("\\grayD","\\textcolor{##d6d8da}{#1}"),S("\\grayE","\\textcolor{##babec2}{#1}"),S("\\grayF","\\textcolor{##888d93}{#1}"),S("\\grayG","\\textcolor{##626569}{#1}"),S("\\grayH","\\textcolor{##3b3e40}{#1}"),S("\\grayI","\\textcolor{##21242c}{#1}"),S("\\kaBlue","\\textcolor{##314453}{#1}"),S("\\kaGreen","\\textcolor{##71B307}{#1}");const Qd={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class u8{constructor(l,c,h){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=c,this.expansionCount=0,this.feed(l),this.macros=new l8(o8,c.macros),this.mode=h,this.stack=[]}feed(l){this.lexer=new Hd(l,this.settings)}switchMode(l){this.mode=l}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(l){this.stack.push(l)}pushTokens(l){this.stack.push(...l)}scanArgument(l){let c,h,m;if(l){if(this.consumeSpaces(),this.future().text!=="[")return null;c=this.popToken(),{tokens:m,end:h}=this.consumeArg(["]"])}else({tokens:m,start:c,end:h}=this.consumeArg());return this.pushToken(new Sr("EOF",h.loc)),this.pushTokens(m),new Sr("",hr.range(c,h))}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(l){const c=[],h=l&&l.length>0;h||this.consumeSpaces();const m=this.future();let y,w=0,k=0;do{if(y=this.popToken(),c.push(y),y.text==="{")++w;else if(y.text==="}"){if(--w,w===-1)throw new s("Extra }",y)}else if(y.text==="EOF")throw new s("Unexpected end of input in a macro argument, expected '"+(l&&h?l[k]:"}")+"'",y);if(l&&h)if((w===0||w===1&&l[k]==="{")&&y.text===l[k]){if(++k,k===l.length){c.splice(-k,k);break}}else k=0}while(w!==0||h);return m.text==="{"&&c[c.length-1].text==="}"&&(c.pop(),c.shift()),c.reverse(),{tokens:c,start:m,end:y}}consumeArgs(l,c){if(c){if(c.length!==l+1)throw new s("The length of delimiters doesn't match the number of args!");const m=c[0];for(let y=0;y<m.length;y++){const w=this.popToken();if(m[y]!==w.text)throw new s("Use of the macro doesn't match its definition",w)}}const h=[];for(let m=0;m<l;m++)h.push(this.consumeArg(c&&c[m+1]).tokens);return h}countExpansion(l){if(this.expansionCount+=l,this.expansionCount>this.settings.maxExpand)throw new s("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(l){const c=this.popToken(),h=c.text,m=c.noexpand?null:this._getExpansion(h);if(m==null||l&&m.unexpandable){if(l&&m==null&&h[0]==="\\"&&!this.isDefined(h))throw new s("Undefined control sequence: "+h);return this.pushToken(c),!1}this.countExpansion(1);let y=m.tokens;const w=this.consumeArgs(m.numArgs,m.delimiters);if(m.numArgs){y=y.slice();for(let k=y.length-1;k>=0;--k){let _=y[k];if(_.text==="#"){if(k===0)throw new s("Incomplete placeholder at end of macro body",_);if(_=y[--k],_.text==="#")y.splice(k+1,1);else if(/^[1-9]$/.test(_.text))y.splice(k,2,...w[+_.text-1]);else throw new s("Not a valid argument number",_)}}}return this.pushTokens(y),y.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const l=this.stack.pop();return l.treatAsRelax&&(l.text="\\relax"),l}throw new Error}expandMacro(l){return this.macros.has(l)?this.expandTokens([new Sr(l)]):void 0}expandTokens(l){const c=[],h=this.stack.length;for(this.pushTokens(l);this.stack.length>h;)if(this.expandOnce(!0)===!1){const m=this.stack.pop();m.treatAsRelax&&(m.noexpand=!1,m.treatAsRelax=!1),c.push(m)}return this.countExpansion(c.length),c}expandMacroAsText(l){const c=this.expandMacro(l);return c&&c.map(h=>h.text).join("")}_getExpansion(l){const c=this.macros.get(l);if(c==null)return c;if(l.length===1){const m=this.lexer.catcodes[l];if(m!=null&&m!==13)return}const h=typeof c=="function"?c(this):c;if(typeof h=="string"){let m=0;if(h.indexOf("#")!==-1){const C=h.replace(/##/g,"");for(;C.indexOf("#"+(m+1))!==-1;)++m}const y=new Hd(h,this.settings),w=[];let k=y.lex();for(;k.text!=="EOF";)w.push(k),k=y.lex();return w.reverse(),{tokens:w,numArgs:m}}return h}isDefined(l){return this.macros.has(l)||vn.hasOwnProperty(l)||nt.math.hasOwnProperty(l)||nt.text.hasOwnProperty(l)||Qd.hasOwnProperty(l)}isExpandable(l){const c=this.macros.get(l);return c!=null?typeof c=="string"||typeof c=="function"||!c.unexpandable:vn.hasOwnProperty(l)&&!vn[l].primitive}}const Yd=/^[]/,bo=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),_c={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Xd={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class xo{constructor(l,c){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new u8(l,c,this.mode),this.settings=c,this.leftrightDepth=0}expect(l,c){if(c===void 0&&(c=!0),this.fetch().text!==l)throw new s("Expected '"+l+"', got '"+this.fetch().text+"'",this.fetch());c&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(l){this.mode=l,this.gullet.switchMode(l)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const l=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),l}finally{this.gullet.endGroups()}}subparse(l){const c=this.nextToken;this.consume(),this.gullet.pushToken(new Sr("}")),this.gullet.pushTokens(l);const h=this.parseExpression(!1);return this.expect("}"),this.nextToken=c,h}parseExpression(l,c){const h=[];for(;;){this.mode==="math"&&this.consumeSpaces();const m=this.fetch();if(xo.endOfExpression.indexOf(m.text)!==-1||c&&m.text===c||l&&vn[m.text]&&vn[m.text].infix)break;const y=this.parseAtom(c);if(y){if(y.type==="internal")continue}else break;h.push(y)}return this.mode==="text"&&this.formLigatures(h),this.handleInfixNodes(h)}handleInfixNodes(l){let c=-1,h;for(let m=0;m<l.length;m++)if(l[m].type==="infix"){if(c!==-1)throw new s("only one infix operator per group",l[m].token);c=m,h=l[m].replaceWith}if(c!==-1&&h){let m,y;const w=l.slice(0,c),k=l.slice(c+1);w.length===1&&w[0].type==="ordgroup"?m=w[0]:m={type:"ordgroup",mode:this.mode,body:w},k.length===1&&k[0].type==="ordgroup"?y=k[0]:y={type:"ordgroup",mode:this.mode,body:k};let _;return h==="\\\\abovefrac"?_=this.callFunction(h,[m,l[c],y],[]):_=this.callFunction(h,[m,y],[]),[_]}else return l}handleSupSubscript(l){const c=this.fetch(),h=c.text;this.consume(),this.consumeSpaces();let m;do{var y;m=this.parseGroup(l)}while(((y=m)==null?void 0:y.type)==="internal");if(!m)throw new s("Expected group after '"+h+"'",c);return m}formatUnsupportedCmd(l){const c=[];for(let y=0;y<l.length;y++)c.push({type:"textord",mode:"text",text:l[y]});const h={type:"text",mode:this.mode,body:c};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[h]}}parseAtom(l){const c=this.parseGroup("atom",l);if((c==null?void 0:c.type)==="internal"||this.mode==="text")return c;let h,m;for(;;){this.consumeSpaces();const y=this.fetch();if(y.text==="\\limits"||y.text==="\\nolimits"){if(c&&c.type==="op"){const w=y.text==="\\limits";c.limits=w,c.alwaysHandleSupSub=!0}else if(c&&c.type==="operatorname")c.alwaysHandleSupSub&&(c.limits=y.text==="\\limits");else throw new s("Limit controls must follow a math operator",y);this.consume()}else if(y.text==="^"){if(h)throw new s("Double superscript",y);h=this.handleSupSubscript("superscript")}else if(y.text==="_"){if(m)throw new s("Double subscript",y);m=this.handleSupSubscript("subscript")}else if(y.text==="'"){if(h)throw new s("Double superscript",y);const w={type:"textord",mode:this.mode,text:"\\prime"},k=[w];for(this.consume();this.fetch().text==="'";)k.push(w),this.consume();this.fetch().text==="^"&&k.push(this.handleSupSubscript("superscript")),h={type:"ordgroup",mode:this.mode,body:k}}else if(bo[y.text]){const w=Yd.test(y.text),k=[];for(k.push(new Sr(bo[y.text])),this.consume();;){const C=this.fetch().text;if(!bo[C]||Yd.test(C)!==w)break;k.unshift(new Sr(bo[C])),this.consume()}const _=this.subparse(k);w?m={type:"ordgroup",mode:"math",body:_}:h={type:"ordgroup",mode:"math",body:_}}else break}return h||m?{type:"supsub",mode:this.mode,base:c,sup:h,sub:m}:c}parseFunction(l,c){const h=this.fetch(),m=h.text,y=vn[m];if(!y)return null;if(this.consume(),c&&c!=="atom"&&!y.allowedInArgument)throw new s("Got function '"+m+"' with no arguments"+(c?" as "+c:""),h);if(this.mode==="text"&&!y.allowedInText)throw new s("Can't use function '"+m+"' in text mode",h);if(this.mode==="math"&&y.allowedInMath===!1)throw new s("Can't use function '"+m+"' in math mode",h);const{args:w,optArgs:k}=this.parseArguments(m,y);return this.callFunction(m,w,k,h,l)}callFunction(l,c,h,m,y){const w={funcName:l,parser:this,token:m,breakOnTokenText:y},k=vn[l];if(k&&k.handler)return k.handler(w,c,h);throw new s("No function handler for "+l)}parseArguments(l,c){const h=c.numArgs+c.numOptionalArgs;if(h===0)return{args:[],optArgs:[]};const m=[],y=[];for(let w=0;w<h;w++){let k=c.argTypes&&c.argTypes[w];const _=w<c.numOptionalArgs;(c.primitive&&k==null||c.type==="sqrt"&&w===1&&y[0]==null)&&(k="primitive");const C=this.parseGroupOfType("argument to '"+l+"'",k,_);if(_)y.push(C);else if(C!=null)m.push(C);else throw new s("Null argument, please report this as a bug")}return{args:m,optArgs:y}}parseGroupOfType(l,c,h){switch(c){case"color":return this.parseColorGroup(h);case"size":return this.parseSizeGroup(h);case"url":return this.parseUrlGroup(h);case"math":case"text":return this.parseArgumentGroup(h,c);case"hbox":{const m=this.parseArgumentGroup(h,"text");return m!=null?{type:"styling",mode:m.mode,body:[m],style:"text"}:null}case"raw":{const m=this.parseStringGroup("raw",h);return m!=null?{type:"raw",mode:"text",string:m.text}:null}case"primitive":{if(h)throw new s("A primitive argument cannot be optional");const m=this.parseGroup(l);if(m==null)throw new s("Expected group as "+l,this.fetch());return m}case"original":case null:case void 0:return this.parseArgumentGroup(h);default:throw new s("Unknown group type as "+l,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(l,c){const h=this.gullet.scanArgument(c);if(h==null)return null;let m="",y;for(;(y=this.fetch()).text!=="EOF";)m+=y.text,this.consume();return this.consume(),h.text=m,h}parseRegexGroup(l,c){const h=this.fetch();let m=h,y="",w;for(;(w=this.fetch()).text!=="EOF"&&l.test(y+w.text);)m=w,y+=m.text,this.consume();if(y==="")throw new s("Invalid "+c+": '"+h.text+"'",h);return h.range(m,y)}parseColorGroup(l){const c=this.parseStringGroup("color",l);if(c==null)return null;const h=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(c.text);if(!h)throw new s("Invalid color: '"+c.text+"'",c);let m=h[0];return/^[0-9a-f]{6}$/i.test(m)&&(m="#"+m),{type:"color-token",mode:this.mode,color:m}}parseSizeGroup(l){let c,h=!1;if(this.gullet.consumeSpaces(),!l&&this.gullet.future().text!=="{"?c=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):c=this.parseStringGroup("size",l),!c)return null;!l&&c.text.length===0&&(c.text="0pt",h=!0);const m=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(c.text);if(!m)throw new s("Invalid size: '"+c.text+"'",c);const y={number:+(m[1]+m[2]),unit:m[3]};if(!Dm(y))throw new s("Invalid unit: '"+y.unit+"'",c);return{type:"size",mode:this.mode,value:y,isBlank:h}}parseUrlGroup(l){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const c=this.parseStringGroup("url",l);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),c==null)return null;const h=c.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:h}}parseArgumentGroup(l,c){const h=this.gullet.scanArgument(l);if(h==null)return null;const m=this.mode;c&&this.switchMode(c),this.gullet.beginGroup();const y=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const w={type:"ordgroup",mode:this.mode,loc:h.loc,body:y};return c&&this.switchMode(m),w}parseGroup(l,c){const h=this.fetch(),m=h.text;let y;if(m==="{"||m==="\\begingroup"){this.consume();const w=m==="{"?"}":"\\endgroup";this.gullet.beginGroup();const k=this.parseExpression(!1,w),_=this.fetch();this.expect(w),this.gullet.endGroup(),y={type:"ordgroup",mode:this.mode,loc:hr.range(h,_),body:k,semisimple:m==="\\begingroup"||void 0}}else if(y=this.parseFunction(c,l)||this.parseSymbol(),y==null&&m[0]==="\\"&&!Qd.hasOwnProperty(m)){if(this.settings.throwOnError)throw new s("Undefined control sequence: "+m,h);y=this.formatUnsupportedCmd(m),this.consume()}return y}formLigatures(l){let c=l.length-1;for(let h=0;h<c;++h){const m=l[h],y=m.text;y==="-"&&l[h+1].text==="-"&&(h+1<c&&l[h+2].text==="-"?(l.splice(h,3,{type:"textord",mode:"text",loc:hr.range(m,l[h+2]),text:"---"}),c-=2):(l.splice(h,2,{type:"textord",mode:"text",loc:hr.range(m,l[h+1]),text:"--"}),c-=1)),(y==="'"||y==="`")&&l[h+1].text===y&&(l.splice(h,2,{type:"textord",mode:"text",loc:hr.range(m,l[h+1]),text:y+y}),c-=1)}}parseSymbol(){const l=this.fetch();let c=l.text;if(/^\\verb[^a-zA-Z]/.test(c)){this.consume();let y=c.slice(5);const w=y.charAt(0)==="*";if(w&&(y=y.slice(1)),y.length<2||y.charAt(0)!==y.slice(-1))throw new s(`\\verb assertion failed --
                    please report what input caused this bug`);return y=y.slice(1,-1),{type:"verb",mode:"text",body:y,star:w}}Xd.hasOwnProperty(c[0])&&!nt[this.mode][c[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+c[0]+'" used in math mode',l),c=Xd[c[0]]+c.slice(1));const h=s8.exec(c);h&&(c=c.substring(0,h.index),c==="i"?c="":c==="j"&&(c=""));let m;if(nt[this.mode][c]){this.settings.strict&&this.mode==="math"&&Z0.indexOf(c)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+c[0]+'" used in math mode',l);const y=nt[this.mode][c].group,w=hr.range(l);let k;if(sy.hasOwnProperty(y)){const _=y;k={type:"atom",mode:this.mode,family:_,loc:w,text:c}}else k={type:y,mode:this.mode,loc:w,text:c};m=k}else if(c.charCodeAt(0)>=128)this.settings.strict&&(pi(c.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+c[0]+'" used in math mode',l):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+c[0]+'"'+(" ("+c.charCodeAt(0)+")"),l)),m={type:"textord",mode:"text",loc:hr.range(l),text:c};else return null;if(this.consume(),h)for(let y=0;y<h[0].length;y++){const w=h[0][y];if(!_c[w])throw new s("Unknown accent ' "+w+"'",l);const k=_c[w][this.mode]||_c[w].text;if(!k)throw new s("Accent "+w+" unsupported in "+this.mode+" mode",l);m={type:"accent",mode:this.mode,loc:hr.range(l),label:k,isStretchy:!1,isShifty:!0,base:m}}return m}}xo.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Tc=function(o,l){if(!(typeof o=="string"||o instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const c=new xo(o,l);delete c.gullet.macros.current["\\df@tag"];let h=c.parse();if(delete c.gullet.macros.current["\\current@color"],delete c.gullet.macros.current["\\color"],c.gullet.macros.get("\\df@tag")){if(!l.displayMode)throw new s("\\tag works only in display equations");h=[{type:"tag",mode:"text",body:h,tag:c.subparse([new Sr("\\df@tag")])}]}return h};let Kd=function(o,l,c){l.textContent="";const h=Mc(o,c).toNode();l.appendChild(h)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Kd=function(){throw new s("KaTeX doesn't work in quirks mode.")});const c8=function(o,l){return Mc(o,l).toMarkup()},f8=function(o,l){const c=new T(l);return Tc(o,c)},Jd=function(o,l,c){if(c.throwOnError||!(o instanceof s))throw o;const h=B.makeSpan(["katex-error"],[new qr(l)]);return h.setAttribute("title",o.toString()),h.setAttribute("style","color:"+c.errorColor),h},Mc=function(o,l){const c=new T(l);try{const h=Tc(o,c);return Ty(h,o,c)}catch(h){return Jd(h,o,c)}};var h8={version:"0.16.27",render:Kd,renderToString:c8,ParseError:s,SETTINGS_SCHEMA:A,__parse:f8,__renderToDomTree:Mc,__renderToHTMLTree:function(o,l){const c=new T(l);try{const h=Tc(o,c);return My(h,o,c)}catch(h){return Jd(h,o,c)}},__setFontMetrics:Y6,__defineSymbol:g,__defineFunction:ie,__defineMacro:S,__domTree:{Span:_a,Anchor:G0,SymbolNode:qr,SvgNode:Oi,PathNode:dn,LineNode:W0}},p8=h8;return i=i.default,i}()})}(Mf)),Mf.exports}(function(e,t){(function(r,i){i(t,Ir,tk(),rk())})(I4,function(r,i,n,s){Object.defineProperty(r,"__esModule",{value:!0});function a(R,A){for(var M in A)Object.defineProperty(R,M,{enumerable:!0,get:A[M]})}a(r,{BlockMath:()=>L,InlineMath:()=>O}),i=p(i),n=u(n),s=u(s);function u(R){return R&&R.__esModule?R:{default:R}}function f(R){if(typeof WeakMap!="function")return null;var A=new WeakMap,M=new WeakMap;return(f=function(T){return T?M:A})(R)}function p(R,A){if(R&&R.__esModule)return R;if(R===null||typeof R!="object"&&typeof R!="function")return{default:R};var M=f(A);if(M&&M.has(R))return M.get(R);var T={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in R)if(W!=="default"&&Object.prototype.hasOwnProperty.call(R,W)){var J=q?Object.getOwnPropertyDescriptor(R,W):null;J&&(J.get||J.set)?Object.defineProperty(T,W,J):T[W]=R[W]}return T.default=R,M&&M.set(R,T),T}const d=(R,{displayMode:A})=>{const M=({children:T,errorColor:q,math:W,renderError:J})=>{const te=W??T,{html:ne,error:ke}=(0,i.useMemo)(()=>{try{return{html:s.default.renderToString(te,{displayMode:A,errorColor:q,throwOnError:!!J}),error:void 0}}catch(he){if(he instanceof s.default.ParseError||he instanceof TypeError)return{error:he};throw he}},[te,q,J]);return ke?J?J(ke):i.default.createElement(R,{html:`${ke.message}`}):i.default.createElement(R,{html:ne})};return M.propTypes={children:n.default.string,errorColor:n.default.string,math:n.default.string,renderError:n.default.func},M},b={html:n.default.string.isRequired},x=({html:R})=>i.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:R}});x.propTypes=b;const I=({html:R})=>i.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:R}});I.propTypes=b;const L=d(x,{displayMode:!0}),O=d(I,{displayMode:!1})})})(lp,lp.exports);var hs=lp.exports;function Cn(e){return e.replace(/\\\\/g,"\\")}function ik({value:e,onChange:t,label:r="LaTeX",rows:i=4,placeholder:n="Enter LaTeX, e.g., \\mathbb{E}[G_t\\mid S_t=s]"}){const s=Ir.useMemo(()=>Cn(e),[e]);return ue.jsxs("div",{style:{display:"grid",gap:12},children:[ue.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:12},children:[ue.jsx("h2",{style:{margin:0,fontSize:18},children:r}),ue.jsx("span",{style:{fontSize:12,opacity:.7},children:"Tip: use single backslashes (\\mathbb, \\mid). Well auto-fix double slashes."})]}),ue.jsx("textarea",{value:e,onChange:a=>t(Cn(a.target.value)),rows:i,style:{width:"100%",fontFamily:"monospace"},placeholder:n}),ue.jsxs("div",{children:[ue.jsx("div",{style:{fontSize:14,marginBottom:6,opacity:.8},children:"Rendered"}),ue.jsx("div",{style:{padding:12,border:"1px solid rgba(0,0,0,0.15)",borderRadius:12},children:ue.jsx(hs.BlockMath,{math:s})})]})]})}function nk(e,t){return t.filter(r=>{try{return r.appliesTo(e)}catch{return!1}})}function sk(e,t){return{latex:t.transform(e.latex),ruleId:t.id,ruleName:t.name,explanation:t.explanation}}const Ls=e=>e.replace(/\s+/g," ").trim(),E4=[{id:"def-value",name:"Definition of value",nameLatex:"v(s)=\\mathbb{E}[G_t\\mid S_t=s]",appliesTo:e=>/v\s*\(\s*s\s*\)/.test(e)||/v_\s*\\pi\s*\(\s*s\s*\)/.test(e),transform:e=>{const t=e.replace(/v_\s*\\pi\s*\(\s*s\s*\)/g,"\\\\mathbb{E}[G_t\\\\mid S_t=s]").replace(/v\s*\(\s*s\s*\)/g,"\\\\mathbb{E}[G_t\\\\mid S_t=s]");return Ls(t)},explanation:"By definition, the value of state s is the expected return starting from s."},{id:"def-return",name:"Expand return definition",nameLatex:"G_t=\\sum_{k=0}^{\\infty}\\gamma^k R_{t+1+k}",appliesTo:e=>e.includes("G_t")&&!e.includes("\\\\sum_{k=0}^{\\infty}"),transform:e=>{const t=e.replace(/G_t/g,"\\\\sum_{k=0}^{\\\\infty} \\\\gamma^k R_{t+1+k}");return Ls(t)},explanation:"Return is the discounted sum of future rewards."},{id:"unroll-return",name:"Unroll return",nameLatex:"G_t = R_{t+1} + \\gamma G_{t+1}",appliesTo:e=>e.includes("\\\\sum_{k=0}^{\\\\infty}")||e.includes("R_{t+1+k}"),transform:e=>{const t=/\\\\sum_\\{k=0\\}\\^\\{\\\\infty\\}\\s*\\\\gamma\\^k\\s*R_\\{t\\+1\\+k\\}/g;if(!t.test(e))throw new Error("Expected the return sum in the form \\\\sum_{k=0}^{\\\\infty} \\\\gamma^k R_{t+1+k}");const r=e.replace(t,"R_{t+1} + \\\\gamma\\\\sum_{k=0}^{\\\\infty} \\\\gamma^k R_{t+2+k}");return Ls(r)},explanation:"Split the first reward from the discounted sum (index shift)."},{id:"linearity",name:"Linearity of expectation",nameLatex:"\\mathbb{E}[X+\\gamma Y\\mid Z]=\\mathbb{E}[X\\mid Z]+\\gamma\\mathbb{E}[Y\\mid Z]",appliesTo:e=>e.includes("\\mathbb{E}[")&&e.includes("R_{t+1}")&&e.includes("+")&&e.includes("\\gamma")&&e.includes("\\mid"),transform:e=>{const t=e.indexOf("\\mathbb{E}[");if(t<0)throw new Error("Expected an expression starting with \\\\mathbb{E}[ ... ]");const r=e.indexOf("\\mid",t);if(r<0)throw new Error("Expected a conditional bar \\\\mid inside the expectation.");const i=e.lastIndexOf("]");if(i<0||i<r)throw new Error("Expected a closing ']' for \\\\mathbb{E}[ ... ].");const n=e.slice(t+11,r).trim(),s=e.slice(r+4,i).trim(),a=n.match(/^R_\{t\+1\}\s*\+\s*\\gamma\s*(.+)$/);if(!a)throw new Error("Expected inside expectation: R_{t+1} + \\\\gamma ( ... )");const u=a[1].trim();return`\\mathbb{E}[R_{t+1}\\mid ${s}] + \\gamma\\,\\mathbb{E}[${u}\\mid ${s}]`},explanation:"Expectation is linear; split sums and pull out constants."},{id:"define-r",name:"Define expected reward",nameLatex:"r(s)=\\mathbb{E}[R_{t+1}\\mid S_t=s]",appliesTo:e=>/\\\\mathbb\{E\}\[R_\{t\+1\}\\\\mid\s*S_t\s*=\s*s\]/.test(e),transform:e=>{const t=e.replace(/\\\\mathbb\\{E\\}\\[R_\\{t\\+1\\}\\\\\\mid\\s*S_t\\s*=\\s*s\\]/g,"r(s)");return Ls(t)},explanation:"Define r(s) as the expected one-step reward from state s."},{id:"total-expectation-next-state",name:"Law of total expectation over next state",nameLatex:"\\mathbb{E}[f(S_{t+1})\\mid S_t=s]=\\sum_{s'}p(s'\\mid s)f(s')",appliesTo:e=>/\\\\mathbb\\{E\\}\\[(G_\\{t\\+1\\}|G_{t\\+1}|\\\\sum_\\{k=0\\}\\^\\{\\\\infty\\}).*\\\\\\mid\\s*S_t\\s*=\\s*s\\]/.test(e),transform:e=>{const t=/\\\\mathbb\\{E\\}\\[(.+)\\\\\\mid\\s*S_t\\s*=\\s*s\\]/,r=e.match(t);if(!r)throw new Error("Expected \\\\mathbb{E}[ ... \\\\\\mid S_t = s ]");const n=`\\\\sum_{s'} p(s'\\\\\\mid s)\\\\,\\\\mathbb{E}[${r[1].trim()}\\\\\\mid S_{t+1}=s']`;return Ls(n)},explanation:"Condition on S_{t+1} using the law of total expectation (Markov chain transitions)."},{id:"value-substitution",name:"Substitute value at next state",nameLatex:"\\mathbb{E}[G_{t+1}\\mid S_{t+1}=s']=v(s')",appliesTo:e=>e.includes("\\\\mathbb{E}[")&&e.includes("\\\\\\mid S_{t+1}=s'"),transform:e=>{const t=e.replace(/\\\\mathbb\\{E\\}\\[G_\\{t\\+1\\}\\\\\\mid\\s*S_\\{t\\+1\\}=s'\\]/g,"v(s')").replace(/\\\\mathbb\\{E\\}\\[G_{t\\+1}\\\\\\mid\\s*S_\\{t\\+1\\}=s'\\]/g,"v(s')").replace(/\\\\mathbb\\{E\\}\\[\\\\sum_\\{k=0\\}\\^\\{\\\\infty\\}\\s*\\\\gamma\\^k\\s*R_\\{t\\+2\\+k\\}\\\\\\mid\\s*S_\\{t\\+1\\}=s'\\]/g,"v(s')");return Ls(t)},explanation:"Recognize the expected future return from the next state as v(s')."},{id:"assemble-bellman",name:"Assemble Bellman expectation equation",nameLatex:"v(s)=r(s)+\\gamma\\sum_{s'}p(s'\\mid s)v(s')",appliesTo:e=>e.includes("r(s)")&&e.includes("\\\\sum_{s'}"),transform:e=>{if(!/^r\\(s\\)\\s*\\+\\s*\\\\gamma\\s*\\\\sum_\\{s'\\}\\s*p\\(s'\\\\\\mid\\s*s\\)\\s*,?\\s*v\\(s'\\)$/.test(e)&&!/^r\\(s\\)\\s*\\+\\s*\\\\gamma\\s*\\\\sum_\\{s'\\}\\s*p\\(s'\\\\\\mid\\s*s\\)\\\\,\\s*v\\(s'\\)$/.test(e))throw new Error("Expected r(s) + \\\\gamma \\\\sum_{s'} p(s'|s) v(s')");return"v(s) = r(s) + \\\\gamma \\\\sum_{s'} p(s'\\\\\\mid s) v(s')"},explanation:"This is the Bellman expectation equation for an MRP."}];function ak(e){return Array.from({length:e},(t,r)=>Array.from({length:e},(i,n)=>r===n?1:0))}function lk(e,t){return e.map(r=>r.map(i=>t*i))}function ok(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw new Error("Matrix shape mismatch");return e.map((r,i)=>r.map((n,s)=>n-t[i][s]))}function uk(e){return e.map(t=>t.slice())}function ck(e,t){const r=uk(e),i=t.slice(),n=r.length;if(i.length!==n)throw new Error("b length mismatch");for(let a=0;a<n;a++){let u=a;for(let f=a+1;f<n;f++)Math.abs(r[f][a])>Math.abs(r[u][a])&&(u=f);if(Math.abs(r[u][a])<1e-12)throw new Error("Matrix is singular or ill-conditioned");[r[a],r[u]]=[r[u],r[a]],[i[a],i[u]]=[i[u],i[a]];for(let f=a+1;f<n;f++){const p=r[f][a]/r[a][a];for(let d=a;d<n;d++)r[f][d]-=p*r[a][d];i[f]-=p*i[a]}}const s=Array(n).fill(0);for(let a=n-1;a>=0;a--){let u=i[a];for(let f=a+1;f<n;f++)u-=r[a][f]*s[f];s[a]=u/r[a][a]}return s}function fk(e){const t=e.trim().split(`
`).map(i=>i.split(",").map(Number)),r=t.length;if(t.some(i=>i.length!==r))throw new Error("P must be square");return t}function hk(e,t){const r=e.split(",").map(Number);if(r.length!==t)throw new Error("R length mismatch");return r}function pk(){const[e,t]=Ir.useState("0.9"),[r,i]=Ir.useState(`0.5,0.5
0.2,0.8`),[n,s]=Ir.useState("1,0"),a=Ir.useMemo(()=>{try{const u=Number(e),f=fk(r),p=hk(n,f.length),d=ok(ak(f.length),lk(f,u));return{ok:!0,V:ck(d,p)}}catch(u){return{ok:!1,error:String(u)}}},[e,r,n]);return ue.jsxs("div",{style:{border:"1px solid #ccc",padding:12,borderRadius:12},children:[ue.jsx("h2",{children:"Linear Algebra Solution"}),ue.jsx(hs.BlockMath,{math:Cn("V = (I - \\gamma P)^{-1} R")}),ue.jsxs("label",{children:["",ue.jsx("input",{value:e,onChange:u=>t(u.target.value)})]}),ue.jsxs("label",{children:["P (CSV rows)",ue.jsx("textarea",{value:r,onChange:u=>i(u.target.value)})]}),ue.jsxs("label",{children:["R (CSV)",ue.jsx("input",{value:n,onChange:u=>s(u.target.value)})]}),a.ok?ue.jsxs("div",{children:[ue.jsx("strong",{children:"V ="})," ",ue.jsx(hs.InlineMath,{math:Cn("["+a.V.join(", ")+"]")})]}):ue.jsx("div",{style:{color:"red"},children:a.error})]})}const A4={latex:"v(s)",ruleName:"Start",explanation:"Start from the value function for a state s."};function mk(){Ir.useMemo(()=>new F6,[]);const[e,t]=Ir.useState([A4]),[r,i]=Ir.useState(0),n=e[r],s=Ir.useMemo(()=>nk(n.latex,E4),[n.latex]),a=p=>{const d={latex:p,ruleName:"Manual edit",explanation:"You edited the expression."};t(b=>b.slice(0,r+1).concat(d)),i(b=>r+1)},u=p=>{const d=E4.find(b=>b.id===p);if(d)try{const b=sk(n,d);t(x=>x.slice(0,r+1).concat(b)),i(x=>r+1)}catch(b){const x=b instanceof Error?b.message:String(b),I={latex:n.latex,ruleName:`Rule failed: ${d.name}`,explanation:x};t(L=>L.slice(0,r+1).concat(I)),i(L=>r+1)}},f=()=>{t([A4]),i(0)};return ue.jsxs("div",{style:{padding:24,fontFamily:"sans-serif",maxWidth:1200,margin:"0 auto"},children:[ue.jsx("h1",{style:{marginTop:0},children:"Bellman Derivation Playground (TypeScript)"}),ue.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:16},children:[ue.jsxs("div",{style:{display:"grid",gap:16},children:[ue.jsx(ik,{value:n.latex,onChange:a,label:"Current expression"}),ue.jsxs("div",{style:{display:"grid",gap:10},children:[ue.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[ue.jsx("h2",{style:{margin:0,fontSize:18},children:"Rendered (current)"}),ue.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[ue.jsx("button",{onClick:f,children:"Reset"}),ue.jsx("button",{onClick:()=>i(p=>Math.max(0,p-1)),disabled:r===0,children:"Back"})]})]}),ue.jsx("div",{style:{padding:12,border:"1px solid rgba(0,0,0,0.15)",borderRadius:12},children:ue.jsx(hs.BlockMath,{math:Cn(n.latex)})})]}),ue.jsxs("div",{style:{padding:12,border:"1px solid rgba(0,0,0,0.15)",borderRadius:12},children:[ue.jsx("div",{style:{fontSize:14,opacity:.75,marginBottom:6},children:"Explanation"}),ue.jsxs("div",{style:{fontSize:14,lineHeight:1.4},children:[ue.jsx("strong",{children:n.ruleName??"Step"}),ue.jsx("div",{style:{marginTop:6},children:n.explanation??""})]})]})]}),ue.jsxs("div",{style:{display:"grid",gap:16},children:[ue.jsxs("div",{style:{padding:12,border:"1px solid rgba(0,0,0,0.15)",borderRadius:12},children:[ue.jsx("h2",{style:{margin:0,fontSize:18},children:"Applicable rules"}),ue.jsx("div",{style:{marginTop:10,display:"grid",gap:8},children:s.length===0?ue.jsxs("div",{style:{fontSize:13,opacity:.7},children:["No rules match this expression. Try typing a step that matches the lecture form, e.g."," ",ue.jsx(hs.InlineMath,{math:Cn("\\mathbb{E}[G_t\\mid S_t=s]")}),"."]}):s.map(p=>ue.jsxs("button",{onClick:()=>u(p.id),style:{textAlign:"left",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:[ue.jsx("div",{style:{fontWeight:700,fontSize:13},children:p.nameLatex?ue.jsxs(ue.Fragment,{children:[p.name,": ",ue.jsx(hs.InlineMath,{math:Cn(p.nameLatex)})]}):p.name}),ue.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:4},children:p.explanation})]},p.id))})]}),ue.jsxs("div",{style:{padding:12,border:"1px solid rgba(0,0,0,0.15)",borderRadius:12},children:[ue.jsx("h2",{style:{margin:0,fontSize:18},children:"Step history"}),ue.jsx("div",{style:{marginTop:10,display:"grid",gap:8,maxHeight:520,overflow:"auto"},children:e.map((p,d)=>ue.jsxs("button",{onClick:()=>i(d),style:{textAlign:"left",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:d===r?"rgba(0,0,0,0.06)":"white",cursor:"pointer"},children:[ue.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[ue.jsxs("span",{style:{fontSize:12,opacity:.7},children:["Step ",d]}),ue.jsx("span",{style:{fontSize:12,opacity:.7},children:p.ruleId??""})]}),ue.jsx("div",{style:{marginTop:6,overflowX:"auto"},children:ue.jsx(hs.InlineMath,{math:Cn(p.latex)})})]},d))})]})]})]}),ue.jsx("div",{style:{marginTop:16,fontSize:13,opacity:.75},children:"Suggested path: v(s)  Definition of value  Expand return  Unroll return  Linearity  Define r(s)  Total expectation  Substitute value  Assemble Bellman."}),ue.jsx(pk,{})]})}Ef.createRoot(document.getElementById("root")).render(ue.jsx(C8.StrictMode,{children:ue.jsx(mk,{})}));
